(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function s(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(r){if(r.ep)return;r.ep=!0;const u=s(r);fetch(r.href,u)}})();function sg(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Pu={exports:{}},Oo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dp;function d0(){if(dp)return Oo;dp=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(o,r,u){var f=null;if(u!==void 0&&(f=""+u),r.key!==void 0&&(f=""+r.key),"key"in r){u={};for(var p in r)p!=="key"&&(u[p]=r[p])}else u=r;return r=u.ref,{$$typeof:i,type:o,key:f,ref:r!==void 0?r:null,props:u}}return Oo.Fragment=e,Oo.jsx=s,Oo.jsxs=s,Oo}var fp;function f0(){return fp||(fp=1,Pu.exports=d0()),Pu.exports}var ot=f0(),Fu={exports:{}},zt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp;function h0(){if(hp)return zt;hp=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),T=Symbol.iterator;function _(K){return K===null||typeof K!="object"?null:(K=T&&K[T]||K["@@iterator"],typeof K=="function"?K:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,y={};function x(K,rt,yt){this.props=K,this.context=rt,this.refs=y,this.updater=yt||C}x.prototype.isReactComponent={},x.prototype.setState=function(K,rt){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,rt,"setState")},x.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function I(){}I.prototype=x.prototype;function F(K,rt,yt){this.props=K,this.context=rt,this.refs=y,this.updater=yt||C}var P=F.prototype=new I;P.constructor=F,M(P,x.prototype),P.isPureReactComponent=!0;var H=Array.isArray;function O(){}var z={H:null,A:null,T:null,S:null},it=Object.prototype.hasOwnProperty;function W(K,rt,yt){var Ct=yt.ref;return{$$typeof:i,type:K,key:rt,ref:Ct!==void 0?Ct:null,props:yt}}function ut(K,rt){return W(K.type,rt,K.props)}function pt(K){return typeof K=="object"&&K!==null&&K.$$typeof===i}function xt(K){var rt={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(yt){return rt[yt]})}var Mt=/\/+/g;function Tt(K,rt){return typeof K=="object"&&K!==null&&K.key!=null?xt(""+K.key):rt.toString(36)}function X(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(O,O):(K.status="pending",K.then(function(rt){K.status==="pending"&&(K.status="fulfilled",K.value=rt)},function(rt){K.status==="pending"&&(K.status="rejected",K.reason=rt)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function B(K,rt,yt,Ct,wt){var St=typeof K;(St==="undefined"||St==="boolean")&&(K=null);var k=!1;if(K===null)k=!0;else switch(St){case"bigint":case"string":case"number":k=!0;break;case"object":switch(K.$$typeof){case i:case e:k=!0;break;case g:return k=K._init,B(k(K._payload),rt,yt,Ct,wt)}}if(k)return wt=wt(K),k=Ct===""?"."+Tt(K,0):Ct,H(wt)?(yt="",k!=null&&(yt=k.replace(Mt,"$&/")+"/"),B(wt,rt,yt,"",function(E){return E})):wt!=null&&(pt(wt)&&(wt=ut(wt,yt+(wt.key==null||K&&K.key===wt.key?"":(""+wt.key).replace(Mt,"$&/")+"/")+k)),rt.push(wt)),1;k=0;var D=Ct===""?".":Ct+":";if(H(K))for(var b=0;b<K.length;b++)Ct=K[b],St=D+Tt(Ct,b),k+=B(Ct,rt,yt,St,wt);else if(b=_(K),typeof b=="function")for(K=b.call(K),b=0;!(Ct=K.next()).done;)Ct=Ct.value,St=D+Tt(Ct,b++),k+=B(Ct,rt,yt,St,wt);else if(St==="object"){if(typeof K.then=="function")return B(X(K),rt,yt,Ct,wt);throw rt=String(K),Error("Objects are not valid as a React child (found: "+(rt==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":rt)+"). If you meant to render a collection of children, use an array instead.")}return k}function et(K,rt,yt){if(K==null)return K;var Ct=[],wt=0;return B(K,Ct,"","",function(St){return rt.call(yt,St,wt++)}),Ct}function lt(K){if(K._status===-1){var rt=K._result;rt=rt(),rt.then(function(yt){(K._status===0||K._status===-1)&&(K._status=1,K._result=yt)},function(yt){(K._status===0||K._status===-1)&&(K._status=2,K._result=yt)}),K._status===-1&&(K._status=0,K._result=rt)}if(K._status===1)return K._result.default;throw K._result}var gt=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var rt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(rt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},_t={map:et,forEach:function(K,rt,yt){et(K,function(){rt.apply(this,arguments)},yt)},count:function(K){var rt=0;return et(K,function(){rt++}),rt},toArray:function(K){return et(K,function(rt){return rt})||[]},only:function(K){if(!pt(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return zt.Activity=A,zt.Children=_t,zt.Component=x,zt.Fragment=s,zt.Profiler=r,zt.PureComponent=F,zt.StrictMode=o,zt.Suspense=v,zt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,zt.__COMPILER_RUNTIME={__proto__:null,c:function(K){return z.H.useMemoCache(K)}},zt.cache=function(K){return function(){return K.apply(null,arguments)}},zt.cacheSignal=function(){return null},zt.cloneElement=function(K,rt,yt){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var Ct=M({},K.props),wt=K.key;if(rt!=null)for(St in rt.key!==void 0&&(wt=""+rt.key),rt)!it.call(rt,St)||St==="key"||St==="__self"||St==="__source"||St==="ref"&&rt.ref===void 0||(Ct[St]=rt[St]);var St=arguments.length-2;if(St===1)Ct.children=yt;else if(1<St){for(var k=Array(St),D=0;D<St;D++)k[D]=arguments[D+2];Ct.children=k}return W(K.type,wt,Ct)},zt.createContext=function(K){return K={$$typeof:f,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:u,_context:K},K},zt.createElement=function(K,rt,yt){var Ct,wt={},St=null;if(rt!=null)for(Ct in rt.key!==void 0&&(St=""+rt.key),rt)it.call(rt,Ct)&&Ct!=="key"&&Ct!=="__self"&&Ct!=="__source"&&(wt[Ct]=rt[Ct]);var k=arguments.length-2;if(k===1)wt.children=yt;else if(1<k){for(var D=Array(k),b=0;b<k;b++)D[b]=arguments[b+2];wt.children=D}if(K&&K.defaultProps)for(Ct in k=K.defaultProps,k)wt[Ct]===void 0&&(wt[Ct]=k[Ct]);return W(K,St,wt)},zt.createRef=function(){return{current:null}},zt.forwardRef=function(K){return{$$typeof:p,render:K}},zt.isValidElement=pt,zt.lazy=function(K){return{$$typeof:g,_payload:{_status:-1,_result:K},_init:lt}},zt.memo=function(K,rt){return{$$typeof:h,type:K,compare:rt===void 0?null:rt}},zt.startTransition=function(K){var rt=z.T,yt={};z.T=yt;try{var Ct=K(),wt=z.S;wt!==null&&wt(yt,Ct),typeof Ct=="object"&&Ct!==null&&typeof Ct.then=="function"&&Ct.then(O,gt)}catch(St){gt(St)}finally{rt!==null&&yt.types!==null&&(rt.types=yt.types),z.T=rt}},zt.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},zt.use=function(K){return z.H.use(K)},zt.useActionState=function(K,rt,yt){return z.H.useActionState(K,rt,yt)},zt.useCallback=function(K,rt){return z.H.useCallback(K,rt)},zt.useContext=function(K){return z.H.useContext(K)},zt.useDebugValue=function(){},zt.useDeferredValue=function(K,rt){return z.H.useDeferredValue(K,rt)},zt.useEffect=function(K,rt){return z.H.useEffect(K,rt)},zt.useEffectEvent=function(K){return z.H.useEffectEvent(K)},zt.useId=function(){return z.H.useId()},zt.useImperativeHandle=function(K,rt,yt){return z.H.useImperativeHandle(K,rt,yt)},zt.useInsertionEffect=function(K,rt){return z.H.useInsertionEffect(K,rt)},zt.useLayoutEffect=function(K,rt){return z.H.useLayoutEffect(K,rt)},zt.useMemo=function(K,rt){return z.H.useMemo(K,rt)},zt.useOptimistic=function(K,rt){return z.H.useOptimistic(K,rt)},zt.useReducer=function(K,rt,yt){return z.H.useReducer(K,rt,yt)},zt.useRef=function(K){return z.H.useRef(K)},zt.useState=function(K){return z.H.useState(K)},zt.useSyncExternalStore=function(K,rt,yt){return z.H.useSyncExternalStore(K,rt,yt)},zt.useTransition=function(){return z.H.useTransition()},zt.version="19.2.4",zt}var pp;function ac(){return pp||(pp=1,Fu.exports=h0()),Fu.exports}var qe=ac();const p0=sg(qe);var Uu={exports:{}},Vo={},Hu={exports:{}},Gu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function m0(){return mp||(mp=1,(function(i){function e(B,et){var lt=B.length;B.push(et);t:for(;0<lt;){var gt=lt-1>>>1,_t=B[gt];if(0<r(_t,et))B[gt]=et,B[lt]=_t,lt=gt;else break t}}function s(B){return B.length===0?null:B[0]}function o(B){if(B.length===0)return null;var et=B[0],lt=B.pop();if(lt!==et){B[0]=lt;t:for(var gt=0,_t=B.length,K=_t>>>1;gt<K;){var rt=2*(gt+1)-1,yt=B[rt],Ct=rt+1,wt=B[Ct];if(0>r(yt,lt))Ct<_t&&0>r(wt,yt)?(B[gt]=wt,B[Ct]=lt,gt=Ct):(B[gt]=yt,B[rt]=lt,gt=rt);else if(Ct<_t&&0>r(wt,lt))B[gt]=wt,B[Ct]=lt,gt=Ct;else break t}}return et}function r(B,et){var lt=B.sortIndex-et.sortIndex;return lt!==0?lt:B.id-et.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();i.unstable_now=function(){return f.now()-p}}var v=[],h=[],g=1,A=null,T=3,_=!1,C=!1,M=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function P(B){for(var et=s(h);et!==null;){if(et.callback===null)o(h);else if(et.startTime<=B)o(h),et.sortIndex=et.expirationTime,e(v,et);else break;et=s(h)}}function H(B){if(M=!1,P(B),!C)if(s(v)!==null)C=!0,O||(O=!0,xt());else{var et=s(h);et!==null&&X(H,et.startTime-B)}}var O=!1,z=-1,it=5,W=-1;function ut(){return y?!0:!(i.unstable_now()-W<it)}function pt(){if(y=!1,O){var B=i.unstable_now();W=B;var et=!0;try{t:{C=!1,M&&(M=!1,I(z),z=-1),_=!0;var lt=T;try{e:{for(P(B),A=s(v);A!==null&&!(A.expirationTime>B&&ut());){var gt=A.callback;if(typeof gt=="function"){A.callback=null,T=A.priorityLevel;var _t=gt(A.expirationTime<=B);if(B=i.unstable_now(),typeof _t=="function"){A.callback=_t,P(B),et=!0;break e}A===s(v)&&o(v),P(B)}else o(v);A=s(v)}if(A!==null)et=!0;else{var K=s(h);K!==null&&X(H,K.startTime-B),et=!1}}break t}finally{A=null,T=lt,_=!1}et=void 0}}finally{et?xt():O=!1}}}var xt;if(typeof F=="function")xt=function(){F(pt)};else if(typeof MessageChannel<"u"){var Mt=new MessageChannel,Tt=Mt.port2;Mt.port1.onmessage=pt,xt=function(){Tt.postMessage(null)}}else xt=function(){x(pt,0)};function X(B,et){z=x(function(){B(i.unstable_now())},et)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(B){B.callback=null},i.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):it=0<B?Math.floor(1e3/B):5},i.unstable_getCurrentPriorityLevel=function(){return T},i.unstable_next=function(B){switch(T){case 1:case 2:case 3:var et=3;break;default:et=T}var lt=T;T=et;try{return B()}finally{T=lt}},i.unstable_requestPaint=function(){y=!0},i.unstable_runWithPriority=function(B,et){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var lt=T;T=B;try{return et()}finally{T=lt}},i.unstable_scheduleCallback=function(B,et,lt){var gt=i.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?gt+lt:gt):lt=gt,B){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=lt+_t,B={id:g++,callback:et,priorityLevel:B,startTime:lt,expirationTime:_t,sortIndex:-1},lt>gt?(B.sortIndex=lt,e(h,B),s(v)===null&&B===s(h)&&(M?(I(z),z=-1):M=!0,X(H,lt-gt))):(B.sortIndex=_t,e(v,B),C||_||(C=!0,O||(O=!0,xt()))),B},i.unstable_shouldYield=ut,i.unstable_wrapCallback=function(B){var et=T;return function(){var lt=T;T=et;try{return B.apply(this,arguments)}finally{T=lt}}}})(Gu)),Gu}var gp;function g0(){return gp||(gp=1,Hu.exports=m0()),Hu.exports}var Ou={exports:{}},ze={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function y0(){if(yp)return ze;yp=1;var i=ac();function e(v){var h="https://react.dev/errors/"+v;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+v+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(v,h,g){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:A==null?null:""+A,children:v,containerInfo:h,implementation:g}}var f=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(v,h){if(v==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,ze.createPortal=function(v,h){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return u(v,h,null,g)},ze.flushSync=function(v){var h=f.T,g=o.p;try{if(f.T=null,o.p=2,v)return v()}finally{f.T=h,o.p=g,o.d.f()}},ze.preconnect=function(v,h){typeof v=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,o.d.C(v,h))},ze.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},ze.preinit=function(v,h){if(typeof v=="string"&&h&&typeof h.as=="string"){var g=h.as,A=p(g,h.crossOrigin),T=typeof h.integrity=="string"?h.integrity:void 0,_=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;g==="style"?o.d.S(v,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:A,integrity:T,fetchPriority:_}):g==="script"&&o.d.X(v,{crossOrigin:A,integrity:T,fetchPriority:_,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ze.preinitModule=function(v,h){if(typeof v=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var g=p(h.as,h.crossOrigin);o.d.M(v,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&o.d.M(v)},ze.preload=function(v,h){if(typeof v=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var g=h.as,A=p(g,h.crossOrigin);o.d.L(v,g,{crossOrigin:A,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ze.preloadModule=function(v,h){if(typeof v=="string")if(h){var g=p(h.as,h.crossOrigin);o.d.m(v,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else o.d.m(v)},ze.requestFormReset=function(v){o.d.r(v)},ze.unstable_batchedUpdates=function(v,h){return v(h)},ze.useFormState=function(v,h,g){return f.H.useFormState(v,h,g)},ze.useFormStatus=function(){return f.H.useHostTransitionStatus()},ze.version="19.2.4",ze}var vp;function v0(){if(vp)return Ou.exports;vp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Ou.exports=y0(),Ou.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap;function A0(){if(Ap)return Vo;Ap=1;var i=g0(),e=ac(),s=v0();function o(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var n=t,a=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(a=n.return),t=n.return;while(t)}return n.tag===3?a:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function p(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function v(t){if(u(t)!==t)throw Error(o(188))}function h(t){var n=t.alternate;if(!n){if(n=u(t),n===null)throw Error(o(188));return n!==t?null:t}for(var a=t,l=n;;){var m=a.return;if(m===null)break;var S=m.alternate;if(S===null){if(l=m.return,l!==null){a=l;continue}break}if(m.child===S.child){for(S=m.child;S;){if(S===a)return v(m),t;if(S===l)return v(m),n;S=S.sibling}throw Error(o(188))}if(a.return!==l.return)a=m,l=S;else{for(var N=!1,G=m.child;G;){if(G===a){N=!0,a=m,l=S;break}if(G===l){N=!0,l=m,a=S;break}G=G.sibling}if(!N){for(G=S.child;G;){if(G===a){N=!0,a=S,l=m;break}if(G===l){N=!0,l=S,a=m;break}G=G.sibling}if(!N)throw Error(o(189))}}if(a.alternate!==l)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?t:n}function g(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=g(t),n!==null)return n;t=t.sibling}return null}var A=Object.assign,T=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),F=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),ut=Symbol.for("react.memo_cache_sentinel"),pt=Symbol.iterator;function xt(t){return t===null||typeof t!="object"?null:(t=pt&&t[pt]||t["@@iterator"],typeof t=="function"?t:null)}var Mt=Symbol.for("react.client.reference");function Tt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Mt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case x:return"Profiler";case y:return"StrictMode";case H:return"Suspense";case O:return"SuspenseList";case W:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case C:return"Portal";case F:return t.displayName||"Context";case I:return(t._context.displayName||"Context")+".Consumer";case P:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case z:return n=t.displayName||null,n!==null?n:Tt(t.type)||"Memo";case it:n=t._payload,t=t._init;try{return Tt(t(n))}catch{}}return null}var X=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},gt=[],_t=-1;function K(t){return{current:t}}function rt(t){0>_t||(t.current=gt[_t],gt[_t]=null,_t--)}function yt(t,n){_t++,gt[_t]=t.current,t.current=n}var Ct=K(null),wt=K(null),St=K(null),k=K(null);function D(t,n){switch(yt(St,n),yt(wt,t),yt(Ct,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?kh(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=kh(n),t=Ph(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}rt(Ct),yt(Ct,t)}function b(){rt(Ct),rt(wt),rt(St)}function E(t){t.memoizedState!==null&&yt(k,t);var n=Ct.current,a=Ph(n,t.type);n!==a&&(yt(wt,t),yt(Ct,a))}function w(t){wt.current===t&&(rt(Ct),rt(wt)),k.current===t&&(rt(k),Fo._currentValue=lt)}var R,L;function U(t){if(R===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);R=n&&n[1]||"",L=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+R+t+L}var V=!1;function q(t,n){if(!t||V)return"";V=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(n){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(ht){var ft=ht}Reflect.construct(t,[],bt)}else{try{bt.call()}catch(ht){ft=ht}t.call(bt.prototype)}}else{try{throw Error()}catch(ht){ft=ht}(bt=t())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(ht){if(ht&&ft&&typeof ht.stack=="string")return[ht.stack,ft.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=l.DetermineComponentFrameRoot(),N=S[0],G=S[1];if(N&&G){var Z=N.split(`
`),dt=G.split(`
`);for(m=l=0;l<Z.length&&!Z[l].includes("DetermineComponentFrameRoot");)l++;for(;m<dt.length&&!dt[m].includes("DetermineComponentFrameRoot");)m++;if(l===Z.length||m===dt.length)for(l=Z.length-1,m=dt.length-1;1<=l&&0<=m&&Z[l]!==dt[m];)m--;for(;1<=l&&0<=m;l--,m--)if(Z[l]!==dt[m]){if(l!==1||m!==1)do if(l--,m--,0>m||Z[l]!==dt[m]){var At=`
`+Z[l].replace(" at new "," at ");return t.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",t.displayName)),At}while(1<=l&&0<=m);break}}}finally{V=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?U(a):""}function $(t,n){switch(t.tag){case 26:case 27:case 5:return U(t.type);case 16:return U("Lazy");case 13:return t.child!==n&&n!==null?U("Suspense Fallback"):U("Suspense");case 19:return U("SuspenseList");case 0:case 15:return q(t.type,!1);case 11:return q(t.type.render,!1);case 1:return q(t.type,!0);case 31:return U("Activity");default:return""}}function J(t){try{var n="",a=null;do n+=$(t,a),a=t,t=t.return;while(t);return n}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var j=Object.prototype.hasOwnProperty,st=i.unstable_scheduleCallback,tt=i.unstable_cancelCallback,Y=i.unstable_shouldYield,Q=i.unstable_requestPaint,vt=i.unstable_now,mt=i.unstable_getCurrentPriorityLevel,Rt=i.unstable_ImmediatePriority,Dt=i.unstable_UserBlockingPriority,Nt=i.unstable_NormalPriority,Ft=i.unstable_LowPriority,kt=i.unstable_IdlePriority,Gt=i.log,Jt=i.unstable_setDisableYieldValue,Xt=null,$t=null;function Ut(t){if(typeof Gt=="function"&&Jt(t),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Xt,t)}catch{}}var se=Math.clz32?Math.clz32:ge,Ae=Math.log,ke=Math.LN2;function ge(t){return t>>>=0,t===0?32:31-(Ae(t)/ke|0)|0}var fe=256,ce=262144,Me=4194304;function Be(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Un(t,n,a){var l=t.pendingLanes;if(l===0)return 0;var m=0,S=t.suspendedLanes,N=t.pingedLanes;t=t.warmLanes;var G=l&134217727;return G!==0?(l=G&~S,l!==0?m=Be(l):(N&=G,N!==0?m=Be(N):a||(a=G&~t,a!==0&&(m=Be(a))))):(G=l&~S,G!==0?m=Be(G):N!==0?m=Be(N):a||(a=l&~t,a!==0&&(m=Be(a)))),m===0?0:n!==0&&n!==m&&(n&S)===0&&(S=m&-m,a=n&-n,S>=a||S===32&&(a&4194048)!==0)?n:m}function Nn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Pe(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ce(){var t=Me;return Me<<=1,(Me&62914560)===0&&(Me=4194304),t}function oi(t){for(var n=[],a=0;31>a;a++)n.push(t);return n}function nn(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ai(t,n,a,l,m,S){var N=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var G=t.entanglements,Z=t.expirationTimes,dt=t.hiddenUpdates;for(a=N&~a;0<a;){var At=31-se(a),bt=1<<At;G[At]=0,Z[At]=-1;var ft=dt[At];if(ft!==null)for(dt[At]=null,At=0;At<ft.length;At++){var ht=ft[At];ht!==null&&(ht.lane&=-536870913)}a&=~bt}l!==0&&ve(t,l,0),S!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=S&~(N&~n))}function ve(t,n,a){t.pendingLanes|=n,t.suspendedLanes&=~n;var l=31-se(n);t.entangledLanes|=n,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function ri(t,n){var a=t.entangledLanes|=n;for(t=t.entanglements;a;){var l=31-se(a),m=1<<l;m&n|t[l]&n&&(t[l]|=n),a&=~m}}function ns(t,n){var a=n&-n;return a=(a&42)!==0?1:Dn(a),(a&(t.suspendedLanes|n))!==0?0:a}function Dn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function xr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function vc(){var t=et.p;return t!==0?t:(t=window.event,t===void 0?32:sp(t.type))}function Ac(t,n){var a=et.p;try{return et.p=t,n()}finally{et.p=a}}var li=Math.random().toString(36).slice(2),Fe="__reactFiber$"+li,Ke="__reactProps$"+li,is="__reactContainer$"+li,wr="__reactEvents$"+li,ty="__reactListeners$"+li,ey="__reactHandles$"+li,Sc="__reactResources$"+li,Qs="__reactMarker$"+li;function _r(t){delete t[Fe],delete t[Ke],delete t[wr],delete t[ty],delete t[ey]}function ss(t){var n=t[Fe];if(n)return n;for(var a=t.parentNode;a;){if(n=a[is]||a[Fe]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(t=Bh(t);t!==null;){if(a=t[Fe])return a;t=Bh(t)}return n}t=a,a=t.parentNode}return null}function os(t){if(t=t[Fe]||t[is]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function Zs(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(o(33))}function as(t){var n=t[Sc];return n||(n=t[Sc]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ne(t){t[Qs]=!0}var Tc=new Set,Ec={};function Li(t,n){rs(t,n),rs(t+"Capture",n)}function rs(t,n){for(Ec[t]=n,t=0;t<n.length;t++)Tc.add(n[t])}var ny=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bc={},Cc={};function iy(t){return j.call(Cc,t)?!0:j.call(bc,t)?!1:ny.test(t)?Cc[t]=!0:(bc[t]=!0,!1)}function Xo(t,n,a){if(iy(n))if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var l=n.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+a)}}function Jo(t,n,a){if(a===null)t.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+a)}}function Hn(t,n,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(n,a,""+l)}}function dn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xc(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function sy(t,n,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var m=l.get,S=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return m.call(this)},set:function(N){a=""+N,S.call(this,N)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(N){a=""+N},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Rr(t){if(!t._valueTracker){var n=xc(t)?"checked":"value";t._valueTracker=sy(t,n,""+t[n])}}function wc(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var a=n.getValue(),l="";return t&&(l=xc(t)?t.checked?"true":"false":t.value),t=l,t!==a?(n.setValue(t),!0):!1}function $o(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var oy=/[\n"\\]/g;function fn(t){return t.replace(oy,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Mr(t,n,a,l,m,S,N,G){t.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?t.type=N:t.removeAttribute("type"),n!=null?N==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+dn(n)):t.value!==""+dn(n)&&(t.value=""+dn(n)):N!=="submit"&&N!=="reset"||t.removeAttribute("value"),n!=null?Ir(t,N,dn(n)):a!=null?Ir(t,N,dn(a)):l!=null&&t.removeAttribute("value"),m==null&&S!=null&&(t.defaultChecked=!!S),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?t.name=""+dn(G):t.removeAttribute("name")}function _c(t,n,a,l,m,S,N,G){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.type=S),n!=null||a!=null){if(!(S!=="submit"&&S!=="reset"||n!=null)){Rr(t);return}a=a!=null?""+dn(a):"",n=n!=null?""+dn(n):a,G||n===t.value||(t.value=n),t.defaultValue=n}l=l??m,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=G?t.checked:!!l,t.defaultChecked=!!l,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(t.name=N),Rr(t)}function Ir(t,n,a){n==="number"&&$o(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function ls(t,n,a,l){if(t=t.options,n){n={};for(var m=0;m<a.length;m++)n["$"+a[m]]=!0;for(a=0;a<t.length;a++)m=n.hasOwnProperty("$"+t[a].value),t[a].selected!==m&&(t[a].selected=m),m&&l&&(t[a].defaultSelected=!0)}else{for(a=""+dn(a),n=null,m=0;m<t.length;m++){if(t[m].value===a){t[m].selected=!0,l&&(t[m].defaultSelected=!0);return}n!==null||t[m].disabled||(n=t[m])}n!==null&&(n.selected=!0)}}function Rc(t,n,a){if(n!=null&&(n=""+dn(n),n!==t.value&&(t.value=n),a==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=a!=null?""+dn(a):""}function Mc(t,n,a,l){if(n==null){if(l!=null){if(a!=null)throw Error(o(92));if(X(l)){if(1<l.length)throw Error(o(93));l=l[0]}a=l}a==null&&(a=""),n=a}a=dn(n),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Rr(t)}function us(t,n){if(n){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=n;return}}t.textContent=n}var ay=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ic(t,n,a){var l=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":l?t.setProperty(n,a):typeof a!="number"||a===0||ay.has(n)?n==="float"?t.cssFloat=a:t[n]=(""+a).trim():t[n]=a+"px"}function Nc(t,n,a){if(n!=null&&typeof n!="object")throw Error(o(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||n!=null&&n.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var m in n)l=n[m],n.hasOwnProperty(m)&&a[m]!==l&&Ic(t,m,l)}else for(var S in n)n.hasOwnProperty(S)&&Ic(t,S,n[S])}function Nr(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ry=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ly=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(t){return ly.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Gn(){}var Dr=null;function Lr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cs=null,ds=null;function Dc(t){var n=os(t);if(n&&(t=n.stateNode)){var a=t[Ke]||null;t:switch(t=n.stateNode,n.type){case"input":if(Mr(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+fn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var l=a[n];if(l!==t&&l.form===t.form){var m=l[Ke]||null;if(!m)throw Error(o(90));Mr(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(n=0;n<a.length;n++)l=a[n],l.form===t.form&&wc(l)}break t;case"textarea":Rc(t,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&ls(t,!!a.multiple,n,!1)}}}var kr=!1;function Lc(t,n,a){if(kr)return t(n,a);kr=!0;try{var l=t(n);return l}finally{if(kr=!1,(cs!==null||ds!==null)&&(Fa(),cs&&(n=cs,t=ds,ds=cs=null,Dc(n),t)))for(n=0;n<t.length;n++)Dc(t[n])}}function Ws(t,n){var a=t.stateNode;if(a===null)return null;var l=a[Ke]||null;if(l===null)return null;a=l[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break t;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(o(231,n,typeof a));return a}var On=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pr=!1;if(On)try{var js={};Object.defineProperty(js,"passive",{get:function(){Pr=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{Pr=!1}var ui=null,Fr=null,Qo=null;function kc(){if(Qo)return Qo;var t,n=Fr,a=n.length,l,m="value"in ui?ui.value:ui.textContent,S=m.length;for(t=0;t<a&&n[t]===m[t];t++);var N=a-t;for(l=1;l<=N&&n[a-l]===m[S-l];l++);return Qo=m.slice(t,1<l?1-l:void 0)}function Zo(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Wo(){return!0}function Pc(){return!1}function Qe(t){function n(a,l,m,S,N){this._reactName=a,this._targetInst=m,this.type=l,this.nativeEvent=S,this.target=N,this.currentTarget=null;for(var G in t)t.hasOwnProperty(G)&&(a=t[G],this[G]=a?a(S):S[G]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Wo:Pc,this.isPropagationStopped=Pc,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),n}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jo=Qe(ki),to=A({},ki,{view:0,detail:0}),uy=Qe(to),Ur,Hr,eo,ta=A({},to,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Or,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eo&&(eo&&t.type==="mousemove"?(Ur=t.screenX-eo.screenX,Hr=t.screenY-eo.screenY):Hr=Ur=0,eo=t),Ur)},movementY:function(t){return"movementY"in t?t.movementY:Hr}}),Fc=Qe(ta),cy=A({},ta,{dataTransfer:0}),dy=Qe(cy),fy=A({},to,{relatedTarget:0}),Gr=Qe(fy),hy=A({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),py=Qe(hy),my=A({},ki,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gy=Qe(my),yy=A({},ki,{data:0}),Uc=Qe(yy),vy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ay={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ty(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Sy[t])?!!n[t]:!1}function Or(){return Ty}var Ey=A({},to,{key:function(t){if(t.key){var n=vy[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=Zo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ay[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Or,charCode:function(t){return t.type==="keypress"?Zo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),by=Qe(Ey),Cy=A({},ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hc=Qe(Cy),xy=A({},to,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Or}),wy=Qe(xy),_y=A({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ry=Qe(_y),My=A({},ta,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Iy=Qe(My),Ny=A({},ki,{newState:0,oldState:0}),Dy=Qe(Ny),Ly=[9,13,27,32],Vr=On&&"CompositionEvent"in window,no=null;On&&"documentMode"in document&&(no=document.documentMode);var ky=On&&"TextEvent"in window&&!no,Gc=On&&(!Vr||no&&8<no&&11>=no),Oc=" ",Vc=!1;function Bc(t,n){switch(t){case"keyup":return Ly.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fs=!1;function Py(t,n){switch(t){case"compositionend":return zc(n);case"keypress":return n.which!==32?null:(Vc=!0,Oc);case"textInput":return t=n.data,t===Oc&&Vc?null:t;default:return null}}function Fy(t,n){if(fs)return t==="compositionend"||!Vr&&Bc(t,n)?(t=kc(),Qo=Fr=ui=null,fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Gc&&n.locale!=="ko"?null:n.data;default:return null}}var Uy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qc(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Uy[t.type]:n==="textarea"}function Yc(t,n,a,l){cs?ds?ds.push(l):ds=[l]:cs=l,n=za(n,"onChange"),0<n.length&&(a=new jo("onChange","change",null,a,l),t.push({event:a,listeners:n}))}var io=null,so=null;function Hy(t){Rh(t,0)}function ea(t){var n=Zs(t);if(wc(n))return t}function Xc(t,n){if(t==="change")return n}var Jc=!1;if(On){var Br;if(On){var zr="oninput"in document;if(!zr){var $c=document.createElement("div");$c.setAttribute("oninput","return;"),zr=typeof $c.oninput=="function"}Br=zr}else Br=!1;Jc=Br&&(!document.documentMode||9<document.documentMode)}function Kc(){io&&(io.detachEvent("onpropertychange",Qc),so=io=null)}function Qc(t){if(t.propertyName==="value"&&ea(so)){var n=[];Yc(n,so,t,Lr(t)),Lc(Hy,n)}}function Gy(t,n,a){t==="focusin"?(Kc(),io=n,so=a,io.attachEvent("onpropertychange",Qc)):t==="focusout"&&Kc()}function Oy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ea(so)}function Vy(t,n){if(t==="click")return ea(n)}function By(t,n){if(t==="input"||t==="change")return ea(n)}function zy(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var sn=typeof Object.is=="function"?Object.is:zy;function oo(t,n){if(sn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var a=Object.keys(t),l=Object.keys(n);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var m=a[l];if(!j.call(n,m)||!sn(t[m],n[m]))return!1}return!0}function Zc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wc(t,n){var a=Zc(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=n&&l>=n)return{node:a,offset:n-t};t=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Zc(a)}}function jc(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?jc(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function td(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=$o(t.document);n instanceof t.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)t=n.contentWindow;else break;n=$o(t.document)}return n}function qr(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var qy=On&&"documentMode"in document&&11>=document.documentMode,hs=null,Yr=null,ao=null,Xr=!1;function ed(t,n,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Xr||hs==null||hs!==$o(l)||(l=hs,"selectionStart"in l&&qr(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ao&&oo(ao,l)||(ao=l,l=za(Yr,"onSelect"),0<l.length&&(n=new jo("onSelect","select",null,n,a),t.push({event:n,listeners:l}),n.target=hs)))}function Pi(t,n){var a={};return a[t.toLowerCase()]=n.toLowerCase(),a["Webkit"+t]="webkit"+n,a["Moz"+t]="moz"+n,a}var ps={animationend:Pi("Animation","AnimationEnd"),animationiteration:Pi("Animation","AnimationIteration"),animationstart:Pi("Animation","AnimationStart"),transitionrun:Pi("Transition","TransitionRun"),transitionstart:Pi("Transition","TransitionStart"),transitioncancel:Pi("Transition","TransitionCancel"),transitionend:Pi("Transition","TransitionEnd")},Jr={},nd={};On&&(nd=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Fi(t){if(Jr[t])return Jr[t];if(!ps[t])return t;var n=ps[t],a;for(a in n)if(n.hasOwnProperty(a)&&a in nd)return Jr[t]=n[a];return t}var id=Fi("animationend"),sd=Fi("animationiteration"),od=Fi("animationstart"),Yy=Fi("transitionrun"),Xy=Fi("transitionstart"),Jy=Fi("transitioncancel"),ad=Fi("transitionend"),rd=new Map,$r="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$r.push("scrollEnd");function Cn(t,n){rd.set(t,n),Li(n,[t])}var na=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},hn=[],ms=0,Kr=0;function ia(){for(var t=ms,n=Kr=ms=0;n<t;){var a=hn[n];hn[n++]=null;var l=hn[n];hn[n++]=null;var m=hn[n];hn[n++]=null;var S=hn[n];if(hn[n++]=null,l!==null&&m!==null){var N=l.pending;N===null?m.next=m:(m.next=N.next,N.next=m),l.pending=m}S!==0&&ld(a,m,S)}}function sa(t,n,a,l){hn[ms++]=t,hn[ms++]=n,hn[ms++]=a,hn[ms++]=l,Kr|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Qr(t,n,a,l){return sa(t,n,a,l),oa(t)}function Ui(t,n){return sa(t,null,null,n),oa(t)}function ld(t,n,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var m=!1,S=t.return;S!==null;)S.childLanes|=a,l=S.alternate,l!==null&&(l.childLanes|=a),S.tag===22&&(t=S.stateNode,t===null||t._visibility&1||(m=!0)),t=S,S=S.return;return t.tag===3?(S=t.stateNode,m&&n!==null&&(m=31-se(a),t=S.hiddenUpdates,l=t[m],l===null?t[m]=[n]:l.push(n),n.lane=a|536870912),S):null}function oa(t){if(50<Mo)throw Mo=0,ou=null,Error(o(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var gs={};function $y(t,n,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,n,a,l){return new $y(t,n,a,l)}function Zr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Vn(t,n){var a=t.alternate;return a===null?(a=on(t.tag,n,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=n,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,n=t.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function ud(t,n){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,n=a.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function aa(t,n,a,l,m,S){var N=0;if(l=t,typeof t=="function")Zr(t)&&(N=1);else if(typeof t=="string")N=jv(t,a,Ct.current)?26:t==="html"||t==="head"||t==="body"?27:5;else t:switch(t){case W:return t=on(31,a,n,m),t.elementType=W,t.lanes=S,t;case M:return Hi(a.children,m,S,n);case y:N=8,m|=24;break;case x:return t=on(12,a,n,m|2),t.elementType=x,t.lanes=S,t;case H:return t=on(13,a,n,m),t.elementType=H,t.lanes=S,t;case O:return t=on(19,a,n,m),t.elementType=O,t.lanes=S,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:N=10;break t;case I:N=9;break t;case P:N=11;break t;case z:N=14;break t;case it:N=16,l=null;break t}N=29,a=Error(o(130,t===null?"null":typeof t,"")),l=null}return n=on(N,a,n,m),n.elementType=t,n.type=l,n.lanes=S,n}function Hi(t,n,a,l){return t=on(7,t,l,n),t.lanes=a,t}function Wr(t,n,a){return t=on(6,t,null,n),t.lanes=a,t}function cd(t){var n=on(18,null,null,0);return n.stateNode=t,n}function jr(t,n,a){return n=on(4,t.children!==null?t.children:[],t.key,n),n.lanes=a,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var dd=new WeakMap;function pn(t,n){if(typeof t=="object"&&t!==null){var a=dd.get(t);return a!==void 0?a:(n={value:t,source:n,stack:J(n)},dd.set(t,n),n)}return{value:t,source:n,stack:J(n)}}var ys=[],vs=0,ra=null,ro=0,mn=[],gn=0,ci=null,Ln=1,kn="";function Bn(t,n){ys[vs++]=ro,ys[vs++]=ra,ra=t,ro=n}function fd(t,n,a){mn[gn++]=Ln,mn[gn++]=kn,mn[gn++]=ci,ci=t;var l=Ln;t=kn;var m=32-se(l)-1;l&=~(1<<m),a+=1;var S=32-se(n)+m;if(30<S){var N=m-m%5;S=(l&(1<<N)-1).toString(32),l>>=N,m-=N,Ln=1<<32-se(n)+m|a<<m|l,kn=S+t}else Ln=1<<S|a<<m|l,kn=t}function tl(t){t.return!==null&&(Bn(t,1),fd(t,1,0))}function el(t){for(;t===ra;)ra=ys[--vs],ys[vs]=null,ro=ys[--vs],ys[vs]=null;for(;t===ci;)ci=mn[--gn],mn[gn]=null,kn=mn[--gn],mn[gn]=null,Ln=mn[--gn],mn[gn]=null}function hd(t,n){mn[gn++]=Ln,mn[gn++]=kn,mn[gn++]=ci,Ln=n.id,kn=n.overflow,ci=t}var Ue=null,pe=null,jt=!1,di=null,yn=!1,nl=Error(o(519));function fi(t){var n=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lo(pn(n,t)),nl}function pd(t){var n=t.stateNode,a=t.type,l=t.memoizedProps;switch(n[Fe]=t,n[Ke]=l,a){case"dialog":Qt("cancel",n),Qt("close",n);break;case"iframe":case"object":case"embed":Qt("load",n);break;case"video":case"audio":for(a=0;a<No.length;a++)Qt(No[a],n);break;case"source":Qt("error",n);break;case"img":case"image":case"link":Qt("error",n),Qt("load",n);break;case"details":Qt("toggle",n);break;case"input":Qt("invalid",n),_c(n,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Qt("invalid",n);break;case"textarea":Qt("invalid",n),Mc(n,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||l.suppressHydrationWarning===!0||Dh(n.textContent,a)?(l.popover!=null&&(Qt("beforetoggle",n),Qt("toggle",n)),l.onScroll!=null&&Qt("scroll",n),l.onScrollEnd!=null&&Qt("scrollend",n),l.onClick!=null&&(n.onclick=Gn),n=!0):n=!1,n||fi(t,!0)}function md(t){for(Ue=t.return;Ue;)switch(Ue.tag){case 5:case 31:case 13:yn=!1;return;case 27:case 3:yn=!0;return;default:Ue=Ue.return}}function As(t){if(t!==Ue)return!1;if(!jt)return md(t),jt=!0,!1;var n=t.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Su(t.type,t.memoizedProps)),a=!a),a&&pe&&fi(t),md(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));pe=Vh(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));pe=Vh(t)}else n===27?(n=pe,wi(t.type)?(t=xu,xu=null,pe=t):pe=n):pe=Ue?An(t.stateNode.nextSibling):null;return!0}function Gi(){pe=Ue=null,jt=!1}function il(){var t=di;return t!==null&&(tn===null?tn=t:tn.push.apply(tn,t),di=null),t}function lo(t){di===null?di=[t]:di.push(t)}var sl=K(null),Oi=null,zn=null;function hi(t,n,a){yt(sl,n._currentValue),n._currentValue=a}function qn(t){t._currentValue=sl.current,rt(sl)}function ol(t,n,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,l!==null&&(l.childLanes|=n)):l!==null&&(l.childLanes&n)!==n&&(l.childLanes|=n),t===a)break;t=t.return}}function al(t,n,a,l){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var S=m.dependencies;if(S!==null){var N=m.child;S=S.firstContext;t:for(;S!==null;){var G=S;S=m;for(var Z=0;Z<n.length;Z++)if(G.context===n[Z]){S.lanes|=a,G=S.alternate,G!==null&&(G.lanes|=a),ol(S.return,a,t),l||(N=null);break t}S=G.next}}else if(m.tag===18){if(N=m.return,N===null)throw Error(o(341));N.lanes|=a,S=N.alternate,S!==null&&(S.lanes|=a),ol(N,a,t),N=null}else N=m.child;if(N!==null)N.return=m;else for(N=m;N!==null;){if(N===t){N=null;break}if(m=N.sibling,m!==null){m.return=N.return,N=m;break}N=N.return}m=N}}function Ss(t,n,a,l){t=null;for(var m=n,S=!1;m!==null;){if(!S){if((m.flags&524288)!==0)S=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var N=m.alternate;if(N===null)throw Error(o(387));if(N=N.memoizedProps,N!==null){var G=m.type;sn(m.pendingProps.value,N.value)||(t!==null?t.push(G):t=[G])}}else if(m===k.current){if(N=m.alternate,N===null)throw Error(o(387));N.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(Fo):t=[Fo])}m=m.return}t!==null&&al(n,t,a,l),n.flags|=262144}function la(t){for(t=t.firstContext;t!==null;){if(!sn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Vi(t){Oi=t,zn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function He(t){return gd(Oi,t)}function ua(t,n){return Oi===null&&Vi(t),gd(t,n)}function gd(t,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},zn===null){if(t===null)throw Error(o(308));zn=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else zn=zn.next=n;return a}var Ky=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){n.aborted=!0,t.forEach(function(a){return a()})}},Qy=i.unstable_scheduleCallback,Zy=i.unstable_NormalPriority,xe={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rl(){return{controller:new Ky,data:new Map,refCount:0}}function uo(t){t.refCount--,t.refCount===0&&Qy(Zy,function(){t.controller.abort()})}var co=null,ll=0,Ts=0,Es=null;function Wy(t,n){if(co===null){var a=co=[];ll=0,Ts=du(),Es={status:"pending",value:void 0,then:function(l){a.push(l)}}}return ll++,n.then(yd,yd),n}function yd(){if(--ll===0&&co!==null){Es!==null&&(Es.status="fulfilled");var t=co;co=null,Ts=0,Es=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function jy(t,n){var a=[],l={status:"pending",value:null,reason:null,then:function(m){a.push(m)}};return t.then(function(){l.status="fulfilled",l.value=n;for(var m=0;m<a.length;m++)(0,a[m])(n)},function(m){for(l.status="rejected",l.reason=m,m=0;m<a.length;m++)(0,a[m])(void 0)}),l}var vd=B.S;B.S=function(t,n){nh=vt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Wy(t,n),vd!==null&&vd(t,n)};var Bi=K(null);function ul(){var t=Bi.current;return t!==null?t:de.pooledCache}function ca(t,n){n===null?yt(Bi,Bi.current):yt(Bi,n.pool)}function Ad(){var t=ul();return t===null?null:{parent:xe._currentValue,pool:t}}var bs=Error(o(460)),cl=Error(o(474)),da=Error(o(542)),fa={then:function(){}};function Sd(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Td(t,n,a){switch(a=t[a],a===void 0?t.push(n):a!==n&&(n.then(Gn,Gn),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,bd(t),t;default:if(typeof n.status=="string")n.then(Gn,Gn);else{if(t=de,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=n,t.status="pending",t.then(function(l){if(n.status==="pending"){var m=n;m.status="fulfilled",m.value=l}},function(l){if(n.status==="pending"){var m=n;m.status="rejected",m.reason=l}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,bd(t),t}throw qi=n,bs}}function zi(t){try{var n=t._init;return n(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(qi=a,bs):a}}var qi=null;function Ed(){if(qi===null)throw Error(o(459));var t=qi;return qi=null,t}function bd(t){if(t===bs||t===da)throw Error(o(483))}var Cs=null,fo=0;function ha(t){var n=fo;return fo+=1,Cs===null&&(Cs=[]),Td(Cs,t,n)}function ho(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function pa(t,n){throw n.$$typeof===T?Error(o(525)):(t=Object.prototype.toString.call(n),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Cd(t){function n(at,nt){if(t){var ct=at.deletions;ct===null?(at.deletions=[nt],at.flags|=16):ct.push(nt)}}function a(at,nt){if(!t)return null;for(;nt!==null;)n(at,nt),nt=nt.sibling;return null}function l(at){for(var nt=new Map;at!==null;)at.key!==null?nt.set(at.key,at):nt.set(at.index,at),at=at.sibling;return nt}function m(at,nt){return at=Vn(at,nt),at.index=0,at.sibling=null,at}function S(at,nt,ct){return at.index=ct,t?(ct=at.alternate,ct!==null?(ct=ct.index,ct<nt?(at.flags|=67108866,nt):ct):(at.flags|=67108866,nt)):(at.flags|=1048576,nt)}function N(at){return t&&at.alternate===null&&(at.flags|=67108866),at}function G(at,nt,ct,Et){return nt===null||nt.tag!==6?(nt=Wr(ct,at.mode,Et),nt.return=at,nt):(nt=m(nt,ct),nt.return=at,nt)}function Z(at,nt,ct,Et){var Ht=ct.type;return Ht===M?At(at,nt,ct.props.children,Et,ct.key):nt!==null&&(nt.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===it&&zi(Ht)===nt.type)?(nt=m(nt,ct.props),ho(nt,ct),nt.return=at,nt):(nt=aa(ct.type,ct.key,ct.props,null,at.mode,Et),ho(nt,ct),nt.return=at,nt)}function dt(at,nt,ct,Et){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==ct.containerInfo||nt.stateNode.implementation!==ct.implementation?(nt=jr(ct,at.mode,Et),nt.return=at,nt):(nt=m(nt,ct.children||[]),nt.return=at,nt)}function At(at,nt,ct,Et,Ht){return nt===null||nt.tag!==7?(nt=Hi(ct,at.mode,Et,Ht),nt.return=at,nt):(nt=m(nt,ct),nt.return=at,nt)}function bt(at,nt,ct){if(typeof nt=="string"&&nt!==""||typeof nt=="number"||typeof nt=="bigint")return nt=Wr(""+nt,at.mode,ct),nt.return=at,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case _:return ct=aa(nt.type,nt.key,nt.props,null,at.mode,ct),ho(ct,nt),ct.return=at,ct;case C:return nt=jr(nt,at.mode,ct),nt.return=at,nt;case it:return nt=zi(nt),bt(at,nt,ct)}if(X(nt)||xt(nt))return nt=Hi(nt,at.mode,ct,null),nt.return=at,nt;if(typeof nt.then=="function")return bt(at,ha(nt),ct);if(nt.$$typeof===F)return bt(at,ua(at,nt),ct);pa(at,nt)}return null}function ft(at,nt,ct,Et){var Ht=nt!==null?nt.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Ht!==null?null:G(at,nt,""+ct,Et);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case _:return ct.key===Ht?Z(at,nt,ct,Et):null;case C:return ct.key===Ht?dt(at,nt,ct,Et):null;case it:return ct=zi(ct),ft(at,nt,ct,Et)}if(X(ct)||xt(ct))return Ht!==null?null:At(at,nt,ct,Et,null);if(typeof ct.then=="function")return ft(at,nt,ha(ct),Et);if(ct.$$typeof===F)return ft(at,nt,ua(at,ct),Et);pa(at,ct)}return null}function ht(at,nt,ct,Et,Ht){if(typeof Et=="string"&&Et!==""||typeof Et=="number"||typeof Et=="bigint")return at=at.get(ct)||null,G(nt,at,""+Et,Ht);if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case _:return at=at.get(Et.key===null?ct:Et.key)||null,Z(nt,at,Et,Ht);case C:return at=at.get(Et.key===null?ct:Et.key)||null,dt(nt,at,Et,Ht);case it:return Et=zi(Et),ht(at,nt,ct,Et,Ht)}if(X(Et)||xt(Et))return at=at.get(ct)||null,At(nt,at,Et,Ht,null);if(typeof Et.then=="function")return ht(at,nt,ct,ha(Et),Ht);if(Et.$$typeof===F)return ht(at,nt,ct,ua(nt,Et),Ht);pa(nt,Et)}return null}function Lt(at,nt,ct,Et){for(var Ht=null,te=null,Pt=nt,Yt=nt=0,Wt=null;Pt!==null&&Yt<ct.length;Yt++){Pt.index>Yt?(Wt=Pt,Pt=null):Wt=Pt.sibling;var ee=ft(at,Pt,ct[Yt],Et);if(ee===null){Pt===null&&(Pt=Wt);break}t&&Pt&&ee.alternate===null&&n(at,Pt),nt=S(ee,nt,Yt),te===null?Ht=ee:te.sibling=ee,te=ee,Pt=Wt}if(Yt===ct.length)return a(at,Pt),jt&&Bn(at,Yt),Ht;if(Pt===null){for(;Yt<ct.length;Yt++)Pt=bt(at,ct[Yt],Et),Pt!==null&&(nt=S(Pt,nt,Yt),te===null?Ht=Pt:te.sibling=Pt,te=Pt);return jt&&Bn(at,Yt),Ht}for(Pt=l(Pt);Yt<ct.length;Yt++)Wt=ht(Pt,at,Yt,ct[Yt],Et),Wt!==null&&(t&&Wt.alternate!==null&&Pt.delete(Wt.key===null?Yt:Wt.key),nt=S(Wt,nt,Yt),te===null?Ht=Wt:te.sibling=Wt,te=Wt);return t&&Pt.forEach(function(Ni){return n(at,Ni)}),jt&&Bn(at,Yt),Ht}function Ot(at,nt,ct,Et){if(ct==null)throw Error(o(151));for(var Ht=null,te=null,Pt=nt,Yt=nt=0,Wt=null,ee=ct.next();Pt!==null&&!ee.done;Yt++,ee=ct.next()){Pt.index>Yt?(Wt=Pt,Pt=null):Wt=Pt.sibling;var Ni=ft(at,Pt,ee.value,Et);if(Ni===null){Pt===null&&(Pt=Wt);break}t&&Pt&&Ni.alternate===null&&n(at,Pt),nt=S(Ni,nt,Yt),te===null?Ht=Ni:te.sibling=Ni,te=Ni,Pt=Wt}if(ee.done)return a(at,Pt),jt&&Bn(at,Yt),Ht;if(Pt===null){for(;!ee.done;Yt++,ee=ct.next())ee=bt(at,ee.value,Et),ee!==null&&(nt=S(ee,nt,Yt),te===null?Ht=ee:te.sibling=ee,te=ee);return jt&&Bn(at,Yt),Ht}for(Pt=l(Pt);!ee.done;Yt++,ee=ct.next())ee=ht(Pt,at,Yt,ee.value,Et),ee!==null&&(t&&ee.alternate!==null&&Pt.delete(ee.key===null?Yt:ee.key),nt=S(ee,nt,Yt),te===null?Ht=ee:te.sibling=ee,te=ee);return t&&Pt.forEach(function(c0){return n(at,c0)}),jt&&Bn(at,Yt),Ht}function ue(at,nt,ct,Et){if(typeof ct=="object"&&ct!==null&&ct.type===M&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case _:t:{for(var Ht=ct.key;nt!==null;){if(nt.key===Ht){if(Ht=ct.type,Ht===M){if(nt.tag===7){a(at,nt.sibling),Et=m(nt,ct.props.children),Et.return=at,at=Et;break t}}else if(nt.elementType===Ht||typeof Ht=="object"&&Ht!==null&&Ht.$$typeof===it&&zi(Ht)===nt.type){a(at,nt.sibling),Et=m(nt,ct.props),ho(Et,ct),Et.return=at,at=Et;break t}a(at,nt);break}else n(at,nt);nt=nt.sibling}ct.type===M?(Et=Hi(ct.props.children,at.mode,Et,ct.key),Et.return=at,at=Et):(Et=aa(ct.type,ct.key,ct.props,null,at.mode,Et),ho(Et,ct),Et.return=at,at=Et)}return N(at);case C:t:{for(Ht=ct.key;nt!==null;){if(nt.key===Ht)if(nt.tag===4&&nt.stateNode.containerInfo===ct.containerInfo&&nt.stateNode.implementation===ct.implementation){a(at,nt.sibling),Et=m(nt,ct.children||[]),Et.return=at,at=Et;break t}else{a(at,nt);break}else n(at,nt);nt=nt.sibling}Et=jr(ct,at.mode,Et),Et.return=at,at=Et}return N(at);case it:return ct=zi(ct),ue(at,nt,ct,Et)}if(X(ct))return Lt(at,nt,ct,Et);if(xt(ct)){if(Ht=xt(ct),typeof Ht!="function")throw Error(o(150));return ct=Ht.call(ct),Ot(at,nt,ct,Et)}if(typeof ct.then=="function")return ue(at,nt,ha(ct),Et);if(ct.$$typeof===F)return ue(at,nt,ua(at,ct),Et);pa(at,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,nt!==null&&nt.tag===6?(a(at,nt.sibling),Et=m(nt,ct),Et.return=at,at=Et):(a(at,nt),Et=Wr(ct,at.mode,Et),Et.return=at,at=Et),N(at)):a(at,nt)}return function(at,nt,ct,Et){try{fo=0;var Ht=ue(at,nt,ct,Et);return Cs=null,Ht}catch(Pt){if(Pt===bs||Pt===da)throw Pt;var te=on(29,Pt,null,at.mode);return te.lanes=Et,te.return=at,te}finally{}}}var Yi=Cd(!0),xd=Cd(!1),pi=!1;function dl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fl(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function mi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function gi(t,n,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ie&2)!==0){var m=l.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),l.pending=n,n=oa(t),ld(t,null,a),n}return sa(t,l,n,a),oa(t)}function po(t,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,ri(t,a)}}function hl(t,n){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var m=null,S=null;if(a=a.firstBaseUpdate,a!==null){do{var N={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};S===null?m=S=N:S=S.next=N,a=a.next}while(a!==null);S===null?m=S=n:S=S.next=n}else m=S=n;a={baseState:l.baseState,firstBaseUpdate:m,lastBaseUpdate:S,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=n:t.next=n,a.lastBaseUpdate=n}var pl=!1;function mo(){if(pl){var t=Es;if(t!==null)throw t}}function go(t,n,a,l){pl=!1;var m=t.updateQueue;pi=!1;var S=m.firstBaseUpdate,N=m.lastBaseUpdate,G=m.shared.pending;if(G!==null){m.shared.pending=null;var Z=G,dt=Z.next;Z.next=null,N===null?S=dt:N.next=dt,N=Z;var At=t.alternate;At!==null&&(At=At.updateQueue,G=At.lastBaseUpdate,G!==N&&(G===null?At.firstBaseUpdate=dt:G.next=dt,At.lastBaseUpdate=Z))}if(S!==null){var bt=m.baseState;N=0,At=dt=Z=null,G=S;do{var ft=G.lane&-536870913,ht=ft!==G.lane;if(ht?(Zt&ft)===ft:(l&ft)===ft){ft!==0&&ft===Ts&&(pl=!0),At!==null&&(At=At.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});t:{var Lt=t,Ot=G;ft=n;var ue=a;switch(Ot.tag){case 1:if(Lt=Ot.payload,typeof Lt=="function"){bt=Lt.call(ue,bt,ft);break t}bt=Lt;break t;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Ot.payload,ft=typeof Lt=="function"?Lt.call(ue,bt,ft):Lt,ft==null)break t;bt=A({},bt,ft);break t;case 2:pi=!0}}ft=G.callback,ft!==null&&(t.flags|=64,ht&&(t.flags|=8192),ht=m.callbacks,ht===null?m.callbacks=[ft]:ht.push(ft))}else ht={lane:ft,tag:G.tag,payload:G.payload,callback:G.callback,next:null},At===null?(dt=At=ht,Z=bt):At=At.next=ht,N|=ft;if(G=G.next,G===null){if(G=m.shared.pending,G===null)break;ht=G,G=ht.next,ht.next=null,m.lastBaseUpdate=ht,m.shared.pending=null}}while(!0);At===null&&(Z=bt),m.baseState=Z,m.firstBaseUpdate=dt,m.lastBaseUpdate=At,S===null&&(m.shared.lanes=0),Ti|=N,t.lanes=N,t.memoizedState=bt}}function wd(t,n){if(typeof t!="function")throw Error(o(191,t));t.call(n)}function _d(t,n){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)wd(a[t],n)}var xs=K(null),ma=K(0);function Rd(t,n){t=jn,yt(ma,t),yt(xs,n),jn=t|n.baseLanes}function ml(){yt(ma,jn),yt(xs,xs.current)}function gl(){jn=ma.current,rt(xs),rt(ma)}var an=K(null),vn=null;function yi(t){var n=t.alternate;yt(Ee,Ee.current&1),yt(an,t),vn===null&&(n===null||xs.current!==null||n.memoizedState!==null)&&(vn=t)}function yl(t){yt(Ee,Ee.current),yt(an,t),vn===null&&(vn=t)}function Md(t){t.tag===22?(yt(Ee,Ee.current),yt(an,t),vn===null&&(vn=t)):vi()}function vi(){yt(Ee,Ee.current),yt(an,an.current)}function rn(t){rt(an),vn===t&&(vn=null),rt(Ee)}var Ee=K(0);function ga(t){for(var n=t;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||bu(a)||Cu(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Yn=0,qt=null,re=null,we=null,ya=!1,ws=!1,Xi=!1,va=0,yo=0,_s=null,tv=0;function Se(){throw Error(o(321))}function vl(t,n){if(n===null)return!1;for(var a=0;a<n.length&&a<t.length;a++)if(!sn(t[a],n[a]))return!1;return!0}function Al(t,n,a,l,m,S){return Yn=S,qt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,B.H=t===null||t.memoizedState===null?hf:kl,Xi=!1,S=a(l,m),Xi=!1,ws&&(S=Nd(n,a,l,m)),Id(t),S}function Id(t){B.H=So;var n=re!==null&&re.next!==null;if(Yn=0,we=re=qt=null,ya=!1,yo=0,_s=null,n)throw Error(o(300));t===null||_e||(t=t.dependencies,t!==null&&la(t)&&(_e=!0))}function Nd(t,n,a,l){qt=t;var m=0;do{if(ws&&(_s=null),yo=0,ws=!1,25<=m)throw Error(o(301));if(m+=1,we=re=null,t.updateQueue!=null){var S=t.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}B.H=pf,S=n(a,l)}while(ws);return S}function ev(){var t=B.H,n=t.useState()[0];return n=typeof n.then=="function"?vo(n):n,t=t.useState()[0],(re!==null?re.memoizedState:null)!==t&&(qt.flags|=1024),n}function Sl(){var t=va!==0;return va=0,t}function Tl(t,n,a){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~a}function El(t){if(ya){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}ya=!1}Yn=0,we=re=qt=null,ws=!1,yo=va=0,_s=null}function Xe(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?qt.memoizedState=we=t:we=we.next=t,we}function be(){if(re===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=re.next;var n=we===null?qt.memoizedState:we.next;if(n!==null)we=n,re=t;else{if(t===null)throw qt.alternate===null?Error(o(467)):Error(o(310));re=t,t={memoizedState:re.memoizedState,baseState:re.baseState,baseQueue:re.baseQueue,queue:re.queue,next:null},we===null?qt.memoizedState=we=t:we=we.next=t}return we}function Aa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vo(t){var n=yo;return yo+=1,_s===null&&(_s=[]),t=Td(_s,t,n),n=qt,(we===null?n.memoizedState:we.next)===null&&(n=n.alternate,B.H=n===null||n.memoizedState===null?hf:kl),t}function Sa(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vo(t);if(t.$$typeof===F)return He(t)}throw Error(o(438,String(t)))}function bl(t){var n=null,a=qt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var l=qt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(n={data:l.data.map(function(m){return m.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Aa(),qt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(t),l=0;l<t;l++)a[l]=ut;return n.index++,a}function Xn(t,n){return typeof n=="function"?n(t):n}function Ta(t){var n=be();return Cl(n,re,t)}function Cl(t,n,a){var l=t.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=a;var m=t.baseQueue,S=l.pending;if(S!==null){if(m!==null){var N=m.next;m.next=S.next,S.next=N}n.baseQueue=m=S,l.pending=null}if(S=t.baseState,m===null)t.memoizedState=S;else{n=m.next;var G=N=null,Z=null,dt=n,At=!1;do{var bt=dt.lane&-536870913;if(bt!==dt.lane?(Zt&bt)===bt:(Yn&bt)===bt){var ft=dt.revertLane;if(ft===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,gesture:null,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),bt===Ts&&(At=!0);else if((Yn&ft)===ft){dt=dt.next,ft===Ts&&(At=!0);continue}else bt={lane:0,revertLane:dt.revertLane,gesture:null,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Z===null?(G=Z=bt,N=S):Z=Z.next=bt,qt.lanes|=ft,Ti|=ft;bt=dt.action,Xi&&a(S,bt),S=dt.hasEagerState?dt.eagerState:a(S,bt)}else ft={lane:bt,revertLane:dt.revertLane,gesture:dt.gesture,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},Z===null?(G=Z=ft,N=S):Z=Z.next=ft,qt.lanes|=bt,Ti|=bt;dt=dt.next}while(dt!==null&&dt!==n);if(Z===null?N=S:Z.next=G,!sn(S,t.memoizedState)&&(_e=!0,At&&(a=Es,a!==null)))throw a;t.memoizedState=S,t.baseState=N,t.baseQueue=Z,l.lastRenderedState=S}return m===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function xl(t){var n=be(),a=n.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=t;var l=a.dispatch,m=a.pending,S=n.memoizedState;if(m!==null){a.pending=null;var N=m=m.next;do S=t(S,N.action),N=N.next;while(N!==m);sn(S,n.memoizedState)||(_e=!0),n.memoizedState=S,n.baseQueue===null&&(n.baseState=S),a.lastRenderedState=S}return[S,l]}function Dd(t,n,a){var l=qt,m=be(),S=jt;if(S){if(a===void 0)throw Error(o(407));a=a()}else a=n();var N=!sn((re||m).memoizedState,a);if(N&&(m.memoizedState=a,_e=!0),m=m.queue,Rl(Pd.bind(null,l,m,t),[t]),m.getSnapshot!==n||N||we!==null&&we.memoizedState.tag&1){if(l.flags|=2048,Rs(9,{destroy:void 0},kd.bind(null,l,m,a,n),null),de===null)throw Error(o(349));S||(Yn&127)!==0||Ld(l,n,a)}return a}function Ld(t,n,a){t.flags|=16384,t={getSnapshot:n,value:a},n=qt.updateQueue,n===null?(n=Aa(),qt.updateQueue=n,n.stores=[t]):(a=n.stores,a===null?n.stores=[t]:a.push(t))}function kd(t,n,a,l){n.value=a,n.getSnapshot=l,Fd(n)&&Ud(t)}function Pd(t,n,a){return a(function(){Fd(n)&&Ud(t)})}function Fd(t){var n=t.getSnapshot;t=t.value;try{var a=n();return!sn(t,a)}catch{return!0}}function Ud(t){var n=Ui(t,2);n!==null&&en(n,t,2)}function wl(t){var n=Xe();if(typeof t=="function"){var a=t;if(t=a(),Xi){Ut(!0);try{a()}finally{Ut(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:t},n}function Hd(t,n,a,l){return t.baseState=a,Cl(t,re,typeof l=="function"?l:Xn)}function nv(t,n,a,l,m){if(Ca(t))throw Error(o(485));if(t=n.action,t!==null){var S={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){S.listeners.push(N)}};B.T!==null?a(!0):S.isTransition=!1,l(S),a=n.pending,a===null?(S.next=n.pending=S,Gd(n,S)):(S.next=a.next,n.pending=a.next=S)}}function Gd(t,n){var a=n.action,l=n.payload,m=t.state;if(n.isTransition){var S=B.T,N={};B.T=N;try{var G=a(m,l),Z=B.S;Z!==null&&Z(N,G),Od(t,n,G)}catch(dt){_l(t,n,dt)}finally{S!==null&&N.types!==null&&(S.types=N.types),B.T=S}}else try{S=a(m,l),Od(t,n,S)}catch(dt){_l(t,n,dt)}}function Od(t,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Vd(t,n,l)},function(l){return _l(t,n,l)}):Vd(t,n,a)}function Vd(t,n,a){n.status="fulfilled",n.value=a,Bd(n),t.state=a,n=t.pending,n!==null&&(a=n.next,a===n?t.pending=null:(a=a.next,n.next=a,Gd(t,a)))}function _l(t,n,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do n.status="rejected",n.reason=a,Bd(n),n=n.next;while(n!==l)}t.action=null}function Bd(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function zd(t,n){return n}function qd(t,n){if(jt){var a=de.formState;if(a!==null){t:{var l=qt;if(jt){if(pe){e:{for(var m=pe,S=yn;m.nodeType!==8;){if(!S){m=null;break e}if(m=An(m.nextSibling),m===null){m=null;break e}}S=m.data,m=S==="F!"||S==="F"?m:null}if(m){pe=An(m.nextSibling),l=m.data==="F!";break t}}fi(l)}l=!1}l&&(n=a[0])}}return a=Xe(),a.memoizedState=a.baseState=n,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zd,lastRenderedState:n},a.queue=l,a=cf.bind(null,qt,l),l.dispatch=a,l=wl(!1),S=Ll.bind(null,qt,!1,l.queue),l=Xe(),m={state:n,dispatch:null,action:t,pending:null},l.queue=m,a=nv.bind(null,qt,m,S,a),m.dispatch=a,l.memoizedState=t,[n,a,!1]}function Yd(t){var n=be();return Xd(n,re,t)}function Xd(t,n,a){if(n=Cl(t,n,zd)[0],t=Ta(Xn)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var l=vo(n)}catch(N){throw N===bs?da:N}else l=n;n=be();var m=n.queue,S=m.dispatch;return a!==n.memoizedState&&(qt.flags|=2048,Rs(9,{destroy:void 0},iv.bind(null,m,a),null)),[l,S,t]}function iv(t,n){t.action=n}function Jd(t){var n=be(),a=re;if(a!==null)return Xd(n,a,t);be(),n=n.memoizedState,a=be();var l=a.queue.dispatch;return a.memoizedState=t,[n,l,!1]}function Rs(t,n,a,l){return t={tag:t,create:a,deps:l,inst:n,next:null},n=qt.updateQueue,n===null&&(n=Aa(),qt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,n.lastEffect=t),t}function $d(){return be().memoizedState}function Ea(t,n,a,l){var m=Xe();qt.flags|=t,m.memoizedState=Rs(1|n,{destroy:void 0},a,l===void 0?null:l)}function ba(t,n,a,l){var m=be();l=l===void 0?null:l;var S=m.memoizedState.inst;re!==null&&l!==null&&vl(l,re.memoizedState.deps)?m.memoizedState=Rs(n,S,a,l):(qt.flags|=t,m.memoizedState=Rs(1|n,S,a,l))}function Kd(t,n){Ea(8390656,8,t,n)}function Rl(t,n){ba(2048,8,t,n)}function sv(t){qt.flags|=4;var n=qt.updateQueue;if(n===null)n=Aa(),qt.updateQueue=n,n.events=[t];else{var a=n.events;a===null?n.events=[t]:a.push(t)}}function Qd(t){var n=be().memoizedState;return sv({ref:n,nextImpl:t}),function(){if((ie&2)!==0)throw Error(o(440));return n.impl.apply(void 0,arguments)}}function Zd(t,n){return ba(4,2,t,n)}function Wd(t,n){return ba(4,4,t,n)}function jd(t,n){if(typeof n=="function"){t=t();var a=n(t);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function tf(t,n,a){a=a!=null?a.concat([t]):null,ba(4,4,jd.bind(null,n,t),a)}function Ml(){}function ef(t,n){var a=be();n=n===void 0?null:n;var l=a.memoizedState;return n!==null&&vl(n,l[1])?l[0]:(a.memoizedState=[t,n],t)}function nf(t,n){var a=be();n=n===void 0?null:n;var l=a.memoizedState;if(n!==null&&vl(n,l[1]))return l[0];if(l=t(),Xi){Ut(!0);try{t()}finally{Ut(!1)}}return a.memoizedState=[l,n],l}function Il(t,n,a){return a===void 0||(Yn&1073741824)!==0&&(Zt&261930)===0?t.memoizedState=n:(t.memoizedState=a,t=sh(),qt.lanes|=t,Ti|=t,a)}function sf(t,n,a,l){return sn(a,n)?a:xs.current!==null?(t=Il(t,a,l),sn(t,n)||(_e=!0),t):(Yn&42)===0||(Yn&1073741824)!==0&&(Zt&261930)===0?(_e=!0,t.memoizedState=a):(t=sh(),qt.lanes|=t,Ti|=t,n)}function of(t,n,a,l,m){var S=et.p;et.p=S!==0&&8>S?S:8;var N=B.T,G={};B.T=G,Ll(t,!1,n,a);try{var Z=m(),dt=B.S;if(dt!==null&&dt(G,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var At=jy(Z,l);Ao(t,n,At,cn(t))}else Ao(t,n,l,cn(t))}catch(bt){Ao(t,n,{then:function(){},status:"rejected",reason:bt},cn())}finally{et.p=S,N!==null&&G.types!==null&&(N.types=G.types),B.T=N}}function ov(){}function Nl(t,n,a,l){if(t.tag!==5)throw Error(o(476));var m=af(t).queue;of(t,m,n,lt,a===null?ov:function(){return rf(t),a(l)})}function af(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:lt},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xn,lastRenderedState:a},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function rf(t){var n=af(t);n.next===null&&(n=t.alternate.memoizedState),Ao(t,n.next.queue,{},cn())}function Dl(){return He(Fo)}function lf(){return be().memoizedState}function uf(){return be().memoizedState}function av(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var a=cn();t=mi(a);var l=gi(n,t,a);l!==null&&(en(l,n,a),po(l,n,a)),n={cache:rl()},t.payload=n;return}n=n.return}}function rv(t,n,a){var l=cn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ca(t)?df(n,a):(a=Qr(t,n,a,l),a!==null&&(en(a,t,l),ff(a,n,l)))}function cf(t,n,a){var l=cn();Ao(t,n,a,l)}function Ao(t,n,a,l){var m={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ca(t))df(n,m);else{var S=t.alternate;if(t.lanes===0&&(S===null||S.lanes===0)&&(S=n.lastRenderedReducer,S!==null))try{var N=n.lastRenderedState,G=S(N,a);if(m.hasEagerState=!0,m.eagerState=G,sn(G,N))return sa(t,n,m,0),de===null&&ia(),!1}catch{}finally{}if(a=Qr(t,n,m,l),a!==null)return en(a,t,l),ff(a,n,l),!0}return!1}function Ll(t,n,a,l){if(l={lane:2,revertLane:du(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ca(t)){if(n)throw Error(o(479))}else n=Qr(t,a,l,2),n!==null&&en(n,t,2)}function Ca(t){var n=t.alternate;return t===qt||n!==null&&n===qt}function df(t,n){ws=ya=!0;var a=t.pending;a===null?n.next=n:(n.next=a.next,a.next=n),t.pending=n}function ff(t,n,a){if((a&4194048)!==0){var l=n.lanes;l&=t.pendingLanes,a|=l,n.lanes=a,ri(t,a)}}var So={readContext:He,use:Sa,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useLayoutEffect:Se,useInsertionEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useSyncExternalStore:Se,useId:Se,useHostTransitionStatus:Se,useFormState:Se,useActionState:Se,useOptimistic:Se,useMemoCache:Se,useCacheRefresh:Se};So.useEffectEvent=Se;var hf={readContext:He,use:Sa,useCallback:function(t,n){return Xe().memoizedState=[t,n===void 0?null:n],t},useContext:He,useEffect:Kd,useImperativeHandle:function(t,n,a){a=a!=null?a.concat([t]):null,Ea(4194308,4,jd.bind(null,n,t),a)},useLayoutEffect:function(t,n){return Ea(4194308,4,t,n)},useInsertionEffect:function(t,n){Ea(4,2,t,n)},useMemo:function(t,n){var a=Xe();n=n===void 0?null:n;var l=t();if(Xi){Ut(!0);try{t()}finally{Ut(!1)}}return a.memoizedState=[l,n],l},useReducer:function(t,n,a){var l=Xe();if(a!==void 0){var m=a(n);if(Xi){Ut(!0);try{a(n)}finally{Ut(!1)}}}else m=n;return l.memoizedState=l.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},l.queue=t,t=t.dispatch=rv.bind(null,qt,t),[l.memoizedState,t]},useRef:function(t){var n=Xe();return t={current:t},n.memoizedState=t},useState:function(t){t=wl(t);var n=t.queue,a=cf.bind(null,qt,n);return n.dispatch=a,[t.memoizedState,a]},useDebugValue:Ml,useDeferredValue:function(t,n){var a=Xe();return Il(a,t,n)},useTransition:function(){var t=wl(!1);return t=of.bind(null,qt,t.queue,!0,!1),Xe().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,a){var l=qt,m=Xe();if(jt){if(a===void 0)throw Error(o(407));a=a()}else{if(a=n(),de===null)throw Error(o(349));(Zt&127)!==0||Ld(l,n,a)}m.memoizedState=a;var S={value:a,getSnapshot:n};return m.queue=S,Kd(Pd.bind(null,l,S,t),[t]),l.flags|=2048,Rs(9,{destroy:void 0},kd.bind(null,l,S,a,n),null),a},useId:function(){var t=Xe(),n=de.identifierPrefix;if(jt){var a=kn,l=Ln;a=(l&~(1<<32-se(l)-1)).toString(32)+a,n="_"+n+"R_"+a,a=va++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=tv++,n="_"+n+"r_"+a.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Dl,useFormState:qd,useActionState:qd,useOptimistic:function(t){var n=Xe();n.memoizedState=n.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Ll.bind(null,qt,!0,a),a.dispatch=n,[t,n]},useMemoCache:bl,useCacheRefresh:function(){return Xe().memoizedState=av.bind(null,qt)},useEffectEvent:function(t){var n=Xe(),a={impl:t};return n.memoizedState=a,function(){if((ie&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},kl={readContext:He,use:Sa,useCallback:ef,useContext:He,useEffect:Rl,useImperativeHandle:tf,useInsertionEffect:Zd,useLayoutEffect:Wd,useMemo:nf,useReducer:Ta,useRef:$d,useState:function(){return Ta(Xn)},useDebugValue:Ml,useDeferredValue:function(t,n){var a=be();return sf(a,re.memoizedState,t,n)},useTransition:function(){var t=Ta(Xn)[0],n=be().memoizedState;return[typeof t=="boolean"?t:vo(t),n]},useSyncExternalStore:Dd,useId:lf,useHostTransitionStatus:Dl,useFormState:Yd,useActionState:Yd,useOptimistic:function(t,n){var a=be();return Hd(a,re,t,n)},useMemoCache:bl,useCacheRefresh:uf};kl.useEffectEvent=Qd;var pf={readContext:He,use:Sa,useCallback:ef,useContext:He,useEffect:Rl,useImperativeHandle:tf,useInsertionEffect:Zd,useLayoutEffect:Wd,useMemo:nf,useReducer:xl,useRef:$d,useState:function(){return xl(Xn)},useDebugValue:Ml,useDeferredValue:function(t,n){var a=be();return re===null?Il(a,t,n):sf(a,re.memoizedState,t,n)},useTransition:function(){var t=xl(Xn)[0],n=be().memoizedState;return[typeof t=="boolean"?t:vo(t),n]},useSyncExternalStore:Dd,useId:lf,useHostTransitionStatus:Dl,useFormState:Jd,useActionState:Jd,useOptimistic:function(t,n){var a=be();return re!==null?Hd(a,re,t,n):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:bl,useCacheRefresh:uf};pf.useEffectEvent=Qd;function Pl(t,n,a,l){n=t.memoizedState,a=a(l,n),a=a==null?n:A({},n,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Fl={enqueueSetState:function(t,n,a){t=t._reactInternals;var l=cn(),m=mi(l);m.payload=n,a!=null&&(m.callback=a),n=gi(t,m,l),n!==null&&(en(n,t,l),po(n,t,l))},enqueueReplaceState:function(t,n,a){t=t._reactInternals;var l=cn(),m=mi(l);m.tag=1,m.payload=n,a!=null&&(m.callback=a),n=gi(t,m,l),n!==null&&(en(n,t,l),po(n,t,l))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var a=cn(),l=mi(a);l.tag=2,n!=null&&(l.callback=n),n=gi(t,l,a),n!==null&&(en(n,t,a),po(n,t,a))}};function mf(t,n,a,l,m,S,N){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,S,N):n.prototype&&n.prototype.isPureReactComponent?!oo(a,l)||!oo(m,S):!0}function gf(t,n,a,l){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,l),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,l),n.state!==t&&Fl.enqueueReplaceState(n,n.state,null)}function Ji(t,n){var a=n;if("ref"in n){a={};for(var l in n)l!=="ref"&&(a[l]=n[l])}if(t=t.defaultProps){a===n&&(a=A({},a));for(var m in t)a[m]===void 0&&(a[m]=t[m])}return a}function yf(t){na(t)}function vf(t){console.error(t)}function Af(t){na(t)}function xa(t,n){try{var a=t.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(l){setTimeout(function(){throw l})}}function Sf(t,n,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Ul(t,n,a){return a=mi(a),a.tag=3,a.payload={element:null},a.callback=function(){xa(t,n)},a}function Tf(t){return t=mi(t),t.tag=3,t}function Ef(t,n,a,l){var m=a.type.getDerivedStateFromError;if(typeof m=="function"){var S=l.value;t.payload=function(){return m(S)},t.callback=function(){Sf(n,a,l)}}var N=a.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(t.callback=function(){Sf(n,a,l),typeof m!="function"&&(Ei===null?Ei=new Set([this]):Ei.add(this));var G=l.stack;this.componentDidCatch(l.value,{componentStack:G!==null?G:""})})}function lv(t,n,a,l,m){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(n=a.alternate,n!==null&&Ss(n,a,m,!0),a=an.current,a!==null){switch(a.tag){case 31:case 13:return vn===null?Ua():a.alternate===null&&Te===0&&(Te=3),a.flags&=-257,a.flags|=65536,a.lanes=m,l===fa?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([l]):n.add(l),lu(t,l,m)),!1;case 22:return a.flags|=65536,l===fa?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([l]):a.add(l)),lu(t,l,m)),!1}throw Error(o(435,a.tag))}return lu(t,l,m),Ua(),!1}if(jt)return n=an.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=m,l!==nl&&(t=Error(o(422),{cause:l}),lo(pn(t,a)))):(l!==nl&&(n=Error(o(423),{cause:l}),lo(pn(n,a))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,l=pn(l,a),m=Ul(t.stateNode,l,m),hl(t,m),Te!==4&&(Te=2)),!1;var S=Error(o(520),{cause:l});if(S=pn(S,a),Ro===null?Ro=[S]:Ro.push(S),Te!==4&&(Te=2),n===null)return!0;l=pn(l,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,t=m&-m,a.lanes|=t,t=Ul(a.stateNode,l,t),hl(a,t),!1;case 1:if(n=a.type,S=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ei===null||!Ei.has(S))))return a.flags|=65536,m&=-m,a.lanes|=m,m=Tf(m),Ef(m,t,a,l),hl(a,m),!1}a=a.return}while(a!==null);return!1}var Hl=Error(o(461)),_e=!1;function Ge(t,n,a,l){n.child=t===null?xd(n,null,a,l):Yi(n,t.child,a,l)}function bf(t,n,a,l,m){a=a.render;var S=n.ref;if("ref"in l){var N={};for(var G in l)G!=="ref"&&(N[G]=l[G])}else N=l;return Vi(n),l=Al(t,n,a,N,S,m),G=Sl(),t!==null&&!_e?(Tl(t,n,m),Jn(t,n,m)):(jt&&G&&tl(n),n.flags|=1,Ge(t,n,l,m),n.child)}function Cf(t,n,a,l,m){if(t===null){var S=a.type;return typeof S=="function"&&!Zr(S)&&S.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=S,xf(t,n,S,l,m)):(t=aa(a.type,null,l,n,n.mode,m),t.ref=n.ref,t.return=n,n.child=t)}if(S=t.child,!Xl(t,m)){var N=S.memoizedProps;if(a=a.compare,a=a!==null?a:oo,a(N,l)&&t.ref===n.ref)return Jn(t,n,m)}return n.flags|=1,t=Vn(S,l),t.ref=n.ref,t.return=n,n.child=t}function xf(t,n,a,l,m){if(t!==null){var S=t.memoizedProps;if(oo(S,l)&&t.ref===n.ref)if(_e=!1,n.pendingProps=l=S,Xl(t,m))(t.flags&131072)!==0&&(_e=!0);else return n.lanes=t.lanes,Jn(t,n,m)}return Gl(t,n,a,l,m)}function wf(t,n,a,l){var m=l.children,S=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((n.flags&128)!==0){if(S=S!==null?S.baseLanes|a:a,t!==null){for(l=n.child=t.child,m=0;l!==null;)m=m|l.lanes|l.childLanes,l=l.sibling;l=m&~S}else l=0,n.child=null;return _f(t,n,S,a,l)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&ca(n,S!==null?S.cachePool:null),S!==null?Rd(n,S):ml(),Md(n);else return l=n.lanes=536870912,_f(t,n,S!==null?S.baseLanes|a:a,a,l)}else S!==null?(ca(n,S.cachePool),Rd(n,S),vi(),n.memoizedState=null):(t!==null&&ca(n,null),ml(),vi());return Ge(t,n,m,a),n.child}function To(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function _f(t,n,a,l,m){var S=ul();return S=S===null?null:{parent:xe._currentValue,pool:S},n.memoizedState={baseLanes:a,cachePool:S},t!==null&&ca(n,null),ml(),Md(n),t!==null&&Ss(t,n,l,!0),n.childLanes=m,null}function wa(t,n){return n=Ra({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function Rf(t,n,a){return Yi(n,t.child,null,a),t=wa(n,n.pendingProps),t.flags|=2,rn(n),n.memoizedState=null,t}function uv(t,n,a){var l=n.pendingProps,m=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(jt){if(l.mode==="hidden")return t=wa(n,l),n.lanes=536870912,To(null,t);if(yl(n),(t=pe)?(t=Oh(t,yn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:ci!==null?{id:Ln,overflow:kn}:null,retryLane:536870912,hydrationErrors:null},a=cd(t),a.return=n,n.child=a,Ue=n,pe=null)):t=null,t===null)throw fi(n);return n.lanes=536870912,null}return wa(n,l)}var S=t.memoizedState;if(S!==null){var N=S.dehydrated;if(yl(n),m)if(n.flags&256)n.flags&=-257,n=Rf(t,n,a);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(o(558));else if(_e||Ss(t,n,a,!1),m=(a&t.childLanes)!==0,_e||m){if(l=de,l!==null&&(N=ns(l,a),N!==0&&N!==S.retryLane))throw S.retryLane=N,Ui(t,N),en(l,t,N),Hl;Ua(),n=Rf(t,n,a)}else t=S.treeContext,pe=An(N.nextSibling),Ue=n,jt=!0,di=null,yn=!1,t!==null&&hd(n,t),n=wa(n,l),n.flags|=4096;return n}return t=Vn(t.child,{mode:l.mode,children:l.children}),t.ref=n.ref,n.child=t,t.return=n,t}function _a(t,n){var a=n.ref;if(a===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(t===null||t.ref!==a)&&(n.flags|=4194816)}}function Gl(t,n,a,l,m){return Vi(n),a=Al(t,n,a,l,void 0,m),l=Sl(),t!==null&&!_e?(Tl(t,n,m),Jn(t,n,m)):(jt&&l&&tl(n),n.flags|=1,Ge(t,n,a,m),n.child)}function Mf(t,n,a,l,m,S){return Vi(n),n.updateQueue=null,a=Nd(n,l,a,m),Id(t),l=Sl(),t!==null&&!_e?(Tl(t,n,S),Jn(t,n,S)):(jt&&l&&tl(n),n.flags|=1,Ge(t,n,a,S),n.child)}function If(t,n,a,l,m){if(Vi(n),n.stateNode===null){var S=gs,N=a.contextType;typeof N=="object"&&N!==null&&(S=He(N)),S=new a(l,S),n.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Fl,n.stateNode=S,S._reactInternals=n,S=n.stateNode,S.props=l,S.state=n.memoizedState,S.refs={},dl(n),N=a.contextType,S.context=typeof N=="object"&&N!==null?He(N):gs,S.state=n.memoizedState,N=a.getDerivedStateFromProps,typeof N=="function"&&(Pl(n,a,N,l),S.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(N=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),N!==S.state&&Fl.enqueueReplaceState(S,S.state,null),go(n,l,S,m),mo(),S.state=n.memoizedState),typeof S.componentDidMount=="function"&&(n.flags|=4194308),l=!0}else if(t===null){S=n.stateNode;var G=n.memoizedProps,Z=Ji(a,G);S.props=Z;var dt=S.context,At=a.contextType;N=gs,typeof At=="object"&&At!==null&&(N=He(At));var bt=a.getDerivedStateFromProps;At=typeof bt=="function"||typeof S.getSnapshotBeforeUpdate=="function",G=n.pendingProps!==G,At||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(G||dt!==N)&&gf(n,S,l,N),pi=!1;var ft=n.memoizedState;S.state=ft,go(n,l,S,m),mo(),dt=n.memoizedState,G||ft!==dt||pi?(typeof bt=="function"&&(Pl(n,a,bt,l),dt=n.memoizedState),(Z=pi||mf(n,a,Z,l,ft,dt,N))?(At||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(n.flags|=4194308)):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=l,n.memoizedState=dt),S.props=l,S.state=dt,S.context=N,l=Z):(typeof S.componentDidMount=="function"&&(n.flags|=4194308),l=!1)}else{S=n.stateNode,fl(t,n),N=n.memoizedProps,At=Ji(a,N),S.props=At,bt=n.pendingProps,ft=S.context,dt=a.contextType,Z=gs,typeof dt=="object"&&dt!==null&&(Z=He(dt)),G=a.getDerivedStateFromProps,(dt=typeof G=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(N!==bt||ft!==Z)&&gf(n,S,l,Z),pi=!1,ft=n.memoizedState,S.state=ft,go(n,l,S,m),mo();var ht=n.memoizedState;N!==bt||ft!==ht||pi||t!==null&&t.dependencies!==null&&la(t.dependencies)?(typeof G=="function"&&(Pl(n,a,G,l),ht=n.memoizedState),(At=pi||mf(n,a,At,l,ft,ht,Z)||t!==null&&t.dependencies!==null&&la(t.dependencies))?(dt||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(l,ht,Z),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(l,ht,Z)),typeof S.componentDidUpdate=="function"&&(n.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof S.componentDidUpdate!="function"||N===t.memoizedProps&&ft===t.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===t.memoizedProps&&ft===t.memoizedState||(n.flags|=1024),n.memoizedProps=l,n.memoizedState=ht),S.props=l,S.state=ht,S.context=Z,l=At):(typeof S.componentDidUpdate!="function"||N===t.memoizedProps&&ft===t.memoizedState||(n.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||N===t.memoizedProps&&ft===t.memoizedState||(n.flags|=1024),l=!1)}return S=l,_a(t,n),l=(n.flags&128)!==0,S||l?(S=n.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:S.render(),n.flags|=1,t!==null&&l?(n.child=Yi(n,t.child,null,m),n.child=Yi(n,null,a,m)):Ge(t,n,a,m),n.memoizedState=S.state,t=n.child):t=Jn(t,n,m),t}function Nf(t,n,a,l){return Gi(),n.flags|=256,Ge(t,n,a,l),n.child}var Ol={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vl(t){return{baseLanes:t,cachePool:Ad()}}function Bl(t,n,a){return t=t!==null?t.childLanes&~a:0,n&&(t|=un),t}function Df(t,n,a){var l=n.pendingProps,m=!1,S=(n.flags&128)!==0,N;if((N=S)||(N=t!==null&&t.memoizedState===null?!1:(Ee.current&2)!==0),N&&(m=!0,n.flags&=-129),N=(n.flags&32)!==0,n.flags&=-33,t===null){if(jt){if(m?yi(n):vi(),(t=pe)?(t=Oh(t,yn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:ci!==null?{id:Ln,overflow:kn}:null,retryLane:536870912,hydrationErrors:null},a=cd(t),a.return=n,n.child=a,Ue=n,pe=null)):t=null,t===null)throw fi(n);return Cu(t)?n.lanes=32:n.lanes=536870912,null}var G=l.children;return l=l.fallback,m?(vi(),m=n.mode,G=Ra({mode:"hidden",children:G},m),l=Hi(l,m,a,null),G.return=n,l.return=n,G.sibling=l,n.child=G,l=n.child,l.memoizedState=Vl(a),l.childLanes=Bl(t,N,a),n.memoizedState=Ol,To(null,l)):(yi(n),zl(n,G))}var Z=t.memoizedState;if(Z!==null&&(G=Z.dehydrated,G!==null)){if(S)n.flags&256?(yi(n),n.flags&=-257,n=ql(t,n,a)):n.memoizedState!==null?(vi(),n.child=t.child,n.flags|=128,n=null):(vi(),G=l.fallback,m=n.mode,l=Ra({mode:"visible",children:l.children},m),G=Hi(G,m,a,null),G.flags|=2,l.return=n,G.return=n,l.sibling=G,n.child=l,Yi(n,t.child,null,a),l=n.child,l.memoizedState=Vl(a),l.childLanes=Bl(t,N,a),n.memoizedState=Ol,n=To(null,l));else if(yi(n),Cu(G)){if(N=G.nextSibling&&G.nextSibling.dataset,N)var dt=N.dgst;N=dt,l=Error(o(419)),l.stack="",l.digest=N,lo({value:l,source:null,stack:null}),n=ql(t,n,a)}else if(_e||Ss(t,n,a,!1),N=(a&t.childLanes)!==0,_e||N){if(N=de,N!==null&&(l=ns(N,a),l!==0&&l!==Z.retryLane))throw Z.retryLane=l,Ui(t,l),en(N,t,l),Hl;bu(G)||Ua(),n=ql(t,n,a)}else bu(G)?(n.flags|=192,n.child=t.child,n=null):(t=Z.treeContext,pe=An(G.nextSibling),Ue=n,jt=!0,di=null,yn=!1,t!==null&&hd(n,t),n=zl(n,l.children),n.flags|=4096);return n}return m?(vi(),G=l.fallback,m=n.mode,Z=t.child,dt=Z.sibling,l=Vn(Z,{mode:"hidden",children:l.children}),l.subtreeFlags=Z.subtreeFlags&65011712,dt!==null?G=Vn(dt,G):(G=Hi(G,m,a,null),G.flags|=2),G.return=n,l.return=n,l.sibling=G,n.child=l,To(null,l),l=n.child,G=t.child.memoizedState,G===null?G=Vl(a):(m=G.cachePool,m!==null?(Z=xe._currentValue,m=m.parent!==Z?{parent:Z,pool:Z}:m):m=Ad(),G={baseLanes:G.baseLanes|a,cachePool:m}),l.memoizedState=G,l.childLanes=Bl(t,N,a),n.memoizedState=Ol,To(t.child,l)):(yi(n),a=t.child,t=a.sibling,a=Vn(a,{mode:"visible",children:l.children}),a.return=n,a.sibling=null,t!==null&&(N=n.deletions,N===null?(n.deletions=[t],n.flags|=16):N.push(t)),n.child=a,n.memoizedState=null,a)}function zl(t,n){return n=Ra({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Ra(t,n){return t=on(22,t,null,n),t.lanes=0,t}function ql(t,n,a){return Yi(n,t.child,null,a),t=zl(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Lf(t,n,a){t.lanes|=n;var l=t.alternate;l!==null&&(l.lanes|=n),ol(t.return,n,a)}function Yl(t,n,a,l,m,S){var N=t.memoizedState;N===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:m,treeForkCount:S}:(N.isBackwards=n,N.rendering=null,N.renderingStartTime=0,N.last=l,N.tail=a,N.tailMode=m,N.treeForkCount=S)}function kf(t,n,a){var l=n.pendingProps,m=l.revealOrder,S=l.tail;l=l.children;var N=Ee.current,G=(N&2)!==0;if(G?(N=N&1|2,n.flags|=128):N&=1,yt(Ee,N),Ge(t,n,l,a),l=jt?ro:0,!G&&t!==null&&(t.flags&128)!==0)t:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Lf(t,a,n);else if(t.tag===19)Lf(t,a,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(m){case"forwards":for(a=n.child,m=null;a!==null;)t=a.alternate,t!==null&&ga(t)===null&&(m=a),a=a.sibling;a=m,a===null?(m=n.child,n.child=null):(m=a.sibling,a.sibling=null),Yl(n,!1,m,a,S,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,m=n.child,n.child=null;m!==null;){if(t=m.alternate,t!==null&&ga(t)===null){n.child=m;break}t=m.sibling,m.sibling=a,a=m,m=t}Yl(n,!0,a,null,S,l);break;case"together":Yl(n,!1,null,null,void 0,l);break;default:n.memoizedState=null}return n.child}function Jn(t,n,a){if(t!==null&&(n.dependencies=t.dependencies),Ti|=n.lanes,(a&n.childLanes)===0)if(t!==null){if(Ss(t,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(o(153));if(n.child!==null){for(t=n.child,a=Vn(t,t.pendingProps),n.child=a,a.return=n;t.sibling!==null;)t=t.sibling,a=a.sibling=Vn(t,t.pendingProps),a.return=n;a.sibling=null}return n.child}function Xl(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&la(t)))}function cv(t,n,a){switch(n.tag){case 3:D(n,n.stateNode.containerInfo),hi(n,xe,t.memoizedState.cache),Gi();break;case 27:case 5:E(n);break;case 4:D(n,n.stateNode.containerInfo);break;case 10:hi(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,yl(n),null;break;case 13:var l=n.memoizedState;if(l!==null)return l.dehydrated!==null?(yi(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Df(t,n,a):(yi(n),t=Jn(t,n,a),t!==null?t.sibling:null);yi(n);break;case 19:var m=(t.flags&128)!==0;if(l=(a&n.childLanes)!==0,l||(Ss(t,n,a,!1),l=(a&n.childLanes)!==0),m){if(l)return kf(t,n,a);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),yt(Ee,Ee.current),l)break;return null;case 22:return n.lanes=0,wf(t,n,a,n.pendingProps);case 24:hi(n,xe,t.memoizedState.cache)}return Jn(t,n,a)}function Pf(t,n,a){if(t!==null)if(t.memoizedProps!==n.pendingProps)_e=!0;else{if(!Xl(t,a)&&(n.flags&128)===0)return _e=!1,cv(t,n,a);_e=(t.flags&131072)!==0}else _e=!1,jt&&(n.flags&1048576)!==0&&fd(n,ro,n.index);switch(n.lanes=0,n.tag){case 16:t:{var l=n.pendingProps;if(t=zi(n.elementType),n.type=t,typeof t=="function")Zr(t)?(l=Ji(t,l),n.tag=1,n=If(null,n,t,l,a)):(n.tag=0,n=Gl(null,n,t,l,a));else{if(t!=null){var m=t.$$typeof;if(m===P){n.tag=11,n=bf(null,n,t,l,a);break t}else if(m===z){n.tag=14,n=Cf(null,n,t,l,a);break t}}throw n=Tt(t)||t,Error(o(306,n,""))}}return n;case 0:return Gl(t,n,n.type,n.pendingProps,a);case 1:return l=n.type,m=Ji(l,n.pendingProps),If(t,n,l,m,a);case 3:t:{if(D(n,n.stateNode.containerInfo),t===null)throw Error(o(387));l=n.pendingProps;var S=n.memoizedState;m=S.element,fl(t,n),go(n,l,null,a);var N=n.memoizedState;if(l=N.cache,hi(n,xe,l),l!==S.cache&&al(n,[xe],a,!0),mo(),l=N.element,S.isDehydrated)if(S={element:l,isDehydrated:!1,cache:N.cache},n.updateQueue.baseState=S,n.memoizedState=S,n.flags&256){n=Nf(t,n,l,a);break t}else if(l!==m){m=pn(Error(o(424)),n),lo(m),n=Nf(t,n,l,a);break t}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(pe=An(t.firstChild),Ue=n,jt=!0,di=null,yn=!0,a=xd(n,null,l,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Gi(),l===m){n=Jn(t,n,a);break t}Ge(t,n,l,a)}n=n.child}return n;case 26:return _a(t,n),t===null?(a=Xh(n.type,null,n.pendingProps,null))?n.memoizedState=a:jt||(a=n.type,t=n.pendingProps,l=qa(St.current).createElement(a),l[Fe]=n,l[Ke]=t,Oe(l,a,t),Ne(l),n.stateNode=l):n.memoizedState=Xh(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return E(n),t===null&&jt&&(l=n.stateNode=zh(n.type,n.pendingProps,St.current),Ue=n,yn=!0,m=pe,wi(n.type)?(xu=m,pe=An(l.firstChild)):pe=m),Ge(t,n,n.pendingProps.children,a),_a(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&jt&&((m=l=pe)&&(l=Ov(l,n.type,n.pendingProps,yn),l!==null?(n.stateNode=l,Ue=n,pe=An(l.firstChild),yn=!1,m=!0):m=!1),m||fi(n)),E(n),m=n.type,S=n.pendingProps,N=t!==null?t.memoizedProps:null,l=S.children,Su(m,S)?l=null:N!==null&&Su(m,N)&&(n.flags|=32),n.memoizedState!==null&&(m=Al(t,n,ev,null,null,a),Fo._currentValue=m),_a(t,n),Ge(t,n,l,a),n.child;case 6:return t===null&&jt&&((t=a=pe)&&(a=Vv(a,n.pendingProps,yn),a!==null?(n.stateNode=a,Ue=n,pe=null,t=!0):t=!1),t||fi(n)),null;case 13:return Df(t,n,a);case 4:return D(n,n.stateNode.containerInfo),l=n.pendingProps,t===null?n.child=Yi(n,null,l,a):Ge(t,n,l,a),n.child;case 11:return bf(t,n,n.type,n.pendingProps,a);case 7:return Ge(t,n,n.pendingProps,a),n.child;case 8:return Ge(t,n,n.pendingProps.children,a),n.child;case 12:return Ge(t,n,n.pendingProps.children,a),n.child;case 10:return l=n.pendingProps,hi(n,n.type,l.value),Ge(t,n,l.children,a),n.child;case 9:return m=n.type._context,l=n.pendingProps.children,Vi(n),m=He(m),l=l(m),n.flags|=1,Ge(t,n,l,a),n.child;case 14:return Cf(t,n,n.type,n.pendingProps,a);case 15:return xf(t,n,n.type,n.pendingProps,a);case 19:return kf(t,n,a);case 31:return uv(t,n,a);case 22:return wf(t,n,a,n.pendingProps);case 24:return Vi(n),l=He(xe),t===null?(m=ul(),m===null&&(m=de,S=rl(),m.pooledCache=S,S.refCount++,S!==null&&(m.pooledCacheLanes|=a),m=S),n.memoizedState={parent:l,cache:m},dl(n),hi(n,xe,m)):((t.lanes&a)!==0&&(fl(t,n),go(n,null,null,a),mo()),m=t.memoizedState,S=n.memoizedState,m.parent!==l?(m={parent:l,cache:l},n.memoizedState=m,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=m),hi(n,xe,l)):(l=S.cache,hi(n,xe,l),l!==m.cache&&al(n,[xe],a,!0))),Ge(t,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(o(156,n.tag))}function $n(t){t.flags|=4}function Jl(t,n,a,l,m){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(m&335544128)===m)if(t.stateNode.complete)t.flags|=8192;else if(lh())t.flags|=8192;else throw qi=fa,cl}else t.flags&=-16777217}function Ff(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Zh(n))if(lh())t.flags|=8192;else throw qi=fa,cl}function Ma(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Ce():536870912,t.lanes|=n,Ds|=n)}function Eo(t,n){if(!jt)switch(t.tailMode){case"hidden":n=t.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function me(t){var n=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(n)for(var m=t.child;m!==null;)a|=m.lanes|m.childLanes,l|=m.subtreeFlags&65011712,l|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)a|=m.lanes|m.childLanes,l|=m.subtreeFlags,l|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=l,t.childLanes=a,n}function dv(t,n,a){var l=n.pendingProps;switch(el(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(n),null;case 1:return me(n),null;case 3:return a=n.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),n.memoizedState.cache!==l&&(n.flags|=2048),qn(xe),b(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(As(n)?$n(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,il())),me(n),null;case 26:var m=n.type,S=n.memoizedState;return t===null?($n(n),S!==null?(me(n),Ff(n,S)):(me(n),Jl(n,m,null,l,a))):S?S!==t.memoizedState?($n(n),me(n),Ff(n,S)):(me(n),n.flags&=-16777217):(t=t.memoizedProps,t!==l&&$n(n),me(n),Jl(n,m,t,l,a)),null;case 27:if(w(n),a=St.current,m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&$n(n);else{if(!l){if(n.stateNode===null)throw Error(o(166));return me(n),null}t=Ct.current,As(n)?pd(n):(t=zh(m,l,a),n.stateNode=t,$n(n))}return me(n),null;case 5:if(w(n),m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==l&&$n(n);else{if(!l){if(n.stateNode===null)throw Error(o(166));return me(n),null}if(S=Ct.current,As(n))pd(n);else{var N=qa(St.current);switch(S){case 1:S=N.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:S=N.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":S=N.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":S=N.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":S=N.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof l.is=="string"?N.createElement("select",{is:l.is}):N.createElement("select"),l.multiple?S.multiple=!0:l.size&&(S.size=l.size);break;default:S=typeof l.is=="string"?N.createElement(m,{is:l.is}):N.createElement(m)}}S[Fe]=n,S[Ke]=l;t:for(N=n.child;N!==null;){if(N.tag===5||N.tag===6)S.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===n)break t;for(;N.sibling===null;){if(N.return===null||N.return===n)break t;N=N.return}N.sibling.return=N.return,N=N.sibling}n.stateNode=S;t:switch(Oe(S,m,l),m){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&$n(n)}}return me(n),Jl(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,a),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==l&&$n(n);else{if(typeof l!="string"&&n.stateNode===null)throw Error(o(166));if(t=St.current,As(n)){if(t=n.stateNode,a=n.memoizedProps,l=null,m=Ue,m!==null)switch(m.tag){case 27:case 5:l=m.memoizedProps}t[Fe]=n,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Dh(t.nodeValue,a)),t||fi(n,!0)}else t=qa(t).createTextNode(l),t[Fe]=n,n.stateNode=t}return me(n),null;case 31:if(a=n.memoizedState,t===null||t.memoizedState!==null){if(l=As(n),a!==null){if(t===null){if(!l)throw Error(o(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[Fe]=n}else Gi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;me(n),t=!1}else a=il(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return n.flags&256?(rn(n),n):(rn(n),null);if((n.flags&128)!==0)throw Error(o(558))}return me(n),null;case 13:if(l=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=As(n),l!==null&&l.dehydrated!==null){if(t===null){if(!m)throw Error(o(318));if(m=n.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));m[Fe]=n}else Gi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;me(n),m=!1}else m=il(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return n.flags&256?(rn(n),n):(rn(n),null)}return rn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=n.child,m=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(m=l.alternate.memoizedState.cachePool.pool),S=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(S=l.memoizedState.cachePool.pool),S!==m&&(l.flags|=2048)),a!==t&&a&&(n.child.flags|=8192),Ma(n,n.updateQueue),me(n),null);case 4:return b(),t===null&&mu(n.stateNode.containerInfo),me(n),null;case 10:return qn(n.type),me(n),null;case 19:if(rt(Ee),l=n.memoizedState,l===null)return me(n),null;if(m=(n.flags&128)!==0,S=l.rendering,S===null)if(m)Eo(l,!1);else{if(Te!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(S=ga(t),S!==null){for(n.flags|=128,Eo(l,!1),t=S.updateQueue,n.updateQueue=t,Ma(n,t),n.subtreeFlags=0,t=a,a=n.child;a!==null;)ud(a,t),a=a.sibling;return yt(Ee,Ee.current&1|2),jt&&Bn(n,l.treeForkCount),n.child}t=t.sibling}l.tail!==null&&vt()>ka&&(n.flags|=128,m=!0,Eo(l,!1),n.lanes=4194304)}else{if(!m)if(t=ga(S),t!==null){if(n.flags|=128,m=!0,t=t.updateQueue,n.updateQueue=t,Ma(n,t),Eo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!S.alternate&&!jt)return me(n),null}else 2*vt()-l.renderingStartTime>ka&&a!==536870912&&(n.flags|=128,m=!0,Eo(l,!1),n.lanes=4194304);l.isBackwards?(S.sibling=n.child,n.child=S):(t=l.last,t!==null?t.sibling=S:n.child=S,l.last=S)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=vt(),t.sibling=null,a=Ee.current,yt(Ee,m?a&1|2:a&1),jt&&Bn(n,l.treeForkCount),t):(me(n),null);case 22:case 23:return rn(n),gl(),l=n.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(n.flags|=8192):l&&(n.flags|=8192),l?(a&536870912)!==0&&(n.flags&128)===0&&(me(n),n.subtreeFlags&6&&(n.flags|=8192)):me(n),a=n.updateQueue,a!==null&&Ma(n,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==a&&(n.flags|=2048),t!==null&&rt(Bi),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),qn(xe),me(n),null;case 25:return null;case 30:return null}throw Error(o(156,n.tag))}function fv(t,n){switch(el(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return qn(xe),b(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return w(n),null;case 31:if(n.memoizedState!==null){if(rn(n),n.alternate===null)throw Error(o(340));Gi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(rn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(o(340));Gi()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return rt(Ee),null;case 4:return b(),null;case 10:return qn(n.type),null;case 22:case 23:return rn(n),gl(),t!==null&&rt(Bi),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return qn(xe),null;case 25:return null;default:return null}}function Uf(t,n){switch(el(n),n.tag){case 3:qn(xe),b();break;case 26:case 27:case 5:w(n);break;case 4:b();break;case 31:n.memoizedState!==null&&rn(n);break;case 13:rn(n);break;case 19:rt(Ee);break;case 10:qn(n.type);break;case 22:case 23:rn(n),gl(),t!==null&&rt(Bi);break;case 24:qn(xe)}}function bo(t,n){try{var a=n.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var m=l.next;a=m;do{if((a.tag&t)===t){l=void 0;var S=a.create,N=a.inst;l=S(),N.destroy=l}a=a.next}while(a!==m)}}catch(G){ae(n,n.return,G)}}function Ai(t,n,a){try{var l=n.updateQueue,m=l!==null?l.lastEffect:null;if(m!==null){var S=m.next;l=S;do{if((l.tag&t)===t){var N=l.inst,G=N.destroy;if(G!==void 0){N.destroy=void 0,m=n;var Z=a,dt=G;try{dt()}catch(At){ae(m,Z,At)}}}l=l.next}while(l!==S)}}catch(At){ae(n,n.return,At)}}function Hf(t){var n=t.updateQueue;if(n!==null){var a=t.stateNode;try{_d(n,a)}catch(l){ae(t,t.return,l)}}}function Gf(t,n,a){a.props=Ji(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ae(t,n,l)}}function Co(t,n){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(m){ae(t,n,m)}}function Pn(t,n){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(m){ae(t,n,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(m){ae(t,n,m)}else a.current=null}function Of(t){var n=t.type,a=t.memoizedProps,l=t.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(m){ae(t,t.return,m)}}function $l(t,n,a){try{var l=t.stateNode;kv(l,t.type,a,n),l[Ke]=n}catch(m){ae(t,t.return,m)}}function Vf(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&wi(t.type)||t.tag===4}function Kl(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||Vf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&wi(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ql(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(t),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Gn));else if(l!==4&&(l===27&&wi(t.type)&&(a=t.stateNode,n=null),t=t.child,t!==null))for(Ql(t,n,a),t=t.sibling;t!==null;)Ql(t,n,a),t=t.sibling}function Ia(t,n,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,n?a.insertBefore(t,n):a.appendChild(t);else if(l!==4&&(l===27&&wi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Ia(t,n,a),t=t.sibling;t!==null;)Ia(t,n,a),t=t.sibling}function Bf(t){var n=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,m=n.attributes;m.length;)n.removeAttributeNode(m[0]);Oe(n,l,a),n[Fe]=t,n[Ke]=a}catch(S){ae(t,t.return,S)}}var Kn=!1,Re=!1,Zl=!1,zf=typeof WeakSet=="function"?WeakSet:Set,De=null;function hv(t,n){if(t=t.containerInfo,vu=Za,t=td(t),qr(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else t:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var m=l.anchorOffset,S=l.focusNode;l=l.focusOffset;try{a.nodeType,S.nodeType}catch{a=null;break t}var N=0,G=-1,Z=-1,dt=0,At=0,bt=t,ft=null;e:for(;;){for(var ht;bt!==a||m!==0&&bt.nodeType!==3||(G=N+m),bt!==S||l!==0&&bt.nodeType!==3||(Z=N+l),bt.nodeType===3&&(N+=bt.nodeValue.length),(ht=bt.firstChild)!==null;)ft=bt,bt=ht;for(;;){if(bt===t)break e;if(ft===a&&++dt===m&&(G=N),ft===S&&++At===l&&(Z=N),(ht=bt.nextSibling)!==null)break;bt=ft,ft=bt.parentNode}bt=ht}a=G===-1||Z===-1?null:{start:G,end:Z}}else a=null}a=a||{start:0,end:0}}else a=null;for(Au={focusedElem:t,selectionRange:a},Za=!1,De=n;De!==null;)if(n=De,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,De=t;else for(;De!==null;){switch(n=De,S=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)m=t[a],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&S!==null){t=void 0,a=n,m=S.memoizedProps,S=S.memoizedState,l=a.stateNode;try{var Lt=Ji(a.type,m);t=l.getSnapshotBeforeUpdate(Lt,S),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ot){ae(a,a.return,Ot)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,a=t.nodeType,a===9)Eu(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Eu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=n.sibling,t!==null){t.return=n.return,De=t;break}De=n.return}}function qf(t,n,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Zn(t,a),l&4&&bo(5,a);break;case 1:if(Zn(t,a),l&4)if(t=a.stateNode,n===null)try{t.componentDidMount()}catch(N){ae(a,a.return,N)}else{var m=Ji(a.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(m,n,t.__reactInternalSnapshotBeforeUpdate)}catch(N){ae(a,a.return,N)}}l&64&&Hf(a),l&512&&Co(a,a.return);break;case 3:if(Zn(t,a),l&64&&(t=a.updateQueue,t!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{_d(t,n)}catch(N){ae(a,a.return,N)}}break;case 27:n===null&&l&4&&Bf(a);case 26:case 5:Zn(t,a),n===null&&l&4&&Of(a),l&512&&Co(a,a.return);break;case 12:Zn(t,a);break;case 31:Zn(t,a),l&4&&Jf(t,a);break;case 13:Zn(t,a),l&4&&$f(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Ev.bind(null,a),Bv(t,a))));break;case 22:if(l=a.memoizedState!==null||Kn,!l){n=n!==null&&n.memoizedState!==null||Re,m=Kn;var S=Re;Kn=l,(Re=n)&&!S?Wn(t,a,(a.subtreeFlags&8772)!==0):Zn(t,a),Kn=m,Re=S}break;case 30:break;default:Zn(t,a)}}function Yf(t){var n=t.alternate;n!==null&&(t.alternate=null,Yf(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&_r(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ye=null,Ze=!1;function Qn(t,n,a){for(a=a.child;a!==null;)Xf(t,n,a),a=a.sibling}function Xf(t,n,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Xt,a)}catch{}switch(a.tag){case 26:Re||Pn(a,n),Qn(t,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Re||Pn(a,n);var l=ye,m=Ze;wi(a.type)&&(ye=a.stateNode,Ze=!1),Qn(t,n,a),Lo(a.stateNode),ye=l,Ze=m;break;case 5:Re||Pn(a,n);case 6:if(l=ye,m=Ze,ye=null,Qn(t,n,a),ye=l,Ze=m,ye!==null)if(Ze)try{(ye.nodeType===9?ye.body:ye.nodeName==="HTML"?ye.ownerDocument.body:ye).removeChild(a.stateNode)}catch(S){ae(a,n,S)}else try{ye.removeChild(a.stateNode)}catch(S){ae(a,n,S)}break;case 18:ye!==null&&(Ze?(t=ye,Hh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Os(t)):Hh(ye,a.stateNode));break;case 4:l=ye,m=Ze,ye=a.stateNode.containerInfo,Ze=!0,Qn(t,n,a),ye=l,Ze=m;break;case 0:case 11:case 14:case 15:Ai(2,a,n),Re||Ai(4,a,n),Qn(t,n,a);break;case 1:Re||(Pn(a,n),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Gf(a,n,l)),Qn(t,n,a);break;case 21:Qn(t,n,a);break;case 22:Re=(l=Re)||a.memoizedState!==null,Qn(t,n,a),Re=l;break;default:Qn(t,n,a)}}function Jf(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Os(t)}catch(a){ae(n,n.return,a)}}}function $f(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Os(t)}catch(a){ae(n,n.return,a)}}function pv(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new zf),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new zf),n;default:throw Error(o(435,t.tag))}}function Na(t,n){var a=pv(t);n.forEach(function(l){if(!a.has(l)){a.add(l);var m=bv.bind(null,t,l);l.then(m,m)}})}function We(t,n){var a=n.deletions;if(a!==null)for(var l=0;l<a.length;l++){var m=a[l],S=t,N=n,G=N;t:for(;G!==null;){switch(G.tag){case 27:if(wi(G.type)){ye=G.stateNode,Ze=!1;break t}break;case 5:ye=G.stateNode,Ze=!1;break t;case 3:case 4:ye=G.stateNode.containerInfo,Ze=!0;break t}G=G.return}if(ye===null)throw Error(o(160));Xf(S,N,m),ye=null,Ze=!1,S=m.alternate,S!==null&&(S.return=null),m.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Kf(n,t),n=n.sibling}var xn=null;function Kf(t,n){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:We(n,t),je(t),l&4&&(Ai(3,t,t.return),bo(3,t),Ai(5,t,t.return));break;case 1:We(n,t),je(t),l&512&&(Re||a===null||Pn(a,a.return)),l&64&&Kn&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var m=xn;if(We(n,t),je(t),l&512&&(Re||a===null||Pn(a,a.return)),l&4){var S=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){t:{l=t.type,a=t.memoizedProps,m=m.ownerDocument||m;e:switch(l){case"title":S=m.getElementsByTagName("title")[0],(!S||S[Qs]||S[Fe]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=m.createElement(l),m.head.insertBefore(S,m.querySelector("head > title"))),Oe(S,l,a),S[Fe]=t,Ne(S),l=S;break t;case"link":var N=Kh("link","href",m).get(l+(a.href||""));if(N){for(var G=0;G<N.length;G++)if(S=N[G],S.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&S.getAttribute("rel")===(a.rel==null?null:a.rel)&&S.getAttribute("title")===(a.title==null?null:a.title)&&S.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){N.splice(G,1);break e}}S=m.createElement(l),Oe(S,l,a),m.head.appendChild(S);break;case"meta":if(N=Kh("meta","content",m).get(l+(a.content||""))){for(G=0;G<N.length;G++)if(S=N[G],S.getAttribute("content")===(a.content==null?null:""+a.content)&&S.getAttribute("name")===(a.name==null?null:a.name)&&S.getAttribute("property")===(a.property==null?null:a.property)&&S.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&S.getAttribute("charset")===(a.charSet==null?null:a.charSet)){N.splice(G,1);break e}}S=m.createElement(l),Oe(S,l,a),m.head.appendChild(S);break;default:throw Error(o(468,l))}S[Fe]=t,Ne(S),l=S}t.stateNode=l}else Qh(m,t.type,t.stateNode);else t.stateNode=$h(m,l,t.memoizedProps);else S!==l?(S===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):S.count--,l===null?Qh(m,t.type,t.stateNode):$h(m,l,t.memoizedProps)):l===null&&t.stateNode!==null&&$l(t,t.memoizedProps,a.memoizedProps)}break;case 27:We(n,t),je(t),l&512&&(Re||a===null||Pn(a,a.return)),a!==null&&l&4&&$l(t,t.memoizedProps,a.memoizedProps);break;case 5:if(We(n,t),je(t),l&512&&(Re||a===null||Pn(a,a.return)),t.flags&32){m=t.stateNode;try{us(m,"")}catch(Lt){ae(t,t.return,Lt)}}l&4&&t.stateNode!=null&&(m=t.memoizedProps,$l(t,m,a!==null?a.memoizedProps:m)),l&1024&&(Zl=!0);break;case 6:if(We(n,t),je(t),l&4){if(t.stateNode===null)throw Error(o(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(Lt){ae(t,t.return,Lt)}}break;case 3:if(Ja=null,m=xn,xn=Ya(n.containerInfo),We(n,t),xn=m,je(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Os(n.containerInfo)}catch(Lt){ae(t,t.return,Lt)}Zl&&(Zl=!1,Qf(t));break;case 4:l=xn,xn=Ya(t.stateNode.containerInfo),We(n,t),je(t),xn=l;break;case 12:We(n,t),je(t);break;case 31:We(n,t),je(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Na(t,l)));break;case 13:We(n,t),je(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(La=vt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Na(t,l)));break;case 22:m=t.memoizedState!==null;var Z=a!==null&&a.memoizedState!==null,dt=Kn,At=Re;if(Kn=dt||m,Re=At||Z,We(n,t),Re=At,Kn=dt,je(t),l&8192)t:for(n=t.stateNode,n._visibility=m?n._visibility&-2:n._visibility|1,m&&(a===null||Z||Kn||Re||$i(t)),a=null,n=t;;){if(n.tag===5||n.tag===26){if(a===null){Z=a=n;try{if(S=Z.stateNode,m)N=S.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{G=Z.stateNode;var bt=Z.memoizedProps.style,ft=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;G.style.display=ft==null||typeof ft=="boolean"?"":(""+ft).trim()}}catch(Lt){ae(Z,Z.return,Lt)}}}else if(n.tag===6){if(a===null){Z=n;try{Z.stateNode.nodeValue=m?"":Z.memoizedProps}catch(Lt){ae(Z,Z.return,Lt)}}}else if(n.tag===18){if(a===null){Z=n;try{var ht=Z.stateNode;m?Gh(ht,!0):Gh(Z.stateNode,!1)}catch(Lt){ae(Z,Z.return,Lt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Na(t,a))));break;case 19:We(n,t),je(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Na(t,l)));break;case 30:break;case 21:break;default:We(n,t),je(t)}}function je(t){var n=t.flags;if(n&2){try{for(var a,l=t.return;l!==null;){if(Vf(l)){a=l;break}l=l.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var m=a.stateNode,S=Kl(t);Ia(t,S,m);break;case 5:var N=a.stateNode;a.flags&32&&(us(N,""),a.flags&=-33);var G=Kl(t);Ia(t,G,N);break;case 3:case 4:var Z=a.stateNode.containerInfo,dt=Kl(t);Ql(t,dt,Z);break;default:throw Error(o(161))}}catch(At){ae(t,t.return,At)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Qf(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Qf(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Zn(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)qf(t,n.alternate,n),n=n.sibling}function $i(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Ai(4,n,n.return),$i(n);break;case 1:Pn(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Gf(n,n.return,a),$i(n);break;case 27:Lo(n.stateNode);case 26:case 5:Pn(n,n.return),$i(n);break;case 22:n.memoizedState===null&&$i(n);break;case 30:$i(n);break;default:$i(n)}t=t.sibling}}function Wn(t,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var l=n.alternate,m=t,S=n,N=S.flags;switch(S.tag){case 0:case 11:case 15:Wn(m,S,a),bo(4,S);break;case 1:if(Wn(m,S,a),l=S,m=l.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(dt){ae(l,l.return,dt)}if(l=S,m=l.updateQueue,m!==null){var G=l.stateNode;try{var Z=m.shared.hiddenCallbacks;if(Z!==null)for(m.shared.hiddenCallbacks=null,m=0;m<Z.length;m++)wd(Z[m],G)}catch(dt){ae(l,l.return,dt)}}a&&N&64&&Hf(S),Co(S,S.return);break;case 27:Bf(S);case 26:case 5:Wn(m,S,a),a&&l===null&&N&4&&Of(S),Co(S,S.return);break;case 12:Wn(m,S,a);break;case 31:Wn(m,S,a),a&&N&4&&Jf(m,S);break;case 13:Wn(m,S,a),a&&N&4&&$f(m,S);break;case 22:S.memoizedState===null&&Wn(m,S,a),Co(S,S.return);break;case 30:break;default:Wn(m,S,a)}n=n.sibling}}function Wl(t,n){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&uo(a))}function jl(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&uo(t))}function wn(t,n,a,l){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Zf(t,n,a,l),n=n.sibling}function Zf(t,n,a,l){var m=n.flags;switch(n.tag){case 0:case 11:case 15:wn(t,n,a,l),m&2048&&bo(9,n);break;case 1:wn(t,n,a,l);break;case 3:wn(t,n,a,l),m&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&uo(t)));break;case 12:if(m&2048){wn(t,n,a,l),t=n.stateNode;try{var S=n.memoizedProps,N=S.id,G=S.onPostCommit;typeof G=="function"&&G(N,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Z){ae(n,n.return,Z)}}else wn(t,n,a,l);break;case 31:wn(t,n,a,l);break;case 13:wn(t,n,a,l);break;case 23:break;case 22:S=n.stateNode,N=n.alternate,n.memoizedState!==null?S._visibility&2?wn(t,n,a,l):xo(t,n):S._visibility&2?wn(t,n,a,l):(S._visibility|=2,Ms(t,n,a,l,(n.subtreeFlags&10256)!==0||!1)),m&2048&&Wl(N,n);break;case 24:wn(t,n,a,l),m&2048&&jl(n.alternate,n);break;default:wn(t,n,a,l)}}function Ms(t,n,a,l,m){for(m=m&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var S=t,N=n,G=a,Z=l,dt=N.flags;switch(N.tag){case 0:case 11:case 15:Ms(S,N,G,Z,m),bo(8,N);break;case 23:break;case 22:var At=N.stateNode;N.memoizedState!==null?At._visibility&2?Ms(S,N,G,Z,m):xo(S,N):(At._visibility|=2,Ms(S,N,G,Z,m)),m&&dt&2048&&Wl(N.alternate,N);break;case 24:Ms(S,N,G,Z,m),m&&dt&2048&&jl(N.alternate,N);break;default:Ms(S,N,G,Z,m)}n=n.sibling}}function xo(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=t,l=n,m=l.flags;switch(l.tag){case 22:xo(a,l),m&2048&&Wl(l.alternate,l);break;case 24:xo(a,l),m&2048&&jl(l.alternate,l);break;default:xo(a,l)}n=n.sibling}}var wo=8192;function Is(t,n,a){if(t.subtreeFlags&wo)for(t=t.child;t!==null;)Wf(t,n,a),t=t.sibling}function Wf(t,n,a){switch(t.tag){case 26:Is(t,n,a),t.flags&wo&&t.memoizedState!==null&&t0(a,xn,t.memoizedState,t.memoizedProps);break;case 5:Is(t,n,a);break;case 3:case 4:var l=xn;xn=Ya(t.stateNode.containerInfo),Is(t,n,a),xn=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=wo,wo=16777216,Is(t,n,a),wo=l):Is(t,n,a));break;default:Is(t,n,a)}}function jf(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function _o(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];De=l,eh(l,t)}jf(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)th(t),t=t.sibling}function th(t){switch(t.tag){case 0:case 11:case 15:_o(t),t.flags&2048&&Ai(9,t,t.return);break;case 3:_o(t);break;case 12:_o(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Da(t)):_o(t);break;default:_o(t)}}function Da(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var l=n[a];De=l,eh(l,t)}jf(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Ai(8,n,n.return),Da(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Da(n));break;default:Da(n)}t=t.sibling}}function eh(t,n){for(;De!==null;){var a=De;switch(a.tag){case 0:case 11:case 15:Ai(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:uo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,De=l;else t:for(a=t;De!==null;){l=De;var m=l.sibling,S=l.return;if(Yf(l),l===a){De=null;break t}if(m!==null){m.return=S,De=m;break t}De=S}}}var mv={getCacheForType:function(t){var n=He(xe),a=n.data.get(t);return a===void 0&&(a=t(),n.data.set(t,a)),a},cacheSignal:function(){return He(xe).controller.signal}},gv=typeof WeakMap=="function"?WeakMap:Map,ie=0,de=null,Kt=null,Zt=0,oe=0,ln=null,Si=!1,Ns=!1,tu=!1,jn=0,Te=0,Ti=0,Ki=0,eu=0,un=0,Ds=0,Ro=null,tn=null,nu=!1,La=0,nh=0,ka=1/0,Pa=null,Ei=null,Ie=0,bi=null,Ls=null,ti=0,iu=0,su=null,ih=null,Mo=0,ou=null;function cn(){return(ie&2)!==0&&Zt!==0?Zt&-Zt:B.T!==null?du():vc()}function sh(){if(un===0)if((Zt&536870912)===0||jt){var t=ce;ce<<=1,(ce&3932160)===0&&(ce=262144),un=t}else un=536870912;return t=an.current,t!==null&&(t.flags|=32),un}function en(t,n,a){(t===de&&(oe===2||oe===9)||t.cancelPendingCommit!==null)&&(ks(t,0),Ci(t,Zt,un,!1)),nn(t,a),((ie&2)===0||t!==de)&&(t===de&&((ie&2)===0&&(Ki|=a),Te===4&&Ci(t,Zt,un,!1)),Fn(t))}function oh(t,n,a){if((ie&6)!==0)throw Error(o(327));var l=!a&&(n&127)===0&&(n&t.expiredLanes)===0||Nn(t,n),m=l?Av(t,n):ru(t,n,!0),S=l;do{if(m===0){Ns&&!l&&Ci(t,n,0,!1);break}else{if(a=t.current.alternate,S&&!yv(a)){m=ru(t,n,!1),S=!1;continue}if(m===2){if(S=n,t.errorRecoveryDisabledLanes&S)var N=0;else N=t.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){n=N;t:{var G=t;m=Ro;var Z=G.current.memoizedState.isDehydrated;if(Z&&(ks(G,N).flags|=256),N=ru(G,N,!1),N!==2){if(tu&&!Z){G.errorRecoveryDisabledLanes|=S,Ki|=S,m=4;break t}S=tn,tn=m,S!==null&&(tn===null?tn=S:tn.push.apply(tn,S))}m=N}if(S=!1,m!==2)continue}}if(m===1){ks(t,0),Ci(t,n,0,!0);break}t:{switch(l=t,S=m,S){case 0:case 1:throw Error(o(345));case 4:if((n&4194048)!==n)break;case 6:Ci(l,n,un,!Si);break t;case 2:tn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((n&62914560)===n&&(m=La+300-vt(),10<m)){if(Ci(l,n,un,!Si),Un(l,0,!0)!==0)break t;ti=n,l.timeoutHandle=Fh(ah.bind(null,l,a,tn,Pa,nu,n,un,Ki,Ds,Si,S,"Throttled",-0,0),m);break t}ah(l,a,tn,Pa,nu,n,un,Ki,Ds,Si,S,null,-0,0)}}break}while(!0);Fn(t)}function ah(t,n,a,l,m,S,N,G,Z,dt,At,bt,ft,ht){if(t.timeoutHandle=-1,bt=n.subtreeFlags,bt&8192||(bt&16785408)===16785408){bt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},Wf(n,S,bt);var Lt=(S&62914560)===S?La-vt():(S&4194048)===S?nh-vt():0;if(Lt=e0(bt,Lt),Lt!==null){ti=S,t.cancelPendingCommit=Lt(ph.bind(null,t,n,S,a,l,m,N,G,Z,At,bt,null,ft,ht)),Ci(t,S,N,!dt);return}}ph(t,n,S,a,l,m,N,G,Z)}function yv(t){for(var n=t;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var m=a[l],S=m.getSnapshot;m=m.value;try{if(!sn(S(),m))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ci(t,n,a,l){n&=~eu,n&=~Ki,t.suspendedLanes|=n,t.pingedLanes&=~n,l&&(t.warmLanes|=n),l=t.expirationTimes;for(var m=n;0<m;){var S=31-se(m),N=1<<S;l[S]=-1,m&=~N}a!==0&&ve(t,a,n)}function Fa(){return(ie&6)===0?(Io(0),!1):!0}function au(){if(Kt!==null){if(oe===0)var t=Kt.return;else t=Kt,zn=Oi=null,El(t),Cs=null,fo=0,t=Kt;for(;t!==null;)Uf(t.alternate,t),t=t.return;Kt=null}}function ks(t,n){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Uv(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),ti=0,au(),de=t,Kt=a=Vn(t.current,null),Zt=n,oe=0,ln=null,Si=!1,Ns=Nn(t,n),tu=!1,Ds=un=eu=Ki=Ti=Te=0,tn=Ro=null,nu=!1,(n&8)!==0&&(n|=n&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=n;0<l;){var m=31-se(l),S=1<<m;n|=t[m],l&=~S}return jn=n,ia(),a}function rh(t,n){qt=null,B.H=So,n===bs||n===da?(n=Ed(),oe=3):n===cl?(n=Ed(),oe=4):oe=n===Hl?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ln=n,Kt===null&&(Te=1,xa(t,pn(n,t.current)))}function lh(){var t=an.current;return t===null?!0:(Zt&4194048)===Zt?vn===null:(Zt&62914560)===Zt||(Zt&536870912)!==0?t===vn:!1}function uh(){var t=B.H;return B.H=So,t===null?So:t}function ch(){var t=B.A;return B.A=mv,t}function Ua(){Te=4,Si||(Zt&4194048)!==Zt&&an.current!==null||(Ns=!0),(Ti&134217727)===0&&(Ki&134217727)===0||de===null||Ci(de,Zt,un,!1)}function ru(t,n,a){var l=ie;ie|=2;var m=uh(),S=ch();(de!==t||Zt!==n)&&(Pa=null,ks(t,n)),n=!1;var N=Te;t:do try{if(oe!==0&&Kt!==null){var G=Kt,Z=ln;switch(oe){case 8:au(),N=6;break t;case 3:case 2:case 9:case 6:an.current===null&&(n=!0);var dt=oe;if(oe=0,ln=null,Ps(t,G,Z,dt),a&&Ns){N=0;break t}break;default:dt=oe,oe=0,ln=null,Ps(t,G,Z,dt)}}vv(),N=Te;break}catch(At){rh(t,At)}while(!0);return n&&t.shellSuspendCounter++,zn=Oi=null,ie=l,B.H=m,B.A=S,Kt===null&&(de=null,Zt=0,ia()),N}function vv(){for(;Kt!==null;)dh(Kt)}function Av(t,n){var a=ie;ie|=2;var l=uh(),m=ch();de!==t||Zt!==n?(Pa=null,ka=vt()+500,ks(t,n)):Ns=Nn(t,n);t:do try{if(oe!==0&&Kt!==null){n=Kt;var S=ln;e:switch(oe){case 1:oe=0,ln=null,Ps(t,n,S,1);break;case 2:case 9:if(Sd(S)){oe=0,ln=null,fh(n);break}n=function(){oe!==2&&oe!==9||de!==t||(oe=7),Fn(t)},S.then(n,n);break t;case 3:oe=7;break t;case 4:oe=5;break t;case 7:Sd(S)?(oe=0,ln=null,fh(n)):(oe=0,ln=null,Ps(t,n,S,7));break;case 5:var N=null;switch(Kt.tag){case 26:N=Kt.memoizedState;case 5:case 27:var G=Kt;if(N?Zh(N):G.stateNode.complete){oe=0,ln=null;var Z=G.sibling;if(Z!==null)Kt=Z;else{var dt=G.return;dt!==null?(Kt=dt,Ha(dt)):Kt=null}break e}}oe=0,ln=null,Ps(t,n,S,5);break;case 6:oe=0,ln=null,Ps(t,n,S,6);break;case 8:au(),Te=6;break t;default:throw Error(o(462))}}Sv();break}catch(At){rh(t,At)}while(!0);return zn=Oi=null,B.H=l,B.A=m,ie=a,Kt!==null?0:(de=null,Zt=0,ia(),Te)}function Sv(){for(;Kt!==null&&!Y();)dh(Kt)}function dh(t){var n=Pf(t.alternate,t,jn);t.memoizedProps=t.pendingProps,n===null?Ha(t):Kt=n}function fh(t){var n=t,a=n.alternate;switch(n.tag){case 15:case 0:n=Mf(a,n,n.pendingProps,n.type,void 0,Zt);break;case 11:n=Mf(a,n,n.pendingProps,n.type.render,n.ref,Zt);break;case 5:El(n);default:Uf(a,n),n=Kt=ud(n,jn),n=Pf(a,n,jn)}t.memoizedProps=t.pendingProps,n===null?Ha(t):Kt=n}function Ps(t,n,a,l){zn=Oi=null,El(n),Cs=null,fo=0;var m=n.return;try{if(lv(t,m,n,a,Zt)){Te=1,xa(t,pn(a,t.current)),Kt=null;return}}catch(S){if(m!==null)throw Kt=m,S;Te=1,xa(t,pn(a,t.current)),Kt=null;return}n.flags&32768?(jt||l===1?t=!0:Ns||(Zt&536870912)!==0?t=!1:(Si=t=!0,(l===2||l===9||l===3||l===6)&&(l=an.current,l!==null&&l.tag===13&&(l.flags|=16384))),hh(n,t)):Ha(n)}function Ha(t){var n=t;do{if((n.flags&32768)!==0){hh(n,Si);return}t=n.return;var a=dv(n.alternate,n,jn);if(a!==null){Kt=a;return}if(n=n.sibling,n!==null){Kt=n;return}Kt=n=t}while(n!==null);Te===0&&(Te=5)}function hh(t,n){do{var a=fv(t.alternate,t);if(a!==null){a.flags&=32767,Kt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(t=t.sibling,t!==null)){Kt=t;return}Kt=t=a}while(t!==null);Te=6,Kt=null}function ph(t,n,a,l,m,S,N,G,Z){t.cancelPendingCommit=null;do Ga();while(Ie!==0);if((ie&6)!==0)throw Error(o(327));if(n!==null){if(n===t.current)throw Error(o(177));if(S=n.lanes|n.childLanes,S|=Kr,ai(t,a,S,N,G,Z),t===de&&(Kt=de=null,Zt=0),Ls=n,bi=t,ti=a,iu=S,su=m,ih=l,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Cv(Nt,function(){return Ah(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,m=et.p,et.p=2,N=ie,ie|=4;try{hv(t,n,a)}finally{ie=N,et.p=m,B.T=l}}Ie=1,mh(),gh(),yh()}}function mh(){if(Ie===1){Ie=0;var t=bi,n=Ls,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var l=et.p;et.p=2;var m=ie;ie|=4;try{Kf(n,t);var S=Au,N=td(t.containerInfo),G=S.focusedElem,Z=S.selectionRange;if(N!==G&&G&&G.ownerDocument&&jc(G.ownerDocument.documentElement,G)){if(Z!==null&&qr(G)){var dt=Z.start,At=Z.end;if(At===void 0&&(At=dt),"selectionStart"in G)G.selectionStart=dt,G.selectionEnd=Math.min(At,G.value.length);else{var bt=G.ownerDocument||document,ft=bt&&bt.defaultView||window;if(ft.getSelection){var ht=ft.getSelection(),Lt=G.textContent.length,Ot=Math.min(Z.start,Lt),ue=Z.end===void 0?Ot:Math.min(Z.end,Lt);!ht.extend&&Ot>ue&&(N=ue,ue=Ot,Ot=N);var at=Wc(G,Ot),nt=Wc(G,ue);if(at&&nt&&(ht.rangeCount!==1||ht.anchorNode!==at.node||ht.anchorOffset!==at.offset||ht.focusNode!==nt.node||ht.focusOffset!==nt.offset)){var ct=bt.createRange();ct.setStart(at.node,at.offset),ht.removeAllRanges(),Ot>ue?(ht.addRange(ct),ht.extend(nt.node,nt.offset)):(ct.setEnd(nt.node,nt.offset),ht.addRange(ct))}}}}for(bt=[],ht=G;ht=ht.parentNode;)ht.nodeType===1&&bt.push({element:ht,left:ht.scrollLeft,top:ht.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<bt.length;G++){var Et=bt[G];Et.element.scrollLeft=Et.left,Et.element.scrollTop=Et.top}}Za=!!vu,Au=vu=null}finally{ie=m,et.p=l,B.T=a}}t.current=n,Ie=2}}function gh(){if(Ie===2){Ie=0;var t=bi,n=Ls,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var l=et.p;et.p=2;var m=ie;ie|=4;try{qf(t,n.alternate,n)}finally{ie=m,et.p=l,B.T=a}}Ie=3}}function yh(){if(Ie===4||Ie===3){Ie=0,Q();var t=bi,n=Ls,a=ti,l=ih;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ie=5:(Ie=0,Ls=bi=null,vh(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&(Ei=null),xr(a),n=n.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Xt,n,void 0,(n.current.flags&128)===128)}catch{}if(l!==null){n=B.T,m=et.p,et.p=2,B.T=null;try{for(var S=t.onRecoverableError,N=0;N<l.length;N++){var G=l[N];S(G.value,{componentStack:G.stack})}}finally{B.T=n,et.p=m}}(ti&3)!==0&&Ga(),Fn(t),m=t.pendingLanes,(a&261930)!==0&&(m&42)!==0?t===ou?Mo++:(Mo=0,ou=t):Mo=0,Io(0)}}function vh(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,uo(n)))}function Ga(){return mh(),gh(),yh(),Ah()}function Ah(){if(Ie!==5)return!1;var t=bi,n=iu;iu=0;var a=xr(ti),l=B.T,m=et.p;try{et.p=32>a?32:a,B.T=null,a=su,su=null;var S=bi,N=ti;if(Ie=0,Ls=bi=null,ti=0,(ie&6)!==0)throw Error(o(331));var G=ie;if(ie|=4,th(S.current),Zf(S,S.current,N,a),ie=G,Io(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Xt,S)}catch{}return!0}finally{et.p=m,B.T=l,vh(t,n)}}function Sh(t,n,a){n=pn(a,n),n=Ul(t.stateNode,n,2),t=gi(t,n,2),t!==null&&(nn(t,2),Fn(t))}function ae(t,n,a){if(t.tag===3)Sh(t,t,a);else for(;n!==null;){if(n.tag===3){Sh(n,t,a);break}else if(n.tag===1){var l=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Ei===null||!Ei.has(l))){t=pn(a,t),a=Tf(2),l=gi(n,a,2),l!==null&&(Ef(a,l,n,t),nn(l,2),Fn(l));break}}n=n.return}}function lu(t,n,a){var l=t.pingCache;if(l===null){l=t.pingCache=new gv;var m=new Set;l.set(n,m)}else m=l.get(n),m===void 0&&(m=new Set,l.set(n,m));m.has(a)||(tu=!0,m.add(a),t=Tv.bind(null,t,n,a),n.then(t,t))}function Tv(t,n,a){var l=t.pingCache;l!==null&&l.delete(n),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,de===t&&(Zt&a)===a&&(Te===4||Te===3&&(Zt&62914560)===Zt&&300>vt()-La?(ie&2)===0&&ks(t,0):eu|=a,Ds===Zt&&(Ds=0)),Fn(t)}function Th(t,n){n===0&&(n=Ce()),t=Ui(t,n),t!==null&&(nn(t,n),Fn(t))}function Ev(t){var n=t.memoizedState,a=0;n!==null&&(a=n.retryLane),Th(t,a)}function bv(t,n){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,m=t.memoizedState;m!==null&&(a=m.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(n),Th(t,a)}function Cv(t,n){return st(t,n)}var Oa=null,Fs=null,uu=!1,Va=!1,cu=!1,xi=0;function Fn(t){t!==Fs&&t.next===null&&(Fs===null?Oa=Fs=t:Fs=Fs.next=t),Va=!0,uu||(uu=!0,wv())}function Io(t,n){if(!cu&&Va){cu=!0;do for(var a=!1,l=Oa;l!==null;){if(t!==0){var m=l.pendingLanes;if(m===0)var S=0;else{var N=l.suspendedLanes,G=l.pingedLanes;S=(1<<31-se(42|t)+1)-1,S&=m&~(N&~G),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(a=!0,xh(l,S))}else S=Zt,S=Un(l,l===de?S:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(S&3)===0||Nn(l,S)||(a=!0,xh(l,S));l=l.next}while(a);cu=!1}}function xv(){Eh()}function Eh(){Va=uu=!1;var t=0;xi!==0&&Fv()&&(t=xi);for(var n=vt(),a=null,l=Oa;l!==null;){var m=l.next,S=bh(l,n);S===0?(l.next=null,a===null?Oa=m:a.next=m,m===null&&(Fs=a)):(a=l,(t!==0||(S&3)!==0)&&(Va=!0)),l=m}Ie!==0&&Ie!==5||Io(t),xi!==0&&(xi=0)}function bh(t,n){for(var a=t.suspendedLanes,l=t.pingedLanes,m=t.expirationTimes,S=t.pendingLanes&-62914561;0<S;){var N=31-se(S),G=1<<N,Z=m[N];Z===-1?((G&a)===0||(G&l)!==0)&&(m[N]=Pe(G,n)):Z<=n&&(t.expiredLanes|=G),S&=~G}if(n=de,a=Zt,a=Un(t,t===n?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===n&&(oe===2||oe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&tt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Nn(t,a)){if(n=a&-a,n===t.callbackPriority)return n;switch(l!==null&&tt(l),xr(a)){case 2:case 8:a=Dt;break;case 32:a=Nt;break;case 268435456:a=kt;break;default:a=Nt}return l=Ch.bind(null,t),a=st(a,l),t.callbackPriority=n,t.callbackNode=a,n}return l!==null&&l!==null&&tt(l),t.callbackPriority=2,t.callbackNode=null,2}function Ch(t,n){if(Ie!==0&&Ie!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Ga()&&t.callbackNode!==a)return null;var l=Zt;return l=Un(t,t===de?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(oh(t,l,n),bh(t,vt()),t.callbackNode!=null&&t.callbackNode===a?Ch.bind(null,t):null)}function xh(t,n){if(Ga())return null;oh(t,n,!0)}function wv(){Hv(function(){(ie&6)!==0?st(Rt,xv):Eh()})}function du(){if(xi===0){var t=Ts;t===0&&(t=fe,fe<<=1,(fe&261888)===0&&(fe=256)),xi=t}return xi}function wh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ko(""+t)}function _h(t,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,t.id&&a.setAttribute("form",t.id),n.parentNode.insertBefore(a,n),t=new FormData(t),a.parentNode.removeChild(a),t}function _v(t,n,a,l,m){if(n==="submit"&&a&&a.stateNode===m){var S=wh((m[Ke]||null).action),N=l.submitter;N&&(n=(n=N[Ke]||null)?wh(n.formAction):N.getAttribute("formAction"),n!==null&&(S=n,N=null));var G=new jo("action","action",null,l,m);t.push({event:G,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(xi!==0){var Z=N?_h(m,N):new FormData(m);Nl(a,{pending:!0,data:Z,method:m.method,action:S},null,Z)}}else typeof S=="function"&&(G.preventDefault(),Z=N?_h(m,N):new FormData(m),Nl(a,{pending:!0,data:Z,method:m.method,action:S},S,Z))},currentTarget:m}]})}}for(var fu=0;fu<$r.length;fu++){var hu=$r[fu],Rv=hu.toLowerCase(),Mv=hu[0].toUpperCase()+hu.slice(1);Cn(Rv,"on"+Mv)}Cn(id,"onAnimationEnd"),Cn(sd,"onAnimationIteration"),Cn(od,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(Yy,"onTransitionRun"),Cn(Xy,"onTransitionStart"),Cn(Jy,"onTransitionCancel"),Cn(ad,"onTransitionEnd"),rs("onMouseEnter",["mouseout","mouseover"]),rs("onMouseLeave",["mouseout","mouseover"]),rs("onPointerEnter",["pointerout","pointerover"]),rs("onPointerLeave",["pointerout","pointerover"]),Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Li("onBeforeInput",["compositionend","keypress","textInput","paste"]),Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Iv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(No));function Rh(t,n){n=(n&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],m=l.event;l=l.listeners;t:{var S=void 0;if(n)for(var N=l.length-1;0<=N;N--){var G=l[N],Z=G.instance,dt=G.currentTarget;if(G=G.listener,Z!==S&&m.isPropagationStopped())break t;S=G,m.currentTarget=dt;try{S(m)}catch(At){na(At)}m.currentTarget=null,S=Z}else for(N=0;N<l.length;N++){if(G=l[N],Z=G.instance,dt=G.currentTarget,G=G.listener,Z!==S&&m.isPropagationStopped())break t;S=G,m.currentTarget=dt;try{S(m)}catch(At){na(At)}m.currentTarget=null,S=Z}}}}function Qt(t,n){var a=n[wr];a===void 0&&(a=n[wr]=new Set);var l=t+"__bubble";a.has(l)||(Mh(n,t,2,!1),a.add(l))}function pu(t,n,a){var l=0;n&&(l|=4),Mh(a,t,l,n)}var Ba="_reactListening"+Math.random().toString(36).slice(2);function mu(t){if(!t[Ba]){t[Ba]=!0,Tc.forEach(function(a){a!=="selectionchange"&&(Iv.has(a)||pu(a,!1,t),pu(a,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Ba]||(n[Ba]=!0,pu("selectionchange",!1,n))}}function Mh(t,n,a,l){switch(sp(n)){case 2:var m=s0;break;case 8:m=o0;break;default:m=Iu}a=m.bind(null,n,a,t),m=void 0,!Pr||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),l?m!==void 0?t.addEventListener(n,a,{capture:!0,passive:m}):t.addEventListener(n,a,!0):m!==void 0?t.addEventListener(n,a,{passive:m}):t.addEventListener(n,a,!1)}function gu(t,n,a,l,m){var S=l;if((n&1)===0&&(n&2)===0&&l!==null)t:for(;;){if(l===null)return;var N=l.tag;if(N===3||N===4){var G=l.stateNode.containerInfo;if(G===m)break;if(N===4)for(N=l.return;N!==null;){var Z=N.tag;if((Z===3||Z===4)&&N.stateNode.containerInfo===m)return;N=N.return}for(;G!==null;){if(N=ss(G),N===null)return;if(Z=N.tag,Z===5||Z===6||Z===26||Z===27){l=S=N;continue t}G=G.parentNode}}l=l.return}Lc(function(){var dt=S,At=Lr(a),bt=[];t:{var ft=rd.get(t);if(ft!==void 0){var ht=jo,Lt=t;switch(t){case"keypress":if(Zo(a)===0)break t;case"keydown":case"keyup":ht=by;break;case"focusin":Lt="focus",ht=Gr;break;case"focusout":Lt="blur",ht=Gr;break;case"beforeblur":case"afterblur":ht=Gr;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=Fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=dy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=wy;break;case id:case sd:case od:ht=py;break;case ad:ht=Ry;break;case"scroll":case"scrollend":ht=uy;break;case"wheel":ht=Iy;break;case"copy":case"cut":case"paste":ht=gy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=Hc;break;case"toggle":case"beforetoggle":ht=Dy}var Ot=(n&4)!==0,ue=!Ot&&(t==="scroll"||t==="scrollend"),at=Ot?ft!==null?ft+"Capture":null:ft;Ot=[];for(var nt=dt,ct;nt!==null;){var Et=nt;if(ct=Et.stateNode,Et=Et.tag,Et!==5&&Et!==26&&Et!==27||ct===null||at===null||(Et=Ws(nt,at),Et!=null&&Ot.push(Do(nt,Et,ct))),ue)break;nt=nt.return}0<Ot.length&&(ft=new ht(ft,Lt,null,a,At),bt.push({event:ft,listeners:Ot}))}}if((n&7)===0){t:{if(ft=t==="mouseover"||t==="pointerover",ht=t==="mouseout"||t==="pointerout",ft&&a!==Dr&&(Lt=a.relatedTarget||a.fromElement)&&(ss(Lt)||Lt[is]))break t;if((ht||ft)&&(ft=At.window===At?At:(ft=At.ownerDocument)?ft.defaultView||ft.parentWindow:window,ht?(Lt=a.relatedTarget||a.toElement,ht=dt,Lt=Lt?ss(Lt):null,Lt!==null&&(ue=u(Lt),Ot=Lt.tag,Lt!==ue||Ot!==5&&Ot!==27&&Ot!==6)&&(Lt=null)):(ht=null,Lt=dt),ht!==Lt)){if(Ot=Fc,Et="onMouseLeave",at="onMouseEnter",nt="mouse",(t==="pointerout"||t==="pointerover")&&(Ot=Hc,Et="onPointerLeave",at="onPointerEnter",nt="pointer"),ue=ht==null?ft:Zs(ht),ct=Lt==null?ft:Zs(Lt),ft=new Ot(Et,nt+"leave",ht,a,At),ft.target=ue,ft.relatedTarget=ct,Et=null,ss(At)===dt&&(Ot=new Ot(at,nt+"enter",Lt,a,At),Ot.target=ct,Ot.relatedTarget=ue,Et=Ot),ue=Et,ht&&Lt)e:{for(Ot=Nv,at=ht,nt=Lt,ct=0,Et=at;Et;Et=Ot(Et))ct++;Et=0;for(var Ht=nt;Ht;Ht=Ot(Ht))Et++;for(;0<ct-Et;)at=Ot(at),ct--;for(;0<Et-ct;)nt=Ot(nt),Et--;for(;ct--;){if(at===nt||nt!==null&&at===nt.alternate){Ot=at;break e}at=Ot(at),nt=Ot(nt)}Ot=null}else Ot=null;ht!==null&&Ih(bt,ft,ht,Ot,!1),Lt!==null&&ue!==null&&Ih(bt,ue,Lt,Ot,!0)}}t:{if(ft=dt?Zs(dt):window,ht=ft.nodeName&&ft.nodeName.toLowerCase(),ht==="select"||ht==="input"&&ft.type==="file")var te=Xc;else if(qc(ft))if(Jc)te=By;else{te=Oy;var Pt=Gy}else ht=ft.nodeName,!ht||ht.toLowerCase()!=="input"||ft.type!=="checkbox"&&ft.type!=="radio"?dt&&Nr(dt.elementType)&&(te=Xc):te=Vy;if(te&&(te=te(t,dt))){Yc(bt,te,a,At);break t}Pt&&Pt(t,ft,dt),t==="focusout"&&dt&&ft.type==="number"&&dt.memoizedProps.value!=null&&Ir(ft,"number",ft.value)}switch(Pt=dt?Zs(dt):window,t){case"focusin":(qc(Pt)||Pt.contentEditable==="true")&&(hs=Pt,Yr=dt,ao=null);break;case"focusout":ao=Yr=hs=null;break;case"mousedown":Xr=!0;break;case"contextmenu":case"mouseup":case"dragend":Xr=!1,ed(bt,a,At);break;case"selectionchange":if(qy)break;case"keydown":case"keyup":ed(bt,a,At)}var Yt;if(Vr)t:{switch(t){case"compositionstart":var Wt="onCompositionStart";break t;case"compositionend":Wt="onCompositionEnd";break t;case"compositionupdate":Wt="onCompositionUpdate";break t}Wt=void 0}else fs?Bc(t,a)&&(Wt="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Wt="onCompositionStart");Wt&&(Gc&&a.locale!=="ko"&&(fs||Wt!=="onCompositionStart"?Wt==="onCompositionEnd"&&fs&&(Yt=kc()):(ui=At,Fr="value"in ui?ui.value:ui.textContent,fs=!0)),Pt=za(dt,Wt),0<Pt.length&&(Wt=new Uc(Wt,t,null,a,At),bt.push({event:Wt,listeners:Pt}),Yt?Wt.data=Yt:(Yt=zc(a),Yt!==null&&(Wt.data=Yt)))),(Yt=ky?Py(t,a):Fy(t,a))&&(Wt=za(dt,"onBeforeInput"),0<Wt.length&&(Pt=new Uc("onBeforeInput","beforeinput",null,a,At),bt.push({event:Pt,listeners:Wt}),Pt.data=Yt)),_v(bt,t,dt,a,At)}Rh(bt,n)})}function Do(t,n,a){return{instance:t,listener:n,currentTarget:a}}function za(t,n){for(var a=n+"Capture",l=[];t!==null;){var m=t,S=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||S===null||(m=Ws(t,a),m!=null&&l.unshift(Do(t,m,S)),m=Ws(t,n),m!=null&&l.push(Do(t,m,S))),t.tag===3)return l;t=t.return}return[]}function Nv(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Ih(t,n,a,l,m){for(var S=n._reactName,N=[];a!==null&&a!==l;){var G=a,Z=G.alternate,dt=G.stateNode;if(G=G.tag,Z!==null&&Z===l)break;G!==5&&G!==26&&G!==27||dt===null||(Z=dt,m?(dt=Ws(a,S),dt!=null&&N.unshift(Do(a,dt,Z))):m||(dt=Ws(a,S),dt!=null&&N.push(Do(a,dt,Z)))),a=a.return}N.length!==0&&t.push({event:n,listeners:N})}var Dv=/\r\n?/g,Lv=/\u0000|\uFFFD/g;function Nh(t){return(typeof t=="string"?t:""+t).replace(Dv,`
`).replace(Lv,"")}function Dh(t,n){return n=Nh(n),Nh(t)===n}function le(t,n,a,l,m,S){switch(a){case"children":typeof l=="string"?n==="body"||n==="textarea"&&l===""||us(t,l):(typeof l=="number"||typeof l=="bigint")&&n!=="body"&&us(t,""+l);break;case"className":Jo(t,"class",l);break;case"tabIndex":Jo(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Jo(t,a,l);break;case"style":Nc(t,l,S);break;case"data":if(n!=="object"){Jo(t,"data",l);break}case"src":case"href":if(l===""&&(n!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ko(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(a==="formAction"?(n!=="input"&&le(t,n,"name",m.name,m,null),le(t,n,"formEncType",m.formEncType,m,null),le(t,n,"formMethod",m.formMethod,m,null),le(t,n,"formTarget",m.formTarget,m,null)):(le(t,n,"encType",m.encType,m,null),le(t,n,"method",m.method,m,null),le(t,n,"target",m.target,m,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ko(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Gn);break;case"onScroll":l!=null&&Qt("scroll",t);break;case"onScrollEnd":l!=null&&Qt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(m.children!=null)throw Error(o(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ko(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Qt("beforetoggle",t),Qt("toggle",t),Xo(t,"popover",l);break;case"xlinkActuate":Hn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Hn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Hn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Hn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Hn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Hn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Hn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Xo(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=ry.get(a)||a,Xo(t,a,l))}}function yu(t,n,a,l,m,S){switch(a){case"style":Nc(t,l,S);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(a=l.__html,a!=null){if(m.children!=null)throw Error(o(60));t.innerHTML=a}}break;case"children":typeof l=="string"?us(t,l):(typeof l=="number"||typeof l=="bigint")&&us(t,""+l);break;case"onScroll":l!=null&&Qt("scroll",t);break;case"onScrollEnd":l!=null&&Qt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ec.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(m=a.endsWith("Capture"),n=a.slice(2,m?a.length-7:void 0),S=t[Ke]||null,S=S!=null?S[a]:null,typeof S=="function"&&t.removeEventListener(n,S,m),typeof l=="function")){typeof S!="function"&&S!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(n,l,m);break t}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Xo(t,a,l)}}}function Oe(t,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Qt("error",t),Qt("load",t);var l=!1,m=!1,S;for(S in a)if(a.hasOwnProperty(S)){var N=a[S];if(N!=null)switch(S){case"src":l=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:le(t,n,S,N,a,null)}}m&&le(t,n,"srcSet",a.srcSet,a,null),l&&le(t,n,"src",a.src,a,null);return;case"input":Qt("invalid",t);var G=S=N=m=null,Z=null,dt=null;for(l in a)if(a.hasOwnProperty(l)){var At=a[l];if(At!=null)switch(l){case"name":m=At;break;case"type":N=At;break;case"checked":Z=At;break;case"defaultChecked":dt=At;break;case"value":S=At;break;case"defaultValue":G=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(o(137,n));break;default:le(t,n,l,At,a,null)}}_c(t,S,G,Z,dt,N,m,!1);return;case"select":Qt("invalid",t),l=N=S=null;for(m in a)if(a.hasOwnProperty(m)&&(G=a[m],G!=null))switch(m){case"value":S=G;break;case"defaultValue":N=G;break;case"multiple":l=G;default:le(t,n,m,G,a,null)}n=S,a=N,t.multiple=!!l,n!=null?ls(t,!!l,n,!1):a!=null&&ls(t,!!l,a,!0);return;case"textarea":Qt("invalid",t),S=m=l=null;for(N in a)if(a.hasOwnProperty(N)&&(G=a[N],G!=null))switch(N){case"value":l=G;break;case"defaultValue":m=G;break;case"children":S=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(91));break;default:le(t,n,N,G,a,null)}Mc(t,l,m,S);return;case"option":for(Z in a)if(a.hasOwnProperty(Z)&&(l=a[Z],l!=null))switch(Z){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:le(t,n,Z,l,a,null)}return;case"dialog":Qt("beforetoggle",t),Qt("toggle",t),Qt("cancel",t),Qt("close",t);break;case"iframe":case"object":Qt("load",t);break;case"video":case"audio":for(l=0;l<No.length;l++)Qt(No[l],t);break;case"image":Qt("error",t),Qt("load",t);break;case"details":Qt("toggle",t);break;case"embed":case"source":case"link":Qt("error",t),Qt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in a)if(a.hasOwnProperty(dt)&&(l=a[dt],l!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,n));default:le(t,n,dt,l,a,null)}return;default:if(Nr(n)){for(At in a)a.hasOwnProperty(At)&&(l=a[At],l!==void 0&&yu(t,n,At,l,a,void 0));return}}for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!=null&&le(t,n,G,l,a,null))}function kv(t,n,a,l){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,S=null,N=null,G=null,Z=null,dt=null,At=null;for(ht in a){var bt=a[ht];if(a.hasOwnProperty(ht)&&bt!=null)switch(ht){case"checked":break;case"value":break;case"defaultValue":Z=bt;default:l.hasOwnProperty(ht)||le(t,n,ht,null,l,bt)}}for(var ft in l){var ht=l[ft];if(bt=a[ft],l.hasOwnProperty(ft)&&(ht!=null||bt!=null))switch(ft){case"type":S=ht;break;case"name":m=ht;break;case"checked":dt=ht;break;case"defaultChecked":At=ht;break;case"value":N=ht;break;case"defaultValue":G=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(o(137,n));break;default:ht!==bt&&le(t,n,ft,ht,l,bt)}}Mr(t,N,G,Z,dt,At,S,m);return;case"select":ht=N=G=ft=null;for(S in a)if(Z=a[S],a.hasOwnProperty(S)&&Z!=null)switch(S){case"value":break;case"multiple":ht=Z;default:l.hasOwnProperty(S)||le(t,n,S,null,l,Z)}for(m in l)if(S=l[m],Z=a[m],l.hasOwnProperty(m)&&(S!=null||Z!=null))switch(m){case"value":ft=S;break;case"defaultValue":G=S;break;case"multiple":N=S;default:S!==Z&&le(t,n,m,S,l,Z)}n=G,a=N,l=ht,ft!=null?ls(t,!!a,ft,!1):!!l!=!!a&&(n!=null?ls(t,!!a,n,!0):ls(t,!!a,a?[]:"",!1));return;case"textarea":ht=ft=null;for(G in a)if(m=a[G],a.hasOwnProperty(G)&&m!=null&&!l.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:le(t,n,G,null,l,m)}for(N in l)if(m=l[N],S=a[N],l.hasOwnProperty(N)&&(m!=null||S!=null))switch(N){case"value":ft=m;break;case"defaultValue":ht=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(o(91));break;default:m!==S&&le(t,n,N,m,l,S)}Rc(t,ft,ht);return;case"option":for(var Lt in a)if(ft=a[Lt],a.hasOwnProperty(Lt)&&ft!=null&&!l.hasOwnProperty(Lt))switch(Lt){case"selected":t.selected=!1;break;default:le(t,n,Lt,null,l,ft)}for(Z in l)if(ft=l[Z],ht=a[Z],l.hasOwnProperty(Z)&&ft!==ht&&(ft!=null||ht!=null))switch(Z){case"selected":t.selected=ft&&typeof ft!="function"&&typeof ft!="symbol";break;default:le(t,n,Z,ft,l,ht)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ot in a)ft=a[Ot],a.hasOwnProperty(Ot)&&ft!=null&&!l.hasOwnProperty(Ot)&&le(t,n,Ot,null,l,ft);for(dt in l)if(ft=l[dt],ht=a[dt],l.hasOwnProperty(dt)&&ft!==ht&&(ft!=null||ht!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(o(137,n));break;default:le(t,n,dt,ft,l,ht)}return;default:if(Nr(n)){for(var ue in a)ft=a[ue],a.hasOwnProperty(ue)&&ft!==void 0&&!l.hasOwnProperty(ue)&&yu(t,n,ue,void 0,l,ft);for(At in l)ft=l[At],ht=a[At],!l.hasOwnProperty(At)||ft===ht||ft===void 0&&ht===void 0||yu(t,n,At,ft,l,ht);return}}for(var at in a)ft=a[at],a.hasOwnProperty(at)&&ft!=null&&!l.hasOwnProperty(at)&&le(t,n,at,null,l,ft);for(bt in l)ft=l[bt],ht=a[bt],!l.hasOwnProperty(bt)||ft===ht||ft==null&&ht==null||le(t,n,bt,ft,l,ht)}function Lh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Pv(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var m=a[l],S=m.transferSize,N=m.initiatorType,G=m.duration;if(S&&G&&Lh(N)){for(N=0,G=m.responseEnd,l+=1;l<a.length;l++){var Z=a[l],dt=Z.startTime;if(dt>G)break;var At=Z.transferSize,bt=Z.initiatorType;At&&Lh(bt)&&(Z=Z.responseEnd,N+=At*(Z<G?1:(G-dt)/(Z-dt)))}if(--l,n+=8*(S+N)/(m.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var vu=null,Au=null;function qa(t){return t.nodeType===9?t:t.ownerDocument}function kh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ph(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Su(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Tu=null;function Fv(){var t=window.event;return t&&t.type==="popstate"?t===Tu?!1:(Tu=t,!0):(Tu=null,!1)}var Fh=typeof setTimeout=="function"?setTimeout:void 0,Uv=typeof clearTimeout=="function"?clearTimeout:void 0,Uh=typeof Promise=="function"?Promise:void 0,Hv=typeof queueMicrotask=="function"?queueMicrotask:typeof Uh<"u"?function(t){return Uh.resolve(null).then(t).catch(Gv)}:Fh;function Gv(t){setTimeout(function(){throw t})}function wi(t){return t==="head"}function Hh(t,n){var a=n,l=0;do{var m=a.nextSibling;if(t.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(m),Os(n);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Lo(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Lo(a);for(var S=a.firstChild;S;){var N=S.nextSibling,G=S.nodeName;S[Qs]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&S.rel.toLowerCase()==="stylesheet"||a.removeChild(S),S=N}}else a==="body"&&Lo(t.ownerDocument.body);a=m}while(a);Os(n)}function Gh(t,n){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Eu(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Eu(a),_r(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Ov(t,n,a,l){for(;t.nodeType===1;){var m=a;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Qs])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(S=t.getAttribute("rel"),S==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(S!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(S=t.getAttribute("src"),(S!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&S&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var S=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===S)return t}else return t;if(t=An(t.nextSibling),t===null)break}return null}function Vv(t,n,a){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=An(t.nextSibling),t===null))return null;return t}function Oh(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=An(t.nextSibling),t===null))return null;return t}function bu(t){return t.data==="$?"||t.data==="$~"}function Cu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Bv(t,n){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||a.readyState!=="loading")n();else{var l=function(){n(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function An(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var xu=null;function Vh(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(n===0)return An(t.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}t=t.nextSibling}return null}function Bh(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return t;n--}else a!=="/$"&&a!=="/&"||n++}t=t.previousSibling}return null}function zh(t,n,a){switch(n=qa(a),t){case"html":if(t=n.documentElement,!t)throw Error(o(452));return t;case"head":if(t=n.head,!t)throw Error(o(453));return t;case"body":if(t=n.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Lo(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);_r(t)}var Sn=new Map,qh=new Set;function Ya(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ei=et.d;et.d={f:zv,r:qv,D:Yv,C:Xv,L:Jv,m:$v,X:Qv,S:Kv,M:Zv};function zv(){var t=ei.f(),n=Fa();return t||n}function qv(t){var n=os(t);n!==null&&n.tag===5&&n.type==="form"?rf(n):ei.r(t)}var Us=typeof document>"u"?null:document;function Yh(t,n,a){var l=Us;if(l&&typeof n=="string"&&n){var m=fn(n);m='link[rel="'+t+'"][href="'+m+'"]',typeof a=="string"&&(m+='[crossorigin="'+a+'"]'),qh.has(m)||(qh.add(m),t={rel:t,crossOrigin:a,href:n},l.querySelector(m)===null&&(n=l.createElement("link"),Oe(n,"link",t),Ne(n),l.head.appendChild(n)))}}function Yv(t){ei.D(t),Yh("dns-prefetch",t,null)}function Xv(t,n){ei.C(t,n),Yh("preconnect",t,n)}function Jv(t,n,a){ei.L(t,n,a);var l=Us;if(l&&t&&n){var m='link[rel="preload"][as="'+fn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(m+='[imagesrcset="'+fn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(m+='[imagesizes="'+fn(a.imageSizes)+'"]')):m+='[href="'+fn(t)+'"]';var S=m;switch(n){case"style":S=Hs(t);break;case"script":S=Gs(t)}Sn.has(S)||(t=A({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:t,as:n},a),Sn.set(S,t),l.querySelector(m)!==null||n==="style"&&l.querySelector(ko(S))||n==="script"&&l.querySelector(Po(S))||(n=l.createElement("link"),Oe(n,"link",t),Ne(n),l.head.appendChild(n)))}}function $v(t,n){ei.m(t,n);var a=Us;if(a&&t){var l=n&&typeof n.as=="string"?n.as:"script",m='link[rel="modulepreload"][as="'+fn(l)+'"][href="'+fn(t)+'"]',S=m;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Gs(t)}if(!Sn.has(S)&&(t=A({rel:"modulepreload",href:t},n),Sn.set(S,t),a.querySelector(m)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Po(S)))return}l=a.createElement("link"),Oe(l,"link",t),Ne(l),a.head.appendChild(l)}}}function Kv(t,n,a){ei.S(t,n,a);var l=Us;if(l&&t){var m=as(l).hoistableStyles,S=Hs(t);n=n||"default";var N=m.get(S);if(!N){var G={loading:0,preload:null};if(N=l.querySelector(ko(S)))G.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":n},a),(a=Sn.get(S))&&wu(t,a);var Z=N=l.createElement("link");Ne(Z),Oe(Z,"link",t),Z._p=new Promise(function(dt,At){Z.onload=dt,Z.onerror=At}),Z.addEventListener("load",function(){G.loading|=1}),Z.addEventListener("error",function(){G.loading|=2}),G.loading|=4,Xa(N,n,l)}N={type:"stylesheet",instance:N,count:1,state:G},m.set(S,N)}}}function Qv(t,n){ei.X(t,n);var a=Us;if(a&&t){var l=as(a).hoistableScripts,m=Gs(t),S=l.get(m);S||(S=a.querySelector(Po(m)),S||(t=A({src:t,async:!0},n),(n=Sn.get(m))&&_u(t,n),S=a.createElement("script"),Ne(S),Oe(S,"link",t),a.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},l.set(m,S))}}function Zv(t,n){ei.M(t,n);var a=Us;if(a&&t){var l=as(a).hoistableScripts,m=Gs(t),S=l.get(m);S||(S=a.querySelector(Po(m)),S||(t=A({src:t,async:!0,type:"module"},n),(n=Sn.get(m))&&_u(t,n),S=a.createElement("script"),Ne(S),Oe(S,"link",t),a.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},l.set(m,S))}}function Xh(t,n,a,l){var m=(m=St.current)?Ya(m):null;if(!m)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Hs(a.href),a=as(m).hoistableStyles,l=a.get(n),l||(l={type:"style",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Hs(a.href);var S=as(m).hoistableStyles,N=S.get(t);if(N||(m=m.ownerDocument||m,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(t,N),(S=m.querySelector(ko(t)))&&!S._p&&(N.instance=S,N.state.loading=5),Sn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Sn.set(t,a),S||Wv(m,t,a,N.state))),n&&l===null)throw Error(o(528,""));return N}if(n&&l!==null)throw Error(o(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Gs(a),a=as(m).hoistableScripts,l=a.get(n),l||(l={type:"script",instance:null,count:0,state:null},a.set(n,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Hs(t){return'href="'+fn(t)+'"'}function ko(t){return'link[rel="stylesheet"]['+t+"]"}function Jh(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function Wv(t,n,a,l){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?l.loading=1:(n=t.createElement("link"),l.preload=n,n.addEventListener("load",function(){return l.loading|=1}),n.addEventListener("error",function(){return l.loading|=2}),Oe(n,"link",a),Ne(n),t.head.appendChild(n))}function Gs(t){return'[src="'+fn(t)+'"]'}function Po(t){return"script[async]"+t}function $h(t,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var l=t.querySelector('style[data-href~="'+fn(a.href)+'"]');if(l)return n.instance=l,Ne(l),l;var m=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ne(l),Oe(l,"style",m),Xa(l,a.precedence,t),n.instance=l;case"stylesheet":m=Hs(a.href);var S=t.querySelector(ko(m));if(S)return n.state.loading|=4,n.instance=S,Ne(S),S;l=Jh(a),(m=Sn.get(m))&&wu(l,m),S=(t.ownerDocument||t).createElement("link"),Ne(S);var N=S;return N._p=new Promise(function(G,Z){N.onload=G,N.onerror=Z}),Oe(S,"link",l),n.state.loading|=4,Xa(S,a.precedence,t),n.instance=S;case"script":return S=Gs(a.src),(m=t.querySelector(Po(S)))?(n.instance=m,Ne(m),m):(l=a,(m=Sn.get(S))&&(l=A({},a),_u(l,m)),t=t.ownerDocument||t,m=t.createElement("script"),Ne(m),Oe(m,"link",l),t.head.appendChild(m),n.instance=m);case"void":return null;default:throw Error(o(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(l=n.instance,n.state.loading|=4,Xa(l,a.precedence,t));return n.instance}function Xa(t,n,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=l.length?l[l.length-1]:null,S=m,N=0;N<l.length;N++){var G=l[N];if(G.dataset.precedence===n)S=G;else if(S!==m)break}S?S.parentNode.insertBefore(t,S.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(t,n.firstChild))}function wu(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function _u(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Ja=null;function Kh(t,n,a){if(Ja===null){var l=new Map,m=Ja=new Map;m.set(a,l)}else m=Ja,l=m.get(a),l||(l=new Map,m.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),m=0;m<a.length;m++){var S=a[m];if(!(S[Qs]||S[Fe]||t==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var N=S.getAttribute(n)||"";N=t+N;var G=l.get(N);G?G.push(S):l.set(N,[S])}}return l}function Qh(t,n,a){t=t.ownerDocument||t,t.head.insertBefore(a,n==="title"?t.querySelector("head > title"):null)}function jv(t,n,a){if(a===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Zh(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function t0(t,n,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var m=Hs(l.href),S=n.querySelector(ko(m));if(S){n=S._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=$a.bind(t),n.then(t,t)),a.state.loading|=4,a.instance=S,Ne(S);return}S=n.ownerDocument||n,l=Jh(l),(m=Sn.get(m))&&wu(l,m),S=S.createElement("link"),Ne(S);var N=S;N._p=new Promise(function(G,Z){N.onload=G,N.onerror=Z}),Oe(S,"link",l),a.instance=S}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=$a.bind(t),n.addEventListener("load",a),n.addEventListener("error",a))}}var Ru=0;function e0(t,n){return t.stylesheets&&t.count===0&&Qa(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Qa(t,t.stylesheets),t.unsuspend){var S=t.unsuspend;t.unsuspend=null,S()}},6e4+n);0<t.imgBytes&&Ru===0&&(Ru=62500*Pv());var m=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qa(t,t.stylesheets),t.unsuspend)){var S=t.unsuspend;t.unsuspend=null,S()}},(t.imgBytes>Ru?50:800)+n);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(m)}}:null}function $a(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qa(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ka=null;function Qa(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ka=new Map,n.forEach(n0,t),Ka=null,$a.call(t))}function n0(t,n){if(!(n.state.loading&4)){var a=Ka.get(t);if(a)var l=a.get(null);else{a=new Map,Ka.set(t,a);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<m.length;S++){var N=m[S];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(a.set(N.dataset.precedence,N),l=N)}l&&a.set(null,l)}m=n.instance,N=m.getAttribute("data-precedence"),S=a.get(N)||l,S===l&&a.set(null,m),a.set(N,m),this.count++,l=$a.bind(this),m.addEventListener("load",l),m.addEventListener("error",l),S?S.parentNode.insertBefore(m,S.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),n.state.loading|=4}}var Fo={$$typeof:F,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function i0(t,n,a,l,m,S,N,G,Z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oi(0),this.hiddenUpdates=oi(null),this.identifierPrefix=l,this.onUncaughtError=m,this.onCaughtError=S,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function Wh(t,n,a,l,m,S,N,G,Z,dt,At,bt){return t=new i0(t,n,a,N,Z,dt,At,bt,G),n=1,S===!0&&(n|=24),S=on(3,null,null,n),t.current=S,S.stateNode=t,n=rl(),n.refCount++,t.pooledCache=n,n.refCount++,S.memoizedState={element:l,isDehydrated:a,cache:n},dl(S),t}function jh(t){return t?(t=gs,t):gs}function tp(t,n,a,l,m,S){m=jh(m),l.context===null?l.context=m:l.pendingContext=m,l=mi(n),l.payload={element:a},S=S===void 0?null:S,S!==null&&(l.callback=S),a=gi(t,l,n),a!==null&&(en(a,t,n),po(a,t,n))}function ep(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<n?a:n}}function Mu(t,n){ep(t,n),(t=t.alternate)&&ep(t,n)}function np(t){if(t.tag===13||t.tag===31){var n=Ui(t,67108864);n!==null&&en(n,t,67108864),Mu(t,67108864)}}function ip(t){if(t.tag===13||t.tag===31){var n=cn();n=Dn(n);var a=Ui(t,n);a!==null&&en(a,t,n),Mu(t,n)}}var Za=!0;function s0(t,n,a,l){var m=B.T;B.T=null;var S=et.p;try{et.p=2,Iu(t,n,a,l)}finally{et.p=S,B.T=m}}function o0(t,n,a,l){var m=B.T;B.T=null;var S=et.p;try{et.p=8,Iu(t,n,a,l)}finally{et.p=S,B.T=m}}function Iu(t,n,a,l){if(Za){var m=Nu(l);if(m===null)gu(t,n,l,Wa,a),op(t,l);else if(r0(m,t,n,a,l))l.stopPropagation();else if(op(t,l),n&4&&-1<a0.indexOf(t)){for(;m!==null;){var S=os(m);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var N=Be(S.pendingLanes);if(N!==0){var G=S;for(G.pendingLanes|=2,G.entangledLanes|=2;N;){var Z=1<<31-se(N);G.entanglements[1]|=Z,N&=~Z}Fn(S),(ie&6)===0&&(ka=vt()+500,Io(0))}}break;case 31:case 13:G=Ui(S,2),G!==null&&en(G,S,2),Fa(),Mu(S,2)}if(S=Nu(l),S===null&&gu(t,n,l,Wa,a),S===m)break;m=S}m!==null&&l.stopPropagation()}else gu(t,n,l,null,a)}}function Nu(t){return t=Lr(t),Du(t)}var Wa=null;function Du(t){if(Wa=null,t=ss(t),t!==null){var n=u(t);if(n===null)t=null;else{var a=n.tag;if(a===13){if(t=f(n),t!==null)return t;t=null}else if(a===31){if(t=p(n),t!==null)return t;t=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Wa=t,null}function sp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case Rt:return 2;case Dt:return 8;case Nt:case Ft:return 32;case kt:return 268435456;default:return 32}default:return 32}}var Lu=!1,_i=null,Ri=null,Mi=null,Uo=new Map,Ho=new Map,Ii=[],a0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function op(t,n){switch(t){case"focusin":case"focusout":_i=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Mi=null;break;case"pointerover":case"pointerout":Uo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ho.delete(n.pointerId)}}function Go(t,n,a,l,m,S){return t===null||t.nativeEvent!==S?(t={blockedOn:n,domEventName:a,eventSystemFlags:l,nativeEvent:S,targetContainers:[m]},n!==null&&(n=os(n),n!==null&&np(n)),t):(t.eventSystemFlags|=l,n=t.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),t)}function r0(t,n,a,l,m){switch(n){case"focusin":return _i=Go(_i,t,n,a,l,m),!0;case"dragenter":return Ri=Go(Ri,t,n,a,l,m),!0;case"mouseover":return Mi=Go(Mi,t,n,a,l,m),!0;case"pointerover":var S=m.pointerId;return Uo.set(S,Go(Uo.get(S)||null,t,n,a,l,m)),!0;case"gotpointercapture":return S=m.pointerId,Ho.set(S,Go(Ho.get(S)||null,t,n,a,l,m)),!0}return!1}function ap(t){var n=ss(t.target);if(n!==null){var a=u(n);if(a!==null){if(n=a.tag,n===13){if(n=f(a),n!==null){t.blockedOn=n,Ac(t.priority,function(){ip(a)});return}}else if(n===31){if(n=p(a),n!==null){t.blockedOn=n,Ac(t.priority,function(){ip(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ja(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var a=Nu(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Dr=l,a.target.dispatchEvent(l),Dr=null}else return n=os(a),n!==null&&np(n),t.blockedOn=a,!1;n.shift()}return!0}function rp(t,n,a){ja(t)&&a.delete(n)}function l0(){Lu=!1,_i!==null&&ja(_i)&&(_i=null),Ri!==null&&ja(Ri)&&(Ri=null),Mi!==null&&ja(Mi)&&(Mi=null),Uo.forEach(rp),Ho.forEach(rp)}function tr(t,n){t.blockedOn===n&&(t.blockedOn=null,Lu||(Lu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,l0)))}var er=null;function lp(t){er!==t&&(er=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){er===t&&(er=null);for(var n=0;n<t.length;n+=3){var a=t[n],l=t[n+1],m=t[n+2];if(typeof l!="function"){if(Du(l||a)===null)continue;break}var S=os(a);S!==null&&(t.splice(n,3),n-=3,Nl(S,{pending:!0,data:m,method:a.method,action:l},l,m))}}))}function Os(t){function n(Z){return tr(Z,t)}_i!==null&&tr(_i,t),Ri!==null&&tr(Ri,t),Mi!==null&&tr(Mi,t),Uo.forEach(n),Ho.forEach(n);for(var a=0;a<Ii.length;a++){var l=Ii[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ii.length&&(a=Ii[0],a.blockedOn===null);)ap(a),a.blockedOn===null&&Ii.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var m=a[l],S=a[l+1],N=m[Ke]||null;if(typeof S=="function")N||lp(a);else if(N){var G=null;if(S&&S.hasAttribute("formAction")){if(m=S,N=S[Ke]||null)G=N.formAction;else if(Du(m)!==null)continue}else G=N.action;typeof G=="function"?a[l+1]=G:(a.splice(l,3),l-=3),lp(a)}}}function up(){function t(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(N){return m=N})},focusReset:"manual",scroll:"manual"})}function n(){m!==null&&(m(),m=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,m=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),m!==null&&(m(),m=null)}}}function ku(t){this._internalRoot=t}nr.prototype.render=ku.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(o(409));var a=n.current,l=cn();tp(a,l,t,n,null,null)},nr.prototype.unmount=ku.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;tp(t.current,2,null,t,null,null),Fa(),n[is]=null}};function nr(t){this._internalRoot=t}nr.prototype.unstable_scheduleHydration=function(t){if(t){var n=vc();t={blockedOn:null,target:t,priority:n};for(var a=0;a<Ii.length&&n!==0&&n<Ii[a].priority;a++);Ii.splice(a,0,t),a===0&&ap(t)}};var cp=e.version;if(cp!=="19.2.4")throw Error(o(527,cp,"19.2.4"));et.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=h(n),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var u0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ir=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ir.isDisabled&&ir.supportsFiber)try{Xt=ir.inject(u0),$t=ir}catch{}}return Vo.createRoot=function(t,n){if(!r(t))throw Error(o(299));var a=!1,l="",m=yf,S=vf,N=Af;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onUncaughtError!==void 0&&(m=n.onUncaughtError),n.onCaughtError!==void 0&&(S=n.onCaughtError),n.onRecoverableError!==void 0&&(N=n.onRecoverableError)),n=Wh(t,1,!1,null,null,a,l,null,m,S,N,up),t[is]=n.current,mu(t),new ku(n)},Vo.hydrateRoot=function(t,n,a){if(!r(t))throw Error(o(299));var l=!1,m="",S=yf,N=vf,G=Af,Z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(S=a.onUncaughtError),a.onCaughtError!==void 0&&(N=a.onCaughtError),a.onRecoverableError!==void 0&&(G=a.onRecoverableError),a.formState!==void 0&&(Z=a.formState)),n=Wh(t,1,!0,n,a??null,l,m,Z,S,N,G,up),n.context=jh(null),a=n.current,l=cn(),l=Dn(l),m=mi(l),m.callback=null,gi(a,m,l),a=l,n.current.lanes=a,nn(n,a),Fn(n),t[is]=n.current,mu(t),new nr(n)},Vo.version="19.2.4",Vo}var Sp;function S0(){if(Sp)return Uu.exports;Sp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Uu.exports=A0(),Uu.exports}var T0=S0();const E0=sg(T0),Ve=[];for(let i=0;i<256;++i)Ve.push((i+256).toString(16).slice(1));function b0(i,e=0){return(Ve[i[e+0]]+Ve[i[e+1]]+Ve[i[e+2]]+Ve[i[e+3]]+"-"+Ve[i[e+4]]+Ve[i[e+5]]+"-"+Ve[i[e+6]]+Ve[i[e+7]]+"-"+Ve[i[e+8]]+Ve[i[e+9]]+"-"+Ve[i[e+10]]+Ve[i[e+11]]+Ve[i[e+12]]+Ve[i[e+13]]+Ve[i[e+14]]+Ve[i[e+15]]).toLowerCase()}let Vu;const C0=new Uint8Array(16);function x0(){if(!Vu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Vu=crypto.getRandomValues.bind(crypto)}return Vu(C0)}const w0=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Tp={randomUUID:w0};function _0(i,e,s){i=i||{};const o=i.random??i.rng?.()??x0();if(o.length<16)throw new Error("Random bytes length must be >= 16");return o[6]=o[6]&15|64,o[8]=o[8]&63|128,b0(o)}function Vs(i,e,s){return Tp.randomUUID&&!i?Tp.randomUUID():_0(i)}const R0="modulepreload",M0=function(i){return"/Patho-Annotation/"+i},Ep={},Qi=function(e,s,o){let r=Promise.resolve();if(s&&s.length>0){let f=function(h){return Promise.all(h.map(g=>Promise.resolve(g).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),v=p?.nonce||p?.getAttribute("nonce");r=f(s.map(h=>{if(h=M0(h),h in Ep)return;Ep[h]=!0;const g=h.endsWith(".css"),A=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${A}`))return;const T=document.createElement("link");if(T.rel=g?"stylesheet":R0,g||(T.as="script"),T.crossOrigin="",T.href=h,v&&T.setAttribute("nonce",v),document.head.appendChild(T),g)return new Promise((_,C)=>{T.addEventListener("load",_),T.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${h}`)))})}))}function u(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return r.then(f=>{for(const p of f||[])p.status==="rejected"&&u(p.reason);return e().catch(u)})};var I0={640:((i,e,s)=>{s.d(e,{AnnotationLayer:()=>wt,FreeTextAnnotationElement:()=>pt,InkAnnotationElement:()=>lt,StampAnnotationElement:()=>yt});var o=s(266),r=s(473),u=s(780);function f(St){return Math.floor(Math.max(0,Math.min(1,St))*255).toString(16).padStart(2,"0")}function p(St){return Math.max(0,Math.min(255,255*St))}class v{static CMYK_G([k,D,b,E]){return["G",1-Math.min(1,.3*k+.59*b+.11*D+E)]}static G_CMYK([k]){return["CMYK",0,0,0,1-k]}static G_RGB([k]){return["RGB",k,k,k]}static G_rgb([k]){return k=p(k),[k,k,k]}static G_HTML([k]){const D=f(k);return`#${D}${D}${D}`}static RGB_G([k,D,b]){return["G",.3*k+.59*D+.11*b]}static RGB_rgb(k){return k.map(p)}static RGB_HTML(k){return`#${k.map(f).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([k,D,b,E]){return["RGB",1-Math.min(1,k+E),1-Math.min(1,b+E),1-Math.min(1,D+E)]}static CMYK_rgb([k,D,b,E]){return[p(1-Math.min(1,k+E)),p(1-Math.min(1,b+E)),p(1-Math.min(1,D+E))]}static CMYK_HTML(k){const D=this.CMYK_RGB(k).slice(1);return this.RGB_HTML(D)}static RGB_CMYK([k,D,b]){const E=1-k,w=1-D,R=1-b,L=Math.min(E,w,R);return["CMYK",E,w,R,L]}}var h=s(160);const g=1e3,A=9,T=new WeakSet;function _(St){return{width:St[2]-St[0],height:St[3]-St[1]}}class C{static create(k){switch(k.data.annotationType){case o.AnnotationType.LINK:return new y(k);case o.AnnotationType.TEXT:return new x(k);case o.AnnotationType.WIDGET:switch(k.data.fieldType){case"Tx":return new F(k);case"Btn":return k.data.radioButton?new O(k):k.data.checkBox?new H(k):new z(k);case"Ch":return new it(k);case"Sig":return new P(k)}return new I(k);case o.AnnotationType.POPUP:return new W(k);case o.AnnotationType.FREETEXT:return new pt(k);case o.AnnotationType.LINE:return new xt(k);case o.AnnotationType.SQUARE:return new Mt(k);case o.AnnotationType.CIRCLE:return new Tt(k);case o.AnnotationType.POLYLINE:return new X(k);case o.AnnotationType.CARET:return new et(k);case o.AnnotationType.INK:return new lt(k);case o.AnnotationType.POLYGON:return new B(k);case o.AnnotationType.HIGHLIGHT:return new gt(k);case o.AnnotationType.UNDERLINE:return new _t(k);case o.AnnotationType.SQUIGGLY:return new K(k);case o.AnnotationType.STRIKEOUT:return new rt(k);case o.AnnotationType.STAMP:return new yt(k);case o.AnnotationType.FILEATTACHMENT:return new Ct(k);default:return new M(k)}}}class M{#t=!1;constructor(k,{isRenderable:D=!1,ignoreBorder:b=!1,createQuadrilaterals:E=!1}={}){this.isRenderable=D,this.data=k.data,this.layer=k.layer,this.linkService=k.linkService,this.downloadManager=k.downloadManager,this.imageResourcesPath=k.imageResourcesPath,this.renderForms=k.renderForms,this.svgFactory=k.svgFactory,this.annotationStorage=k.annotationStorage,this.enableScripting=k.enableScripting,this.hasJSActions=k.hasJSActions,this._fieldObjects=k.fieldObjects,this.parent=k.parent,D&&(this.container=this._createContainer(b)),E&&this._createQuadrilaterals()}static _hasPopupData({titleObj:k,contentsObj:D,richText:b}){return!!(k?.str||D?.str||b?.str)}get hasPopupData(){return M._hasPopupData(this.data)}_createContainer(k){const{data:D,parent:{page:b,viewport:E}}=this,w=document.createElement("section");w.setAttribute("data-annotation-id",D.id),this instanceof I||(w.tabIndex=g),w.style.zIndex=this.parent.zIndex++,this.data.popupRef&&w.setAttribute("aria-haspopup","dialog"),D.noRotate&&w.classList.add("norotate");const{pageWidth:R,pageHeight:L,pageX:U,pageY:V}=E.rawDims;if(!D.rect||this instanceof W){const{rotation:st}=D;return!D.hasOwnCanvas&&st!==0&&this.setRotation(st,w),w}const{width:q,height:$}=_(D.rect),J=o.Util.normalizeRect([D.rect[0],b.view[3]-D.rect[1]+b.view[1],D.rect[2],b.view[3]-D.rect[3]+b.view[1]]);if(!k&&D.borderStyle.width>0){w.style.borderWidth=`${D.borderStyle.width}px`;const st=D.borderStyle.horizontalCornerRadius,tt=D.borderStyle.verticalCornerRadius;if(st>0||tt>0){const Q=`calc(${st}px * var(--scale-factor)) / calc(${tt}px * var(--scale-factor))`;w.style.borderRadius=Q}else if(this instanceof O){const Q=`calc(${q}px * var(--scale-factor)) / calc(${$}px * var(--scale-factor))`;w.style.borderRadius=Q}switch(D.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:w.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:w.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:w.style.borderBottomStyle="solid";break}const Y=D.borderColor||null;Y?(this.#t=!0,w.style.borderColor=o.Util.makeHexColor(Y[0]|0,Y[1]|0,Y[2]|0)):w.style.borderWidth=0}w.style.left=`${100*(J[0]-U)/R}%`,w.style.top=`${100*(J[1]-V)/L}%`;const{rotation:j}=D;return D.hasOwnCanvas||j===0?(w.style.width=`${100*q/R}%`,w.style.height=`${100*$/L}%`):this.setRotation(j,w),w}setRotation(k,D=this.container){if(!this.data.rect)return;const{pageWidth:b,pageHeight:E}=this.parent.viewport.rawDims,{width:w,height:R}=_(this.data.rect);let L,U;k%180===0?(L=100*w/b,U=100*R/E):(L=100*R/b,U=100*w/E),D.style.width=`${L}%`,D.style.height=`${U}%`,D.setAttribute("data-main-rotation",(360-k)%360)}get _commonActions(){const k=(D,b,E)=>{const w=E.detail[D],R=w[0],L=w.slice(1);E.target.style[b]=v[`${R}_HTML`](L),this.annotationStorage.setValue(this.data.id,{[b]:v[`${R}_rgb`](L)})};return(0,o.shadow)(this,"_commonActions",{display:D=>{const{display:b}=D.detail,E=b%2===1;this.container.style.visibility=E?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:E,noPrint:b===1||b===2})},print:D=>{this.annotationStorage.setValue(this.data.id,{noPrint:!D.detail.print})},hidden:D=>{const{hidden:b}=D.detail;this.container.style.visibility=b?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:b,noView:b})},focus:D=>{setTimeout(()=>D.target.focus({preventScroll:!1}),0)},userName:D=>{D.target.title=D.detail.userName},readonly:D=>{D.target.disabled=D.detail.readonly},required:D=>{this._setRequired(D.target,D.detail.required)},bgColor:D=>{k("bgColor","backgroundColor",D)},fillColor:D=>{k("fillColor","backgroundColor",D)},fgColor:D=>{k("fgColor","color",D)},textColor:D=>{k("textColor","color",D)},borderColor:D=>{k("borderColor","borderColor",D)},strokeColor:D=>{k("strokeColor","borderColor",D)},rotation:D=>{const b=D.detail.rotation;this.setRotation(b),this.annotationStorage.setValue(this.data.id,{rotation:b})}})}_dispatchEventFromSandbox(k,D){const b=this._commonActions;for(const E of Object.keys(D.detail))(k[E]||b[E])?.(D)}_setDefaultPropertiesFromJS(k){if(!this.enableScripting)return;const D=this.annotationStorage.getRawValue(this.data.id);if(!D)return;const b=this._commonActions;for(const[E,w]of Object.entries(D)){const R=b[E];if(R){const L={detail:{[E]:w},target:k};R(L),delete D[E]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:k}=this.data;if(!k)return;const[D,b,E,w]=this.data.rect;if(k.length===1){const[,{x:tt,y:Y},{x:Q,y:vt}]=k[0];if(E===tt&&w===Y&&D===Q&&b===vt)return}const{style:R}=this.container;let L;if(this.#t){const{borderColor:tt,borderWidth:Y}=R;R.borderWidth=0,L=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${tt}" stroke-width="${Y}">`],this.container.classList.add("hasBorder")}const U=E-D,V=w-b,{svgFactory:q}=this,$=q.createElement("svg");$.classList.add("quadrilateralsContainer"),$.setAttribute("width",0),$.setAttribute("height",0);const J=q.createElement("defs");$.append(J);const j=q.createElement("clipPath"),st=`clippath_${this.data.id}`;j.setAttribute("id",st),j.setAttribute("clipPathUnits","objectBoundingBox"),J.append(j);for(const[,{x:tt,y:Y},{x:Q,y:vt}]of k){const mt=q.createElement("rect"),Rt=(Q-D)/U,Dt=(w-Y)/V,Nt=(tt-Q)/U,Ft=(Y-vt)/V;mt.setAttribute("x",Rt),mt.setAttribute("y",Dt),mt.setAttribute("width",Nt),mt.setAttribute("height",Ft),j.append(mt),L?.push(`<rect vector-effect="non-scaling-stroke" x="${Rt}" y="${Dt}" width="${Nt}" height="${Ft}"/>`)}this.#t&&(L.push("</g></svg>')"),R.backgroundImage=L.join("")),this.container.append($),this.container.style.clipPath=`url(#${st})`}_createPopup(){const{container:k,data:D}=this;k.setAttribute("aria-haspopup","dialog");const b=new W({data:{color:D.color,titleObj:D.titleObj,modificationDate:D.modificationDate,contentsObj:D.contentsObj,richText:D.richText,parentRect:D.rect,borderStyle:0,id:`popup_${D.id}`,rotation:D.rotation},parent:this.parent,elements:[this]});this.parent.div.append(b.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(k,D=null){const b=[];if(this._fieldObjects){const E=this._fieldObjects[k];if(E)for(const{page:w,id:R,exportValues:L}of E){if(w===-1||R===D)continue;const U=typeof L=="string"?L:null,V=document.querySelector(`[data-element-id="${R}"]`);if(V&&!T.has(V)){(0,o.warn)(`_getElementsByName - element not allowed: ${R}`);continue}b.push({id:R,exportValue:U,domElement:V})}return b}for(const E of document.getElementsByName(k)){const{exportValue:w}=E,R=E.getAttribute("data-element-id");R!==D&&T.has(E)&&b.push({id:R,exportValue:w,domElement:E})}return b}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const k=this.getElementsToTriggerPopup();if(Array.isArray(k))for(const D of k)D.classList.add("highlightArea");else k.classList.add("highlightArea")}get _isEditable(){return!1}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:k,data:{id:D}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:k,editId:D})})}}class y extends M{constructor(k,D=null){super(k,{isRenderable:!0,ignoreBorder:!!D?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=k.data.isTooltipOnly}render(){const{data:k,linkService:D}=this,b=document.createElement("a");b.setAttribute("data-element-id",k.id);let E=!1;return k.url?(D.addLinkAttributes(b,k.url,k.newWindow),E=!0):k.action?(this._bindNamedAction(b,k.action),E=!0):k.attachment?(this.#e(b,k.attachment,k.attachmentDest),E=!0):k.setOCGState?(this.#n(b,k.setOCGState),E=!0):k.dest?(this._bindLink(b,k.dest),E=!0):(k.actions&&(k.actions.Action||k.actions["Mouse Up"]||k.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(b,k),E=!0),k.resetForm?(this._bindResetFormAction(b,k.resetForm),E=!0):this.isTooltipOnly&&!E&&(this._bindLink(b,""),E=!0)),this.container.classList.add("linkAnnotation"),E&&this.container.append(b),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(k,D){k.href=this.linkService.getDestinationHash(D),k.onclick=()=>(D&&this.linkService.goToDestination(D),!1),(D||D==="")&&this.#t()}_bindNamedAction(k,D){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>(this.linkService.executeNamedAction(D),!1),this.#t()}#e(k,D,b=null){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>(this.downloadManager?.openOrDownloadData(D.content,D.filename,b),!1),this.#t()}#n(k,D){k.href=this.linkService.getAnchorUrl(""),k.onclick=()=>(this.linkService.executeSetOCGState(D),!1),this.#t()}_bindJSAction(k,D){k.href=this.linkService.getAnchorUrl("");const b=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const E of Object.keys(D.actions)){const w=b.get(E);w&&(k[w]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D.id,name:E}}),!1))}k.onclick||(k.onclick=()=>!1),this.#t()}_bindResetFormAction(k,D){const b=k.onclick;if(b||(k.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),b||(k.onclick=()=>!1);return}k.onclick=()=>{b?.();const{fields:E,refs:w,include:R}=D,L=[];if(E.length!==0||w.length!==0){const q=new Set(w);for(const $ of E){const J=this._fieldObjects[$]||[];for(const{id:j}of J)q.add(j)}for(const $ of Object.values(this._fieldObjects))for(const J of $)q.has(J.id)===R&&L.push(J)}else for(const q of Object.values(this._fieldObjects))L.push(...q);const U=this.annotationStorage,V=[];for(const q of L){const{id:$}=q;switch(V.push($),q.type){case"text":{const j=q.defaultValue||"";U.setValue($,{value:j});break}case"checkbox":case"radiobutton":{const j=q.defaultValue===q.exportValues;U.setValue($,{value:j});break}case"combobox":case"listbox":{const j=q.defaultValue||"";U.setValue($,{value:j});break}default:continue}const J=document.querySelector(`[data-element-id="${$}"]`);if(J){if(!T.has(J)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${$}`);continue}}else continue;J.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:V,name:"ResetForm"}}),!1}}}class x extends M{constructor(k){super(k,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const k=document.createElement("img");return k.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",k.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),k.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(k),this.container}}class I extends M{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(k){this.data.hasOwnCanvas&&(k.previousSibling?.nodeName==="CANVAS"&&(k.previousSibling.hidden=!0),k.hidden=!1)}_getKeyModifier(k){return o.FeatureTest.platform.isMac?k.metaKey:k.ctrlKey}_setEventListener(k,D,b,E,w){b.includes("mouse")?k.addEventListener(b,R=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:E,value:w(R),shift:R.shiftKey,modifier:this._getKeyModifier(R)}})}):k.addEventListener(b,R=>{if(b==="blur"){if(!D.focused||!R.relatedTarget)return;D.focused=!1}else if(b==="focus"){if(D.focused)return;D.focused=!0}w&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:E,value:w(R)}})})}_setEventListeners(k,D,b,E){for(const[w,R]of b)(R==="Action"||this.data.actions?.[R])&&((R==="Focus"||R==="Blur")&&(D||={focused:!1}),this._setEventListener(k,D,w,R,E),R==="Focus"&&!this.data.actions?.Blur?this._setEventListener(k,D,"blur","Blur",null):R==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(k,D,"focus","Focus",null))}_setBackgroundColor(k){const D=this.data.backgroundColor||null;k.style.backgroundColor=D===null?"transparent":o.Util.makeHexColor(D[0],D[1],D[2])}_setTextStyle(k){const D=["left","center","right"],{fontColor:b}=this.data.defaultAppearanceData,E=this.data.defaultAppearanceData.fontSize||A,w=k.style;let R;const L=2,U=V=>Math.round(10*V)/10;if(this.data.multiLine){const V=Math.abs(this.data.rect[3]-this.data.rect[1]-L),q=Math.round(V/(o.LINE_FACTOR*E))||1,$=V/q;R=Math.min(E,U($/o.LINE_FACTOR))}else{const V=Math.abs(this.data.rect[3]-this.data.rect[1]-L);R=Math.min(E,U(V/o.LINE_FACTOR))}w.fontSize=`calc(${R}px * var(--scale-factor))`,w.color=o.Util.makeHexColor(b[0],b[1],b[2]),this.data.textAlignment!==null&&(w.textAlign=D[this.data.textAlignment])}_setRequired(k,D){D?k.setAttribute("required",!0):k.removeAttribute("required"),k.setAttribute("aria-required",D)}}class F extends I{constructor(k){const D=k.renderForms||k.data.hasOwnCanvas||!k.data.hasAppearance&&!!k.data.fieldValue;super(k,{isRenderable:D})}setPropertyOnSiblings(k,D,b,E){const w=this.annotationStorage;for(const R of this._getElementsByName(k.name,k.id))R.domElement&&(R.domElement[D]=b),w.setValue(R.id,{[E]:b})}render(){const k=this.annotationStorage,D=this.data.id;this.container.classList.add("textWidgetAnnotation");let b=null;if(this.renderForms){const E=k.getValue(D,{value:this.data.fieldValue});let w=E.value||"";const R=k.getValue(D,{charLimit:this.data.maxLen}).charLimit;R&&w.length>R&&(w=w.slice(0,R));let L=E.formattedValue||this.data.textContent?.join(`
`)||null;L&&this.data.comb&&(L=L.replaceAll(/\s+/g,""));const U={userValue:w,formattedValue:L,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(b=document.createElement("textarea"),b.textContent=L??w,this.data.doNotScroll&&(b.style.overflowY="hidden")):(b=document.createElement("input"),b.type="text",b.setAttribute("value",L??w),this.data.doNotScroll&&(b.style.overflowX="hidden")),this.data.hasOwnCanvas&&(b.hidden=!0),T.add(b),b.setAttribute("data-element-id",D),b.disabled=this.data.readOnly,b.name=this.data.fieldName,b.tabIndex=g,this._setRequired(b,this.data.required),R&&(b.maxLength=R),b.addEventListener("input",q=>{k.setValue(D,{value:q.target.value}),this.setPropertyOnSiblings(b,"value",q.target.value,"value"),U.formattedValue=null}),b.addEventListener("resetform",q=>{const $=this.data.defaultFieldValue??"";b.value=U.userValue=$,U.formattedValue=null});let V=q=>{const{formattedValue:$}=U;$!=null&&(q.target.value=$),q.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){b.addEventListener("focus",$=>{if(U.focused)return;const{target:J}=$;U.userValue&&(J.value=U.userValue),U.lastCommittedValue=J.value,U.commitKey=1,this.data.actions?.Focus||(U.focused=!0)}),b.addEventListener("updatefromsandbox",$=>{this.showElementAndHideCanvas($.target);const J={value(j){U.userValue=j.detail.value??"",k.setValue(D,{value:U.userValue.toString()}),j.target.value=U.userValue},formattedValue(j){const{formattedValue:st}=j.detail;U.formattedValue=st,st!=null&&j.target!==document.activeElement&&(j.target.value=st),k.setValue(D,{formattedValue:st})},selRange(j){j.target.setSelectionRange(...j.detail.selRange)},charLimit:j=>{const{charLimit:st}=j.detail,{target:tt}=j;if(st===0){tt.removeAttribute("maxLength");return}tt.setAttribute("maxLength",st);let Y=U.userValue;!Y||Y.length<=st||(Y=Y.slice(0,st),tt.value=U.userValue=Y,k.setValue(D,{value:Y}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:Y,willCommit:!0,commitKey:1,selStart:tt.selectionStart,selEnd:tt.selectionEnd}}))}};this._dispatchEventFromSandbox(J,$)}),b.addEventListener("keydown",$=>{U.commitKey=1;let J=-1;if($.key==="Escape"?J=0:$.key==="Enter"&&!this.data.multiLine?J=2:$.key==="Tab"&&(U.commitKey=3),J===-1)return;const{value:j}=$.target;U.lastCommittedValue!==j&&(U.lastCommittedValue=j,U.userValue=j,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:j,willCommit:!0,commitKey:J,selStart:$.target.selectionStart,selEnd:$.target.selectionEnd}}))});const q=V;V=null,b.addEventListener("blur",$=>{if(!U.focused||!$.relatedTarget)return;this.data.actions?.Blur||(U.focused=!1);const{value:J}=$.target;U.userValue=J,U.lastCommittedValue!==J&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:J,willCommit:!0,commitKey:U.commitKey,selStart:$.target.selectionStart,selEnd:$.target.selectionEnd}}),q($)}),this.data.actions?.Keystroke&&b.addEventListener("beforeinput",$=>{U.lastCommittedValue=null;const{data:J,target:j}=$,{value:st,selectionStart:tt,selectionEnd:Y}=j;let Q=tt,vt=Y;switch($.inputType){case"deleteWordBackward":{const mt=st.substring(0,tt).match(/\w*[^\w]*$/);mt&&(Q-=mt[0].length);break}case"deleteWordForward":{const mt=st.substring(tt).match(/^[^\w]*\w*/);mt&&(vt+=mt[0].length);break}case"deleteContentBackward":tt===Y&&(Q-=1);break;case"deleteContentForward":tt===Y&&(vt+=1);break}$.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:st,change:J||"",willCommit:!1,selStart:Q,selEnd:vt}})}),this._setEventListeners(b,U,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.value)}if(V&&b.addEventListener("blur",V),this.data.comb){const $=(this.data.rect[2]-this.data.rect[0])/R;b.classList.add("comb"),b.style.letterSpacing=`calc(${$}px * var(--scale-factor) - 1ch)`}}else b=document.createElement("div"),b.textContent=this.data.fieldValue,b.style.verticalAlign="middle",b.style.display="table-cell",this.data.hasOwnCanvas&&(b.hidden=!0);return this._setTextStyle(b),this._setBackgroundColor(b),this._setDefaultPropertiesFromJS(b),this.container.append(b),this.container}}class P extends I{constructor(k){super(k,{isRenderable:!!k.data.hasOwnCanvas})}}class H extends I{constructor(k){super(k,{isRenderable:k.renderForms})}render(){const k=this.annotationStorage,D=this.data,b=D.id;let E=k.getValue(b,{value:D.exportValue===D.fieldValue}).value;typeof E=="string"&&(E=E!=="Off",k.setValue(b,{value:E})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const w=document.createElement("input");return T.add(w),w.setAttribute("data-element-id",b),w.disabled=D.readOnly,this._setRequired(w,this.data.required),w.type="checkbox",w.name=D.fieldName,E&&w.setAttribute("checked",!0),w.setAttribute("exportValue",D.exportValue),w.tabIndex=g,w.addEventListener("change",R=>{const{name:L,checked:U}=R.target;for(const V of this._getElementsByName(L,b)){const q=U&&V.exportValue===D.exportValue;V.domElement&&(V.domElement.checked=q),k.setValue(V.id,{value:q})}k.setValue(b,{value:U})}),w.addEventListener("resetform",R=>{const L=D.defaultFieldValue||"Off";R.target.checked=L===D.exportValue}),this.enableScripting&&this.hasJSActions&&(w.addEventListener("updatefromsandbox",R=>{const L={value(U){U.target.checked=U.detail.value!=="Off",k.setValue(b,{value:U.target.checked})}};this._dispatchEventFromSandbox(L,R)}),this._setEventListeners(w,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],R=>R.target.checked)),this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}class O extends I{constructor(k){super(k,{isRenderable:k.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const k=this.annotationStorage,D=this.data,b=D.id;let E=k.getValue(b,{value:D.fieldValue===D.buttonValue}).value;if(typeof E=="string"&&(E=E!==D.buttonValue,k.setValue(b,{value:E})),E)for(const R of this._getElementsByName(D.fieldName,b))k.setValue(R.id,{value:!1});const w=document.createElement("input");if(T.add(w),w.setAttribute("data-element-id",b),w.disabled=D.readOnly,this._setRequired(w,this.data.required),w.type="radio",w.name=D.fieldName,E&&w.setAttribute("checked",!0),w.tabIndex=g,w.addEventListener("change",R=>{const{name:L,checked:U}=R.target;for(const V of this._getElementsByName(L,b))k.setValue(V.id,{value:!1});k.setValue(b,{value:U})}),w.addEventListener("resetform",R=>{const L=D.defaultFieldValue;R.target.checked=L!=null&&L===D.buttonValue}),this.enableScripting&&this.hasJSActions){const R=D.buttonValue;w.addEventListener("updatefromsandbox",L=>{const U={value:V=>{const q=R===V.detail.value;for(const $ of this._getElementsByName(V.target.name)){const J=q&&$.id===b;$.domElement&&($.domElement.checked=J),k.setValue($.id,{value:J})}}};this._dispatchEventFromSandbox(U,L)}),this._setEventListeners(w,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],L=>L.target.checked)}return this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}class z extends y{constructor(k){super(k,{ignoreBorder:k.data.hasAppearance})}render(){const k=super.render();k.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(k.title=this.data.alternativeText);const D=k.lastChild;return this.enableScripting&&this.hasJSActions&&D&&(this._setDefaultPropertiesFromJS(D),D.addEventListener("updatefromsandbox",b=>{this._dispatchEventFromSandbox({},b)})),k}}class it extends I{constructor(k){super(k,{isRenderable:k.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const k=this.annotationStorage,D=this.data.id,b=k.getValue(D,{value:this.data.fieldValue}),E=document.createElement("select");T.add(E),E.setAttribute("data-element-id",D),E.disabled=this.data.readOnly,this._setRequired(E,this.data.required),E.name=this.data.fieldName,E.tabIndex=g;let w=this.data.combo&&this.data.options.length>0;this.data.combo||(E.size=this.data.options.length,this.data.multiSelect&&(E.multiple=!0)),E.addEventListener("resetform",q=>{const $=this.data.defaultFieldValue;for(const J of E.options)J.selected=J.value===$});for(const q of this.data.options){const $=document.createElement("option");$.textContent=q.displayValue,$.value=q.exportValue,b.value.includes(q.exportValue)&&($.setAttribute("selected",!0),w=!1),E.append($)}let R=null;if(w){const q=document.createElement("option");q.value=" ",q.setAttribute("hidden",!0),q.setAttribute("selected",!0),E.prepend(q),R=()=>{q.remove(),E.removeEventListener("input",R),R=null},E.addEventListener("input",R)}const L=q=>{const $=q?"value":"textContent",{options:J,multiple:j}=E;return j?Array.prototype.filter.call(J,st=>st.selected).map(st=>st[$]):J.selectedIndex===-1?null:J[J.selectedIndex][$]};let U=L(!1);const V=q=>{const $=q.target.options;return Array.prototype.map.call($,J=>({displayValue:J.textContent,exportValue:J.value}))};return this.enableScripting&&this.hasJSActions?(E.addEventListener("updatefromsandbox",q=>{const $={value(J){R?.();const j=J.detail.value,st=new Set(Array.isArray(j)?j:[j]);for(const tt of E.options)tt.selected=st.has(tt.value);k.setValue(D,{value:L(!0)}),U=L(!1)},multipleSelection(J){E.multiple=!0},remove(J){const j=E.options,st=J.detail.remove;j[st].selected=!1,E.remove(st),j.length>0&&Array.prototype.findIndex.call(j,Y=>Y.selected)===-1&&(j[0].selected=!0),k.setValue(D,{value:L(!0),items:V(J)}),U=L(!1)},clear(J){for(;E.length!==0;)E.remove(0);k.setValue(D,{value:null,items:[]}),U=L(!1)},insert(J){const{index:j,displayValue:st,exportValue:tt}=J.detail.insert,Y=E.children[j],Q=document.createElement("option");Q.textContent=st,Q.value=tt,Y?Y.before(Q):E.append(Q),k.setValue(D,{value:L(!0),items:V(J)}),U=L(!1)},items(J){const{items:j}=J.detail;for(;E.length!==0;)E.remove(0);for(const st of j){const{displayValue:tt,exportValue:Y}=st,Q=document.createElement("option");Q.textContent=tt,Q.value=Y,E.append(Q)}E.options.length>0&&(E.options[0].selected=!0),k.setValue(D,{value:L(!0),items:V(J)}),U=L(!1)},indices(J){const j=new Set(J.detail.indices);for(const st of J.target.options)st.selected=j.has(st.index);k.setValue(D,{value:L(!0)}),U=L(!1)},editable(J){J.target.disabled=!J.detail.editable}};this._dispatchEventFromSandbox($,q)}),E.addEventListener("input",q=>{const $=L(!0);k.setValue(D,{value:$}),q.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:D,name:"Keystroke",value:U,changeEx:$,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(E,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],q=>q.target.value)):E.addEventListener("input",function(q){k.setValue(D,{value:L(!0)})}),this.data.combo&&this._setTextStyle(E),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class W extends M{constructor(k){const{data:D,elements:b}=k;super(k,{isRenderable:M._hasPopupData(D)}),this.elements=b}render(){this.container.classList.add("popupAnnotation");const k=new ut({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),D=[];for(const b of this.elements)b.popup=k,D.push(b.data.id),b.addHighlightArea();return this.container.setAttribute("aria-controls",D.map(b=>`${o.AnnotationPrefix}${b}`).join(",")),this.container}}class ut{#t=this.#v.bind(this);#e=this.#m.bind(this);#n=this.#A.bind(this);#i=this.#S.bind(this);#s=null;#o=null;#r=null;#l=null;#u=null;#c=null;#h=null;#f=!1;#d=null;#a=null;#p=null;#g=null;#y=!1;constructor({container:k,color:D,elements:b,titleObj:E,modificationDate:w,contentsObj:R,richText:L,parent:U,rect:V,parentRect:q,open:$}){this.#o=k,this.#g=E,this.#r=R,this.#p=L,this.#c=U,this.#s=D,this.#a=V,this.#h=q,this.#u=b,this.#l=r.PDFDateString.toDateObject(w),this.trigger=b.flatMap(J=>J.getElementsToTriggerPopup());for(const J of this.trigger)J.addEventListener("click",this.#i),J.addEventListener("mouseenter",this.#n),J.addEventListener("mouseleave",this.#e),J.classList.add("popupTriggerArea");for(const J of b)J.container?.addEventListener("keydown",this.#t);this.#o.hidden=!0,$&&this.#S()}render(){if(this.#d)return;const{page:{view:k},viewport:{rawDims:{pageWidth:D,pageHeight:b,pageX:E,pageY:w}}}=this.#c,R=this.#d=document.createElement("div");if(R.className="popup",this.#s){const mt=R.style.outlineColor=o.Util.makeHexColor(...this.#s);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?R.style.backgroundColor=`color-mix(in srgb, ${mt} 30%, white)`:R.style.backgroundColor=o.Util.makeHexColor(...this.#s.map(Dt=>Math.floor(.7*(255-Dt)+Dt)))}const L=document.createElement("span");L.className="header";const U=document.createElement("h1");if(L.append(U),{dir:U.dir,str:U.textContent}=this.#g,R.append(L),this.#l){const mt=document.createElement("span");mt.classList.add("popupDate"),mt.setAttribute("data-l10n-id","pdfjs-annotation-date-string"),mt.setAttribute("data-l10n-args",JSON.stringify({date:this.#l.toLocaleDateString(),time:this.#l.toLocaleTimeString()})),L.append(mt)}const V=this.#r,q=this.#p;if(q?.str&&(!V?.str||V.str===q.str))h.XfaLayer.render({xfaHtml:q.html,intent:"richText",div:R}),R.lastChild.classList.add("richText","popupContent");else{const mt=this._formatContents(V);R.append(mt)}let $=!!this.#h,J=$?this.#h:this.#a;for(const mt of this.#u)if(!J||o.Util.intersect(mt.data.rect,J)!==null){J=mt.data.rect,$=!0;break}const j=o.Util.normalizeRect([J[0],k[3]-J[1]+k[1],J[2],k[3]-J[3]+k[1]]),tt=$?J[2]-J[0]+5:0,Y=j[0]+tt,Q=j[1],{style:vt}=this.#o;vt.left=`${100*(Y-E)/D}%`,vt.top=`${100*(Q-w)/b}%`,this.#o.append(R)}_formatContents({str:k,dir:D}){const b=document.createElement("p");b.classList.add("popupContent"),b.dir=D;const E=k.split(/(?:\r\n?|\n)/);for(let w=0,R=E.length;w<R;++w){const L=E[w];b.append(document.createTextNode(L)),w<R-1&&b.append(document.createElement("br"))}return b}#v(k){k.altKey||k.shiftKey||k.ctrlKey||k.metaKey||(k.key==="Enter"||k.key==="Escape"&&this.#f)&&this.#S()}#S(){this.#f=!this.#f,this.#f?(this.#A(),this.#o.addEventListener("click",this.#i),this.#o.addEventListener("keydown",this.#t)):(this.#m(),this.#o.removeEventListener("click",this.#i),this.#o.removeEventListener("keydown",this.#t))}#A(){this.#d||this.render(),this.isVisible?this.#f&&this.#o.classList.add("focused"):(this.#o.hidden=!1,this.#o.style.zIndex=parseInt(this.#o.style.zIndex)+1e3)}#m(){this.#o.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#o.hidden=!0,this.#o.style.zIndex=parseInt(this.#o.style.zIndex)-1e3)}forceHide(){this.#y=this.isVisible,this.#y&&(this.#o.hidden=!0)}maybeShow(){this.#y&&(this.#y=!1,this.#o.hidden=!1)}get isVisible(){return this.#o.hidden===!1}}class pt extends M{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0}),this.textContent=k.data.textContent,this.textPosition=k.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const k=document.createElement("div");k.classList.add("annotationTextContent"),k.setAttribute("role","comment");for(const D of this.textContent){const b=document.createElement("span");b.textContent=D,k.append(b)}this.container.append(k)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}get _isEditable(){return this.data.hasOwnCanvas}}class xt extends M{#t=null;constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const k=this.data,{width:D,height:b}=_(k.rect),E=this.svgFactory.create(D,b,!0),w=this.#t=this.svgFactory.createElement("svg:line");return w.setAttribute("x1",k.rect[2]-k.lineCoordinates[0]),w.setAttribute("y1",k.rect[3]-k.lineCoordinates[1]),w.setAttribute("x2",k.rect[2]-k.lineCoordinates[2]),w.setAttribute("y2",k.rect[3]-k.lineCoordinates[3]),w.setAttribute("stroke-width",k.borderStyle.width||1),w.setAttribute("stroke","transparent"),w.setAttribute("fill","transparent"),E.append(w),this.container.append(E),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Mt extends M{#t=null;constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const k=this.data,{width:D,height:b}=_(k.rect),E=this.svgFactory.create(D,b,!0),w=k.borderStyle.width,R=this.#t=this.svgFactory.createElement("svg:rect");return R.setAttribute("x",w/2),R.setAttribute("y",w/2),R.setAttribute("width",D-w),R.setAttribute("height",b-w),R.setAttribute("stroke-width",w||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","transparent"),E.append(R),this.container.append(E),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Tt extends M{#t=null;constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const k=this.data,{width:D,height:b}=_(k.rect),E=this.svgFactory.create(D,b,!0),w=k.borderStyle.width,R=this.#t=this.svgFactory.createElement("svg:ellipse");return R.setAttribute("cx",D/2),R.setAttribute("cy",b/2),R.setAttribute("rx",D/2-w/2),R.setAttribute("ry",b/2-w/2),R.setAttribute("stroke-width",w||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","transparent"),E.append(R),this.container.append(E),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class X extends M{#t=null;constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const k=this.data,{width:D,height:b}=_(k.rect),E=this.svgFactory.create(D,b,!0);let w=[];for(const L of k.vertices){const U=L.x-k.rect[0],V=k.rect[3]-L.y;w.push(U+","+V)}w=w.join(" ");const R=this.#t=this.svgFactory.createElement(this.svgElementName);return R.setAttribute("points",w),R.setAttribute("stroke-width",k.borderStyle.width||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","transparent"),E.append(R),this.container.append(E),!k.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class B extends X{constructor(k){super(k),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class et extends M{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class lt extends M{#t=[];constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const k=this.data,{width:D,height:b}=_(k.rect),E=this.svgFactory.create(D,b,!0);for(const w of k.inkLists){let R=[];for(const U of w){const V=U.x-k.rect[0],q=k.rect[3]-U.y;R.push(`${V},${q}`)}R=R.join(" ");const L=this.svgFactory.createElement(this.svgElementName);this.#t.push(L),L.setAttribute("points",R),L.setAttribute("stroke-width",k.borderStyle.width||1),L.setAttribute("stroke","transparent"),L.setAttribute("fill","transparent"),!k.popupRef&&this.hasPopupData&&this._createPopup(),E.append(L)}return this.container.append(E),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class gt extends M{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class _t extends M{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class K extends M{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class rt extends M{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class yt extends M{constructor(k){super(k,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Ct extends M{#t=null;constructor(k){super(k,{isRenderable:!0});const{filename:D,content:b}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(D,!0),this.content=b,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:D,content:b})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:k,data:D}=this;let b;D.hasAppearance||D.fillAlpha===0?b=document.createElement("div"):(b=document.createElement("img"),b.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(D.name)?"paperclip":"pushpin"}.svg`,D.fillAlpha&&D.fillAlpha<1&&(b.style=`filter: opacity(${Math.round(D.fillAlpha*100)}%);`)),b.addEventListener("dblclick",this.#e.bind(this)),this.#t=b;const{isMac:E}=o.FeatureTest.platform;return k.addEventListener("keydown",w=>{w.key==="Enter"&&(E?w.metaKey:w.ctrlKey)&&this.#e()}),!D.popupRef&&this.hasPopupData?this._createPopup():b.classList.add("popupTriggerArea"),k.append(b),k}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class wt{#t=null;#e=null;#n=new Map;constructor({div:k,accessibilityManager:D,annotationCanvasMap:b,page:E,viewport:w}){this.div=k,this.#t=D,this.#e=b,this.page=E,this.viewport=w,this.zIndex=0}#i(k,D){const b=k.firstChild||k;b.id=`${o.AnnotationPrefix}${D}`,this.div.append(k),this.#t?.moveElementInDOM(this.div,k,b,!1)}async render(k){const{annotations:D}=k,b=this.div;(0,r.setLayerDimensions)(b,this.viewport);const E=new Map,w={data:null,layer:b,linkService:k.linkService,downloadManager:k.downloadManager,imageResourcesPath:k.imageResourcesPath||"",renderForms:k.renderForms!==!1,svgFactory:new r.DOMSVGFactory,annotationStorage:k.annotationStorage||new u.AnnotationStorage,enableScripting:k.enableScripting===!0,hasJSActions:k.hasJSActions,fieldObjects:k.fieldObjects,parent:this,elements:null};for(const R of D){if(R.noHTML)continue;const L=R.annotationType===o.AnnotationType.POPUP;if(L){const q=E.get(R.id);if(!q)continue;w.elements=q}else{const{width:q,height:$}=_(R.rect);if(q<=0||$<=0)continue}w.data=R;const U=C.create(w);if(!U.isRenderable)continue;if(!L&&R.popupRef){const q=E.get(R.popupRef);q?q.push(U):E.set(R.popupRef,[U])}U.annotationEditorType>0&&this.#n.set(U.data.id,U);const V=U.render();R.hidden&&(V.style.visibility="hidden"),this.#i(V,R.id)}this.#s()}update({viewport:k}){const D=this.div;this.viewport=k,(0,r.setLayerDimensions)(D,{rotation:k.rotation}),this.#s(),D.hidden=!1}#s(){if(!this.#e)return;const k=this.div;for(const[D,b]of this.#e){const E=k.querySelector(`[data-annotation-id="${D}"]`);if(!E)continue;const{firstChild:w}=E;w?w.nodeName==="CANVAS"?w.replaceWith(b):w.before(b):E.append(b)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(k){return this.#n.get(k)}}}),780:((i,e,s)=>{s.d(e,{AnnotationStorage:()=>p,PrintAnnotationStorage:()=>v,SerializableEmpty:()=>f});var o=s(266),r=s(115),u=s(825);const f=Object.freeze({map:null,hash:"",transfer:void 0});class p{#t=!1;#e=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(g,A){const T=this.#e.get(g);return T===void 0?A:Object.assign(A,T)}getRawValue(g){return this.#e.get(g)}remove(g){if(this.#e.delete(g),this.#e.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const A of this.#e.values())if(A instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(g,A){const T=this.#e.get(g);let _=!1;if(T!==void 0)for(const[C,M]of Object.entries(A))T[C]!==M&&(_=!0,T[C]=M);else _=!0,this.#e.set(g,A);_&&this.#n(),A instanceof r.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(A.constructor._type)}has(g){return this.#e.has(g)}getAll(){return this.#e.size>0?(0,o.objectFromMap)(this.#e):null}setAll(g){for(const[A,T]of Object.entries(g))this.setValue(A,T)}get size(){return this.#e.size}#n(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new v(this)}get serializable(){if(this.#e.size===0)return f;const g=new Map,A=new u.MurmurHash3_64,T=[],_=Object.create(null);let C=!1;for(const[M,y]of this.#e){const x=y instanceof r.AnnotationEditor?y.serialize(!1,_):y;x&&(g.set(M,x),A.update(`${M}:${JSON.stringify(x)}`),C||=!!x.bitmap)}if(C)for(const M of g.values())M.bitmap&&T.push(M.bitmap);return g.size>0?{map:g,hash:A.hexdigest(),transfer:T}:f}}class v extends p{#t;constructor(g){super();const{map:A,hash:T,transfer:_}=g.serializable,C=structuredClone(A,_?{transfer:_}:null);this.#t={map:C,hash:T,transfer:_}}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}}}),406:((i,e,s)=>{s.a(i,async(o,r)=>{try{let xt=function(b){if(typeof b=="string"||b instanceof URL?b={url:b}:(0,u.isArrayBuffer)(b)&&(b={data:b}),typeof b!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!b.url&&!b.data&&!b.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const E=new B,{docId:w}=E,R=b.url?Tt(b.url):null,L=b.data?X(b.data):null,U=b.httpHeaders||null,V=b.withCredentials===!0,q=b.password??null,$=b.range instanceof et?b.range:null,J=Number.isInteger(b.rangeChunkSize)&&b.rangeChunkSize>0?b.rangeChunkSize:H;let j=b.worker instanceof rt?b.worker:null;const st=b.verbosity,tt=typeof b.docBaseUrl=="string"&&!(0,p.isDataScheme)(b.docBaseUrl)?b.docBaseUrl:null,Y=typeof b.cMapUrl=="string"?b.cMapUrl:null,Q=b.cMapPacked!==!1,vt=b.CMapReaderFactory||W,mt=typeof b.standardFontDataUrl=="string"?b.standardFontDataUrl:null,Rt=b.StandardFontDataFactory||pt,Dt=b.stopAtErrors!==!0,Nt=Number.isInteger(b.maxImageSize)&&b.maxImageSize>-1?b.maxImageSize:-1,Ft=b.isEvalSupported!==!1,kt=typeof b.isOffscreenCanvasSupported=="boolean"?b.isOffscreenCanvasSupported:!u.isNodeJS,Gt=Number.isInteger(b.canvasMaxAreaInBytes)?b.canvasMaxAreaInBytes:-1,Jt=typeof b.disableFontFace=="boolean"?b.disableFontFace:u.isNodeJS,Xt=b.fontExtraProperties===!0,$t=b.enableXfa===!0,Ut=b.ownerDocument||globalThis.document,se=b.disableRange===!0,Ae=b.disableStream===!0,ke=b.disableAutoFetch===!0,ge=b.pdfBug===!0,fe=$?$.length:b.length??NaN,ce=typeof b.useSystemFonts=="boolean"?b.useSystemFonts:!u.isNodeJS&&!Jt,Me=typeof b.useWorkerFetch=="boolean"?b.useWorkerFetch:vt===p.DOMCMapReaderFactory&&Rt===p.DOMStandardFontDataFactory&&Y&&mt&&(0,p.isValidFetchUrl)(Y,document.baseURI)&&(0,p.isValidFetchUrl)(mt,document.baseURI),Be=b.canvasFactory||new it({ownerDocument:Ut}),Un=b.filterFactory||new ut({docId:w,ownerDocument:Ut}),Nn=null;(0,u.setVerbosityLevel)(st);const Pe={canvasFactory:Be,filterFactory:Un};if(Me||(Pe.cMapReaderFactory=new vt({baseUrl:Y,isCompressed:Q}),Pe.standardFontDataFactory=new Rt({baseUrl:mt})),!j){const nn={verbosity:st,port:A.GlobalWorkerOptions.workerPort};j=nn.port?rt.fromPort(nn):new rt(nn),E._worker=j}const Ce={docId:w,apiVersion:"4.0.379",data:L,password:q,disableAutoFetch:ke,rangeChunkSize:J,length:fe,docBaseUrl:tt,enableXfa:$t,evaluatorOptions:{maxImageSize:Nt,disableFontFace:Jt,ignoreErrors:Dt,isEvalSupported:Ft,isOffscreenCanvasSupported:kt,canvasMaxAreaInBytes:Gt,fontExtraProperties:Xt,useSystemFonts:ce,cMapUrl:Me?Y:null,standardFontDataUrl:Me?mt:null}},oi={ignoreErrors:Dt,isEvalSupported:Ft,disableFontFace:Jt,fontExtraProperties:Xt,enableXfa:$t,ownerDocument:Ut,disableAutoFetch:ke,pdfBug:ge,styleElement:Nn};return j.promise.then(function(){if(E.destroyed)throw new Error("Loading aborted");const nn=Mt(j,Ce),ai=new Promise(function(ve){let ri;$?ri=new M.PDFDataTransportStream({length:fe,initialData:$.initialData,progressiveDone:$.progressiveDone,contentDispositionFilename:$.contentDispositionFilename,disableRange:se,disableStream:Ae},$):L||(ri=(Dn=>u.isNodeJS?new I.PDFNodeStream(Dn):(0,p.isValidFetchUrl)(Dn.url)?new y.PDFFetchStream(Dn):new x.PDFNetworkStream(Dn))({url:R,length:fe,httpHeaders:U,withCredentials:V,rangeChunkSize:J,disableRange:se,disableStream:Ae})),ve(ri)});return Promise.all([nn,ai]).then(function([ve,ri]){if(E.destroyed)throw new Error("Loading aborted");const ns=new T.MessageHandler(w,ve,j.port),Dn=new yt(ns,E,ri,oi,Pe);E._transport=Dn,ns.send("Ready",null)})}).catch(E._capability.reject),E},Tt=function(b){if(b instanceof URL)return b.href;try{return new URL(b,window.location).href}catch{if(u.isNodeJS&&typeof b=="string")return b}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")},X=function(b){if(u.isNodeJS&&typeof Buffer<"u"&&b instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength)return b;if(typeof b=="string")return(0,u.stringToBytes)(b);if(typeof b=="object"&&!isNaN(b?.length)||(0,u.isArrayBuffer)(b))return new Uint8Array(b);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")};s.d(e,{PDFDataRangeTransport:()=>et,PDFWorker:()=>rt,build:()=>D,getDocument:()=>xt,version:()=>k});var u=s(266),f=s(780),p=s(473),v=s(742),h=s(738),g=s(250),A=s(368),T=s(694),_=s(472),C=s(890),M=s(92),y=s(171),x=s(474),I=s(498),F=s(521),P=o([h,I]);[h,I]=P.then?(await P)():P;const H=65536,O=100,z=5e3,it=u.isNodeJS?h.NodeCanvasFactory:p.DOMCanvasFactory,W=u.isNodeJS?h.NodeCMapReaderFactory:p.DOMCMapReaderFactory,ut=u.isNodeJS?h.NodeFilterFactory:p.DOMFilterFactory,pt=u.isNodeJS?h.NodeStandardFontDataFactory:p.DOMStandardFontDataFactory;async function Mt(b,E){if(b.destroyed)throw new Error("Worker was destroyed");const w=await b.messageHandler.sendWithPromise("GetDocRequest",E,E.data?[E.data.buffer]:null);if(b.destroyed)throw new Error("Worker was destroyed");return w}class B{static#t=0;constructor(){this._capability=new u.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${B.#t++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(E){throw this._worker?.port&&delete this._worker._pendingDestroy,E}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}class et{constructor(E,w,R=!1,L=null){this.length=E,this.initialData=w,this.progressiveDone=R,this.contentDispositionFilename=L,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new u.PromiseCapability}addRangeListener(E){this._rangeListeners.push(E)}addProgressListener(E){this._progressListeners.push(E)}addProgressiveReadListener(E){this._progressiveReadListeners.push(E)}addProgressiveDoneListener(E){this._progressiveDoneListeners.push(E)}onDataRange(E,w){for(const R of this._rangeListeners)R(E,w)}onDataProgress(E,w){this._readyCapability.promise.then(()=>{for(const R of this._progressListeners)R(E,w)})}onDataProgressiveRead(E){this._readyCapability.promise.then(()=>{for(const w of this._progressiveReadListeners)w(E)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const E of this._progressiveDoneListeners)E()})}transportReady(){this._readyCapability.resolve()}requestDataRange(E,w){(0,u.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class lt{constructor(E,w){this._pdfInfo=E,this._transport=w}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,u.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(E){return this._transport.getPage(E)}getPageIndex(E){return this._transport.getPageIndex(E)}getDestinations(){return this._transport.getDestinations()}getDestination(E){return this._transport.getDestination(E)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(E=!1){return this._transport.startCleanup(E||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class gt{#t=null;#e=!1;constructor(E,w,R,L=!1){this._pageIndex=E,this._pageInfo=w,this._transport=R,this._stats=L?new p.StatTimer:null,this._pdfBug=L,this.commonObjs=R.commonObjs,this.objs=new Ct,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:E,rotation:w=this.rotate,offsetX:R=0,offsetY:L=0,dontFlip:U=!1}={}){return new p.PageViewport({viewBox:this.view,scale:E,rotation:w,offsetX:R,offsetY:L,dontFlip:U})}getAnnotations({intent:E="display"}={}){const w=this._transport.getRenderingIntent(E);return this._transport.getAnnotations(this._pageIndex,w.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,u.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:E,viewport:w,intent:R="display",annotationMode:L=u.AnnotationMode.ENABLE,transform:U=null,background:V=null,optionalContentConfigPromise:q=null,annotationCanvasMap:$=null,pageColors:J=null,printAnnotationStorage:j=null}){this._stats?.time("Overall");const st=this._transport.getRenderingIntent(R,L,j);this.#e=!1,this.#i(),q||(q=this._transport.getOptionalContentConfig());let tt=this._intentStates.get(st.cacheKey);tt||(tt=Object.create(null),this._intentStates.set(st.cacheKey,tt)),tt.streamReaderCancelTimeout&&(clearTimeout(tt.streamReaderCancelTimeout),tt.streamReaderCancelTimeout=null);const Y=!!(st.renderingIntent&u.RenderingIntentFlag.PRINT);tt.displayReadyCapability||(tt.displayReadyCapability=new u.PromiseCapability,tt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(st));const Q=Rt=>{tt.renderTasks.delete(vt),(this._maybeCleanupAfterRender||Y)&&(this.#e=!0),this.#n(!Y),Rt?(vt.capability.reject(Rt),this._abortOperatorList({intentState:tt,reason:Rt instanceof Error?Rt:new Error(Rt)})):vt.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},vt=new St({callback:Q,params:{canvasContext:E,viewport:w,transform:U,background:V},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:$,operatorList:tt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Y,pdfBug:this._pdfBug,pageColors:J});(tt.renderTasks||=new Set).add(vt);const mt=vt.task;return Promise.all([tt.displayReadyCapability.promise,q]).then(([Rt,Dt])=>{if(this.destroyed){Q();return}this._stats?.time("Rendering"),vt.initializeGraphics({transparency:Rt,optionalContentConfig:Dt}),vt.operatorListChanged()}).catch(Q),mt}getOperatorList({intent:E="display",annotationMode:w=u.AnnotationMode.ENABLE,printAnnotationStorage:R=null}={}){function L(){V.operatorList.lastChunk&&(V.opListReadCapability.resolve(V.operatorList),V.renderTasks.delete(q))}const U=this._transport.getRenderingIntent(E,w,R,!0);let V=this._intentStates.get(U.cacheKey);V||(V=Object.create(null),this._intentStates.set(U.cacheKey,V));let q;return V.opListReadCapability||(q=Object.create(null),q.operatorListChanged=L,V.opListReadCapability=new u.PromiseCapability,(V.renderTasks||=new Set).add(q),V.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(U)),V.opListReadCapability.promise}streamTextContent({includeMarkedContent:E=!1,disableNormalization:w=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:E===!0,disableNormalization:w===!0},{highWaterMark:100,size(L){return L.items.length}})}getTextContent(E={}){if(this._transport._htmlForXfa)return this.getXfa().then(R=>F.XfaText.textContent(R));const w=this.streamTextContent(E);return new Promise(function(R,L){function U(){V.read().then(function({value:$,done:J}){if(J){R(q);return}Object.assign(q.styles,$.styles),q.items.push(...$.items),U()},L)}const V=w.getReader(),q={items:[],styles:Object.create(null)};U()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const E=[];for(const w of this._intentStates.values())if(this._abortOperatorList({intentState:w,reason:new Error("Page was destroyed."),force:!0}),!w.opListReadCapability)for(const R of w.renderTasks)E.push(R.completed),R.cancel();return this.objs.clear(),this.#e=!1,this.#i(),Promise.all(E)}cleanup(E=!1){this.#e=!0;const w=this.#n(!1);return E&&w&&(this._stats&&=new p.StatTimer),w}#n(E=!1){if(this.#i(),!this.#e||this.destroyed)return!1;if(E)return this.#t=setTimeout(()=>{this.#t=null,this.#n(!1)},z),!1;for(const{renderTasks:w,operatorList:R}of this._intentStates.values())if(w.size>0||!R.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}#i(){this.#t&&(clearTimeout(this.#t),this.#t=null)}_startRenderPage(E,w){const R=this._intentStates.get(w);R&&(this._stats?.timeEnd("Page Request"),R.displayReadyCapability?.resolve(E))}_renderPageChunk(E,w){for(let R=0,L=E.length;R<L;R++)w.operatorList.fnArray.push(E.fnArray[R]),w.operatorList.argsArray.push(E.argsArray[R]);w.operatorList.lastChunk=E.lastChunk,w.operatorList.separateAnnots=E.separateAnnots;for(const R of w.renderTasks)R.operatorListChanged();E.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:E,cacheKey:w,annotationStorageSerializable:R}){const{map:L,transfer:U}=R,q=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:E,cacheKey:w,annotationStorage:L},U).getReader(),$=this._intentStates.get(w);$.streamReader=q;const J=()=>{q.read().then(({value:j,done:st})=>{if(st){$.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(j,$),J())},j=>{if($.streamReader=null,!this._transport.destroyed){if($.operatorList){$.operatorList.lastChunk=!0;for(const st of $.renderTasks)st.operatorListChanged();this.#n(!0)}if($.displayReadyCapability)$.displayReadyCapability.reject(j);else if($.opListReadCapability)$.opListReadCapability.reject(j);else throw j}})};J()}_abortOperatorList({intentState:E,reason:w,force:R=!1}){if(E.streamReader){if(E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null),!R){if(E.renderTasks.size>0)return;if(w instanceof p.RenderingCancelledException){let L=O;w.extraDelay>0&&w.extraDelay<1e3&&(L+=w.extraDelay),E.streamReaderCancelTimeout=setTimeout(()=>{E.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:E,reason:w,force:!0})},L);return}}if(E.streamReader.cancel(new u.AbortException(w.message)).catch(()=>{}),E.streamReader=null,!this._transport.destroyed){for(const[L,U]of this._intentStates)if(U===E){this._intentStates.delete(L);break}this.cleanup()}}}get stats(){return this._stats}}class _t{#t=new Set;#e=Promise.resolve();postMessage(E,w){const R={data:structuredClone(E,w?{transfer:w}:null)};this.#e.then(()=>{for(const L of this.#t)L.call(this,R)})}addEventListener(E,w){this.#t.add(w)}removeEventListener(E,w){this.#t.delete(w)}terminate(){this.#t.clear()}}const K={isWorkerDisabled:!1,fakeWorkerId:0};u.isNodeJS&&(K.isWorkerDisabled=!0,A.GlobalWorkerOptions.workerSrc||="./pdf.worker.mjs"),K.isSameOrigin=function(b,E){let w;try{if(w=new URL(b),!w.origin||w.origin==="null")return!1}catch{return!1}const R=new URL(E,w);return w.origin===R.origin},K.createCDNWrapper=function(b){const E=`await import("${b}");`;return URL.createObjectURL(new Blob([E],{type:"text/javascript"}))};class rt{static#t;constructor({name:E=null,port:w=null,verbosity:R=(0,u.getVerbosityLevel)()}={}){if(this.name=E,this.destroyed=!1,this.verbosity=R,this._readyCapability=new u.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,w){if(rt.#t?.has(w))throw new Error("Cannot use more than one PDFWorker per port.");(rt.#t||=new WeakMap).set(w,this),this._initializeFromPort(w);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(E){this._port=E,this._messageHandler=new T.MessageHandler("main","worker",E),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!K.isWorkerDisabled&&!rt.#e){let{workerSrc:E}=rt;try{K.isSameOrigin(window.location.href,E)||(E=K.createCDNWrapper(new URL(E,window.location).href));const w=new Worker(E,{type:"module"}),R=new T.MessageHandler("main","worker",w),L=()=>{w.removeEventListener("error",U),R.destroy(),w.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},U=()=>{this._webWorker||L()};w.addEventListener("error",U),R.on("test",q=>{if(w.removeEventListener("error",U),this.destroyed){L();return}q?(this._messageHandler=R,this._port=w,this._webWorker=w,this._readyCapability.resolve(),R.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),R.destroy(),w.terminate())}),R.on("ready",q=>{if(w.removeEventListener("error",U),this.destroyed){L();return}try{V()}catch{this._setupFakeWorker()}});const V=()=>{const q=new Uint8Array;R.send("test",q,[q.buffer])};V();return}catch{(0,u.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){K.isWorkerDisabled||((0,u.warn)("Setting up fake worker."),K.isWorkerDisabled=!0),rt._setupFakeWorkerGlobal.then(E=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const w=new _t;this._port=w;const R=`fake${K.fakeWorkerId++}`,L=new T.MessageHandler(R+"_worker",R,w);E.setup(L,w);const U=new T.MessageHandler(R,R+"_worker",w);this._messageHandler=U,this._readyCapability.resolve(),U.send("configure",{verbosity:this.verbosity})}).catch(E=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${E.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),rt.#t?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(E){if(!E?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const w=this.#t?.get(E.port);if(w){if(w._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return w}return new rt(E)}static get workerSrc(){if(A.GlobalWorkerOptions.workerSrc)return A.GlobalWorkerOptions.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#e(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const E=async()=>this.#e?this.#e:(await import(this.workerSrc)).WorkerMessageHandler;return(0,u.shadow)(this,"_setupFakeWorkerGlobal",E())}}class yt{#t=new Map;#e=new Map;#n=new Map;#i=null;constructor(E,w,R,L,U){this.messageHandler=E,this.loadingTask=w,this.commonObjs=new Ct,this.fontLoader=new v.FontLoader({ownerDocument:L.ownerDocument,styleElement:L.styleElement}),this._params=L,this.canvasFactory=U.canvasFactory,this.filterFactory=U.filterFactory,this.cMapReaderFactory=U.cMapReaderFactory,this.standardFontDataFactory=U.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=R,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new u.PromiseCapability,this.setupMessageHandler()}#s(E,w=null){const R=this.#t.get(E);if(R)return R;const L=this.messageHandler.sendWithPromise(E,w);return this.#t.set(E,L),L}get annotationStorage(){return(0,u.shadow)(this,"annotationStorage",new f.AnnotationStorage)}getRenderingIntent(E,w=u.AnnotationMode.ENABLE,R=null,L=!1){let U=u.RenderingIntentFlag.DISPLAY,V=f.SerializableEmpty;switch(E){case"any":U=u.RenderingIntentFlag.ANY;break;case"display":break;case"print":U=u.RenderingIntentFlag.PRINT;break;default:(0,u.warn)(`getRenderingIntent - invalid intent: ${E}`)}switch(w){case u.AnnotationMode.DISABLE:U+=u.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case u.AnnotationMode.ENABLE:break;case u.AnnotationMode.ENABLE_FORMS:U+=u.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case u.AnnotationMode.ENABLE_STORAGE:U+=u.RenderingIntentFlag.ANNOTATIONS_STORAGE,V=(U&u.RenderingIntentFlag.PRINT&&R instanceof f.PrintAnnotationStorage?R:this.annotationStorage).serializable;break;default:(0,u.warn)(`getRenderingIntent - invalid annotationMode: ${w}`)}return L&&(U+=u.RenderingIntentFlag.OPLIST),{renderingIntent:U,cacheKey:`${U}_${V.hash}`,annotationStorageSerializable:V}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new u.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const E=[];for(const R of this.#e.values())E.push(R._destroy());this.#e.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const w=this.messageHandler.sendWithPromise("Terminate",null);return E.push(w),Promise.all(E).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new u.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:E,loadingTask:w}=this;E.on("GetReader",(R,L)=>{(0,u.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=U=>{this._lastProgress={loaded:U.loaded,total:U.total}},L.onPull=()=>{this._fullReader.read().then(function({value:U,done:V}){if(V){L.close();return}(0,u.assert)(U instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),L.enqueue(new Uint8Array(U),1,[U])}).catch(U=>{L.error(U)})},L.onCancel=U=>{this._fullReader.cancel(U),L.ready.catch(V=>{if(!this.destroyed)throw V})}}),E.on("ReaderHeadersReady",R=>{const L=new u.PromiseCapability,U=this._fullReader;return U.headersReady.then(()=>{(!U.isStreamingSupported||!U.isRangeSupported)&&(this._lastProgress&&w.onProgress?.(this._lastProgress),U.onProgress=V=>{w.onProgress?.({loaded:V.loaded,total:V.total})}),L.resolve({isStreamingSupported:U.isStreamingSupported,isRangeSupported:U.isRangeSupported,contentLength:U.contentLength})},L.reject),L.promise}),E.on("GetRangeReader",(R,L)=>{(0,u.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const U=this._networkStream.getRangeReader(R.begin,R.end);if(!U){L.close();return}L.onPull=()=>{U.read().then(function({value:V,done:q}){if(q){L.close();return}(0,u.assert)(V instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),L.enqueue(new Uint8Array(V),1,[V])}).catch(V=>{L.error(V)})},L.onCancel=V=>{U.cancel(V),L.ready.catch(q=>{if(!this.destroyed)throw q})}}),E.on("GetDoc",({pdfInfo:R})=>{this._numPages=R.numPages,this._htmlForXfa=R.htmlForXfa,delete R.htmlForXfa,w._capability.resolve(new lt(R,this))}),E.on("DocException",function(R){let L;switch(R.name){case"PasswordException":L=new u.PasswordException(R.message,R.code);break;case"InvalidPDFException":L=new u.InvalidPDFException(R.message);break;case"MissingPDFException":L=new u.MissingPDFException(R.message);break;case"UnexpectedResponseException":L=new u.UnexpectedResponseException(R.message,R.status);break;case"UnknownErrorException":L=new u.UnknownErrorException(R.message,R.details);break;default:(0,u.unreachable)("DocException - expected a valid Error.")}w._capability.reject(L)}),E.on("PasswordRequest",R=>{if(this.#i=new u.PromiseCapability,w.onPassword){const L=U=>{U instanceof Error?this.#i.reject(U):this.#i.resolve({password:U})};try{w.onPassword(L,R.code)}catch(U){this.#i.reject(U)}}else this.#i.reject(new u.PasswordException(R.message,R.code));return this.#i.promise}),E.on("DataLoaded",R=>{w.onProgress?.({loaded:R.length,total:R.length}),this.downloadInfoCapability.resolve(R)}),E.on("StartRenderPage",R=>{if(this.destroyed)return;this.#e.get(R.pageIndex)._startRenderPage(R.transparency,R.cacheKey)}),E.on("commonobj",([R,L,U])=>{if(this.destroyed||this.commonObjs.has(R))return null;switch(L){case"Font":const V=this._params;if("error"in U){const j=U.error;(0,u.warn)(`Error during font loading: ${j}`),this.commonObjs.resolve(R,j);break}const q=V.pdfBug&&globalThis.FontInspector?.enabled?(j,st)=>globalThis.FontInspector.fontAdded(j,st):null,$=new v.FontFaceObject(U,{isEvalSupported:V.isEvalSupported,disableFontFace:V.disableFontFace,ignoreErrors:V.ignoreErrors,inspectFont:q});this.fontLoader.bind($).catch(j=>E.sendWithPromise("FontFallback",{id:R})).finally(()=>{!V.fontExtraProperties&&$.data&&($.data=null),this.commonObjs.resolve(R,$)});break;case"CopyLocalImage":const{imageRef:J}=U;(0,u.assert)(J,"The imageRef must be defined.");for(const j of this.#e.values())for(const[,st]of j.objs)if(st.ref===J)return st.dataLen?(this.commonObjs.resolve(R,structuredClone(st)),st.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(R,U);break;default:throw new Error(`Got unknown common object type ${L}`)}return null}),E.on("obj",([R,L,U,V])=>{if(this.destroyed)return;const q=this.#e.get(L);if(!q.objs.has(R)){if(q._intentStates.size===0){V?.bitmap?.close();return}switch(U){case"Image":q.objs.resolve(R,V),V?.dataLen>u.MAX_IMAGE_SIZE_TO_CACHE&&(q._maybeCleanupAfterRender=!0);break;case"Pattern":q.objs.resolve(R,V);break;default:throw new Error(`Got unknown object type ${U}`)}}}),E.on("DocProgress",R=>{this.destroyed||w.onProgress?.({loaded:R.loaded,total:R.total})}),E.on("FetchBuiltInCMap",R=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(R):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),E.on("FetchStandardFontData",R=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(R):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,u.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:E,transfer:w}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:E,filename:this._fullReader?.filename??null},w).finally(()=>{this.annotationStorage.resetModified()})}getPage(E){if(!Number.isInteger(E)||E<=0||E>this._numPages)return Promise.reject(new Error("Invalid page request."));const w=E-1,R=this.#n.get(w);if(R)return R;const L=this.messageHandler.sendWithPromise("GetPage",{pageIndex:w}).then(U=>{if(this.destroyed)throw new Error("Transport destroyed");const V=new gt(w,U,this,this._params.pdfBug);return this.#e.set(w,V),V});return this.#n.set(w,L),L}getPageIndex(E){return typeof E!="object"||E===null||!Number.isInteger(E.num)||E.num<0||!Number.isInteger(E.gen)||E.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:E.num,gen:E.gen})}getAnnotations(E,w){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:E,intent:w})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(E){return typeof E!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:E})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(E){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:E})}getStructTree(E){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:E})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(E=>new C.OptionalContentConfig(E))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const E="GetMetadata",w=this.#t.get(E);if(w)return w;const R=this.messageHandler.sendWithPromise(E,null).then(L=>({info:L[0],metadata:L[1]?new _.Metadata(L[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(E,R),R}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(E=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const w of this.#e.values())if(!w.cleanup())throw new Error(`startCleanup: Page ${w.pageNumber} is currently rendering.`);this.commonObjs.clear(),E||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:E,enableXfa:w}=this._params;return(0,u.shadow)(this,"loadingParams",{disableAutoFetch:E,enableXfa:w})}}class Ct{#t=Object.create(null);#e(E){return this.#t[E]||={capability:new u.PromiseCapability,data:null}}get(E,w=null){if(w){const L=this.#e(E);return L.capability.promise.then(()=>w(L.data)),null}const R=this.#t[E];if(!R?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${E}.`);return R.data}has(E){return this.#t[E]?.capability.settled??!1}resolve(E,w=null){const R=this.#e(E);R.data=w,R.capability.resolve()}clear(){for(const E in this.#t){const{data:w}=this.#t[E];w?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const E in this.#t){const{capability:w,data:R}=this.#t[E];w.settled&&(yield[E,R])}}}class wt{#t=null;constructor(E){this.#t=E,this.onContinue=null}get promise(){return this.#t.capability.promise}cancel(E=0){this.#t.cancel(null,E)}get separateAnnots(){const{separateAnnots:E}=this.#t.operatorList;if(!E)return!1;const{annotationCanvasMap:w}=this.#t;return E.form||E.canvas&&w?.size>0}}class St{static#t=new WeakSet;constructor({callback:E,params:w,objs:R,commonObjs:L,annotationCanvasMap:U,operatorList:V,pageIndex:q,canvasFactory:$,filterFactory:J,useRequestAnimationFrame:j=!1,pdfBug:st=!1,pageColors:tt=null}){this.callback=E,this.params=w,this.objs=R,this.commonObjs=L,this.annotationCanvasMap=U,this.operatorListIdx=null,this.operatorList=V,this._pageIndex=q,this.canvasFactory=$,this.filterFactory=J,this._pdfBug=st,this.pageColors=tt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=j===!0&&typeof window<"u",this.cancelled=!1,this.capability=new u.PromiseCapability,this.task=new wt(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=w.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:E=!1,optionalContentConfig:w}){if(this.cancelled)return;if(this._canvas){if(St.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");St.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:R,viewport:L,transform:U,background:V}=this.params;this.gfx=new g.CanvasGraphics(R,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:w},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:U,viewport:L,transparency:E,background:V}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(E=null,w=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),St.#t.delete(this._canvas),this.callback(E||new p.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,w))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),St.#t.delete(this._canvas),this.callback())))}}const k="4.0.379",D="9e14d04fd";r()}catch(H){r(H)}})}),822:((i,e,s)=>{s.d(e,{BaseCMapReaderFactory:()=>f,BaseCanvasFactory:()=>u,BaseFilterFactory:()=>r,BaseSVGFactory:()=>v,BaseStandardFontDataFactory:()=>p});var o=s(266);class r{constructor(){this.constructor===r&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(g){return"none"}addHCMFilter(g,A){return"none"}addHighlightHCMFilter(g,A,T,_){return"none"}destroy(g=!1){}}class u{constructor(){this.constructor===u&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(g,A){if(g<=0||A<=0)throw new Error("Invalid canvas size");const T=this._createCanvas(g,A);return{canvas:T,context:T.getContext("2d")}}reset(g,A,T){if(!g.canvas)throw new Error("Canvas is not specified");if(A<=0||T<=0)throw new Error("Invalid canvas size");g.canvas.width=A,g.canvas.height=T}destroy(g){if(!g.canvas)throw new Error("Canvas is not specified");g.canvas.width=0,g.canvas.height=0,g.canvas=null,g.context=null}_createCanvas(g,A){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}class f{constructor({baseUrl:g=null,isCompressed:A=!0}){this.constructor===f&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=g,this.isCompressed=A}async fetch({name:g}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!g)throw new Error("CMap name must be specified.");const A=this.baseUrl+g+(this.isCompressed?".bcmap":""),T=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(A,T).catch(_=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${A}`)})}_fetchData(g,A){(0,o.unreachable)("Abstract method `_fetchData` called.")}}class p{constructor({baseUrl:g=null}){this.constructor===p&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=g}async fetch({filename:g}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!g)throw new Error("Font filename must be specified.");const A=`${this.baseUrl}${g}`;return this._fetchData(A).catch(T=>{throw new Error(`Unable to load font data at: ${A}`)})}_fetchData(g){(0,o.unreachable)("Abstract method `_fetchData` called.")}}class v{constructor(){this.constructor===v&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(g,A,T=!1){if(g<=0||A<=0)throw new Error("Invalid SVG dimensions");const _=this._createSVG("svg:svg");return _.setAttribute("version","1.1"),T||(_.setAttribute("width",`${g}px`),_.setAttribute("height",`${A}px`)),_.setAttribute("preserveAspectRatio","none"),_.setAttribute("viewBox",`0 0 ${g} ${A}`),_}createElement(g){if(typeof g!="string")throw new Error("Invalid SVG element type");return this._createSVG(g)}_createSVG(g){(0,o.unreachable)("Abstract method `_createSVG` called.")}}}),250:((i,e,s)=>{s.d(e,{CanvasGraphics:()=>k});var o=s(266),r=s(473);const u={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function f(D,b){if(!b)return;const E=b[2]-b[0],w=b[3]-b[1],R=new Path2D;R.rect(b[0],b[1],E,w),D.clip(R)}class p{constructor(){this.constructor===p&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class v extends p{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let E;this._type==="axial"?E=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(E=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const w of this._colorStops)E.addColorStop(w[0],w[1]);return E}getPattern(b,E,w,R){let L;if(R===u.STROKE||R===u.FILL){const U=E.current.getClippedPathBoundingBox(R,(0,r.getCurrentTransform)(b))||[0,0,0,0],V=Math.ceil(U[2]-U[0])||1,q=Math.ceil(U[3]-U[1])||1,$=E.cachedCanvases.getCanvas("pattern",V,q,!0),J=$.context;J.clearRect(0,0,J.canvas.width,J.canvas.height),J.beginPath(),J.rect(0,0,J.canvas.width,J.canvas.height),J.translate(-U[0],-U[1]),w=o.Util.transform(w,[1,0,0,1,U[0],U[1]]),J.transform(...E.baseTransform),this.matrix&&J.transform(...this.matrix),f(J,this._bbox),J.fillStyle=this._createGradient(J),J.fill(),L=b.createPattern($.canvas,"no-repeat");const j=new DOMMatrix(w);L.setTransform(j)}else f(b,this._bbox),L=this._createGradient(b);return L}}function h(D,b,E,w,R,L,U,V){const q=b.coords,$=b.colors,J=D.data,j=D.width*4;let st;q[E+1]>q[w+1]&&(st=E,E=w,w=st,st=L,L=U,U=st),q[w+1]>q[R+1]&&(st=w,w=R,R=st,st=U,U=V,V=st),q[E+1]>q[w+1]&&(st=E,E=w,w=st,st=L,L=U,U=st);const tt=(q[E]+b.offsetX)*b.scaleX,Y=(q[E+1]+b.offsetY)*b.scaleY,Q=(q[w]+b.offsetX)*b.scaleX,vt=(q[w+1]+b.offsetY)*b.scaleY,mt=(q[R]+b.offsetX)*b.scaleX,Rt=(q[R+1]+b.offsetY)*b.scaleY;if(Y>=Rt)return;const Dt=$[L],Nt=$[L+1],Ft=$[L+2],kt=$[U],Gt=$[U+1],Jt=$[U+2],Xt=$[V],$t=$[V+1],Ut=$[V+2],se=Math.round(Y),Ae=Math.round(Rt);let ke,ge,fe,ce,Me,Be,Un,Nn;for(let Pe=se;Pe<=Ae;Pe++){if(Pe<vt){const ve=Pe<Y?0:(Y-Pe)/(Y-vt);ke=tt-(tt-Q)*ve,ge=Dt-(Dt-kt)*ve,fe=Nt-(Nt-Gt)*ve,ce=Ft-(Ft-Jt)*ve}else{let ve;Pe>Rt?ve=1:vt===Rt?ve=0:ve=(vt-Pe)/(vt-Rt),ke=Q-(Q-mt)*ve,ge=kt-(kt-Xt)*ve,fe=Gt-(Gt-$t)*ve,ce=Jt-(Jt-Ut)*ve}let Ce;Pe<Y?Ce=0:Pe>Rt?Ce=1:Ce=(Y-Pe)/(Y-Rt),Me=tt-(tt-mt)*Ce,Be=Dt-(Dt-Xt)*Ce,Un=Nt-(Nt-$t)*Ce,Nn=Ft-(Ft-Ut)*Ce;const oi=Math.round(Math.min(ke,Me)),nn=Math.round(Math.max(ke,Me));let ai=j*Pe+oi*4;for(let ve=oi;ve<=nn;ve++)Ce=(ke-ve)/(ke-Me),Ce<0?Ce=0:Ce>1&&(Ce=1),J[ai++]=ge-(ge-Be)*Ce|0,J[ai++]=fe-(fe-Un)*Ce|0,J[ai++]=ce-(ce-Nn)*Ce|0,J[ai++]=255}}function g(D,b,E){const w=b.coords,R=b.colors;let L,U;switch(b.type){case"lattice":const V=b.verticesPerRow,q=Math.floor(w.length/V)-1,$=V-1;for(L=0;L<q;L++){let J=L*V;for(let j=0;j<$;j++,J++)h(D,E,w[J],w[J+1],w[J+V],R[J],R[J+1],R[J+V]),h(D,E,w[J+V+1],w[J+1],w[J+V],R[J+V+1],R[J+1],R[J+V])}break;case"triangles":for(L=0,U=w.length;L<U;L+=3)h(D,E,w[L],w[L+1],w[L+2],R[L],R[L+1],R[L+2]);break;default:throw new Error("illegal figure")}}class A extends p{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,E,w){const V=Math.floor(this._bounds[0]),q=Math.floor(this._bounds[1]),$=Math.ceil(this._bounds[2])-V,J=Math.ceil(this._bounds[3])-q,j=Math.min(Math.ceil(Math.abs($*b[0]*1.1)),3e3),st=Math.min(Math.ceil(Math.abs(J*b[1]*1.1)),3e3),tt=$/j,Y=J/st,Q={coords:this._coords,colors:this._colors,offsetX:-V,offsetY:-q,scaleX:1/tt,scaleY:1/Y},vt=j+4,mt=st+4,Rt=w.getCanvas("mesh",vt,mt,!1),Dt=Rt.context,Nt=Dt.createImageData(j,st);if(E){const kt=Nt.data;for(let Gt=0,Jt=kt.length;Gt<Jt;Gt+=4)kt[Gt]=E[0],kt[Gt+1]=E[1],kt[Gt+2]=E[2],kt[Gt+3]=255}for(const kt of this._figures)g(Nt,kt,Q);return Dt.putImageData(Nt,2,2),{canvas:Rt.canvas,offsetX:V-2*tt,offsetY:q-2*Y,scaleX:tt,scaleY:Y}}getPattern(b,E,w,R){f(b,this._bbox);let L;if(R===u.SHADING)L=o.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(b));else if(L=o.Util.singularValueDecompose2dScale(E.baseTransform),this.matrix){const V=o.Util.singularValueDecompose2dScale(this.matrix);L=[L[0]*V[0],L[1]*V[1]]}const U=this._createMeshCanvas(L,R===u.SHADING?null:this._background,E.cachedCanvases);return R!==u.SHADING&&(b.setTransform(...E.baseTransform),this.matrix&&b.transform(...this.matrix)),b.translate(U.offsetX,U.offsetY),b.scale(U.scaleX,U.scaleY),b.createPattern(U.canvas,"no-repeat")}}class T extends p{getPattern(){return"hotpink"}}function _(D){switch(D[0]){case"RadialAxial":return new v(D);case"Mesh":return new A(D);case"Dummy":return new T}throw new Error(`Unknown IR type: ${D[0]}`)}const C={COLORED:1,UNCOLORED:2};class M{static MAX_PATTERN_SIZE=3e3;constructor(b,E,w,R,L){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=E,this.ctx=w,this.canvasGraphicsFactory=R,this.baseTransform=L}createPatternCanvas(b){const E=this.operatorList,w=this.bbox,R=this.xstep,L=this.ystep,U=this.paintType,V=this.tilingType,q=this.color,$=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+V);const J=w[0],j=w[1],st=w[2],tt=w[3],Y=o.Util.singularValueDecompose2dScale(this.matrix),Q=o.Util.singularValueDecompose2dScale(this.baseTransform),vt=[Y[0]*Q[0],Y[1]*Q[1]],mt=this.getSizeAndScale(R,this.ctx.canvas.width,vt[0]),Rt=this.getSizeAndScale(L,this.ctx.canvas.height,vt[1]),Dt=b.cachedCanvases.getCanvas("pattern",mt.size,Rt.size,!0),Nt=Dt.context,Ft=$.createCanvasGraphics(Nt);Ft.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(Ft,U,q);let kt=J,Gt=j,Jt=st,Xt=tt;return J<0&&(kt=0,Jt+=Math.abs(J)),j<0&&(Gt=0,Xt+=Math.abs(j)),Nt.translate(-(mt.scale*kt),-(Rt.scale*Gt)),Ft.transform(mt.scale,0,0,Rt.scale,0,0),Nt.save(),this.clipBbox(Ft,kt,Gt,Jt,Xt),Ft.baseTransform=(0,r.getCurrentTransform)(Ft.ctx),Ft.executeOperatorList(E),Ft.endDrawing(),{canvas:Dt.canvas,scaleX:mt.scale,scaleY:Rt.scale,offsetX:kt,offsetY:Gt}}getSizeAndScale(b,E,w){b=Math.abs(b);const R=Math.max(M.MAX_PATTERN_SIZE,E);let L=Math.ceil(b*w);return L>=R?L=R:w=L/b,{scale:w,size:L}}clipBbox(b,E,w,R,L){const U=R-E,V=L-w;b.ctx.rect(E,w,U,V),b.current.updateRectMinMax((0,r.getCurrentTransform)(b.ctx),[E,w,R,L]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,E,w){const R=b.ctx,L=b.current;switch(E){case C.COLORED:const U=this.ctx;R.fillStyle=U.fillStyle,R.strokeStyle=U.strokeStyle,L.fillColor=U.fillStyle,L.strokeColor=U.strokeStyle;break;case C.UNCOLORED:const V=o.Util.makeHexColor(w[0],w[1],w[2]);R.fillStyle=V,R.strokeStyle=V,L.fillColor=V,L.strokeColor=V;break;default:throw new o.FormatError(`Unsupported paint type: ${E}`)}}getPattern(b,E,w,R){let L=w;R!==u.SHADING&&(L=o.Util.transform(L,E.baseTransform),this.matrix&&(L=o.Util.transform(L,this.matrix)));const U=this.createPatternCanvas(E);let V=new DOMMatrix(L);V=V.translate(U.offsetX,U.offsetY),V=V.scale(1/U.scaleX,1/U.scaleY);const q=b.createPattern(U.canvas,"repeat");return q.setTransform(V),q}}function y({src:D,srcPos:b=0,dest:E,width:w,height:R,nonBlackColor:L=4294967295,inverseDecode:U=!1}){const V=o.FeatureTest.isLittleEndian?4278190080:255,[q,$]=U?[L,V]:[V,L],J=w>>3,j=w&7,st=D.length;E=new Uint32Array(E.buffer);let tt=0;for(let Y=0;Y<R;Y++){for(const vt=b+J;b<vt;b++){const mt=b<st?D[b]:255;E[tt++]=mt&128?$:q,E[tt++]=mt&64?$:q,E[tt++]=mt&32?$:q,E[tt++]=mt&16?$:q,E[tt++]=mt&8?$:q,E[tt++]=mt&4?$:q,E[tt++]=mt&2?$:q,E[tt++]=mt&1?$:q}if(j===0)continue;const Q=b<st?D[b++]:255;for(let vt=0;vt<j;vt++)E[tt++]=Q&1<<7-vt?$:q}return{srcPos:b,destPos:tt}}const x=16,I=100,F=4096,P=15,H=10,O=1e3,z=16;function it(D,b){if(D._removeMirroring)throw new Error("Context is already forwarding operations.");D.__originalSave=D.save,D.__originalRestore=D.restore,D.__originalRotate=D.rotate,D.__originalScale=D.scale,D.__originalTranslate=D.translate,D.__originalTransform=D.transform,D.__originalSetTransform=D.setTransform,D.__originalResetTransform=D.resetTransform,D.__originalClip=D.clip,D.__originalMoveTo=D.moveTo,D.__originalLineTo=D.lineTo,D.__originalBezierCurveTo=D.bezierCurveTo,D.__originalRect=D.rect,D.__originalClosePath=D.closePath,D.__originalBeginPath=D.beginPath,D._removeMirroring=()=>{D.save=D.__originalSave,D.restore=D.__originalRestore,D.rotate=D.__originalRotate,D.scale=D.__originalScale,D.translate=D.__originalTranslate,D.transform=D.__originalTransform,D.setTransform=D.__originalSetTransform,D.resetTransform=D.__originalResetTransform,D.clip=D.__originalClip,D.moveTo=D.__originalMoveTo,D.lineTo=D.__originalLineTo,D.bezierCurveTo=D.__originalBezierCurveTo,D.rect=D.__originalRect,D.closePath=D.__originalClosePath,D.beginPath=D.__originalBeginPath,delete D._removeMirroring},D.save=function(){b.save(),this.__originalSave()},D.restore=function(){b.restore(),this.__originalRestore()},D.translate=function(w,R){b.translate(w,R),this.__originalTranslate(w,R)},D.scale=function(w,R){b.scale(w,R),this.__originalScale(w,R)},D.transform=function(w,R,L,U,V,q){b.transform(w,R,L,U,V,q),this.__originalTransform(w,R,L,U,V,q)},D.setTransform=function(w,R,L,U,V,q){b.setTransform(w,R,L,U,V,q),this.__originalSetTransform(w,R,L,U,V,q)},D.resetTransform=function(){b.resetTransform(),this.__originalResetTransform()},D.rotate=function(w){b.rotate(w),this.__originalRotate(w)},D.clip=function(w){b.clip(w),this.__originalClip(w)},D.moveTo=function(E,w){b.moveTo(E,w),this.__originalMoveTo(E,w)},D.lineTo=function(E,w){b.lineTo(E,w),this.__originalLineTo(E,w)},D.bezierCurveTo=function(E,w,R,L,U,V){b.bezierCurveTo(E,w,R,L,U,V),this.__originalBezierCurveTo(E,w,R,L,U,V)},D.rect=function(E,w,R,L){b.rect(E,w,R,L),this.__originalRect(E,w,R,L)},D.closePath=function(){b.closePath(),this.__originalClosePath()},D.beginPath=function(){b.beginPath(),this.__originalBeginPath()}}class W{constructor(b){this.canvasFactory=b,this.cache=Object.create(null)}getCanvas(b,E,w){let R;return this.cache[b]!==void 0?(R=this.cache[b],this.canvasFactory.reset(R,E,w)):(R=this.canvasFactory.create(E,w),this.cache[b]=R),R}delete(b){delete this.cache[b]}clear(){for(const b in this.cache){const E=this.cache[b];this.canvasFactory.destroy(E),delete this.cache[b]}}}function ut(D,b,E,w,R,L,U,V,q,$){const[J,j,st,tt,Y,Q]=(0,r.getCurrentTransform)(D);if(j===0&&st===0){const Rt=U*J+Y,Dt=Math.round(Rt),Nt=V*tt+Q,Ft=Math.round(Nt),kt=(U+q)*J+Y,Gt=Math.abs(Math.round(kt)-Dt)||1,Jt=(V+$)*tt+Q,Xt=Math.abs(Math.round(Jt)-Ft)||1;return D.setTransform(Math.sign(J),0,0,Math.sign(tt),Dt,Ft),D.drawImage(b,E,w,R,L,0,0,Gt,Xt),D.setTransform(J,j,st,tt,Y,Q),[Gt,Xt]}if(J===0&&tt===0){const Rt=V*st+Y,Dt=Math.round(Rt),Nt=U*j+Q,Ft=Math.round(Nt),kt=(V+$)*st+Y,Gt=Math.abs(Math.round(kt)-Dt)||1,Jt=(U+q)*j+Q,Xt=Math.abs(Math.round(Jt)-Ft)||1;return D.setTransform(0,Math.sign(j),Math.sign(st),0,Dt,Ft),D.drawImage(b,E,w,R,L,0,0,Xt,Gt),D.setTransform(J,j,st,tt,Y,Q),[Xt,Gt]}D.drawImage(b,E,w,R,L,U,V,q,$);const vt=Math.hypot(J,j),mt=Math.hypot(st,tt);return[vt*q,mt*$]}function pt(D){const{width:b,height:E}=D;if(b>O||E>O)return null;const w=1e3,R=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),L=b+1;let U=new Uint8Array(L*(E+1)),V,q,$;const J=b+7&-8;let j=new Uint8Array(J*E),st=0;for(const mt of D.data){let Rt=128;for(;Rt>0;)j[st++]=mt&Rt?0:255,Rt>>=1}let tt=0;for(st=0,j[st]!==0&&(U[0]=1,++tt),q=1;q<b;q++)j[st]!==j[st+1]&&(U[q]=j[st]?2:1,++tt),st++;for(j[st]!==0&&(U[q]=2,++tt),V=1;V<E;V++){st=V*J,$=V*L,j[st-J]!==j[st]&&(U[$]=j[st]?1:8,++tt);let mt=(j[st]?4:0)+(j[st-J]?8:0);for(q=1;q<b;q++)mt=(mt>>2)+(j[st+1]?4:0)+(j[st-J+1]?8:0),R[mt]&&(U[$+q]=R[mt],++tt),st++;if(j[st-J]!==j[st]&&(U[$+q]=j[st]?2:4,++tt),tt>w)return null}for(st=J*(E-1),$=V*L,j[st]!==0&&(U[$]=8,++tt),q=1;q<b;q++)j[st]!==j[st+1]&&(U[$+q]=j[st]?4:8,++tt),st++;if(j[st]!==0&&(U[$+q]=4,++tt),tt>w)return null;const Y=new Int32Array([0,L,-1,0,-L,0,0,0,1]),Q=new Path2D;for(V=0;tt&&V<=E;V++){let mt=V*L;const Rt=mt+b;for(;mt<Rt&&!U[mt];)mt++;if(mt===Rt)continue;Q.moveTo(mt%L,V);const Dt=mt;let Nt=U[mt];do{const Ft=Y[Nt];do mt+=Ft;while(!U[mt]);const kt=U[mt];kt!==5&&kt!==10?(Nt=kt,U[mt]=0):(Nt=kt&51*Nt>>4,U[mt]&=Nt>>2|Nt<<2),Q.lineTo(mt%L,mt/L|0),U[mt]||--tt}while(Dt!==mt);--V}return j=null,U=null,function(mt){mt.save(),mt.scale(1/b,-1/E),mt.translate(0,-E),mt.fill(Q),mt.beginPath(),mt.restore()}}class xt{constructor(b,E){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,b,E])}clone(){const b=Object.create(this);return b.clipBox=this.clipBox.slice(),b}setCurrentPoint(b,E){this.x=b,this.y=E}updatePathMinMax(b,E,w){[E,w]=o.Util.applyTransform([E,w],b),this.minX=Math.min(this.minX,E),this.minY=Math.min(this.minY,w),this.maxX=Math.max(this.maxX,E),this.maxY=Math.max(this.maxY,w)}updateRectMinMax(b,E){const w=o.Util.applyTransform(E,b),R=o.Util.applyTransform(E.slice(2),b),L=o.Util.applyTransform([E[0],E[3]],b),U=o.Util.applyTransform([E[2],E[1]],b);this.minX=Math.min(this.minX,w[0],R[0],L[0],U[0]),this.minY=Math.min(this.minY,w[1],R[1],L[1],U[1]),this.maxX=Math.max(this.maxX,w[0],R[0],L[0],U[0]),this.maxY=Math.max(this.maxY,w[1],R[1],L[1],U[1])}updateScalingPathMinMax(b,E){o.Util.scaleMinMax(b,E),this.minX=Math.min(this.minX,E[0]),this.maxX=Math.max(this.maxX,E[1]),this.minY=Math.min(this.minY,E[2]),this.maxY=Math.max(this.maxY,E[3])}updateCurvePathMinMax(b,E,w,R,L,U,V,q,$,J){const j=o.Util.bezierBoundingBox(E,w,R,L,U,V,q,$);if(J){J[0]=Math.min(J[0],j[0],j[2]),J[1]=Math.max(J[1],j[0],j[2]),J[2]=Math.min(J[2],j[1],j[3]),J[3]=Math.max(J[3],j[1],j[3]);return}this.updateRectMinMax(b,j)}getPathBoundingBox(b=u.FILL,E=null){const w=[this.minX,this.minY,this.maxX,this.maxY];if(b===u.STROKE){E||(0,o.unreachable)("Stroke bounding box must include transform.");const R=o.Util.singularValueDecompose2dScale(E),L=R[0]*this.lineWidth/2,U=R[1]*this.lineWidth/2;w[0]-=L,w[1]-=U,w[2]+=L,w[3]+=U}return w}updateClipFromPath(){const b=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(b||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(b){this.clipBox=b,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(b=u.FILL,E=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(b,E))}}function Mt(D,b){if(typeof ImageData<"u"&&b instanceof ImageData){D.putImageData(b,0,0);return}const E=b.height,w=b.width,R=E%z,L=(E-R)/z,U=R===0?L:L+1,V=D.createImageData(w,z);let q=0,$;const J=b.data,j=V.data;let st,tt,Y,Q;if(b.kind===o.ImageKind.GRAYSCALE_1BPP){const vt=J.byteLength,mt=new Uint32Array(j.buffer,0,j.byteLength>>2),Rt=mt.length,Dt=w+7>>3,Nt=4294967295,Ft=o.FeatureTest.isLittleEndian?4278190080:255;for(st=0;st<U;st++){for(Y=st<L?z:R,$=0,tt=0;tt<Y;tt++){const kt=vt-q;let Gt=0;const Jt=kt>Dt?w:kt*8-7,Xt=Jt&-8;let $t=0,Ut=0;for(;Gt<Xt;Gt+=8)Ut=J[q++],mt[$++]=Ut&128?Nt:Ft,mt[$++]=Ut&64?Nt:Ft,mt[$++]=Ut&32?Nt:Ft,mt[$++]=Ut&16?Nt:Ft,mt[$++]=Ut&8?Nt:Ft,mt[$++]=Ut&4?Nt:Ft,mt[$++]=Ut&2?Nt:Ft,mt[$++]=Ut&1?Nt:Ft;for(;Gt<Jt;Gt++)$t===0&&(Ut=J[q++],$t=128),mt[$++]=Ut&$t?Nt:Ft,$t>>=1}for(;$<Rt;)mt[$++]=0;D.putImageData(V,0,st*z)}}else if(b.kind===o.ImageKind.RGBA_32BPP){for(tt=0,Q=w*z*4,st=0;st<L;st++)j.set(J.subarray(q,q+Q)),q+=Q,D.putImageData(V,0,tt),tt+=z;st<U&&(Q=w*R*4,j.set(J.subarray(q,q+Q)),D.putImageData(V,0,tt))}else if(b.kind===o.ImageKind.RGB_24BPP)for(Y=z,Q=w*Y,st=0;st<U;st++){for(st>=L&&(Y=R,Q=w*Y),$=0,tt=Q;tt--;)j[$++]=J[q++],j[$++]=J[q++],j[$++]=J[q++],j[$++]=255;D.putImageData(V,0,st*z)}else throw new Error(`bad image kind: ${b.kind}`)}function Tt(D,b){if(b.bitmap){D.drawImage(b.bitmap,0,0);return}const E=b.height,w=b.width,R=E%z,L=(E-R)/z,U=R===0?L:L+1,V=D.createImageData(w,z);let q=0;const $=b.data,J=V.data;for(let j=0;j<U;j++){const st=j<L?z:R;({srcPos:q}=y({src:$,srcPos:q,dest:J,width:w,height:st,nonBlackColor:0})),D.putImageData(V,0,j*z)}}function X(D,b){const E=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const w of E)D[w]!==void 0&&(b[w]=D[w]);D.setLineDash!==void 0&&(b.setLineDash(D.getLineDash()),b.lineDashOffset=D.lineDashOffset)}function B(D){if(D.strokeStyle=D.fillStyle="#000000",D.fillRule="nonzero",D.globalAlpha=1,D.lineWidth=1,D.lineCap="butt",D.lineJoin="miter",D.miterLimit=10,D.globalCompositeOperation="source-over",D.font="10px sans-serif",D.setLineDash!==void 0&&(D.setLineDash([]),D.lineDashOffset=0),!o.isNodeJS){const{filter:b}=D;b!=="none"&&b!==""&&(D.filter="none")}}function et(D,b,E,w){const R=D.length;for(let L=3;L<R;L+=4){const U=D[L];if(U===0)D[L-3]=b,D[L-2]=E,D[L-1]=w;else if(U<255){const V=255-U;D[L-3]=D[L-3]*U+b*V>>8,D[L-2]=D[L-2]*U+E*V>>8,D[L-1]=D[L-1]*U+w*V>>8}}}function lt(D,b,E){const w=D.length,R=1/255;for(let L=3;L<w;L+=4){const U=E?E[D[L]]:D[L];b[L]=b[L]*U*R|0}}function gt(D,b,E){const w=D.length;for(let R=3;R<w;R+=4){const L=D[R-3]*77+D[R-2]*152+D[R-1]*28;b[R]=E?b[R]*E[L>>8]>>8:b[R]*L>>16}}function _t(D,b,E,w,R,L,U,V,q,$,J){const j=!!L,st=j?L[0]:0,tt=j?L[1]:0,Y=j?L[2]:0,Q=R==="Luminosity"?gt:lt,mt=Math.min(w,Math.ceil(1048576/E));for(let Rt=0;Rt<w;Rt+=mt){const Dt=Math.min(mt,w-Rt),Nt=D.getImageData(V-$,Rt+(q-J),E,Dt),Ft=b.getImageData(V,Rt+q,E,Dt);j&&et(Nt.data,st,tt,Y),Q(Nt.data,Ft.data,U),b.putImageData(Ft,V,Rt+q)}}function K(D,b,E,w){const R=w[0],L=w[1],U=w[2]-R,V=w[3]-L;U===0||V===0||(_t(b.context,E,U,V,b.subtype,b.backdrop,b.transferMap,R,L,b.offsetX,b.offsetY),D.save(),D.globalAlpha=1,D.globalCompositeOperation="source-over",D.setTransform(1,0,0,1,0,0),D.drawImage(E.canvas,0,0),D.restore())}function rt(D,b){const E=o.Util.singularValueDecompose2dScale(D);E[0]=Math.fround(E[0]),E[1]=Math.fround(E[1]);const w=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return b!==void 0?b:E[0]<=w||E[1]<=w}const yt=["butt","round","square"],Ct=["miter","round","bevel"],wt={},St={};class k{constructor(b,E,w,R,L,{optionalContentConfig:U,markedContentStack:V=null},q,$){this.ctx=b,this.current=new xt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=E,this.objs=w,this.canvasFactory=R,this.filterFactory=L,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=V||[],this.optionalContentConfig=U,this.cachedCanvases=new W(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=q,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=$,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(b,E=null){return typeof b=="string"?b.startsWith("g_")?this.commonObjs.get(b):this.objs.get(b):E}beginDrawing({transform:b,viewport:E,transparency:w=!1,background:R=null}){const L=this.ctx.canvas.width,U=this.ctx.canvas.height,V=this.ctx.fillStyle;if(this.ctx.fillStyle=R||"#ffffff",this.ctx.fillRect(0,0,L,U),this.ctx.fillStyle=V,w){const q=this.cachedCanvases.getCanvas("transparent",L,U);this.compositeCtx=this.ctx,this.transparentCanvas=q.canvas,this.ctx=q.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),B(this.ctx),b&&(this.ctx.transform(...b),this.outputScaleX=b[0],this.outputScaleY=b[0]),this.ctx.transform(...E.transform),this.viewportScale=E.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(b,E,w,R){const L=b.argsArray,U=b.fnArray;let V=E||0;const q=L.length;if(q===V)return V;const $=q-V>H&&typeof w=="function",J=$?Date.now()+P:0;let j=0;const st=this.commonObjs,tt=this.objs;let Y;for(;;){if(R!==void 0&&V===R.nextBreakPoint)return R.breakIt(V,w),V;if(Y=U[V],Y!==o.OPS.dependency)this[Y].apply(this,L[V]);else for(const Q of L[V]){const vt=Q.startsWith("g_")?st:tt;if(!vt.has(Q))return vt.get(Q,w),V}if(V++,V===q)return V;if($&&++j>H){if(Date.now()>J)return w(),V;j=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const b of this._cachedBitmapsMap.values()){for(const E of b.values())typeof HTMLCanvasElement<"u"&&E instanceof HTMLCanvasElement&&(E.width=E.height=0);b.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const b=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(b!=="none"){const E=this.ctx.filter;this.ctx.filter=b,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=E}}}_scaleImage(b,E){const w=b.width,R=b.height;let L=Math.max(Math.hypot(E[0],E[1]),1),U=Math.max(Math.hypot(E[2],E[3]),1),V=w,q=R,$="prescale1",J,j;for(;L>2&&V>1||U>2&&q>1;){let st=V,tt=q;L>2&&V>1&&(st=V>=16384?Math.floor(V/2)-1||1:Math.ceil(V/2),L/=V/st),U>2&&q>1&&(tt=q>=16384?Math.floor(q/2)-1||1:Math.ceil(q)/2,U/=q/tt),J=this.cachedCanvases.getCanvas($,st,tt),j=J.context,j.clearRect(0,0,st,tt),j.drawImage(b,0,0,V,q,0,0,st,tt),b=J.canvas,V=st,q=tt,$=$==="prescale1"?"prescale2":"prescale1"}return{img:b,paintWidth:V,paintHeight:q}}_createMaskCanvas(b){const E=this.ctx,{width:w,height:R}=b,L=this.current.fillColor,U=this.current.patternFill,V=(0,r.getCurrentTransform)(E);let q,$,J,j;if((b.bitmap||b.data)&&b.count>1){const Jt=b.bitmap||b.data.buffer;$=JSON.stringify(U?V:[V.slice(0,4),L]),q=this._cachedBitmapsMap.get(Jt),q||(q=new Map,this._cachedBitmapsMap.set(Jt,q));const Xt=q.get($);if(Xt&&!U){const $t=Math.round(Math.min(V[0],V[2])+V[4]),Ut=Math.round(Math.min(V[1],V[3])+V[5]);return{canvas:Xt,offsetX:$t,offsetY:Ut}}J=Xt}J||(j=this.cachedCanvases.getCanvas("maskCanvas",w,R),Tt(j.context,b));let st=o.Util.transform(V,[1/w,0,0,-1/R,0,0]);st=o.Util.transform(st,[1,0,0,1,0,-R]);const[tt,Y,Q,vt]=o.Util.getAxialAlignedBoundingBox([0,0,w,R],st),mt=Math.round(Q-tt)||1,Rt=Math.round(vt-Y)||1,Dt=this.cachedCanvases.getCanvas("fillCanvas",mt,Rt),Nt=Dt.context,Ft=tt,kt=Y;Nt.translate(-Ft,-kt),Nt.transform(...st),J||(J=this._scaleImage(j.canvas,(0,r.getCurrentTransformInverse)(Nt)),J=J.img,q&&U&&q.set($,J)),Nt.imageSmoothingEnabled=rt((0,r.getCurrentTransform)(Nt),b.interpolate),ut(Nt,J,0,0,J.width,J.height,0,0,w,R),Nt.globalCompositeOperation="source-in";const Gt=o.Util.transform((0,r.getCurrentTransformInverse)(Nt),[1,0,0,1,-Ft,-kt]);return Nt.fillStyle=U?L.getPattern(E,this,Gt,u.FILL):L,Nt.fillRect(0,0,w,R),q&&!U&&(this.cachedCanvases.delete("fillCanvas"),q.set($,Dt.canvas)),{canvas:Dt.canvas,offsetX:Math.round(Ft),offsetY:Math.round(kt)}}setLineWidth(b){b!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=b,this.ctx.lineWidth=b}setLineCap(b){this.ctx.lineCap=yt[b]}setLineJoin(b){this.ctx.lineJoin=Ct[b]}setMiterLimit(b){this.ctx.miterLimit=b}setDash(b,E){const w=this.ctx;w.setLineDash!==void 0&&(w.setLineDash(b),w.lineDashOffset=E)}setRenderingIntent(b){}setFlatness(b){}setGState(b){for(const[E,w]of b)switch(E){case"LW":this.setLineWidth(w);break;case"LC":this.setLineCap(w);break;case"LJ":this.setLineJoin(w);break;case"ML":this.setMiterLimit(w);break;case"D":this.setDash(w[0],w[1]);break;case"RI":this.setRenderingIntent(w);break;case"FL":this.setFlatness(w);break;case"Font":this.setFont(w[0],w[1]);break;case"CA":this.current.strokeAlpha=w;break;case"ca":this.current.fillAlpha=w,this.ctx.globalAlpha=w;break;case"BM":this.ctx.globalCompositeOperation=w;break;case"SMask":this.current.activeSMask=w?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(w);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const b=this.inSMaskMode;this.current.activeSMask&&!b?this.beginSMaskMode():!this.current.activeSMask&&b&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const b=this.ctx.canvas.width,E=this.ctx.canvas.height,w="smaskGroupAt"+this.groupLevel,R=this.cachedCanvases.getCanvas(w,b,E);this.suspendedCtx=this.ctx,this.ctx=R.context;const L=this.ctx;L.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),X(this.suspendedCtx,L),it(L,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),X(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(b){if(!this.current.activeSMask)return;b?(b[0]=Math.floor(b[0]),b[1]=Math.floor(b[1]),b[2]=Math.ceil(b[2]),b[3]=Math.ceil(b[3])):b=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const E=this.current.activeSMask,w=this.suspendedCtx;K(w,E,this.ctx,b),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(X(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const b=this.current;this.stateStack.push(b),this.current=b.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),X(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(b,E,w,R,L,U){this.ctx.transform(b,E,w,R,L,U),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(b,E,w){const R=this.ctx,L=this.current;let U=L.x,V=L.y,q,$;const J=(0,r.getCurrentTransform)(R),j=J[0]===0&&J[3]===0||J[1]===0&&J[2]===0,st=j?w.slice(0):null;for(let tt=0,Y=0,Q=b.length;tt<Q;tt++)switch(b[tt]|0){case o.OPS.rectangle:U=E[Y++],V=E[Y++];const vt=E[Y++],mt=E[Y++],Rt=U+vt,Dt=V+mt;R.moveTo(U,V),vt===0||mt===0?R.lineTo(Rt,Dt):(R.lineTo(Rt,V),R.lineTo(Rt,Dt),R.lineTo(U,Dt)),j||L.updateRectMinMax(J,[U,V,Rt,Dt]),R.closePath();break;case o.OPS.moveTo:U=E[Y++],V=E[Y++],R.moveTo(U,V),j||L.updatePathMinMax(J,U,V);break;case o.OPS.lineTo:U=E[Y++],V=E[Y++],R.lineTo(U,V),j||L.updatePathMinMax(J,U,V);break;case o.OPS.curveTo:q=U,$=V,U=E[Y+4],V=E[Y+5],R.bezierCurveTo(E[Y],E[Y+1],E[Y+2],E[Y+3],U,V),L.updateCurvePathMinMax(J,q,$,E[Y],E[Y+1],E[Y+2],E[Y+3],U,V,st),Y+=6;break;case o.OPS.curveTo2:q=U,$=V,R.bezierCurveTo(U,V,E[Y],E[Y+1],E[Y+2],E[Y+3]),L.updateCurvePathMinMax(J,q,$,U,V,E[Y],E[Y+1],E[Y+2],E[Y+3],st),U=E[Y+2],V=E[Y+3],Y+=4;break;case o.OPS.curveTo3:q=U,$=V,U=E[Y+2],V=E[Y+3],R.bezierCurveTo(E[Y],E[Y+1],U,V,U,V),L.updateCurvePathMinMax(J,q,$,E[Y],E[Y+1],U,V,U,V,st),Y+=4;break;case o.OPS.closePath:R.closePath();break}j&&L.updateScalingPathMinMax(J,st),L.setCurrentPoint(U,V)}closePath(){this.ctx.closePath()}stroke(b=!0){const E=this.ctx,w=this.current.strokeColor;E.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof w=="object"&&w?.getPattern?(E.save(),E.strokeStyle=w.getPattern(E,this,(0,r.getCurrentTransformInverse)(E),u.STROKE),this.rescaleAndStroke(!1),E.restore()):this.rescaleAndStroke(!0)),b&&this.consumePath(this.current.getClippedPathBoundingBox()),E.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(b=!0){const E=this.ctx,w=this.current.fillColor,R=this.current.patternFill;let L=!1;R&&(E.save(),E.fillStyle=w.getPattern(E,this,(0,r.getCurrentTransformInverse)(E),u.FILL),L=!0);const U=this.current.getClippedPathBoundingBox();this.contentVisible&&U!==null&&(this.pendingEOFill?(E.fill("evenodd"),this.pendingEOFill=!1):E.fill()),L&&E.restore(),b&&this.consumePath(U)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=wt}eoClip(){this.pendingClip=St}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const b=this.pendingTextPaths,E=this.ctx;if(b===void 0){E.beginPath();return}E.save(),E.beginPath();for(const w of b)E.setTransform(...w.transform),E.translate(w.x,w.y),w.addToPath(E,w.fontSize);E.restore(),E.clip(),E.beginPath(),delete this.pendingTextPaths}setCharSpacing(b){this.current.charSpacing=b}setWordSpacing(b){this.current.wordSpacing=b}setHScale(b){this.current.textHScale=b/100}setLeading(b){this.current.leading=-b}setFont(b,E){const w=this.commonObjs.get(b),R=this.current;if(!w)throw new Error(`Can't find font for ${b}`);if(R.fontMatrix=w.fontMatrix||o.FONT_IDENTITY_MATRIX,(R.fontMatrix[0]===0||R.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+b),E<0?(E=-E,R.fontDirection=-1):R.fontDirection=1,this.current.font=w,this.current.fontSize=E,w.isType3Font)return;const L=w.loadedName||"sans-serif",U=w.systemFontInfo?.css||`"${L}", ${w.fallbackName}`;let V="normal";w.black?V="900":w.bold&&(V="bold");const q=w.italic?"italic":"normal";let $=E;E<x?$=x:E>I&&($=I),this.current.fontSizeScale=E/$,this.ctx.font=`${q} ${V} ${$}px ${U}`}setTextRenderingMode(b){this.current.textRenderingMode=b}setTextRise(b){this.current.textRise=b}moveText(b,E){this.current.x=this.current.lineX+=b,this.current.y=this.current.lineY+=E}setLeadingMoveText(b,E){this.setLeading(-E),this.moveText(b,E)}setTextMatrix(b,E,w,R,L,U){this.current.textMatrix=[b,E,w,R,L,U],this.current.textMatrixScale=Math.hypot(b,E),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(b,E,w,R){const L=this.ctx,U=this.current,V=U.font,q=U.textRenderingMode,$=U.fontSize/U.fontSizeScale,J=q&o.TextRenderingMode.FILL_STROKE_MASK,j=!!(q&o.TextRenderingMode.ADD_TO_PATH_FLAG),st=U.patternFill&&!V.missingFile;let tt;(V.disableFontFace||j||st)&&(tt=V.getPathGenerator(this.commonObjs,b)),V.disableFontFace||st?(L.save(),L.translate(E,w),L.beginPath(),tt(L,$),R&&L.setTransform(...R),(J===o.TextRenderingMode.FILL||J===o.TextRenderingMode.FILL_STROKE)&&L.fill(),(J===o.TextRenderingMode.STROKE||J===o.TextRenderingMode.FILL_STROKE)&&L.stroke(),L.restore()):((J===o.TextRenderingMode.FILL||J===o.TextRenderingMode.FILL_STROKE)&&L.fillText(b,E,w),(J===o.TextRenderingMode.STROKE||J===o.TextRenderingMode.FILL_STROKE)&&L.strokeText(b,E,w)),j&&(this.pendingTextPaths||=[]).push({transform:(0,r.getCurrentTransform)(L),x:E,y:w,fontSize:$,addToPath:tt})}get isFontSubpixelAAEnabled(){const{context:b}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);b.scale(1.5,1),b.fillText("I",0,10);const E=b.getImageData(0,0,10,10).data;let w=!1;for(let R=3;R<E.length;R+=4)if(E[R]>0&&E[R]<255){w=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",w)}showText(b){const E=this.current,w=E.font;if(w.isType3Font)return this.showType3Text(b);const R=E.fontSize;if(R===0)return;const L=this.ctx,U=E.fontSizeScale,V=E.charSpacing,q=E.wordSpacing,$=E.fontDirection,J=E.textHScale*$,j=b.length,st=w.vertical,tt=st?1:-1,Y=w.defaultVMetrics,Q=R*E.fontMatrix[0],vt=E.textRenderingMode===o.TextRenderingMode.FILL&&!w.disableFontFace&&!E.patternFill;L.save(),L.transform(...E.textMatrix),L.translate(E.x,E.y+E.textRise),$>0?L.scale(J,-1):L.scale(J,1);let mt;if(E.patternFill){L.save();const kt=E.fillColor.getPattern(L,this,(0,r.getCurrentTransformInverse)(L),u.FILL);mt=(0,r.getCurrentTransform)(L),L.restore(),L.fillStyle=kt}let Rt=E.lineWidth;const Dt=E.textMatrixScale;if(Dt===0||Rt===0){const kt=E.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(kt===o.TextRenderingMode.STROKE||kt===o.TextRenderingMode.FILL_STROKE)&&(Rt=this.getSinglePixelWidth())}else Rt/=Dt;if(U!==1&&(L.scale(U,U),Rt/=U),L.lineWidth=Rt,w.isInvalidPDFjsFont){const kt=[];let Gt=0;for(const Jt of b)kt.push(Jt.unicode),Gt+=Jt.width;L.fillText(kt.join(""),0,0),E.x+=Gt*Q*J,L.restore(),this.compose();return}let Nt=0,Ft;for(Ft=0;Ft<j;++Ft){const kt=b[Ft];if(typeof kt=="number"){Nt+=tt*kt*R/1e3;continue}let Gt=!1;const Jt=(kt.isSpace?q:0)+V,Xt=kt.fontChar,$t=kt.accent;let Ut,se,Ae=kt.width;if(st){const ge=kt.vmetric||Y,fe=-(kt.vmetric?ge[1]:Ae*.5)*Q,ce=ge[2]*Q;Ae=ge?-ge[0]:Ae,Ut=fe/U,se=(Nt+ce)/U}else Ut=Nt/U,se=0;if(w.remeasure&&Ae>0){const ge=L.measureText(Xt).width*1e3/R*U;if(Ae<ge&&this.isFontSubpixelAAEnabled){const fe=Ae/ge;Gt=!0,L.save(),L.scale(fe,1),Ut/=fe}else Ae!==ge&&(Ut+=(Ae-ge)/2e3*R/U)}if(this.contentVisible&&(kt.isInFont||w.missingFile)){if(vt&&!$t)L.fillText(Xt,Ut,se);else if(this.paintChar(Xt,Ut,se,mt),$t){const ge=Ut+R*$t.offset.x/U,fe=se-R*$t.offset.y/U;this.paintChar($t.fontChar,ge,fe,mt)}}const ke=st?Ae*Q-Jt*$:Ae*Q+Jt*$;Nt+=ke,Gt&&L.restore()}st?E.y-=Nt:E.x+=Nt*J,L.restore(),this.compose()}showType3Text(b){const E=this.ctx,w=this.current,R=w.font,L=w.fontSize,U=w.fontDirection,V=R.vertical?1:-1,q=w.charSpacing,$=w.wordSpacing,J=w.textHScale*U,j=w.fontMatrix||o.FONT_IDENTITY_MATRIX,st=b.length,tt=w.textRenderingMode===o.TextRenderingMode.INVISIBLE;let Y,Q,vt,mt;if(!(tt||L===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,E.save(),E.transform(...w.textMatrix),E.translate(w.x,w.y),E.scale(J,U),Y=0;Y<st;++Y){if(Q=b[Y],typeof Q=="number"){mt=V*Q*L/1e3,this.ctx.translate(mt,0),w.x+=mt*J;continue}const Rt=(Q.isSpace?$:0)+q,Dt=R.charProcOperatorList[Q.operatorListId];if(!Dt){(0,o.warn)(`Type3 character "${Q.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Q,this.save(),E.scale(L,L),E.transform(...j),this.executeOperatorList(Dt),this.restore()),vt=o.Util.applyTransform([Q.width,0],j)[0]*L+Rt,E.translate(vt,0),w.x+=vt*J}E.restore(),this.processingType3=null}}setCharWidth(b,E){}setCharWidthAndBounds(b,E,w,R,L,U){this.ctx.rect(w,R,L-w,U-R),this.ctx.clip(),this.endPath()}getColorN_Pattern(b){let E;if(b[0]==="TilingPattern"){const w=b[1],R=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),L={createCanvasGraphics:U=>new k(U,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};E=new M(b,w,this.ctx,L,R)}else E=this._getPattern(b[1],b[2]);return E}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(b,E,w){const R=o.Util.makeHexColor(b,E,w);this.ctx.strokeStyle=R,this.current.strokeColor=R}setFillRGBColor(b,E,w){const R=o.Util.makeHexColor(b,E,w);this.ctx.fillStyle=R,this.current.fillColor=R,this.current.patternFill=!1}_getPattern(b,E=null){let w;return this.cachedPatterns.has(b)?w=this.cachedPatterns.get(b):(w=_(this.getObject(b)),this.cachedPatterns.set(b,w)),E&&(w.matrix=E),w}shadingFill(b){if(!this.contentVisible)return;const E=this.ctx;this.save();const w=this._getPattern(b);E.fillStyle=w.getPattern(E,this,(0,r.getCurrentTransformInverse)(E),u.SHADING);const R=(0,r.getCurrentTransformInverse)(E);if(R){const{width:L,height:U}=E.canvas,[V,q,$,J]=o.Util.getAxialAlignedBoundingBox([0,0,L,U],R);this.ctx.fillRect(V,q,$-V,J-q)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(b,E){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(b)&&b.length===6&&this.transform(...b),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),E)){const w=E[2]-E[0],R=E[3]-E[1];this.ctx.rect(E[0],E[1],w,R),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),E),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(b){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const E=this.ctx;b.isolated||(0,o.info)("TODO: Support non-isolated groups."),b.knockout&&(0,o.warn)("Knockout groups not supported.");const w=(0,r.getCurrentTransform)(E);if(b.matrix&&E.transform(...b.matrix),!b.bbox)throw new Error("Bounding box is required.");let R=o.Util.getAxialAlignedBoundingBox(b.bbox,(0,r.getCurrentTransform)(E));const L=[0,0,E.canvas.width,E.canvas.height];R=o.Util.intersect(R,L)||[0,0,0,0];const U=Math.floor(R[0]),V=Math.floor(R[1]);let q=Math.max(Math.ceil(R[2])-U,1),$=Math.max(Math.ceil(R[3])-V,1),J=1,j=1;q>F&&(J=q/F,q=F),$>F&&(j=$/F,$=F),this.current.startNewPathAndClipBox([0,0,q,$]);let st="groupAt"+this.groupLevel;b.smask&&(st+="_smask_"+this.smaskCounter++%2);const tt=this.cachedCanvases.getCanvas(st,q,$),Y=tt.context;Y.scale(1/J,1/j),Y.translate(-U,-V),Y.transform(...w),b.smask?this.smaskStack.push({canvas:tt.canvas,context:Y,offsetX:U,offsetY:V,scaleX:J,scaleY:j,subtype:b.smask.subtype,backdrop:b.smask.backdrop,transferMap:b.smask.transferMap||null,startTransformInverse:null}):(E.setTransform(1,0,0,1,0,0),E.translate(U,V),E.scale(J,j),E.save()),X(E,Y),this.ctx=Y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(E),this.groupLevel++}endGroup(b){if(!this.contentVisible)return;this.groupLevel--;const E=this.ctx,w=this.groupStack.pop();if(this.ctx=w,this.ctx.imageSmoothingEnabled=!1,b.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const R=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...R);const L=o.Util.getAxialAlignedBoundingBox([0,0,E.canvas.width,E.canvas.height],R);this.ctx.drawImage(E.canvas,0,0),this.ctx.restore(),this.compose(L)}}beginAnnotation(b,E,w,R,L){if(this.#t(),B(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(E)&&E.length===4){const U=E[2]-E[0],V=E[3]-E[1];if(L&&this.annotationCanvasMap){w=w.slice(),w[4]-=E[0],w[5]-=E[1],E=E.slice(),E[0]=E[1]=0,E[2]=U,E[3]=V;const[q,$]=o.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:J}=this,j=Math.ceil(U*this.outputScaleX*J),st=Math.ceil(V*this.outputScaleY*J);this.annotationCanvas=this.canvasFactory.create(j,st);const{canvas:tt,context:Y}=this.annotationCanvas;this.annotationCanvasMap.set(b,tt),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Y,this.ctx.save(),this.ctx.setTransform(q,0,0,-$,0,V*$),B(this.ctx)}else B(this.ctx),this.ctx.rect(E[0],E[1],U,V),this.ctx.clip(),this.endPath()}this.current=new xt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...w),this.transform(...R)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(b){if(!this.contentVisible)return;const E=b.count;b=this.getObject(b.data,b),b.count=E;const w=this.ctx,R=this.processingType3;if(R&&(R.compiled===void 0&&(R.compiled=pt(b)),R.compiled)){R.compiled(w);return}const L=this._createMaskCanvas(b),U=L.canvas;w.save(),w.setTransform(1,0,0,1,0,0),w.drawImage(U,L.offsetX,L.offsetY),w.restore(),this.compose()}paintImageMaskXObjectRepeat(b,E,w=0,R=0,L,U){if(!this.contentVisible)return;b=this.getObject(b.data,b);const V=this.ctx;V.save();const q=(0,r.getCurrentTransform)(V);V.transform(E,w,R,L,0,0);const $=this._createMaskCanvas(b);V.setTransform(1,0,0,1,$.offsetX-q[4],$.offsetY-q[5]);for(let J=0,j=U.length;J<j;J+=2){const st=o.Util.transform(q,[E,w,R,L,U[J],U[J+1]]),[tt,Y]=o.Util.applyTransform([0,0],st);V.drawImage($.canvas,tt,Y)}V.restore(),this.compose()}paintImageMaskXObjectGroup(b){if(!this.contentVisible)return;const E=this.ctx,w=this.current.fillColor,R=this.current.patternFill;for(const L of b){const{data:U,width:V,height:q,transform:$}=L,J=this.cachedCanvases.getCanvas("maskCanvas",V,q),j=J.context;j.save();const st=this.getObject(U,L);Tt(j,st),j.globalCompositeOperation="source-in",j.fillStyle=R?w.getPattern(j,this,(0,r.getCurrentTransformInverse)(E),u.FILL):w,j.fillRect(0,0,V,q),j.restore(),E.save(),E.transform(...$),E.scale(1,-1),ut(E,J.canvas,0,0,V,q,0,-1,1,1),E.restore()}this.compose()}paintImageXObject(b){if(!this.contentVisible)return;const E=this.getObject(b);if(!E){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(E)}paintImageXObjectRepeat(b,E,w,R){if(!this.contentVisible)return;const L=this.getObject(b);if(!L){(0,o.warn)("Dependent image isn't ready yet");return}const U=L.width,V=L.height,q=[];for(let $=0,J=R.length;$<J;$+=2)q.push({transform:[E,0,0,w,R[$],R[$+1]],x:0,y:0,w:U,h:V});this.paintInlineImageXObjectGroup(L,q)}applyTransferMapsToCanvas(b){return this.current.transferMaps!=="none"&&(b.filter=this.current.transferMaps,b.drawImage(b.canvas,0,0),b.filter="none"),b.canvas}applyTransferMapsToBitmap(b){if(this.current.transferMaps==="none")return b.bitmap;const{bitmap:E,width:w,height:R}=b,L=this.cachedCanvases.getCanvas("inlineImage",w,R),U=L.context;return U.filter=this.current.transferMaps,U.drawImage(E,0,0),U.filter="none",L.canvas}paintInlineImageXObject(b){if(!this.contentVisible)return;const E=b.width,w=b.height,R=this.ctx;if(this.save(),!o.isNodeJS){const{filter:V}=R;V!=="none"&&V!==""&&(R.filter="none")}R.scale(1/E,-1/w);let L;if(b.bitmap)L=this.applyTransferMapsToBitmap(b);else if(typeof HTMLElement=="function"&&b instanceof HTMLElement||!b.data)L=b;else{const q=this.cachedCanvases.getCanvas("inlineImage",E,w).context;Mt(q,b),L=this.applyTransferMapsToCanvas(q)}const U=this._scaleImage(L,(0,r.getCurrentTransformInverse)(R));R.imageSmoothingEnabled=rt((0,r.getCurrentTransform)(R),b.interpolate),ut(R,U.img,0,0,U.paintWidth,U.paintHeight,0,-w,E,w),this.compose(),this.restore()}paintInlineImageXObjectGroup(b,E){if(!this.contentVisible)return;const w=this.ctx;let R;if(b.bitmap)R=b.bitmap;else{const L=b.width,U=b.height,q=this.cachedCanvases.getCanvas("inlineImage",L,U).context;Mt(q,b),R=this.applyTransferMapsToCanvas(q)}for(const L of E)w.save(),w.transform(...L.transform),w.scale(1,-1),ut(w,R,L.x,L.y,L.w,L.h,0,-1,1,1),w.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(b){}markPointProps(b,E){}beginMarkedContent(b){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(b,E){b==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(E)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(b){const E=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(b);const w=this.ctx;this.pendingClip&&(E||(this.pendingClip===St?w.clip("evenodd"):w.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),w.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const b=(0,r.getCurrentTransform)(this.ctx);if(b[1]===0&&b[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(b[0]),Math.abs(b[3]));else{const E=Math.abs(b[0]*b[3]-b[2]*b[1]),w=Math.hypot(b[0],b[2]),R=Math.hypot(b[1],b[3]);this._cachedGetSinglePixelWidth=Math.max(w,R)/E}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:b}=this.current,{a:E,b:w,c:R,d:L}=this.ctx.getTransform();let U,V;if(w===0&&R===0){const q=Math.abs(E),$=Math.abs(L);if(q===$)if(b===0)U=V=1/q;else{const J=q*b;U=V=J<1?1/J:1}else if(b===0)U=1/q,V=1/$;else{const J=q*b,j=$*b;U=J<1?1/J:1,V=j<1?1/j:1}}else{const q=Math.abs(E*L-w*R),$=Math.hypot(E,w),J=Math.hypot(R,L);if(b===0)U=J/q,V=$/q;else{const j=b*q;U=J>j?J/j:1,V=$>j?$/j:1}}this._cachedScaleForStroking[0]=U,this._cachedScaleForStroking[1]=V}return this._cachedScaleForStroking}rescaleAndStroke(b){const{ctx:E}=this,{lineWidth:w}=this.current,[R,L]=this.getScaleForStroking();if(E.lineWidth=w||1,R===1&&L===1){E.stroke();return}const U=E.getLineDash();if(b&&E.save(),E.scale(R,L),U.length>0){const V=Math.max(R,L);E.setLineDash(U.map(q=>q/V)),E.lineDashOffset/=V}E.stroke(),b&&E.restore()}isContentVisible(){for(let b=this.markedContentStack.length-1;b>=0;b--)if(!this.markedContentStack[b].visible)return!1;return!0}}for(const D in o.OPS)k.prototype[D]!==void 0&&(k.prototype[o.OPS[D]]=k.prototype[D])}),473:((i,e,s)=>{s.d(e,{DOMCMapReaderFactory:()=>g,DOMCanvasFactory:()=>v,DOMFilterFactory:()=>p,DOMSVGFactory:()=>T,DOMStandardFontDataFactory:()=>A,PDFDateString:()=>z,PageViewport:()=>_,PixelsPerInch:()=>f,RenderingCancelledException:()=>C,StatTimer:()=>F,fetchData:()=>h,getColorValues:()=>ut,getCurrentTransform:()=>pt,getCurrentTransformInverse:()=>xt,getFilenameFromUrl:()=>x,getPdfFilenameFromUrl:()=>I,getRGB:()=>W,getXfaPageViewport:()=>it,isDataScheme:()=>M,isPdfFile:()=>y,isValidFetchUrl:()=>P,noContextMenu:()=>H,setLayerDimensions:()=>Mt});var o=s(822),r=s(266);const u="http://www.w3.org/2000/svg";class f{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}class p extends o.BaseFilterFactory{#t;#e;#n;#i;#s;#o;#r;#l;#u;#c;#h=0;constructor({docId:X,ownerDocument:B=globalThis.document}={}){super(),this.#n=X,this.#i=B}get#f(){return this.#t||=new Map}get#d(){if(!this.#e){const X=this.#i.createElement("div"),{style:B}=X;B.visibility="hidden",B.contain="strict",B.width=B.height=0,B.position="absolute",B.top=B.left=0,B.zIndex=-1;const et=this.#i.createElementNS(u,"svg");et.setAttribute("width",0),et.setAttribute("height",0),this.#e=this.#i.createElementNS(u,"defs"),X.append(et),et.append(this.#e),this.#i.body.append(X)}return this.#e}addFilter(X){if(!X)return"none";let B=this.#f.get(X);if(B)return B;let et,lt,gt,_t;if(X.length===1){const Ct=X[0],wt=new Array(256);for(let St=0;St<256;St++)wt[St]=Ct[St]/255;_t=et=lt=gt=wt.join(",")}else{const[Ct,wt,St]=X,k=new Array(256),D=new Array(256),b=new Array(256);for(let E=0;E<256;E++)k[E]=Ct[E]/255,D[E]=wt[E]/255,b[E]=St[E]/255;et=k.join(","),lt=D.join(","),gt=b.join(","),_t=`${et}${lt}${gt}`}if(B=this.#f.get(_t),B)return this.#f.set(X,B),B;const K=`g_${this.#n}_transfer_map_${this.#h++}`,rt=`url(#${K})`;this.#f.set(X,rt),this.#f.set(_t,rt);const yt=this.#p(K);return this.#y(et,lt,gt,yt),rt}addHCMFilter(X,B){const et=`${X}-${B}`;if(this.#o===et)return this.#r;if(this.#o=et,this.#r="none",this.#s?.remove(),!X||!B)return this.#r;const lt=this.#v(X);X=r.Util.makeHexColor(...lt);const gt=this.#v(B);if(B=r.Util.makeHexColor(...gt),this.#d.style.color="",X==="#000000"&&B==="#ffffff"||X===B)return this.#r;const _t=new Array(256);for(let wt=0;wt<=255;wt++){const St=wt/255;_t[wt]=St<=.03928?St/12.92:((St+.055)/1.055)**2.4}const K=_t.join(","),rt=`g_${this.#n}_hcm_filter`,yt=this.#l=this.#p(rt);this.#y(K,K,K,yt),this.#a(yt);const Ct=(wt,St)=>{const k=lt[wt]/255,D=gt[wt]/255,b=new Array(St+1);for(let E=0;E<=St;E++)b[E]=k+E/St*(D-k);return b.join(",")};return this.#y(Ct(0,5),Ct(1,5),Ct(2,5),yt),this.#r=`url(#${rt})`,this.#r}addHighlightHCMFilter(X,B,et,lt){const gt=`${X}-${B}-${et}-${lt}`;if(this.#u===gt)return this.#c;if(this.#u=gt,this.#c="none",this.#l?.remove(),!X||!B)return this.#c;const[_t,K]=[X,B].map(this.#v.bind(this));let rt=Math.round(.2126*_t[0]+.7152*_t[1]+.0722*_t[2]),yt=Math.round(.2126*K[0]+.7152*K[1]+.0722*K[2]),[Ct,wt]=[et,lt].map(this.#v.bind(this));yt<rt&&([rt,yt,Ct,wt]=[yt,rt,wt,Ct]),this.#d.style.color="";const St=(b,E,w)=>{const R=new Array(256),L=(yt-rt)/w,U=b/255,V=(E-b)/(255*w);let q=0;for(let $=0;$<=w;$++){const J=Math.round(rt+$*L),j=U+$*V;for(let st=q;st<=J;st++)R[st]=j;q=J+1}for(let $=q;$<256;$++)R[$]=R[q-1];return R.join(",")},k=`g_${this.#n}_hcm_highlight_filter`,D=this.#l=this.#p(k);return this.#a(D),this.#y(St(Ct[0],wt[0],5),St(Ct[1],wt[1],5),St(Ct[2],wt[2],5),D),this.#c=`url(#${k})`,this.#c}destroy(X=!1){X&&(this.#r||this.#c)||(this.#e&&(this.#e.parentNode.parentNode.remove(),this.#e=null),this.#t&&(this.#t.clear(),this.#t=null),this.#h=0)}#a(X){const B=this.#i.createElementNS(u,"feColorMatrix");B.setAttribute("type","matrix"),B.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),X.append(B)}#p(X){const B=this.#i.createElementNS(u,"filter");return B.setAttribute("color-interpolation-filters","sRGB"),B.setAttribute("id",X),this.#d.append(B),B}#g(X,B,et){const lt=this.#i.createElementNS(u,B);lt.setAttribute("type","discrete"),lt.setAttribute("tableValues",et),X.append(lt)}#y(X,B,et,lt){const gt=this.#i.createElementNS(u,"feComponentTransfer");lt.append(gt),this.#g(gt,"feFuncR",X),this.#g(gt,"feFuncG",B),this.#g(gt,"feFuncB",et)}#v(X){return this.#d.style.color=X,W(getComputedStyle(this.#d).getPropertyValue("color"))}}class v extends o.BaseCanvasFactory{constructor({ownerDocument:X=globalThis.document}={}){super(),this._document=X}_createCanvas(X,B){const et=this._document.createElement("canvas");return et.width=X,et.height=B,et}}async function h(Tt,X="text"){if(P(Tt,document.baseURI)){const B=await fetch(Tt);if(!B.ok)throw new Error(B.statusText);switch(X){case"arraybuffer":return B.arrayBuffer();case"blob":return B.blob();case"json":return B.json()}return B.text()}return new Promise((B,et)=>{const lt=new XMLHttpRequest;lt.open("GET",Tt,!0),lt.responseType=X,lt.onreadystatechange=()=>{if(lt.readyState===XMLHttpRequest.DONE){if(lt.status===200||lt.status===0){let gt;switch(X){case"arraybuffer":case"blob":case"json":gt=lt.response;break;default:gt=lt.responseText;break}if(gt){B(gt);return}}et(new Error(lt.statusText))}},lt.send(null)})}class g extends o.BaseCMapReaderFactory{_fetchData(X,B){return h(X,this.isCompressed?"arraybuffer":"text").then(et=>({cMapData:et instanceof ArrayBuffer?new Uint8Array(et):(0,r.stringToBytes)(et),compressionType:B}))}}class A extends o.BaseStandardFontDataFactory{_fetchData(X){return h(X,"arraybuffer").then(B=>new Uint8Array(B))}}class T extends o.BaseSVGFactory{_createSVG(X){return document.createElementNS(u,X)}}class _{constructor({viewBox:X,scale:B,rotation:et,offsetX:lt=0,offsetY:gt=0,dontFlip:_t=!1}){this.viewBox=X,this.scale=B,this.rotation=et,this.offsetX=lt,this.offsetY=gt;const K=(X[2]+X[0])/2,rt=(X[3]+X[1])/2;let yt,Ct,wt,St;switch(et%=360,et<0&&(et+=360),et){case 180:yt=-1,Ct=0,wt=0,St=1;break;case 90:yt=0,Ct=1,wt=1,St=0;break;case 270:yt=0,Ct=-1,wt=-1,St=0;break;case 0:yt=1,Ct=0,wt=0,St=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}_t&&(wt=-wt,St=-St);let k,D,b,E;yt===0?(k=Math.abs(rt-X[1])*B+lt,D=Math.abs(K-X[0])*B+gt,b=(X[3]-X[1])*B,E=(X[2]-X[0])*B):(k=Math.abs(K-X[0])*B+lt,D=Math.abs(rt-X[1])*B+gt,b=(X[2]-X[0])*B,E=(X[3]-X[1])*B),this.transform=[yt*B,Ct*B,wt*B,St*B,k-yt*B*K-wt*B*rt,D-Ct*B*K-St*B*rt],this.width=b,this.height=E}get rawDims(){const{viewBox:X}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:X[2]-X[0],pageHeight:X[3]-X[1],pageX:X[0],pageY:X[1]})}clone({scale:X=this.scale,rotation:B=this.rotation,offsetX:et=this.offsetX,offsetY:lt=this.offsetY,dontFlip:gt=!1}={}){return new _({viewBox:this.viewBox.slice(),scale:X,rotation:B,offsetX:et,offsetY:lt,dontFlip:gt})}convertToViewportPoint(X,B){return r.Util.applyTransform([X,B],this.transform)}convertToViewportRectangle(X){const B=r.Util.applyTransform([X[0],X[1]],this.transform),et=r.Util.applyTransform([X[2],X[3]],this.transform);return[B[0],B[1],et[0],et[1]]}convertToPdfPoint(X,B){return r.Util.applyInverseTransform([X,B],this.transform)}}class C extends r.BaseException{constructor(X,B=0){super(X,"RenderingCancelledException"),this.extraDelay=B}}function M(Tt){const X=Tt.length;let B=0;for(;B<X&&Tt[B].trim()==="";)B++;return Tt.substring(B,B+5).toLowerCase()==="data:"}function y(Tt){return typeof Tt=="string"&&/\.pdf$/i.test(Tt)}function x(Tt,X=!1){return X||([Tt]=Tt.split(/[#?]/,1)),Tt.substring(Tt.lastIndexOf("/")+1)}function I(Tt,X="document.pdf"){if(typeof Tt!="string")return X;if(M(Tt))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),X;const B=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,et=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,lt=B.exec(Tt);let gt=et.exec(lt[1])||et.exec(lt[2])||et.exec(lt[3]);if(gt&&(gt=gt[0],gt.includes("%")))try{gt=et.exec(decodeURIComponent(gt))[0]}catch{}return gt||X}class F{started=Object.create(null);times=[];time(X){X in this.started&&(0,r.warn)(`Timer is already running for ${X}`),this.started[X]=Date.now()}timeEnd(X){X in this.started||(0,r.warn)(`Timer has not been started for ${X}`),this.times.push({name:X,start:this.started[X],end:Date.now()}),delete this.started[X]}toString(){const X=[];let B=0;for(const{name:et}of this.times)B=Math.max(et.length,B);for(const{name:et,start:lt,end:gt}of this.times)X.push(`${et.padEnd(B)} ${gt-lt}ms
`);return X.join("")}}function P(Tt,X){try{const{protocol:B}=X?new URL(Tt,X):new URL(Tt);return B==="http:"||B==="https:"}catch{return!1}}function H(Tt){Tt.preventDefault()}let O;class z{static toDateObject(X){if(!X||typeof X!="string")return null;O||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const B=O.exec(X);if(!B)return null;const et=parseInt(B[1],10);let lt=parseInt(B[2],10);lt=lt>=1&&lt<=12?lt-1:0;let gt=parseInt(B[3],10);gt=gt>=1&&gt<=31?gt:1;let _t=parseInt(B[4],10);_t=_t>=0&&_t<=23?_t:0;let K=parseInt(B[5],10);K=K>=0&&K<=59?K:0;let rt=parseInt(B[6],10);rt=rt>=0&&rt<=59?rt:0;const yt=B[7]||"Z";let Ct=parseInt(B[8],10);Ct=Ct>=0&&Ct<=23?Ct:0;let wt=parseInt(B[9],10)||0;return wt=wt>=0&&wt<=59?wt:0,yt==="-"?(_t+=Ct,K+=wt):yt==="+"&&(_t-=Ct,K-=wt),new Date(Date.UTC(et,lt,gt,_t,K,rt))}}function it(Tt,{scale:X=1,rotation:B=0}){const{width:et,height:lt}=Tt.attributes.style,gt=[0,0,parseInt(et),parseInt(lt)];return new _({viewBox:gt,scale:X,rotation:B})}function W(Tt){if(Tt.startsWith("#")){const X=parseInt(Tt.slice(1),16);return[(X&16711680)>>16,(X&65280)>>8,X&255]}return Tt.startsWith("rgb(")?Tt.slice(4,-1).split(",").map(X=>parseInt(X)):Tt.startsWith("rgba(")?Tt.slice(5,-1).split(",").map(X=>parseInt(X)).slice(0,3):((0,r.warn)(`Not a valid color format: "${Tt}"`),[0,0,0])}function ut(Tt){const X=document.createElement("span");X.style.visibility="hidden",document.body.append(X);for(const B of Tt.keys()){X.style.color=B;const et=window.getComputedStyle(X).color;Tt.set(B,W(et))}X.remove()}function pt(Tt){const{a:X,b:B,c:et,d:lt,e:gt,f:_t}=Tt.getTransform();return[X,B,et,lt,gt,_t]}function xt(Tt){const{a:X,b:B,c:et,d:lt,e:gt,f:_t}=Tt.getTransform().invertSelf();return[X,B,et,lt,gt,_t]}function Mt(Tt,X,B=!1,et=!0){if(X instanceof _){const{pageWidth:lt,pageHeight:gt}=X.rawDims,{style:_t}=Tt,K=r.FeatureTest.isCSSRoundSupported,rt=`var(--scale-factor) * ${lt}px`,yt=`var(--scale-factor) * ${gt}px`,Ct=K?`round(${rt}, 1px)`:`calc(${rt})`,wt=K?`round(${yt}, 1px)`:`calc(${yt})`;!B||X.rotation%180===0?(_t.width=Ct,_t.height=wt):(_t.width=wt,_t.height=Ct)}et&&Tt.setAttribute("data-main-rotation",X.rotation)}}),423:((i,e,s)=>{s.d(e,{DrawLayer:()=>u});var o=s(473),r=s(266);class u{#t=null;#e=0;#n=new Map;constructor({pageIndex:p}){this.pageIndex=p}setParent(p){if(!this.#t){this.#t=p;return}if(this.#t!==p){if(this.#n.size>0)for(const v of this.#n.values())v.remove(),p.append(v);this.#t=p}}static get _svgFactory(){return(0,r.shadow)(this,"_svgFactory",new o.DOMSVGFactory)}static#i(p,{x:v,y:h,width:g,height:A}){const{style:T}=p;T.top=`${100*h}%`,T.left=`${100*v}%`,T.width=`${100*g}%`,T.height=`${100*A}%`}#s(p){const v=u._svgFactory.create(1,1,!0);return this.#t.append(v),u.#i(v,p),v}highlight({outlines:p,box:v},h,g){const A=this.#e++,T=this.#s(v);T.classList.add("highlight");const _=u._svgFactory.createElement("defs");T.append(_);const C=u._svgFactory.createElement("path");_.append(C);const M=`path_p${this.pageIndex}_${A}`;C.setAttribute("id",M),C.setAttribute("d",u.#o(p));const y=u._svgFactory.createElement("clipPath");_.append(y);const x=`clip_${M}`;y.setAttribute("id",x),y.setAttribute("clipPathUnits","objectBoundingBox");const I=u._svgFactory.createElement("use");y.append(I),I.setAttribute("href",`#${M}`),I.classList.add("clip");const F=u._svgFactory.createElement("use");return T.append(F),T.setAttribute("fill",h),T.setAttribute("fill-opacity",g),F.setAttribute("href",`#${M}`),this.#n.set(A,T),{id:A,clipPathId:`url(#${x})`}}highlightOutline({outlines:p,box:v}){const h=this.#e++,g=this.#s(v);g.classList.add("highlightOutline");const A=u._svgFactory.createElement("defs");g.append(A);const T=u._svgFactory.createElement("path");A.append(T);const _=`path_p${this.pageIndex}_${h}`;T.setAttribute("id",_),T.setAttribute("d",u.#o(p)),T.setAttribute("vector-effect","non-scaling-stroke");const C=u._svgFactory.createElement("use");g.append(C),C.setAttribute("href",`#${_}`);const M=C.cloneNode();return g.append(M),C.classList.add("mainOutline"),M.classList.add("secondaryOutline"),this.#n.set(h,g),h}static#o(p){const v=[];for(const h of p){let[g,A]=h;v.push(`M${g} ${A}`);for(let T=2;T<h.length;T+=2){const _=h[T],C=h[T+1];_===g?(v.push(`V${C}`),A=C):C===A&&(v.push(`H${_}`),g=_)}v.push("Z")}return v.join(" ")}updateBox(p,v){u.#i(this.#n.get(p),v)}rotate(p,v){this.#n.get(p).setAttribute("data-main-rotation",v)}changeColor(p,v){this.#n.get(p).setAttribute("fill",v)}changeOpacity(p,v){this.#n.get(p).setAttribute("fill-opacity",v)}addClass(p,v){this.#n.get(p).classList.add(v)}removeClass(p,v){this.#n.get(p).classList.remove(v)}remove(p){this.#t!==null&&(this.#n.get(p).remove(),this.#n.delete(p))}destroy(){this.#t=null;for(const p of this.#n.values())p.remove();this.#n.clear()}}}),629:((i,e,s)=>{s.d(e,{AnnotationEditorLayer:()=>C});var o=s(266),r=s(115),u=s(812),f=s(640);class p extends r.AnnotationEditor{#t=this.editorDivBlur.bind(this);#e=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#s;#o="";#r=`${this.id}-editor`;#l;#u=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const y=p.prototype,x=P=>P.isEmpty(),I=u.AnnotationEditorUIManager.TRANSLATE_SMALL,F=u.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new u.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],y.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],y.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],y._translateEmpty,{args:[-I,0],checker:x}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],y._translateEmpty,{args:[-F,0],checker:x}],[["ArrowRight","mac+ArrowRight"],y._translateEmpty,{args:[I,0],checker:x}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],y._translateEmpty,{args:[F,0],checker:x}],[["ArrowUp","mac+ArrowUp"],y._translateEmpty,{args:[0,-I],checker:x}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],y._translateEmpty,{args:[0,-F],checker:x}],[["ArrowDown","mac+ArrowDown"],y._translateEmpty,{args:[0,I],checker:x}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],y._translateEmpty,{args:[0,F],checker:x}]]))}static _type="freetext";static _editorType=o.AnnotationEditorType.FREETEXT;constructor(y){super({...y,name:"freeTextEditor"}),this.#s=y.color||p._defaultColor||r.AnnotationEditor._defaultLineColor,this.#l=y.fontSize||p._defaultFontSize}static initialize(y){r.AnnotationEditor.initialize(y,{strings:["pdfjs-free-text-default-content"]});const x=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(x.getPropertyValue("--freetext-padding"))}static updateDefaultParams(y,x){switch(y){case o.AnnotationEditorParamsType.FREETEXT_SIZE:p._defaultFontSize=x;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:p._defaultColor=x;break}}updateParams(y,x){switch(y){case o.AnnotationEditorParamsType.FREETEXT_SIZE:this.#c(x);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:this.#h(x);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,p._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,p._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[o.AnnotationEditorParamsType.FREETEXT_COLOR,this.#s]]}#c(y){const x=F=>{this.editorDiv.style.fontSize=`calc(${F}px * var(--scale-factor))`,this.translate(0,-(F-this.#l)*this.parentScale),this.#l=F,this.#d()},I=this.#l;this.addCommands({cmd:()=>{x(y)},undo:()=>{x(I)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#h(y){const x=this.#s;this.addCommands({cmd:()=>{this.#s=this.editorDiv.style.color=y},undo:()=>{this.#s=this.editorDiv.style.color=x},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(y,x){this._uiManager.translateSelectedEditors(y,x,!0)}getInitialTranslation(){const y=this.parentScale;return[-p._internalPadding*y,-(p._internalPadding+this.#l)*y]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#e),this.editorDiv.addEventListener("blur",this.#t),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#r),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#e),this.editorDiv.removeEventListener("blur",this.#t),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(y){this._focusEventsAllowed&&(super.focusin(y),y.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#f(){const y=this.editorDiv.getElementsByTagName("div");if(y.length===0)return this.editorDiv.innerText;const x=[];for(const I of y)x.push(I.innerText.replace(/\r\n?|\n/,""));return x.join(`
`)}#d(){const[y,x]=this.parentDimensions;let I;if(this.isAttachedToDOM)I=this.div.getBoundingClientRect();else{const{currentLayer:F,div:P}=this,H=P.style.display;P.style.display="hidden",F.div.append(this.div),I=P.getBoundingClientRect(),P.remove(),P.style.display=H}this.rotation%180===this.parentRotation%180?(this.width=I.width/y,this.height=I.height/x):(this.width=I.height/y,this.height=I.width/x),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const y=this.#o,x=this.#o=this.#f().trimEnd();if(y===x)return;const I=F=>{if(this.#o=F,!F){this.remove();return}this.#a(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{I(x)},undo:()=>{I(y)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(y){this.enterInEditMode()}keydown(y){y.target===this.div&&y.key==="Enter"&&(this.enterInEditMode(),y.preventDefault())}editorDivKeydown(y){p._keyboardManager.exec(this,y)}editorDivFocus(y){this.isEditing=!0}editorDivBlur(y){this.isEditing=!1}editorDivInput(y){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let y,x;this.width&&(y=this.x,x=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#r),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text"),this.enableEditing(),r.AnnotationEditor._l10nPromise.get("pdfjs-free-text-default-content").then(F=>this.editorDiv?.setAttribute("default-content",F)),this.editorDiv.contentEditable=!0;const{style:I}=this.editorDiv;if(I.fontSize=`calc(${this.#l}px * var(--scale-factor))`,I.color=this.#s,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[F,P]=this.parentDimensions;if(this.annotationElementId){const{position:H}=this.#u;let[O,z]=this.getInitialTranslation();[O,z]=this.pageTranslationToScreen(O,z);const[it,W]=this.pageDimensions,[ut,pt]=this.pageTranslation;let xt,Mt;switch(this.rotation){case 0:xt=y+(H[0]-ut)/it,Mt=x+this.height-(H[1]-pt)/W;break;case 90:xt=y+(H[0]-ut)/it,Mt=x-(H[1]-pt)/W,[O,z]=[z,-O];break;case 180:xt=y-this.width+(H[0]-ut)/it,Mt=x-(H[1]-pt)/W,[O,z]=[-O,-z];break;case 270:xt=y+(H[0]-ut-this.height*W)/it,Mt=x+(H[1]-pt-this.width*it)/W,[O,z]=[-z,O];break}this.setAt(xt*F,Mt*P,O,z)}else this.setAt(y*F,x*P,this.width*F,this.height*P);this.#a(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#a(){if(this.editorDiv.replaceChildren(),!!this.#o)for(const y of this.#o.split(`
`)){const x=document.createElement("div");x.append(y?document.createTextNode(y):document.createElement("br")),this.editorDiv.append(x)}}get contentDiv(){return this.editorDiv}static deserialize(y,x,I){let F=null;if(y instanceof f.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:H,fontColor:O},rect:z,rotation:it,id:W},textContent:ut,textPosition:pt,parent:{page:{pageNumber:xt}}}=y;if(!ut||ut.length===0)return null;F=y={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(O),fontSize:H,value:ut.join(`
`),position:pt,pageIndex:xt-1,rect:z,rotation:it,id:W,deleted:!1}}const P=super.deserialize(y,x,I);return P.#l=y.fontSize,P.#s=o.Util.makeHexColor(...y.color),P.#o=y.value,P.annotationElementId=y.id||null,P.#u=F,P}serialize(y=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const x=p._internalPadding*this.parentScale,I=this.getRect(x,x),F=r.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#s),P={annotationType:o.AnnotationEditorType.FREETEXT,color:F,fontSize:this.#l,value:this.#o,pageIndex:this.pageIndex,rect:I,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return y?P:this.annotationElementId&&!this.#p(P)?null:(P.id=this.annotationElementId,P)}#p(y){const{value:x,fontSize:I,color:F,rect:P,pageIndex:H}=this.#u;return y.value!==x||y.fontSize!==I||y.rect.some((O,z)=>Math.abs(O-P[z])>=1)||y.color.some((O,z)=>O!==F[z])||y.pageIndex!==H}#g(y=!1){if(!this.annotationElementId)return;if(this.#d(),!y&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const x=p._internalPadding*this.parentScale;this.#u.rect=this.getRect(x,x)}}var v=s(97),h=s(405);class g extends r.AnnotationEditor{#t;#e=null;#n=null;#i=null;#s=null;#o=null;#r=null;#l=null;#u;#c=null;static _defaultColor=null;static _defaultOpacity=1;static _l10nPromise;static _type="highlight";static _editorType=o.AnnotationEditorType.HIGHLIGHT;constructor(y){super({...y,name:"highlightEditor"}),g._defaultColor||=this._uiManager.highlightColors?.values().next().value||"#fff066",this.color=y.color||g._defaultColor,this.#u=y.opacity||g._defaultOpacity,this.#t=y.boxes||null,this._isDraggable=!1,this.#h(),this.#a(),this.rotate(this.rotation)}#h(){const y=new h.Outliner(this.#t,.001);this.#o=y.getOutlines(),{x:this.x,y:this.y,width:this.width,height:this.height}=this.#o.box;const x=new h.Outliner(this.#t,.0025,.001,this._uiManager.direction==="ltr");this.#i=x.getOutlines();const{lastPoint:I}=this.#i.box;this.#l=[(I[0]-this.x)/this.width,(I[1]-this.y)/this.height]}static initialize(y){r.AnnotationEditor.initialize(y)}static updateDefaultParams(y,x){switch(y){case o.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:g._defaultColor=x;break}}get toolbarPosition(){return this.#l}updateParams(y,x){switch(y){case o.AnnotationEditorParamsType.HIGHLIGHT_COLOR:this.#f(x);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR,g._defaultColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.HIGHLIGHT_COLOR,this.color||g._defaultColor]]}#f(y){const x=this.color;this.addCommands({cmd:()=>{this.color=y,this.parent.drawLayer.changeColor(this.#r,y),this.#n?.updateColor(y)},undo:()=>{this.color=x,this.parent.drawLayer.changeColor(this.#r,x),this.#n?.updateColor(x)},mustExec:!0,type:o.AnnotationEditorParamsType.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}async addEditToolbar(){const y=await super.addEditToolbar();return y?(this._uiManager.highlightColors&&(this.#n=new v.ColorPicker({editor:this}),y.addColorPicker(this.#n)),y):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(0)}getRect(y,x){return super.getRect(y,x,0)}onceAdded(){this.parent.addUndoableEditor(this),this.div.focus()}remove(){super.remove(),this.#d()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#a(),this.isAttachedToDOM||this.parent.add(this)))}setParent(y){let x=!1;this.parent&&!y?this.#d():y&&(this.#a(y),x=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(y),x&&this.select()}#d(){this.#r===null||!this.parent||(this.parent.drawLayer.remove(this.#r),this.#r=null,this.parent.drawLayer.remove(this.#c),this.#c=null)}#a(y=this.parent){this.#r===null&&({id:this.#r,clipPathId:this.#e}=y.drawLayer.highlight(this.#o,this.color,this.#u),this.#s&&(this.#s.style.clipPath=this.#e),this.#c=y.drawLayer.highlightOutline(this.#i))}static#p({x:y,y:x,width:I,height:F},P){switch(P){case 90:return{x:1-x-F,y,width:F,height:I};case 180:return{x:1-y-I,y:1-x-F,width:I,height:F};case 270:return{x,y:1-y-I,width:F,height:I}}return{x:y,y:x,width:I,height:F}}rotate(y){const{drawLayer:x}=this.parent;x.rotate(this.#r,y),x.rotate(this.#c,y),x.updateBox(this.#r,g.#p(this,y)),x.updateBox(this.#c,g.#p(this.#i.box,y))}render(){if(this.div)return this.div;const y=super.render(),x=this.#s=document.createElement("div");y.append(x),x.className="internal",x.style.clipPath=this.#e;const[I,F]=this.parentDimensions;return this.setDims(this.width*I,this.height*F),(0,u.bindEvents)(this,this.#s,["pointerover","pointerleave"]),this.enableEditing(),y}pointerover(){this.parent.drawLayer.addClass(this.#c,"hovered")}pointerleave(){this.parent.drawLayer.removeClass(this.#c,"hovered")}select(){super.select(),this.parent?.drawLayer.removeClass(this.#c,"hovered"),this.parent?.drawLayer.addClass(this.#c,"selected")}unselect(){super.unselect(),this.parent?.drawLayer.removeClass(this.#c,"selected")}#g(){const[y,x]=this.pageDimensions,I=this.#t,F=new Array(I.length*8);let P=0;for(const{x:H,y:O,width:z,height:it}of I){const W=H*y,ut=(1-O-it)*x;F[P]=F[P+4]=W,F[P+1]=F[P+3]=ut,F[P+2]=F[P+6]=W+z*y,F[P+5]=F[P+7]=ut+it*x,P+=8}return F}#y(){const[y,x]=this.pageDimensions,I=this.width*y,F=this.height*x,P=this.x*y,H=(1-this.y-this.height)*x,O=[];for(const z of this.#o.outlines){const it=new Array(z.length);for(let W=0;W<z.length;W+=2)it[W]=P+z[W]*I,it[W+1]=H+(1-z[W+1])*F;O.push(it)}return O}static deserialize(y,x,I){const F=super.deserialize(y,x,I),{rect:P,color:H,quadPoints:O}=y;F.color=o.Util.makeHexColor(...H),F.#u=y.opacity;const[z,it]=F.pageDimensions;F.width=(P[2]-P[0])/z,F.height=(P[3]-P[1])/it;const W=F.#t=[];for(let ut=0;ut<O.length;ut+=8)W.push({x:O[4]/z,y:1-O[ut+5]/it,width:(O[ut+2]-O[ut])/z,height:(O[ut+5]-O[ut+1])/it});return F.#h(),F}serialize(y=!1){if(this.isEmpty()||y)return null;const x=this.getRect(0,0),I=r.AnnotationEditor._colorManager.convert(this.color);return{annotationType:o.AnnotationEditorType.HIGHLIGHT,color:I,opacity:this.#u,quadPoints:this.#g(),outlines:this.#y(),pageIndex:this.pageIndex,rect:x,rotation:0,structTreeParentId:this._structTreeParentId}}static canCreateNewEmptyEditor(){return!1}}var A=s(473);class T extends r.AnnotationEditor{#t=0;#e=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#s=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#r=null;#l=new Path2D;#u=!1;#c=!1;#h=!1;#f=null;#d=0;#a=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";static _editorType=o.AnnotationEditorType.INK;constructor(y){super({...y,name:"inkEditor"}),this.color=y.color||null,this.thickness=y.thickness||null,this.opacity=y.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(y){r.AnnotationEditor.initialize(y)}static updateDefaultParams(y,x){switch(y){case o.AnnotationEditorParamsType.INK_THICKNESS:T._defaultThickness=x;break;case o.AnnotationEditorParamsType.INK_COLOR:T._defaultColor=x;break;case o.AnnotationEditorParamsType.INK_OPACITY:T._defaultOpacity=x/100;break}}updateParams(y,x){switch(y){case o.AnnotationEditorParamsType.INK_THICKNESS:this.#g(x);break;case o.AnnotationEditorParamsType.INK_COLOR:this.#y(x);break;case o.AnnotationEditorParamsType.INK_OPACITY:this.#v(x);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,T._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,T._defaultColor||r.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(T._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||T._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||T._defaultColor||r.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??T._defaultOpacity))]]}#g(y){const x=this.thickness;this.addCommands({cmd:()=>{this.thickness=y,this.#M()},undo:()=>{this.thickness=x,this.#M()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#y(y){const x=this.color;this.addCommands({cmd:()=>{this.color=y,this.#T()},undo:()=>{this.color=x,this.#T()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#v(y){y/=100;const x=this.opacity;this.addCommands({cmd:()=>{this.opacity=y,this.#T()},undo:()=>{this.opacity=x,this.#T()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#x(),this.#E()),this.isAttachedToDOM||(this.parent.add(this),this.#I()),this.#M()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#r&&(clearTimeout(this.#r),this.#r=null),this.#f.disconnect(),this.#f=null,super.remove())}setParent(y){!this.parent&&y?this._uiManager.removeShouldRescale(this):this.parent&&y===null&&this._uiManager.addShouldRescale(this),super.setParent(y)}onScaleChanging(){const[y,x]=this.parentDimensions,I=this.width*y,F=this.height*x;this.setDimensions(I,F)}enableEditMode(){this.#u||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#o))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#S(){const{parentRotation:y,parentDimensions:[x,I]}=this;switch(y){case 90:return[0,I,I,x];case 180:return[x,I,x,I];case 270:return[x,0,I,x];default:return[0,0,x,I]}}#A(){const{ctx:y,color:x,opacity:I,thickness:F,parentScale:P,scaleFactor:H}=this;y.lineWidth=F*P/H,y.lineCap="round",y.lineJoin="round",y.miterLimit=10,y.strokeStyle=`${x}${(0,u.opacityToHex)(I)}`}#m(y,x){this.canvas.addEventListener("contextmenu",A.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#s),this.canvas.removeEventListener("pointerdown",this.#o),this.isEditing=!0,this.#h||(this.#h=!0,this.#I(),this.thickness||=T._defaultThickness,this.color||=T._defaultColor||r.AnnotationEditor._defaultLineColor,this.opacity??=T._defaultOpacity),this.currentPath.push([y,x]),this.#c=!1,this.#A(),this.#p=()=>{this.#L(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#C(y,x){const[I,F]=this.currentPath.at(-1);if(this.currentPath.length>1&&y===I&&x===F)return;const P=this.currentPath;let H=this.#l;if(P.push([y,x]),this.#c=!0,P.length<=2){H.moveTo(...P[0]),H.lineTo(y,x);return}P.length===3&&(this.#l=H=new Path2D,H.moveTo(...P[0])),this.#P(H,...P.at(-3),...P.at(-2),y,x)}#N(){if(this.currentPath.length===0)return;const y=this.currentPath.at(-1);this.#l.lineTo(...y)}#D(y,x){this.#p=null,y=Math.min(Math.max(y,0),this.canvas.width),x=Math.min(Math.max(x,0),this.canvas.height),this.#C(y,x),this.#N();let I;if(this.currentPath.length!==1)I=this.#F();else{const z=[y,x];I=[[z,z.slice(),z.slice(),z]]}const F=this.#l,P=this.currentPath;this.currentPath=[],this.#l=new Path2D;const H=()=>{this.allRawPaths.push(P),this.paths.push(I),this.bezierPath2D.push(F),this.rebuild()},O=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#x(),this.#E()),this.#M())};this.addCommands({cmd:H,undo:O,mustExec:!0})}#L(){if(!this.#c)return;this.#c=!1;const y=Math.ceil(this.thickness*this.parentScale),x=this.currentPath.slice(-3),I=x.map(H=>H[0]),F=x.map(H=>H[1]);Math.min(...I)-y,Math.max(...I)+y,Math.min(...F)-y,Math.max(...F)+y;const{ctx:P}=this;P.save(),P.clearRect(0,0,this.canvas.width,this.canvas.height);for(const H of this.bezierPath2D)P.stroke(H);P.stroke(this.#l),P.restore()}#P(y,x,I,F,P,H,O){const z=(x+F)/2,it=(I+P)/2,W=(F+H)/2,ut=(P+O)/2;y.bezierCurveTo(z+2*(F-z)/3,it+2*(P-it)/3,W+2*(F-W)/3,ut+2*(P-ut)/3,W,ut)}#F(){const y=this.currentPath;if(y.length<=2)return[[y[0],y[0],y.at(-1),y.at(-1)]];const x=[];let I,[F,P]=y[0];for(I=1;I<y.length-2;I++){const[pt,xt]=y[I],[Mt,Tt]=y[I+1],X=(pt+Mt)/2,B=(xt+Tt)/2,et=[F+2*(pt-F)/3,P+2*(xt-P)/3],lt=[X+2*(pt-X)/3,B+2*(xt-B)/3];x.push([[F,P],et,lt,[X,B]]),[F,P]=[X,B]}const[H,O]=y[I],[z,it]=y[I+1],W=[F+2*(H-F)/3,P+2*(O-P)/3],ut=[z+2*(H-z)/3,it+2*(O-it)/3];return x.push([[F,P],W,ut,[z,it]]),x}#T(){if(this.isEmpty()){this.#w();return}this.#A();const{canvas:y,ctx:x}=this;x.setTransform(1,0,0,1,0,0),x.clearRect(0,0,y.width,y.height),this.#w();for(const I of this.bezierPath2D)x.stroke(I)}commit(){this.#u||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#u=!0,this.div.classList.add("disabled"),this.#M(!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(y){this._focusEventsAllowed&&(super.focusin(y),this.enableEditMode())}canvasPointerdown(y){y.button!==0||!this.isInEditMode()||this.#u||(this.setInForeground(),y.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),this.#m(y.offsetX,y.offsetY))}canvasPointermove(y){y.preventDefault(),this.#C(y.offsetX,y.offsetY)}canvasPointerup(y){y.preventDefault(),this.#k(y)}canvasPointerleave(y){this.#k(y)}#k(y){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#s),this.canvas.addEventListener("pointerdown",this.#o),this.#r&&clearTimeout(this.#r),this.#r=setTimeout(()=>{this.#r=null,this.canvas.removeEventListener("contextmenu",A.noContextMenu)},10),this.#D(y.offsetX,y.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#x(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#E(){this.#f=new ResizeObserver(y=>{const x=y[0].contentRect;x.width&&x.height&&this.setDimensions(x.width,x.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#u}render(){if(this.div)return this.div;let y,x;this.width&&(y=this.x,x=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[I,F,P,H]=this.#S();if(this.setAt(I,F,0,0),this.setDims(P,H),this.#x(),this.width){const[O,z]=this.parentDimensions;this.setAspectRatio(this.width*O,this.height*z),this.setAt(y*O,x*z,this.width*O,this.height*z),this.#h=!0,this.#I(),this.setDims(this.width*O,this.height*z),this.#T(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#E(),this.div}#I(){if(!this.#h)return;const[y,x]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*y),this.canvas.height=Math.ceil(this.height*x),this.#w()}setDimensions(y,x){const I=Math.round(y),F=Math.round(x);if(this.#d===I&&this.#a===F)return;this.#d=I,this.#a=F,this.canvas.style.visibility="hidden";const[P,H]=this.parentDimensions;this.width=y/P,this.height=x/H,this.fixAndSetPosition(),this.#u&&this.#H(y,x),this.#I(),this.#T(),this.canvas.style.visibility="visible",this.fixDims()}#H(y,x){const I=this.#U(),F=(y-I)/this.#e,P=(x-I)/this.#t;this.scaleFactor=Math.min(F,P)}#w(){const y=this.#U()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+y,this.translationY*this.scaleFactor+y)}static#_(y){const x=new Path2D;for(let I=0,F=y.length;I<F;I++){const[P,H,O,z]=y[I];I===0&&x.moveTo(...P),x.bezierCurveTo(H[0],H[1],O[0],O[1],z[0],z[1])}return x}static#R(y,x,I){const[F,P,H,O]=x;switch(I){case 0:for(let z=0,it=y.length;z<it;z+=2)y[z]+=F,y[z+1]=O-y[z+1];break;case 90:for(let z=0,it=y.length;z<it;z+=2){const W=y[z];y[z]=y[z+1]+F,y[z+1]=W+P}break;case 180:for(let z=0,it=y.length;z<it;z+=2)y[z]=H-y[z],y[z+1]+=P;break;case 270:for(let z=0,it=y.length;z<it;z+=2){const W=y[z];y[z]=H-y[z+1],y[z+1]=O-W}break;default:throw new Error("Invalid rotation")}return y}static#O(y,x,I){const[F,P,H,O]=x;switch(I){case 0:for(let z=0,it=y.length;z<it;z+=2)y[z]-=F,y[z+1]=O-y[z+1];break;case 90:for(let z=0,it=y.length;z<it;z+=2){const W=y[z];y[z]=y[z+1]-P,y[z+1]=W-F}break;case 180:for(let z=0,it=y.length;z<it;z+=2)y[z]=H-y[z],y[z+1]-=P;break;case 270:for(let z=0,it=y.length;z<it;z+=2){const W=y[z];y[z]=O-y[z+1],y[z+1]=H-W}break;default:throw new Error("Invalid rotation")}return y}#z(y,x,I,F){const P=[],H=this.thickness/2,O=y*x+H,z=y*I+H;for(const it of this.paths){const W=[],ut=[];for(let pt=0,xt=it.length;pt<xt;pt++){const[Mt,Tt,X,B]=it[pt],et=y*Mt[0]+O,lt=y*Mt[1]+z,gt=y*Tt[0]+O,_t=y*Tt[1]+z,K=y*X[0]+O,rt=y*X[1]+z,yt=y*B[0]+O,Ct=y*B[1]+z;pt===0&&(W.push(et,lt),ut.push(et,lt)),W.push(gt,_t,K,rt,yt,Ct),ut.push(gt,_t),pt===xt-1&&ut.push(yt,Ct)}P.push({bezier:T.#R(W,F,this.rotation),points:T.#R(ut,F,this.rotation)})}return P}#G(){let y=1/0,x=-1/0,I=1/0,F=-1/0;for(const P of this.paths)for(const[H,O,z,it]of P){const W=o.Util.bezierBoundingBox(...H,...O,...z,...it);y=Math.min(y,W[0]),I=Math.min(I,W[1]),x=Math.max(x,W[2]),F=Math.max(F,W[3])}return[y,I,x,F]}#U(){return this.#u?Math.ceil(this.thickness*this.parentScale):0}#M(y=!1){if(this.isEmpty())return;if(!this.#u){this.#T();return}const x=this.#G(),I=this.#U();this.#e=Math.max(r.AnnotationEditor.MIN_SIZE,x[2]-x[0]),this.#t=Math.max(r.AnnotationEditor.MIN_SIZE,x[3]-x[1]);const F=Math.ceil(I+this.#e*this.scaleFactor),P=Math.ceil(I+this.#t*this.scaleFactor),[H,O]=this.parentDimensions;this.width=F/H,this.height=P/O,this.setAspectRatio(F,P);const z=this.translationX,it=this.translationY;this.translationX=-x[0],this.translationY=-x[1],this.#I(),this.#T(),this.#d=F,this.#a=P,this.setDims(F,P);const W=y?I/this.scaleFactor/2:0;this.translate(z-this.translationX-W,it-this.translationY-W)}static deserialize(y,x,I){if(y instanceof f.InkAnnotationElement)return null;const F=super.deserialize(y,x,I);F.thickness=y.thickness,F.color=o.Util.makeHexColor(...y.color),F.opacity=y.opacity;const[P,H]=F.pageDimensions,O=F.width*P,z=F.height*H,it=F.parentScale,W=y.thickness/2;F.#u=!0,F.#d=Math.round(O),F.#a=Math.round(z);const{paths:ut,rect:pt,rotation:xt}=y;for(let{bezier:Tt}of ut){Tt=T.#O(Tt,pt,xt);const X=[];F.paths.push(X);let B=it*(Tt[0]-W),et=it*(Tt[1]-W);for(let gt=2,_t=Tt.length;gt<_t;gt+=6){const K=it*(Tt[gt]-W),rt=it*(Tt[gt+1]-W),yt=it*(Tt[gt+2]-W),Ct=it*(Tt[gt+3]-W),wt=it*(Tt[gt+4]-W),St=it*(Tt[gt+5]-W);X.push([[B,et],[K,rt],[yt,Ct],[wt,St]]),B=wt,et=St}const lt=this.#_(X);F.bezierPath2D.push(lt)}const Mt=F.#G();return F.#e=Math.max(r.AnnotationEditor.MIN_SIZE,Mt[2]-Mt[0]),F.#t=Math.max(r.AnnotationEditor.MIN_SIZE,Mt[3]-Mt[1]),F.#H(O,z),F}serialize(){if(this.isEmpty())return null;const y=this.getRect(0,0),x=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:x,thickness:this.thickness,opacity:this.opacity,paths:this.#z(this.scaleFactor/this.parentScale,this.translationX,this.translationY,y),pageIndex:this.pageIndex,rect:y,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}class _ extends r.AnnotationEditor{#t=null;#e=null;#n=null;#i=null;#s=null;#o="";#r=null;#l=null;#u=null;#c=!1;#h=!1;static _type="stamp";static _editorType=o.AnnotationEditorType.STAMP;constructor(y){super({...y,name:"stampEditor"}),this.#i=y.bitmapUrl,this.#s=y.bitmapFile}static initialize(y){r.AnnotationEditor.initialize(y)}static get supportedTypes(){const y=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",y.map(x=>`image/${x}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(y){return this.supportedTypes.includes(y)}static paste(y,x){x.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:y.getAsFile()})}#f(y,x=!1){if(!y){this.remove();return}this.#t=y.bitmap,x||(this.#e=y.id,this.#c=y.isSvg),y.file&&(this.#o=y.file.name),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#r&&this.div.focus()}#a(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(x=>this.#f(x,!0)).finally(()=>this.#d());return}if(this.#i){const x=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(x).then(I=>this.#f(I)).finally(()=>this.#d());return}if(this.#s){const x=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(x).then(I=>this.#f(I)).finally(()=>this.#d());return}const y=document.createElement("input");y.type="file",y.accept=_.supportedTypesStr,this.#n=new Promise(x=>{y.addEventListener("change",async()=>{if(!y.files||y.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const I=await this._uiManager.imageManager.getFromFile(y.files[0]);this.#f(I)}x()}),y.addEventListener("cancel",()=>{this.remove(),x()})}).finally(()=>this.#d()),y.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#r?.remove(),this.#r=null,this.#l?.disconnect(),this.#l=null,this.#u&&(clearTimeout(this.#u),this.#u=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#a();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#s)}get isResizable(){return!0}render(){if(this.div)return this.div;let y,x;if(this.width&&(y=this.x,x=this.y),super.render(),this.div.hidden=!0,this.#t?this.#p():this.#a(),this.width){const[I,F]=this.parentDimensions;this.setAt(y*I,x*F,this.width*I,this.height*F)}return this.div}#p(){const{div:y}=this;let{width:x,height:I}=this.#t;const[F,P]=this.pageDimensions,H=.75;if(this.width)x=this.width*F,I=this.height*P;else if(x>H*F||I>H*P){const W=Math.min(H*F/x,H*P/I);x*=W,I*=W}const[O,z]=this.parentDimensions;this.setDims(x*O/F,I*z/P),this._uiManager.enableWaiting(!1);const it=this.#r=document.createElement("canvas");y.append(it),y.hidden=!1,this.#v(x,I),this.#A(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton(),this.#o&&it.setAttribute("aria-label",this.#o)}#g(y,x){const[I,F]=this.parentDimensions;this.width=y/I,this.height=x/F,this.setDims(y,x),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#u!==null&&clearTimeout(this.#u);const P=200;this.#u=setTimeout(()=>{this.#u=null,this.#v(y,x)},P)}#y(y,x){const{width:I,height:F}=this.#t;let P=I,H=F,O=this.#t;for(;P>2*y||H>2*x;){const z=P,it=H;P>2*y&&(P=P>=16384?Math.floor(P/2)-1:Math.ceil(P/2)),H>2*x&&(H=H>=16384?Math.floor(H/2)-1:Math.ceil(H/2));const W=new OffscreenCanvas(P,H);W.getContext("2d").drawImage(O,0,0,z,it,0,0,P,H),O=W.transferToImageBitmap()}return O}#v(y,x){y=Math.ceil(y),x=Math.ceil(x);const I=this.#r;if(!I||I.width===y&&I.height===x)return;I.width=y,I.height=x;const F=this.#c?this.#t:this.#y(y,x),P=I.getContext("2d");P.filter=this._uiManager.hcmFilter,P.drawImage(F,0,0,F.width,F.height,0,0,y,x)}getImageForAltText(){return this.#r}#S(y){if(y){if(this.#c){const F=this._uiManager.imageManager.getSvgUrl(this.#e);if(F)return F}const x=document.createElement("canvas");return{width:x.width,height:x.height}=this.#t,x.getContext("2d").drawImage(this.#t,0,0),x.toDataURL()}if(this.#c){const[x,I]=this.pageDimensions,F=Math.round(this.width*x*A.PixelsPerInch.PDF_TO_CSS_UNITS),P=Math.round(this.height*I*A.PixelsPerInch.PDF_TO_CSS_UNITS),H=new OffscreenCanvas(F,P);return H.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,F,P),H.transferToImageBitmap()}return structuredClone(this.#t)}#A(){this.#l=new ResizeObserver(y=>{const x=y[0].contentRect;x.width&&x.height&&this.#g(x.width,x.height)}),this.#l.observe(this.div)}static deserialize(y,x,I){if(y instanceof f.StampAnnotationElement)return null;const F=super.deserialize(y,x,I),{rect:P,bitmapUrl:H,bitmapId:O,isSvg:z,accessibilityData:it}=y;O&&I.imageManager.isValidId(O)?F.#e=O:F.#i=H,F.#c=z;const[W,ut]=F.pageDimensions;return F.width=(P[2]-P[0])/W,F.height=(P[3]-P[1])/ut,it&&(F.altTextData=it),F}serialize(y=!1,x=null){if(this.isEmpty())return null;const I={annotationType:o.AnnotationEditorType.STAMP,bitmapId:this.#e,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(y)return I.bitmapUrl=this.#S(!0),I.accessibilityData=this.altTextData,I;const{decorative:F,altText:P}=this.altTextData;if(!F&&P&&(I.accessibilityData={type:"Figure",alt:P}),x===null)return I;x.stamps||=new Map;const H=this.#c?(I.rect[2]-I.rect[0])*(I.rect[3]-I.rect[1]):null;if(!x.stamps.has(this.#e))x.stamps.set(this.#e,{area:H,serialized:I}),I.bitmap=this.#S(!1);else if(this.#c){const O=x.stamps.get(this.#e);H>O.area&&(O.area=H,O.serialized.bitmap.close(),O.serialized.bitmap=this.#S(!1))}return I}}class C{#t;#e=!1;#n=null;#i=this.pointerup.bind(this);#s=this.pointerUpAfterSelection.bind(this);#o=this.pointerdown.bind(this);#r=null;#l=this.selectionStart.bind(this);#u=new Map;#c=!1;#h=!1;#f=!1;#d=null;#a;static _initialized=!1;static#p=new Map([p,T,_,g].map(y=>[y._editorType,y]));constructor({uiManager:y,pageIndex:x,div:I,accessibilityManager:F,annotationLayer:P,drawLayer:H,textLayer:O,viewport:z,l10n:it}){const W=[...C.#p.values()];if(!C._initialized){C._initialized=!0;for(const ut of W)ut.initialize(it)}y.registerEditorTypes(W),this.#a=y,this.pageIndex=x,this.div=I,this.#t=F,this.#n=P,this.viewport=z,this.#d=O,this.drawLayer=H,this.#a.addLayer(this)}get isEmpty(){return this.#u.size===0}updateToolbar(y){this.#a.updateToolbar(y)}updateMode(y=this.#a.getMode()){switch(this.#A(),y){case o.AnnotationEditorType.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;case o.AnnotationEditorType.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case o.AnnotationEditorType.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}if(y!==o.AnnotationEditorType.NONE){const{classList:x}=this.div;for(const I of C.#p.values())x.toggle(`${I._type}Editing`,y===I._editorType);this.div.hidden=!1}}addInkEditorIfNeeded(y){if(this.#a.getMode()!==o.AnnotationEditorType.INK)return;if(!y){for(const I of this.#u.values())if(I.isEmpty()){I.setInBackground();return}}this.#v({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(y){this.#a.setEditingState(y)}addCommands(y){this.#a.addCommands(y)}togglePointerEvents(y=!1){this.div.classList.toggle("disabled",!y)}enable(){this.togglePointerEvents(!0);const y=new Set;for(const I of this.#u.values())I.enableEditing(),I.annotationElementId&&y.add(I.annotationElementId);if(!this.#n)return;const x=this.#n.getEditableAnnotations();for(const I of x){if(I.hide(),this.#a.isDeletedAnnotationElement(I.data.id)||y.has(I.data.id))continue;const F=this.deserialize(I);F&&(this.addOrRebuild(F),F.enableEditing())}}disable(){this.#f=!0,this.togglePointerEvents(!1);const y=new Set;for(const I of this.#u.values()){if(I.disableEditing(),!I.annotationElementId||I.serialize()!==null){y.add(I.annotationElementId);continue}this.getEditableAnnotation(I.annotationElementId)?.show(),I.remove()}if(this.#n){const I=this.#n.getEditableAnnotations();for(const F of I){const{id:P}=F.data;y.has(P)||this.#a.isDeletedAnnotationElement(P)||F.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:x}=this.div;for(const I of C.#p.values())x.remove(`${I._type}Editing`);this.disableTextSelection(),this.#f=!1}getEditableAnnotation(y){return this.#n?.getEditableAnnotation(y)||null}setActiveEditor(y){this.#a.getActive()!==y&&this.#a.setActiveEditor(y)}enableTextSelection(){this.#d?.div&&document.addEventListener("selectstart",this.#l)}disableTextSelection(){this.#d?.div&&document.removeEventListener("selectstart",this.#l)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#i)}attach(y){this.#u.set(y.id,y);const{annotationElementId:x}=y;x&&this.#a.isDeletedAnnotationElement(x)&&this.#a.removeDeletedAnnotationElement(y)}detach(y){this.#u.delete(y.id),this.#t?.removePointerInTextLayer(y.contentDiv),!this.#f&&y.annotationElementId&&this.#a.addDeletedAnnotationElement(y)}remove(y){this.detach(y),this.#a.removeEditor(y),y.div.remove(),y.isAttachedToDOM=!1,this.#h||this.addInkEditorIfNeeded(!1)}changeParent(y){y.parent!==this&&(y.annotationElementId&&(this.#a.addDeletedAnnotationElement(y.annotationElementId),r.AnnotationEditor.deleteAnnotationElement(y),y.annotationElementId=null),this.attach(y),y.parent?.detach(y),y.setParent(this),y.div&&y.isAttachedToDOM&&(y.div.remove(),this.div.append(y.div)))}add(y){if(this.changeParent(y),this.#a.addEditor(y),this.attach(y),!y.isAttachedToDOM){const x=y.render();this.div.append(x),y.isAttachedToDOM=!0}y.fixAndSetPosition(),y.onceAdded(),this.#a.addToAnnotationStorage(y)}moveEditorInDOM(y){if(!y.isAttachedToDOM)return;const{activeElement:x}=document;y.div.contains(x)&&!this.#r&&(y._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,y.div.contains(document.activeElement)?y._focusEventsAllowed=!0:(y.div.addEventListener("focusin",()=>{y._focusEventsAllowed=!0},{once:!0}),x.focus())},0)),y._structTreeParentId=this.#t?.moveElementInDOM(this.div,y.div,y.contentDiv,!0)}addOrRebuild(y){y.needsToBeRebuilt()?(y.parent||=this,y.rebuild()):this.add(y)}addUndoableEditor(y){const x=()=>y._uiManager.rebuild(y),I=()=>{y.remove()};this.addCommands({cmd:x,undo:I,mustExec:!1})}getNextId(){return this.#a.getId()}get#g(){return C.#p.get(this.#a.getMode())}#y(y){const x=this.#g;return x?new x.prototype.constructor(y):null}canCreateNewEmptyEditor(){return this.#g?.canCreateNewEmptyEditor()}pasteEditor(y,x){this.#a.updateToolbar(y),this.#a.updateMode(y);const{offsetX:I,offsetY:F}=this.#S(),P=this.getNextId(),H=this.#y({parent:this,id:P,x:I,y:F,uiManager:this.#a,isCentered:!0,...x});H&&this.add(H)}deserialize(y){return C.#p.get(y.annotationType??y.annotationEditorType)?.deserialize(y,this,this.#a)||null}#v(y,x,I={}){const F=this.getNextId(),P=this.#y({parent:this,id:F,x:y.offsetX,y:y.offsetY,uiManager:this.#a,isCentered:x,...I});return P&&this.add(P),P}#S(){const{x:y,y:x,width:I,height:F}=this.div.getBoundingClientRect(),P=Math.max(0,y),H=Math.max(0,x),O=Math.min(window.innerWidth,y+I),z=Math.min(window.innerHeight,x+F),it=(P+O)/2-y,W=(H+z)/2-x,[ut,pt]=this.viewport.rotation%180===0?[it,W]:[W,it];return{offsetX:ut,offsetY:pt}}addNewEditor(){this.#v(this.#S(),!0)}setSelected(y){this.#a.setSelected(y)}toggleSelected(y){this.#a.toggleSelected(y)}isSelected(y){return this.#a.isSelected(y)}unselect(y){this.#a.unselect(y)}selectionStart(y){this.#d?.div.addEventListener("pointerup",this.#s,{once:!0})}pointerUpAfterSelection(y){const x=document.getSelection();if(x.rangeCount===0)return;const I=x.getRangeAt(0);if(I.collapsed||!this.#d?.div.contains(I.commonAncestorContainer))return;const{x:F,y:P,width:H,height:O}=this.#d.div.getBoundingClientRect(),z=I.getClientRects();let it;switch(this.viewport.rotation){case 90:it=(ut,pt,xt,Mt)=>({x:(pt-P)/O,y:1-(ut+xt-F)/H,width:Mt/O,height:xt/H});break;case 180:it=(ut,pt,xt,Mt)=>({x:1-(ut+xt-F)/H,y:1-(pt+Mt-P)/O,width:xt/H,height:Mt/O});break;case 270:it=(ut,pt,xt,Mt)=>({x:1-(pt+Mt-P)/O,y:(ut-F)/H,width:Mt/O,height:xt/H});break;default:it=(ut,pt,xt,Mt)=>({x:(ut-F)/H,y:(pt-P)/O,width:xt/H,height:Mt/O});break}const W=[];for(const{x:ut,y:pt,width:xt,height:Mt}of z)xt===0||Mt===0||W.push(it(ut,pt,xt,Mt));W.length!==0&&this.#v(y,!1,{boxes:W}),x.empty()}pointerup(y){const{isMac:x}=o.FeatureTest.platform;if(!(y.button!==0||y.ctrlKey&&x)&&y.target===this.div&&this.#c){if(this.#c=!1,!this.#e){this.#e=!0;return}if(this.#a.getMode()===o.AnnotationEditorType.STAMP){this.#a.unselectAll();return}this.#v(y,!1)}}pointerdown(y){if(this.#a.getMode()===o.AnnotationEditorType.HIGHLIGHT&&this.enableTextSelection(),this.#c){this.#c=!1;return}const{isMac:x}=o.FeatureTest.platform;if(y.button!==0||y.ctrlKey&&x||y.target!==this.div)return;this.#c=!0;const I=this.#a.getActive();this.#e=!I||I.isEmpty()}findNewParent(y,x,I){const F=this.#a.findParent(x,I);return F===null||F===this?!1:(F.changeParent(y),!0)}destroy(){this.#a.getActive()?.parent===this&&(this.#a.commitOrRemove(),this.#a.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const y of this.#u.values())this.#t?.removePointerInTextLayer(y.contentDiv),y.setParent(null),y.isAttachedToDOM=!1,y.div.remove();this.div=null,this.#u.clear(),this.#a.removeLayer(this)}#A(){this.#h=!0;for(const y of this.#u.values())y.isEmpty()&&y.remove();this.#h=!1}render({viewport:y}){this.viewport=y,(0,A.setLayerDimensions)(this.div,y);for(const x of this.#a.getEditors(this.pageIndex))this.add(x);this.updateMode()}update({viewport:y}){this.#a.commitOrRemove();const x=this.viewport.rotation,I=y.rotation;if(this.viewport=y,(0,A.setLayerDimensions)(this.div,{rotation:I}),x!==I)for(const F of this.#u.values())F.rotate(I);this.updateMode()}get pageDimensions(){const{pageWidth:y,pageHeight:x}=this.viewport.rawDims;return[y,x]}}}),97:((i,e,s)=>{s.d(e,{ColorPicker:()=>f});var o=s(266),r=s(812),u=s(473);class f{#t=this.#f.bind(this);#e=null;#n=null;#i;#s=null;#o=!1;#r=!1;#l;#u=null;static get _keyboardManager(){return(0,o.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["Escape","mac+Escape"],f.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],f.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],f.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],f.prototype._moveToPrevious],[["Home","mac+Home"],f.prototype._moveToBeginning],[["End","mac+End"],f.prototype._moveToEnd]]))}constructor({editor:v=null,uiManager:h=null}){this.#r=!v,this.#u=v?._uiManager||h,this.#l=this.#u._eventBus,this.#i=v?.color||this.#u?.highlightColors.values().next().value||"#FFFF98"}renderButton(){const v=this.#e=document.createElement("button");v.className="colorPicker",v.tabIndex="0",v.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),v.setAttribute("aria-haspopup",!0),v.addEventListener("click",this.#d.bind(this));const h=this.#n=document.createElement("span");return h.className="swatch",h.style.backgroundColor=this.#i,v.append(h),v}renderMainDropdown(){const v=this.#s=this.#c(o.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR);return v.setAttribute("aria-orientation","horizontal"),v.setAttribute("aria-labelledby","highlightColorPickerLabel"),v}#c(v){const h=document.createElement("div");h.addEventListener("contextmenu",u.noContextMenu),h.className="dropdown",h.role="listbox",h.setAttribute("aria-multiselectable",!1),h.setAttribute("aria-orientation","vertical"),h.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[g,A]of this.#u.highlightColors){const T=document.createElement("button");T.tabIndex="0",T.role="option",T.setAttribute("data-color",A),T.title=g,T.setAttribute("data-l10n-id",`pdfjs-editor-colorpicker-${g}`);const _=document.createElement("span");T.append(_),_.className="swatch",_.style.backgroundColor=A,T.setAttribute("aria-selected",A===this.#i),T.addEventListener("click",this.#h.bind(this,v,A)),h.append(T)}return h.addEventListener("keydown",this.#t),h}#h(v,h,g){g.stopPropagation(),this.#l.dispatch("switchannotationeditorparams",{source:this,type:v,value:h})}_colorSelectFromKeyboard(v){const h=v.target.getAttribute("data-color");h&&this.#h(h,v)}_moveToNext(v){if(v.target===this.#e){this.#s.firstChild?.focus();return}v.target.nextSibling?.focus()}_moveToPrevious(v){v.target.previousSibling?.focus()}_moveToBeginning(){this.#s.firstChild?.focus()}_moveToEnd(){this.#s.lastChild?.focus()}#f(v){f._keyboardManager.exec(this,v)}#d(v){if(this.#s&&!this.#s.classList.contains("hidden")){this.hideDropdown();return}if(this.#e.addEventListener("keydown",this.#t),this.#o=v.detail===0,this.#s){this.#s.classList.remove("hidden");return}const h=this.#s=this.#c(o.AnnotationEditorParamsType.HIGHLIGHT_COLOR);this.#e.append(h)}hideDropdown(){this.#s?.classList.add("hidden")}_hideDropdownFromKeyboard(){this.#r||!this.#s||this.#s.classList.contains("hidden")||(this.hideDropdown(),this.#e.removeEventListener("keydown",this.#t),this.#e.focus({preventScroll:!0,focusVisible:this.#o}))}updateColor(v){if(this.#n&&(this.#n.style.backgroundColor=v),!this.#s)return;const h=this.#u.highlightColors.values();for(const g of this.#s.children)g.setAttribute("aria-selected",h.next().value===v)}destroy(){this.#e?.remove(),this.#e=null,this.#n=null,this.#s?.remove(),this.#s=null}}}),115:((i,e,s)=>{s.d(e,{AnnotationEditor:()=>v});var o=s(812),r=s(266),u=s(473);class f{#t="";#e=!1;#n=null;#i=null;#s=null;#o=!1;#r=null;static _l10nPromise=null;constructor(A){this.#r=A}static initialize(A){f._l10nPromise||=A}async render(){const A=this.#n=document.createElement("button");A.className="altText";const T=await f._l10nPromise.get("pdfjs-editor-alt-text-button-label");A.textContent=T,A.setAttribute("aria-label",T),A.tabIndex="0",A.addEventListener("contextmenu",u.noContextMenu),A.addEventListener("pointerdown",C=>C.stopPropagation());const _=C=>{C.preventDefault(),this.#r._uiManager.editAltText(this.#r)};return A.addEventListener("click",_,{capture:!0}),A.addEventListener("keydown",C=>{C.target===A&&C.key==="Enter"&&(this.#o=!0,_(C))}),await this.#l(),A}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:A,decorative:T}){this.#t===A&&this.#e===T||(this.#t=A,this.#e=T,this.#l())}toggle(A=!1){this.#n&&(!A&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!A)}destroy(){this.#n?.remove(),this.#n=null,this.#i=null}async#l(){const A=this.#n;if(!A)return;if(!this.#t&&!this.#e){A.classList.remove("done"),this.#i?.remove();return}A.classList.add("done"),f._l10nPromise.get("pdfjs-editor-alt-text-edit-button-label").then(C=>{A.setAttribute("aria-label",C)});let T=this.#i;if(!T){this.#i=T=document.createElement("span"),T.className="tooltip",T.setAttribute("role","tooltip");const C=T.id=`alt-text-tooltip-${this.#r.id}`;A.setAttribute("aria-describedby",C);const M=100;A.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#i.classList.add("show"),this.#r._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.#r.editorType,data:{action:"alt_text_tooltip"}}})},M)}),A.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#i?.classList.remove("show")})}T.innerText=this.#e?await f._l10nPromise.get("pdfjs-editor-alt-text-decorative-tooltip"):this.#t,T.parentNode||A.append(T),this.#r.getImageForAltText()?.setAttribute("aria-describedby",T.id)}}class p{#t=null;#e=null;#n;#i=null;constructor(A){this.#n=A}render(){const A=this.#t=document.createElement("div");A.className="editToolbar",A.addEventListener("contextmenu",u.noContextMenu),A.addEventListener("pointerdown",p.#s);const T=this.#i=document.createElement("div");T.className="buttons",A.append(T);const _=this.#n.toolbarPosition;if(_){const{style:C}=A,M=this.#n._uiManager.direction==="ltr"?1-_[0]:_[0];C.insetInlineEnd=`${100*M}%`,C.top=`calc(${100*_[1]}% + var(--editor-toolbar-vert-offset))`}return this.#u(),A}static#s(A){A.stopPropagation()}#o(A){this.#n._focusEventsAllowed=!1,A.preventDefault(),A.stopPropagation()}#r(A){this.#n._focusEventsAllowed=!0,A.preventDefault(),A.stopPropagation()}#l(A){A.addEventListener("focusin",this.#o.bind(this),{capture:!0}),A.addEventListener("focusout",this.#r.bind(this),{capture:!0}),A.addEventListener("contextmenu",u.noContextMenu)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden")}#u(){const A=document.createElement("button");A.className="delete",A.tabIndex=0,A.setAttribute("data-l10n-id",`pdfjs-editor-remove-${this.#n.editorType}-button`),this.#l(A),A.addEventListener("click",T=>{this.#n._uiManager.delete()}),this.#i.append(A)}get#c(){const A=document.createElement("div");return A.className="divider",A}addAltTextButton(A){this.#l(A),this.#i.prepend(A,this.#c)}addColorPicker(A){this.#e=A;const T=A.renderButton();this.#l(T),this.#i.prepend(T,this.#c)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class v{#t=null;#e=null;#n=!1;#i=null;#s=null;#o=this.focusin.bind(this);#r=this.focusout.bind(this);#l=null;#u="";#c=!1;#h=!1;#f=!1;#d=!1;#a=null;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#p=!1;#g=v._zIndex++;static _borderLineWidth=-1;static _colorManager=new o.ColorManager;static _zIndex=1;static get _resizerKeyboardManager(){const A=v.prototype._resizeWithKeyboard,T=o.AnnotationEditorUIManager.TRANSLATE_SMALL,_=o.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_resizerKeyboardManager",new o.KeyboardManager([[["ArrowLeft","mac+ArrowLeft"],A,{args:[-T,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],A,{args:[-_,0]}],[["ArrowRight","mac+ArrowRight"],A,{args:[T,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],A,{args:[_,0]}],[["ArrowUp","mac+ArrowUp"],A,{args:[0,-T]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],A,{args:[0,-_]}],[["ArrowDown","mac+ArrowDown"],A,{args:[0,T]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],A,{args:[0,_]}],[["Escape","mac+Escape"],v.prototype._stopResizingWithKeyboard]]))}constructor(A){this.constructor===v&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=A.parent,this.id=A.id,this.width=this.height=null,this.pageIndex=A.parent.pageIndex,this.name=A.name,this.div=null,this._uiManager=A.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=A.isCentered,this._structTreeParentId=null;const{rotation:T,rawDims:{pageWidth:_,pageHeight:C,pageX:M,pageY:y}}=this.parent.viewport;this.rotation=T,this.pageRotation=(360+T-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[_,C],this.pageTranslation=[M,y];const[x,I]=this.parentDimensions;this.x=A.x/x,this.y=A.y/I,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(A){const T=new h({id:A.parent.getNextId(),parent:A.parent,uiManager:A._uiManager});T.annotationElementId=A.annotationElementId,T.deleted=!0,T._uiManager.addToAnnotationStorage(T)}static initialize(A,T=null){if(v._l10nPromise||=new Map(["pdfjs-editor-alt-text-button-label","pdfjs-editor-alt-text-edit-button-label","pdfjs-editor-alt-text-decorative-tooltip","pdfjs-editor-resizer-label-topLeft","pdfjs-editor-resizer-label-topMiddle","pdfjs-editor-resizer-label-topRight","pdfjs-editor-resizer-label-middleRight","pdfjs-editor-resizer-label-bottomRight","pdfjs-editor-resizer-label-bottomMiddle","pdfjs-editor-resizer-label-bottomLeft","pdfjs-editor-resizer-label-middleLeft"].map(C=>[C,A.get(C.replaceAll(/([A-Z])/g,M=>`-${M.toLowerCase()}`))])),T?.strings)for(const C of T.strings)v._l10nPromise.set(C,A.get(C));if(v._borderLineWidth!==-1)return;const _=getComputedStyle(document.documentElement);v._borderLineWidth=parseFloat(_.getPropertyValue("--outline-width"))||0}static updateDefaultParams(A,T){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(A){return!1}static paste(A,T){(0,r.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#p}set _isDraggable(A){this.#p=A,this.div?.classList.toggle("draggable",A)}get isEnterHandled(){return!0}center(){const[A,T]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*T/(A*2),this.y+=this.width*A/(T*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*T/(A*2),this.y-=this.width*A/(T*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(A){this._uiManager.addCommands(A)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#g}setParent(A){A!==null?(this.pageIndex=A.pageIndex,this.pageDimensions=A.pageDimensions):this.#E(),this.parent=A}focusin(A){this._focusEventsAllowed&&(this.#c?this.#c=!1:this.parent.setSelected(this))}focusout(A){!this._focusEventsAllowed||!this.isAttachedToDOM||A.relatedTarget?.closest(`#${this.id}`)||(A.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(A,T,_,C){const[M,y]=this.parentDimensions;[_,C]=this.screenToPageTranslation(_,C),this.x=(A+_)/M,this.y=(T+C)/y,this.fixAndSetPosition()}#y([A,T],_,C){[_,C]=this.screenToPageTranslation(_,C),this.x+=_/A,this.y+=C/T,this.fixAndSetPosition()}translate(A,T){this.#y(this.parentDimensions,A,T)}translateInPage(A,T){this.#y(this.pageDimensions,A,T),this.div.scrollIntoView({block:"nearest"})}drag(A,T){const[_,C]=this.parentDimensions;if(this.x+=A/_,this.y+=T/C,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:F,y:P}=this.div.getBoundingClientRect();this.parent.findNewParent(this,F,P)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:M,y}=this;const[x,I]=this.#v();M+=x,y+=I,this.div.style.left=`${(100*M).toFixed(2)}%`,this.div.style.top=`${(100*y).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#v(){const[A,T]=this.parentDimensions,{_borderLineWidth:_}=v,C=_/A,M=_/T;switch(this.rotation){case 90:return[-C,M];case 180:return[C,M];case 270:return[C,-M];default:return[-C,-M]}}fixAndSetPosition(A=this.rotation){const[T,_]=this.pageDimensions;let{x:C,y:M,width:y,height:x}=this;switch(y*=T,x*=_,C*=T,M*=_,A){case 0:C=Math.max(0,Math.min(T-y,C)),M=Math.max(0,Math.min(_-x,M));break;case 90:C=Math.max(0,Math.min(T-x,C)),M=Math.min(_,Math.max(y,M));break;case 180:C=Math.min(T,Math.max(y,C)),M=Math.min(_,Math.max(x,M));break;case 270:C=Math.min(T,Math.max(x,C)),M=Math.max(0,Math.min(_-y,M));break}this.x=C/=T,this.y=M/=_;const[I,F]=this.#v();C+=I,M+=F;const{style:P}=this.div;P.left=`${(100*C).toFixed(2)}%`,P.top=`${(100*M).toFixed(2)}%`,this.moveInDOM()}static#S(A,T,_){switch(_){case 90:return[T,-A];case 180:return[-A,-T];case 270:return[-T,A];default:return[A,T]}}screenToPageTranslation(A,T){return v.#S(A,T,this.parentRotation)}pageTranslationToScreen(A,T){return v.#S(A,T,360-this.parentRotation)}#A(A){switch(A){case 90:{const[T,_]=this.pageDimensions;return[0,-T/_,_/T,0]}case 180:return[-1,0,0,-1];case 270:{const[T,_]=this.pageDimensions;return[0,T/_,-_/T,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:A,pageDimensions:[T,_]}=this,C=T*A,M=_*A;return r.FeatureTest.isCSSRoundSupported?[Math.round(C),Math.round(M)]:[C,M]}setDims(A,T){const[_,C]=this.parentDimensions;this.div.style.width=`${(100*A/_).toFixed(2)}%`,this.#n||(this.div.style.height=`${(100*T/C).toFixed(2)}%`)}fixDims(){const{style:A}=this.div,{height:T,width:_}=A,C=_.endsWith("%"),M=!this.#n&&T.endsWith("%");if(C&&M)return;const[y,x]=this.parentDimensions;C||(A.width=`${(100*parseFloat(_)/y).toFixed(2)}%`),!this.#n&&!M&&(A.height=`${(100*parseFloat(T)/x).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#m(){if(this.#i)return;this.#i=document.createElement("div"),this.#i.classList.add("resizers");const A=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"];for(const T of A){const _=document.createElement("div");this.#i.append(_),_.classList.add("resizer",T),_.setAttribute("data-resizer-name",T),_.addEventListener("pointerdown",this.#C.bind(this,T)),_.addEventListener("contextmenu",u.noContextMenu),_.tabIndex=-1}this.div.prepend(this.#i)}#C(A,T){T.preventDefault();const{isMac:_}=r.FeatureTest.platform;if(T.button!==0||T.ctrlKey&&_)return;this.#e?.toggle(!1);const C=this.#D.bind(this,A),M=this._isDraggable;this._isDraggable=!1;const y={passive:!0,capture:!0};this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C,y);const x=this.x,I=this.y,F=this.width,P=this.height,H=this.parent.div.style.cursor,O=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(T.target).cursor;const z=()=>{this.parent.togglePointerEvents(!0),this.#e?.toggle(!0),this._isDraggable=M,window.removeEventListener("pointerup",z),window.removeEventListener("blur",z),window.removeEventListener("pointermove",C,y),this.parent.div.style.cursor=H,this.div.style.cursor=O,this.#N(x,I,F,P)};window.addEventListener("pointerup",z),window.addEventListener("blur",z)}#N(A,T,_,C){const M=this.x,y=this.y,x=this.width,I=this.height;M===A&&y===T&&x===_&&I===C||this.addCommands({cmd:()=>{this.width=x,this.height=I,this.x=M,this.y=y;const[F,P]=this.parentDimensions;this.setDims(F*x,P*I),this.fixAndSetPosition()},undo:()=>{this.width=_,this.height=C,this.x=A,this.y=T;const[F,P]=this.parentDimensions;this.setDims(F*_,P*C),this.fixAndSetPosition()},mustExec:!0})}#D(A,T){const[_,C]=this.parentDimensions,M=this.x,y=this.y,x=this.width,I=this.height,F=v.MIN_SIZE/_,P=v.MIN_SIZE/C,H=k=>Math.round(k*1e4)/1e4,O=this.#A(this.rotation),z=(k,D)=>[O[0]*k+O[2]*D,O[1]*k+O[3]*D],it=this.#A(360-this.rotation),W=(k,D)=>[it[0]*k+it[2]*D,it[1]*k+it[3]*D];let ut,pt,xt=!1,Mt=!1;switch(A){case"topLeft":xt=!0,ut=(k,D)=>[0,0],pt=(k,D)=>[k,D];break;case"topMiddle":ut=(k,D)=>[k/2,0],pt=(k,D)=>[k/2,D];break;case"topRight":xt=!0,ut=(k,D)=>[k,0],pt=(k,D)=>[0,D];break;case"middleRight":Mt=!0,ut=(k,D)=>[k,D/2],pt=(k,D)=>[0,D/2];break;case"bottomRight":xt=!0,ut=(k,D)=>[k,D],pt=(k,D)=>[0,0];break;case"bottomMiddle":ut=(k,D)=>[k/2,D],pt=(k,D)=>[k/2,0];break;case"bottomLeft":xt=!0,ut=(k,D)=>[0,D],pt=(k,D)=>[k,0];break;case"middleLeft":Mt=!0,ut=(k,D)=>[0,D/2],pt=(k,D)=>[k,D/2];break}const Tt=ut(x,I),X=pt(x,I);let B=z(...X);const et=H(M+B[0]),lt=H(y+B[1]);let gt=1,_t=1,[K,rt]=this.screenToPageTranslation(T.movementX,T.movementY);if([K,rt]=W(K/_,rt/C),xt){const k=Math.hypot(x,I);gt=_t=Math.max(Math.min(Math.hypot(X[0]-Tt[0]-K,X[1]-Tt[1]-rt)/k,1/x,1/I),F/x,P/I)}else Mt?gt=Math.max(F,Math.min(1,Math.abs(X[0]-Tt[0]-K)))/x:_t=Math.max(P,Math.min(1,Math.abs(X[1]-Tt[1]-rt)))/I;const yt=H(x*gt),Ct=H(I*_t);B=z(...pt(yt,Ct));const wt=et-B[0],St=lt-B[1];this.width=yt,this.height=Ct,this.x=wt,this.y=St,this.setDims(_*yt,C*Ct),this.fixAndSetPosition()}altTextFinish(){this.#e?.finish()}async addEditToolbar(){return this.#l||this.#f?this.#l:(this.#l=new p(this),this.div.append(this.#l.render()),this.#e&&this.#l.addAltTextButton(await this.#e.render()),this.#l)}removeEditToolbar(){this.#l&&(this.#l.remove(),this.#l=null,this.#e?.destroy())}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#e||(f.initialize(v._l10nPromise),this.#e=new f(this),await this.addEditToolbar())}get altTextData(){return this.#e?.data}set altTextData(A){this.#e&&(this.#e.data=A)}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#o),this.div.addEventListener("focusout",this.#r);const[A,T]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*T/A).toFixed(2)}%`,this.div.style.maxHeight=`${(100*A/T).toFixed(2)}%`);const[_,C]=this.getInitialTranslation();return this.translate(_,C),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(A){const{isMac:T}=r.FeatureTest.platform;if(A.button!==0||A.ctrlKey&&T){A.preventDefault();return}if(this.#c=!0,this._isDraggable){this.#P(A);return}this.#L(A)}#L(A){const{isMac:T}=r.FeatureTest.platform;A.ctrlKey&&!T||A.shiftKey||A.metaKey&&T?this.parent.toggleSelected(this):this.parent.setSelected(this)}#P(A){const T=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let _,C;T&&(_={passive:!0,capture:!0},C=y=>{const[x,I]=this.screenToPageTranslation(y.movementX,y.movementY);this._uiManager.dragSelectedEditors(x,I)},window.addEventListener("pointermove",C,_));const M=()=>{window.removeEventListener("pointerup",M),window.removeEventListener("blur",M),T&&window.removeEventListener("pointermove",C,_),this.#c=!1,this._uiManager.endDragSession()||this.#L(A)};window.addEventListener("pointerup",M),window.addEventListener("blur",M)}moveInDOM(){this.#a&&clearTimeout(this.#a),this.#a=setTimeout(()=>{this.#a=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(A,T,_){A.changeParent(this),this.x=T,this.y=_,this.fixAndSetPosition()}getRect(A,T,_=this.rotation){const C=this.parentScale,[M,y]=this.pageDimensions,[x,I]=this.pageTranslation,F=A/C,P=T/C,H=this.x*M,O=this.y*y,z=this.width*M,it=this.height*y;switch(_){case 0:return[H+F+x,y-O-P-it+I,H+F+z+x,y-O-P+I];case 90:return[H+P+x,y-O+F+I,H+P+it+x,y-O+F+z+I];case 180:return[H-F-z+x,y-O+P+I,H-F+x,y-O+P+it+I];case 270:return[H-P-it+x,y-O-F-z+I,H-P+x,y-O-F+I];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(A,T){const[_,C,M,y]=A,x=M-_,I=y-C;switch(this.rotation){case 0:return[_,T-y,x,I];case 90:return[_,T-C,I,x];case 180:return[M,T-C,x,I];case 270:return[M,T-y,I,x];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#f=!0}disableEditMode(){this.#f=!1}isInEditMode(){return this.#f}shouldGetKeyboardEvents(){return this.#d}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#o),this.div?.addEventListener("focusout",this.#r)}rotate(A){}serialize(A=!1,T=null){(0,r.unreachable)("An editor must be serializable")}static deserialize(A,T,_){const C=new this.prototype.constructor({parent:T,id:T.getNextId(),uiManager:_});C.rotation=A.rotation;const[M,y]=C.pageDimensions,[x,I,F,P]=C.getRectInCurrentCoords(A.rect,y);return C.x=x/M,C.y=I/y,C.width=F/M,C.height=P/y,C}remove(){this.div.removeEventListener("focusin",this.#o),this.div.removeEventListener("focusout",this.#r),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#a&&(clearTimeout(this.#a),this.#a=null),this.#E(),this.removeEditToolbar()}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#m(),this.#i.classList.remove("hidden"),(0,o.bindEvents)(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(A){if(!this.isResizable||A.target!==this.div||A.key!=="Enter")return;this._uiManager.setSelected(this),this.#s={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const T=this.#i.children;if(!this.#t){this.#t=Array.from(T);const y=this.#F.bind(this),x=this.#T.bind(this);for(const I of this.#t){const F=I.getAttribute("data-resizer-name");I.setAttribute("role","spinbutton"),I.addEventListener("keydown",y),I.addEventListener("blur",x),I.addEventListener("focus",this.#k.bind(this,F)),v._l10nPromise.get(`pdfjs-editor-resizer-label-${F}`).then(P=>I.setAttribute("aria-label",P))}}const _=this.#t[0];let C=0;for(const y of T){if(y===_)break;C++}const M=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(M!==C){if(M<C)for(let x=0;x<C-M;x++)this.#i.append(this.#i.firstChild);else if(M>C)for(let x=0;x<M-C;x++)this.#i.firstChild.before(this.#i.lastChild);let y=0;for(const x of T){const F=this.#t[y++].getAttribute("data-resizer-name");v._l10nPromise.get(`pdfjs-editor-resizer-label-${F}`).then(P=>x.setAttribute("aria-label",P))}}this.#x(0),this.#d=!0,this.#i.firstChild.focus({focusVisible:!0}),A.preventDefault(),A.stopImmediatePropagation()}#F(A){v._resizerKeyboardManager.exec(this,A)}#T(A){this.#d&&A.relatedTarget?.parentNode!==this.#i&&this.#E()}#k(A){this.#u=this.#d?A:""}#x(A){if(this.#t)for(const T of this.#t)T.tabIndex=A}_resizeWithKeyboard(A,T){this.#d&&this.#D(this.#u,{movementX:A,movementY:T})}#E(){if(this.#d=!1,this.#x(-1),this.#s){const{savedX:A,savedY:T,savedWidth:_,savedHeight:C}=this.#s;this.#N(A,T,_,C),this.#s=null}}_stopResizingWithKeyboard(){this.#E(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this.#l){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this.#l?.show()});return}this.#l?.show()}unselect(){this.#i?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus(),this.#l?.hide()}updateParams(A,T){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(A){this.#h=A,this.parent&&(A?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(A,T){this.#n=!0;const _=A/T,{style:C}=this.div;C.aspectRatio=_,C.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}}class h extends v{constructor(A){super(A),this.annotationElementId=A.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),405:((i,e,s)=>{s.d(e,{Outliner:()=>o});class o{#t;#e=[];#n=[];constructor(u,f=0,p=0,v=!0){let h=1/0,g=-1/0,A=1/0,T=-1/0;const _=10**-4;for(const{x:P,y:H,width:O,height:z}of u){const it=Math.floor((P-f)/_)*_,W=Math.ceil((P+O+f)/_)*_,ut=Math.floor((H-f)/_)*_,pt=Math.ceil((H+z+f)/_)*_,xt=[it,ut,pt,!0],Mt=[W,ut,pt,!1];this.#e.push(xt,Mt),h=Math.min(h,it),g=Math.max(g,W),A=Math.min(A,ut),T=Math.max(T,pt)}const C=g-h+2*p,M=T-A+2*p,y=h-p,x=A-p,I=this.#e.at(v?-1:-2),F=[I[0],I[2]];for(const P of this.#e){const[H,O,z]=P;P[0]=(H-y)/C,P[1]=(O-x)/M,P[2]=(z-x)/M}this.#t={x:y,y:x,width:C,height:M,lastPoint:F}}getOutlines(){this.#e.sort((f,p)=>f[0]-p[0]||f[1]-p[1]||f[2]-p[2]);const u=[];for(const f of this.#e)f[3]?(u.push(...this.#l(f)),this.#o(f)):(this.#r(f),u.push(...this.#l(f)));return this.#i(u)}#i(u){const f=[],p=new Set;for(const g of u){const[A,T,_]=g;f.push([A,T,g],[A,_,g])}f.sort((g,A)=>g[1]-A[1]||g[0]-A[0]);for(let g=0,A=f.length;g<A;g+=2){const T=f[g][2],_=f[g+1][2];T.push(_),_.push(T),p.add(T),p.add(_)}const v=[];let h;for(;p.size>0;){const g=p.values().next().value;let[A,T,_,C,M]=g;p.delete(g);let y=A,x=T;for(h=[A,_],v.push(h);;){let I;if(p.has(C))I=C;else if(p.has(M))I=M;else break;p.delete(I),[A,T,_,C,M]=I,y!==A&&(h.push(y,x,A,x===T?T:_),y=A),x=x===T?_:T}h.push(y,x)}return{outlines:v,box:this.#t}}#s(u){const f=this.#n;let p=0,v=f.length-1;for(;p<=v;){const h=p+v>>1,g=f[h][0];if(g===u)return h;g<u?p=h+1:v=h-1}return v+1}#o([,u,f]){const p=this.#s(u);this.#n.splice(p,0,[u,f])}#r([,u,f]){const p=this.#s(u);for(let v=p;v<this.#n.length;v++){const[h,g]=this.#n[v];if(h!==u)break;if(h===u&&g===f){this.#n.splice(v,1);return}}for(let v=p-1;v>=0;v--){const[h,g]=this.#n[v];if(h!==u)break;if(h===u&&g===f){this.#n.splice(v,1);return}}}#l(u){const[f,p,v]=u,h=[[f,p,v]],g=this.#s(v);for(let A=0;A<g;A++){const[T,_]=this.#n[A];for(let C=0,M=h.length;C<M;C++){const[,y,x]=h[C];if(!(_<=y||x<=T)){if(y>=T){if(x>_)h[C][1]=_;else{if(M===1)return[];h.splice(C,1),C--,M--}continue}h[C][2]=T,x>_&&h.push([f,_,x])}}}return h}}}),812:((i,e,s)=>{s.d(e,{AnnotationEditorUIManager:()=>T,ColorManager:()=>A,KeyboardManager:()=>g,bindEvents:()=>u,opacityToHex:()=>f});var o=s(266),r=s(473);function u(_,C,M){for(const y of M)C.addEventListener(y,_[y].bind(_))}function f(_){return Math.round(Math.min(255,Math.max(1,255*_))).toString(16).padStart(2,"0")}class p{#t=0;getId(){return`${o.AnnotationEditorPrefix}${this.#t++}`}}class v{#t=(0,o.getUuid)();#e=0;#n=null;static get _isSVGFittingCanvas(){const C='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',y=new OffscreenCanvas(1,3).getContext("2d"),x=new Image;x.src=C;const I=x.decode().then(()=>(y.drawImage(x,0,0,1,1,0,0,1,3),new Uint32Array(y.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",I)}async#i(C,M){this.#n||=new Map;let y=this.#n.get(C);if(y===null)return null;if(y?.bitmap)return y.refCounter+=1,y;try{y||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let x;if(typeof M=="string"?(y.url=M,x=await(0,r.fetchData)(M,"blob")):x=y.file=M,x.type==="image/svg+xml"){const I=v._isSVGFittingCanvas,F=new FileReader,P=new Image,H=new Promise((O,z)=>{P.onload=()=>{y.bitmap=P,y.isSvg=!0,O()},F.onload=async()=>{const it=y.svgUrl=F.result;P.src=await I?`${it}#svgView(preserveAspectRatio(none))`:it},P.onerror=F.onerror=z});F.readAsDataURL(x),await H}else y.bitmap=await createImageBitmap(x);y.refCounter=1}catch(x){console.error(x),y=null}return this.#n.set(C,y),y&&this.#n.set(y.id,y),y}async getFromFile(C){const{lastModified:M,name:y,size:x,type:I}=C;return this.#i(`${M}_${y}_${x}_${I}`,C)}async getFromUrl(C){return this.#i(C,C)}async getFromId(C){this.#n||=new Map;const M=this.#n.get(C);return M?M.bitmap?(M.refCounter+=1,M):M.file?this.getFromFile(M.file):this.getFromUrl(M.url):null}getSvgUrl(C){const M=this.#n.get(C);return M?.isSvg?M.svgUrl:null}deleteId(C){this.#n||=new Map;const M=this.#n.get(C);M&&(M.refCounter-=1,M.refCounter===0&&(M.bitmap=null))}isValidId(C){return C.startsWith(`image_${this.#t}_`)}}class h{#t=[];#e=!1;#n;#i=-1;constructor(C=128){this.#n=C}add({cmd:C,undo:M,mustExec:y,type:x=NaN,overwriteIfSameType:I=!1,keepUndo:F=!1}){if(y&&C(),this.#e)return;const P={cmd:C,undo:M,type:x};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(P);return}if(I&&this.#t[this.#i].type===x){F&&(P.undo=this.#t[this.#i].undo),this.#t[this.#i]=P;return}const H=this.#i+1;H===this.#n?this.#t.splice(0,1):(this.#i=H,H<this.#t.length&&this.#t.splice(H)),this.#t.push(P)}undo(){this.#i!==-1&&(this.#e=!0,this.#t[this.#i].undo(),this.#e=!1,this.#i-=1)}redo(){this.#i<this.#t.length-1&&(this.#i+=1,this.#e=!0,this.#t[this.#i].cmd(),this.#e=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}destroy(){this.#t=null}}class g{constructor(C){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:M}=o.FeatureTest.platform;for(const[y,x,I={}]of C)for(const F of y){const P=F.startsWith("mac+");M&&P?(this.callbacks.set(F.slice(4),{callback:x,options:I}),this.allKeys.add(F.split("+").at(-1))):!M&&!P&&(this.callbacks.set(F,{callback:x,options:I}),this.allKeys.add(F.split("+").at(-1)))}}#t(C){C.altKey&&this.buffer.push("alt"),C.ctrlKey&&this.buffer.push("ctrl"),C.metaKey&&this.buffer.push("meta"),C.shiftKey&&this.buffer.push("shift"),this.buffer.push(C.key);const M=this.buffer.join("+");return this.buffer.length=0,M}exec(C,M){if(!this.allKeys.has(M.key))return;const y=this.callbacks.get(this.#t(M));if(!y)return;const{callback:x,options:{bubbles:I=!1,args:F=[],checker:P=null}}=y;P&&!P(C,M)||(x.bind(C,...F,M)(),I||(M.stopPropagation(),M.preventDefault()))}}class A{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const C=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(C),(0,o.shadow)(this,"_colors",C)}convert(C){const M=(0,r.getRGB)(C);if(!window.matchMedia("(forced-colors: active)").matches)return M;for(const[y,x]of this._colors)if(x.every((I,F)=>I===M[F]))return A._colorsMapping.get(y);return M}getHexCode(C){const M=this._colors.get(C);return M?o.Util.makeHexColor(...M):C}}class T{#t=null;#e=new Map;#n=new Map;#i=null;#s=null;#o=new h;#r=0;#l=new Set;#u=null;#c=null;#h=new Set;#f=null;#d=null;#a=null;#p=new p;#g=!1;#y=!1;#v=null;#S=null;#A=o.AnnotationEditorType.NONE;#m=new Set;#C=null;#N=this.blur.bind(this);#D=this.focus.bind(this);#L=this.copy.bind(this);#P=this.cut.bind(this);#F=this.paste.bind(this);#T=this.keydown.bind(this);#k=this.onEditingAction.bind(this);#x=this.onPageChanging.bind(this);#E=this.onScaleChanging.bind(this);#I=this.onRotationChanging.bind(this);#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#w=[0,0];#_=null;#R=null;#O=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const C=T.prototype,M=F=>F.#R.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&F.hasSomethingToControl(),y=(F,{target:P})=>{if(P instanceof HTMLInputElement){const{type:H}=P;return H!=="text"&&H!=="number"}return!0},x=this.TRANSLATE_SMALL,I=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new g([[["ctrl+a","mac+meta+a"],C.selectAll,{checker:y}],[["ctrl+z","mac+meta+z"],C.undo,{checker:y}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],C.redo,{checker:y}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],C.delete,{checker:y}],[["Enter","mac+Enter"],C.addNewEditorFromKeyboard,{checker:(F,{target:P})=>!(P instanceof HTMLButtonElement)&&F.#R.contains(P)&&!F.isEnterHandled}],[[" ","mac+ "],C.addNewEditorFromKeyboard,{checker:F=>F.#R.contains(document.activeElement)}],[["Escape","mac+Escape"],C.unselectAll],[["ArrowLeft","mac+ArrowLeft"],C.translateSelectedEditors,{args:[-x,0],checker:M}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],C.translateSelectedEditors,{args:[-I,0],checker:M}],[["ArrowRight","mac+ArrowRight"],C.translateSelectedEditors,{args:[x,0],checker:M}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],C.translateSelectedEditors,{args:[I,0],checker:M}],[["ArrowUp","mac+ArrowUp"],C.translateSelectedEditors,{args:[0,-x],checker:M}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],C.translateSelectedEditors,{args:[0,-I],checker:M}],[["ArrowDown","mac+ArrowDown"],C.translateSelectedEditors,{args:[0,x],checker:M}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],C.translateSelectedEditors,{args:[0,I],checker:M}]]))}constructor(C,M,y,x,I,F,P){this.#R=C,this.#O=M,this.#i=y,this._eventBus=x,this._eventBus._on("editingaction",this.#k),this._eventBus._on("pagechanging",this.#x),this._eventBus._on("scalechanging",this.#E),this._eventBus._on("rotationchanging",this.#I),this.#s=I.annotationStorage,this.#f=I.filterFactory,this.#C=F,this.#a=P||null,this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#M(),this.#G(),this._eventBus._off("editingaction",this.#k),this._eventBus._off("pagechanging",this.#x),this._eventBus._off("scalechanging",this.#E),this._eventBus._off("rotationchanging",this.#I);for(const C of this.#n.values())C.destroy();this.#n.clear(),this.#e.clear(),this.#h.clear(),this.#t=null,this.#m.clear(),this.#o.destroy(),this.#i?.destroy(),this.#d&&(clearTimeout(this.#d),this.#d=null),this.#_&&(clearTimeout(this.#_),this.#_=null)}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",this.#C?this.#f.addHCMFilter(this.#C.foreground,this.#C.background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(this.#R).direction)}get highlightColors(){return(0,o.shadow)(this,"highlightColors",this.#a?new Map(this.#a.split(",").map(C=>C.split("=").map(M=>M.trim()))):null)}setMainHighlightColorPicker(C){this.#S=C}editAltText(C){this.#i?.editAltText(this,C)}onPageChanging({pageNumber:C}){this.#r=C-1}focusMainContainer(){this.#R.focus()}findParent(C,M){for(const y of this.#n.values()){const{x,y:I,width:F,height:P}=y.div.getBoundingClientRect();if(C>=x&&C<=x+F&&M>=I&&M<=I+P)return y}return null}disableUserSelect(C=!1){this.#O.classList.toggle("noUserSelect",C)}addShouldRescale(C){this.#h.add(C)}removeShouldRescale(C){this.#h.delete(C)}onScaleChanging({scale:C}){this.commitOrRemove(),this.viewParameters.realScale=C*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const M of this.#h)M.onScaleChanging()}onRotationChanging({pagesRotation:C}){this.commitOrRemove(),this.viewParameters.rotation=C}addToAnnotationStorage(C){!C.isEmpty()&&this.#s&&!this.#s.has(C.id)&&this.#s.setValue(C.id,C)}#z(){window.addEventListener("focus",this.#D),window.addEventListener("blur",this.#N)}#G(){window.removeEventListener("focus",this.#D),window.removeEventListener("blur",this.#N)}blur(){if(!this.hasSelection)return;const{activeElement:C}=document;for(const M of this.#m)if(M.div.contains(C)){this.#v=[M,C],M._focusEventsAllowed=!1;break}}focus(){if(!this.#v)return;const[C,M]=this.#v;this.#v=null,M.addEventListener("focusin",()=>{C._focusEventsAllowed=!0},{once:!0}),M.focus()}#U(){window.addEventListener("keydown",this.#T)}#M(){window.removeEventListener("keydown",this.#T)}#q(){document.addEventListener("copy",this.#L),document.addEventListener("cut",this.#P),document.addEventListener("paste",this.#F)}#Y(){document.removeEventListener("copy",this.#L),document.removeEventListener("cut",this.#P),document.removeEventListener("paste",this.#F)}addEditListeners(){this.#U(),this.#q()}removeEditListeners(){this.#M(),this.#Y()}copy(C){if(C.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const M=[];for(const y of this.#m){const x=y.serialize(!0);x&&M.push(x)}M.length!==0&&C.clipboardData.setData("application/pdfjs",JSON.stringify(M))}cut(C){this.copy(C),this.delete()}paste(C){C.preventDefault();const{clipboardData:M}=C;for(const I of M.items)for(const F of this.#c)if(F.isHandlingMimeForPasting(I.type)){F.paste(I,this.currentLayer);return}let y=M.getData("application/pdfjs");if(!y)return;try{y=JSON.parse(y)}catch(I){(0,o.warn)(`paste: "${I.message}".`);return}if(!Array.isArray(y))return;this.unselectAll();const x=this.currentLayer;try{const I=[];for(const H of y){const O=x.deserialize(H);if(!O)return;I.push(O)}const F=()=>{for(const H of I)this.#X(H);this.#J(I)},P=()=>{for(const H of I)H.remove()};this.addCommands({cmd:F,undo:P,mustExec:!0})}catch(I){(0,o.warn)(`paste: "${I.message}".`)}}keydown(C){this.isEditorHandlingKeyboard||T._keyboardManager.exec(this,C)}onEditingAction(C){["undo","redo","delete","selectAll"].includes(C.name)&&this[C.name]()}#b(C){Object.entries(C).some(([y,x])=>this.#H[y]!==x)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,C)})}#V(C){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:C})}setEditingState(C){C?(this.#z(),this.#U(),this.#q(),this.#b({isEditing:this.#A!==o.AnnotationEditorType.NONE,isEmpty:this.#B(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#G(),this.#M(),this.#Y(),this.#b({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(C){if(!this.#c){this.#c=C;for(const M of this.#c)this.#V(M.defaultPropertiesToUpdate)}}getId(){return this.#p.getId()}get currentLayer(){return this.#n.get(this.#r)}getLayer(C){return this.#n.get(C)}get currentPageIndex(){return this.#r}addLayer(C){this.#n.set(C.pageIndex,C),this.#g?C.enable():C.disable()}removeLayer(C){this.#n.delete(C.pageIndex)}updateMode(C,M=null,y=!1){if(this.#A!==C){if(this.#A=C,C===o.AnnotationEditorType.NONE){this.setEditingState(!1),this.#K();return}this.setEditingState(!0),this.#$(),this.unselectAll();for(const x of this.#n.values())x.updateMode(C);if(!M&&y){this.addNewEditorFromKeyboard();return}if(M){for(const x of this.#e.values())if(x.annotationElementId===M){this.setSelected(x),x.enterInEditMode();break}}}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(C){C!==this.#A&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:C})}updateParams(C,M){if(this.#c){switch(C){case o.AnnotationEditorParamsType.CREATE:this.currentLayer.addNewEditor();return;case o.AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:this.#S?.updateColor(M);break}for(const y of this.#m)y.updateParams(C,M);for(const y of this.#c)y.updateDefaultParams(C,M)}}enableWaiting(C=!1){if(this.#y!==C){this.#y=C;for(const M of this.#n.values())C?M.disableClick():M.enableClick(),M.div.classList.toggle("waiting",C)}}#$(){if(!this.#g){this.#g=!0;for(const C of this.#n.values())C.enable()}}#K(){if(this.unselectAll(),this.#g){this.#g=!1;for(const C of this.#n.values())C.disable()}}getEditors(C){const M=[];for(const y of this.#e.values())y.pageIndex===C&&M.push(y);return M}getEditor(C){return this.#e.get(C)}addEditor(C){this.#e.set(C.id,C)}removeEditor(C){C.div.contains(document.activeElement)&&(this.#d&&clearTimeout(this.#d),this.#d=setTimeout(()=>{this.focusMainContainer(),this.#d=null},0)),this.#e.delete(C.id),this.unselect(C),(!C.annotationElementId||!this.#l.has(C.annotationElementId))&&this.#s?.remove(C.id)}addDeletedAnnotationElement(C){this.#l.add(C.annotationElementId),C.deleted=!0}isDeletedAnnotationElement(C){return this.#l.has(C)}removeDeletedAnnotationElement(C){this.#l.delete(C.annotationElementId),C.deleted=!1}#X(C){const M=this.#n.get(C.pageIndex);M?M.addOrRebuild(C):this.addEditor(C)}setActiveEditor(C){this.#t!==C&&(this.#t=C,C&&this.#V(C.propertiesToUpdate))}toggleSelected(C){if(this.#m.has(C)){this.#m.delete(C),C.unselect(),this.#b({hasSelectedEditor:this.hasSelection});return}this.#m.add(C),C.select(),this.#V(C.propertiesToUpdate),this.#b({hasSelectedEditor:!0})}setSelected(C){for(const M of this.#m)M!==C&&M.unselect();this.#m.clear(),this.#m.add(C),C.select(),this.#V(C.propertiesToUpdate),this.#b({hasSelectedEditor:!0})}isSelected(C){return this.#m.has(C)}get firstSelectedEditor(){return this.#m.values().next().value}unselect(C){C.unselect(),this.#m.delete(C),this.#b({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#m.size!==0}get isEnterHandled(){return this.#m.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#o.undo(),this.#b({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#B()})}redo(){this.#o.redo(),this.#b({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#B()})}addCommands(C){this.#o.add(C),this.#b({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#B()})}#B(){if(this.#e.size===0)return!0;if(this.#e.size===1)for(const C of this.#e.values())return C.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const C=[...this.#m],M=()=>{for(const x of C)x.remove()},y=()=>{for(const x of C)this.#X(x)};this.addCommands({cmd:M,undo:y,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#J(C){this.#m.clear();for(const M of C)M.isEmpty()||(this.#m.add(M),M.select());this.#b({hasSelectedEditor:!0})}selectAll(){for(const C of this.#m)C.commit();this.#J(this.#e.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#A!==o.AnnotationEditorType.NONE))&&this.hasSelection){for(const C of this.#m)C.unselect();this.#m.clear(),this.#b({hasSelectedEditor:!1})}}translateSelectedEditors(C,M,y=!1){if(y||this.commitOrRemove(),!this.hasSelection)return;this.#w[0]+=C,this.#w[1]+=M;const[x,I]=this.#w,F=[...this.#m],P=1e3;this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.#_=null,this.#w[0]=this.#w[1]=0,this.addCommands({cmd:()=>{for(const H of F)this.#e.has(H.id)&&H.translateInPage(x,I)},undo:()=>{for(const H of F)this.#e.has(H.id)&&H.translateInPage(-x,-I)},mustExec:!1})},P);for(const H of F)H.translateInPage(C,M)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#u=new Map;for(const C of this.#m)this.#u.set(C,{savedX:C.x,savedY:C.y,savedPageIndex:C.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#u)return!1;this.disableUserSelect(!1);const C=this.#u;this.#u=null;let M=!1;for(const[{x,y:I,pageIndex:F},P]of C)P.newX=x,P.newY=I,P.newPageIndex=F,M||=x!==P.savedX||I!==P.savedY||F!==P.savedPageIndex;if(!M)return!1;const y=(x,I,F,P)=>{if(this.#e.has(x.id)){const H=this.#n.get(P);H?x._setParentAndPosition(H,I,F):(x.pageIndex=P,x.x=I,x.y=F)}};return this.addCommands({cmd:()=>{for(const[x,{newX:I,newY:F,newPageIndex:P}]of C)y(x,I,F,P)},undo:()=>{for(const[x,{savedX:I,savedY:F,savedPageIndex:P}]of C)y(x,I,F,P)},mustExec:!0}),!0}dragSelectedEditors(C,M){if(this.#u)for(const y of this.#u.keys())y.drag(C,M)}rebuild(C){if(C.parent===null){const M=this.getLayer(C.pageIndex);M?(M.changeParent(C),M.addOrRebuild(C)):(this.addEditor(C),this.addToAnnotationStorage(C),C.rebuild())}else C.parent.addOrRebuild(C)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#m.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(C){return this.#t===C}getActive(){return this.#t}getMode(){return this.#A}get imageManager(){return(0,o.shadow)(this,"imageManager",new v)}}}),171:((i,e,s)=>{s.d(e,{PDFFetchStream:()=>v});var o=s(266),r=s(253);function u(A,T,_){return{method:"GET",headers:A,signal:_.signal,mode:"cors",credentials:T?"include":"same-origin",redirect:"follow"}}function f(A){const T=new Headers;for(const _ in A){const C=A[_];C!==void 0&&T.append(_,C)}return T}function p(A){return A instanceof Uint8Array?A.buffer:A instanceof ArrayBuffer?A:((0,o.warn)(`getArrayBuffer - unexpected data format: ${A}`),new Uint8Array(A).buffer)}class v{constructor(T){this.source=T,this.isHttp=/^https?:/i.test(T.url),this.httpHeaders=this.isHttp&&T.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(T,_){if(_<=this._progressiveDataLength)return null;const C=new g(this,T,_);return this._rangeRequestReaders.push(C),C}cancelAllRequests(T){this._fullRequestReader?.cancel(T);for(const _ of this._rangeRequestReaders.slice(0))_.cancel(T)}}class h{constructor(T){this._stream=T,this._reader=null,this._loaded=0,this._filename=null;const _=T.source;this._withCredentials=_.withCredentials||!1,this._contentLength=_.length,this._headersCapability=new o.PromiseCapability,this._disableRange=_.disableRange||!1,this._rangeChunkSize=_.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._headers=f(this._stream.httpHeaders);const C=_.url;fetch(C,u(this._headers,this._withCredentials,this._abortController)).then(M=>{if(!(0,r.validateResponseStatus)(M.status))throw(0,r.createResponseStatusError)(M.status,C);this._reader=M.body.getReader(),this._headersCapability.resolve();const y=F=>M.headers.get(F),{allowRangeRequests:x,suggestedLength:I}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:y,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=I||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(y),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:T,done:_}=await this._reader.read();return _?{value:T,done:_}:(this._loaded+=T.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:p(T),done:!1})}cancel(T){this._reader?.cancel(T),this._abortController.abort()}}class g{constructor(T,_,C){this._stream=T,this._reader=null,this._loaded=0;const M=T.source;this._withCredentials=M.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!M.disableStream,this._abortController=new AbortController,this._headers=f(this._stream.httpHeaders),this._headers.append("Range",`bytes=${_}-${C-1}`);const y=M.url;fetch(y,u(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,r.validateResponseStatus)(x.status))throw(0,r.createResponseStatusError)(x.status,y);this._readCapability.resolve(),this._reader=x.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:T,done:_}=await this._reader.read();return _?{value:T,done:_}:(this._loaded+=T.byteLength,this.onProgress?.({loaded:this._loaded}),{value:p(T),done:!1})}cancel(T){this._reader?.cancel(T),this._abortController.abort()}}}),742:((i,e,s)=>{s.d(e,{FontFaceObject:()=>u,FontLoader:()=>r});var o=s(266);class r{#t=new Set;constructor({ownerDocument:p=globalThis.document,styleElement:v=null}){this._document=p,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(p){this.nativeFontFaces.add(p),this._document.fonts.add(p)}removeNativeFontFace(p){this.nativeFontFaces.delete(p),this._document.fonts.delete(p)}insertRule(p){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const v=this.styleElement.sheet;v.insertRule(p,v.cssRules.length)}clear(){for(const p of this.nativeFontFaces)this._document.fonts.delete(p);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:p,_inspectFont:v}){if(!(!p||this.#t.has(p.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:h,src:g,style:A}=p,T=new FontFace(h,g,A);this.addNativeFontFace(T);try{await T.load(),this.#t.add(h),v?.(p)}catch{(0,o.warn)(`Cannot load system font: ${p.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(T)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(p){if(p.attached||p.missingFile&&!p.systemFontInfo)return;if(p.attached=!0,p.systemFontInfo){await this.loadSystemFont(p);return}if(this.isFontLoadingAPISupported){const h=p.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(g){throw(0,o.warn)(`Failed to load font '${h.family}': '${g}'.`),p.disableFontFace=!0,g}}return}const v=p.createFontFaceRule();if(v){if(this.insertRule(v),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const g=this._queueLoadingCallback(h);this._prepareFontLoadEvent(p,g)})}}get isFontLoadingAPISupported(){const p=!!this._document?.fonts;return(0,o.shadow)(this,"isFontLoadingAPISupported",p)}get isSyncFontLoadingSupported(){let p=!1;return(o.isNodeJS||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(p=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",p)}_queueLoadingCallback(p){function v(){for((0,o.assert)(!g.done,"completeRequest() cannot be called twice."),g.done=!0;h.length>0&&h[0].done;){const A=h.shift();setTimeout(A.callback,0)}}const{loadingRequests:h}=this,g={done:!1,complete:v,callback:p};return h.push(g),g}get _loadTestFont(){const p=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",p)}_prepareFontLoadEvent(p,v){function h(ut,pt){return ut.charCodeAt(pt)<<24|ut.charCodeAt(pt+1)<<16|ut.charCodeAt(pt+2)<<8|ut.charCodeAt(pt+3)&255}function g(ut,pt,xt,Mt){const Tt=ut.substring(0,pt),X=ut.substring(pt+xt);return Tt+Mt+X}let A,T;const _=this._document.createElement("canvas");_.width=1,_.height=1;const C=_.getContext("2d");let M=0;function y(ut,pt){if(++M>30){(0,o.warn)("Load test font never loaded."),pt();return}if(C.font="30px "+ut,C.fillText(".",0,20),C.getImageData(0,0,1,1).data[3]>0){pt();return}setTimeout(y.bind(null,ut,pt))}const x=`lt${Date.now()}${this.loadTestFontId++}`;let I=this._loadTestFont;I=g(I,976,x.length,x);const P=16,H=1482184792;let O=h(I,P);for(A=0,T=x.length-3;A<T;A+=4)O=O-H+h(x,A)|0;A<x.length&&(O=O-H+h(x+"XXX",A)|0),I=g(I,P,4,(0,o.string32)(O));const z=`url(data:font/opentype;base64,${btoa(I)});`,it=`@font-face {font-family:"${x}";src:${z}}`;this.insertRule(it);const W=this._document.createElement("div");W.style.visibility="hidden",W.style.width=W.style.height="10px",W.style.position="absolute",W.style.top=W.style.left="0px";for(const ut of[p.loadedName,x]){const pt=this._document.createElement("span");pt.textContent="Hi",pt.style.fontFamily=ut,W.append(pt)}this._document.body.append(W),y(x,()=>{W.remove(),v.complete()})}}class u{constructor(p,{isEvalSupported:v=!0,disableFontFace:h=!1,ignoreErrors:g=!1,inspectFont:A=null}){this.compiledGlyphs=Object.create(null);for(const T in p)this[T]=p[T];this.isEvalSupported=v!==!1,this.disableFontFace=h===!0,this.ignoreErrors=g===!0,this._inspectFont=A}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let p;if(!this.cssFontInfo)p=new FontFace(this.loadedName,this.data,{});else{const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),p=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}return this._inspectFont?.(this),p}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const p=(0,o.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(p)});`;let h;if(!this.cssFontInfo)h=`@font-face {font-family:"${this.loadedName}";src:${v}}`;else{let g=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(g+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),h=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${g}src:${v}}`}return this._inspectFont?.(this,v),h}getPathGenerator(p,v){if(this.compiledGlyphs[v]!==void 0)return this.compiledGlyphs[v];let h;try{h=p.get(this.loadedName+"_path_"+v)}catch(g){if(!this.ignoreErrors)throw g;return(0,o.warn)(`getPathGenerator - ignoring character: "${g}".`),this.compiledGlyphs[v]=function(A,T){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const g=[];for(const A of h){const T=A.args!==void 0?A.args.join(","):"";g.push("c.",A.cmd,"(",T,`);
`)}return this.compiledGlyphs[v]=new Function("c","size",g.join(""))}return this.compiledGlyphs[v]=function(g,A){for(const T of h)T.cmd==="scale"&&(T.args=[A,-A]),g[T.cmd].apply(g,T.args)}}}}),472:((i,e,s)=>{s.d(e,{Metadata:()=>r});var o=s(266);class r{#t;#e;constructor({parsedData:f,rawData:p}){this.#t=f,this.#e=p}getRaw(){return this.#e}get(f){return this.#t.get(f)??null}getAll(){return(0,o.objectFromMap)(this.#t)}has(f){return this.#t.has(f)}}}),474:((i,e,s)=>{s.d(e,{PDFNetworkStream:()=>h});var o=s(266),r=s(253);const u=200,f=206;function p(T){const _=T.response;return typeof _!="string"?_:(0,o.stringToBytes)(_).buffer}class v{constructor(_,C={}){this.url=_,this.isHttp=/^https?:/i.test(_),this.httpHeaders=this.isHttp&&C.httpHeaders||Object.create(null),this.withCredentials=C.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(_,C,M){const y={begin:_,end:C};for(const x in M)y[x]=M[x];return this.request(y)}requestFull(_){return this.request(_)}request(_){const C=new XMLHttpRequest,M=this.currXhrId++,y=this.pendingRequests[M]={xhr:C};C.open("GET",this.url),C.withCredentials=this.withCredentials;for(const x in this.httpHeaders){const I=this.httpHeaders[x];I!==void 0&&C.setRequestHeader(x,I)}return this.isHttp&&"begin"in _&&"end"in _?(C.setRequestHeader("Range",`bytes=${_.begin}-${_.end-1}`),y.expectedStatus=f):y.expectedStatus=u,C.responseType="arraybuffer",_.onError&&(C.onerror=function(x){_.onError(C.status)}),C.onreadystatechange=this.onStateChange.bind(this,M),C.onprogress=this.onProgress.bind(this,M),y.onHeadersReceived=_.onHeadersReceived,y.onDone=_.onDone,y.onError=_.onError,y.onProgress=_.onProgress,C.send(null),M}onProgress(_,C){const M=this.pendingRequests[_];M&&M.onProgress?.(C)}onStateChange(_,C){const M=this.pendingRequests[_];if(!M)return;const y=M.xhr;if(y.readyState>=2&&M.onHeadersReceived&&(M.onHeadersReceived(),delete M.onHeadersReceived),y.readyState!==4||!(_ in this.pendingRequests))return;if(delete this.pendingRequests[_],y.status===0&&this.isHttp){M.onError?.(y.status);return}const x=y.status||u;if(!(x===u&&M.expectedStatus===f)&&x!==M.expectedStatus){M.onError?.(y.status);return}const F=p(y);if(x===f){const P=y.getResponseHeader("Content-Range"),H=/bytes (\d+)-(\d+)\/(\d+)/.exec(P);M.onDone({begin:parseInt(H[1],10),chunk:F})}else F?M.onDone({begin:0,chunk:F}):M.onError?.(y.status)}getRequestXhr(_){return this.pendingRequests[_].xhr}isPendingRequest(_){return _ in this.pendingRequests}abortRequest(_){const C=this.pendingRequests[_].xhr;delete this.pendingRequests[_],C.abort()}}class h{constructor(_){this._source=_,this._manager=new v(_.url,{httpHeaders:_.httpHeaders,withCredentials:_.withCredentials}),this._rangeChunkSize=_.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(_){const C=this._rangeRequestReaders.indexOf(_);C>=0&&this._rangeRequestReaders.splice(C,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new g(this._manager,this._source),this._fullRequestReader}getRangeReader(_,C){const M=new A(this._manager,_,C);return M.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(M),M}cancelAllRequests(_){this._fullRequestReader?.cancel(_);for(const C of this._rangeRequestReaders.slice(0))C.cancel(_)}}class g{constructor(_,C){this._manager=_;const M={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._fullRequestId=_.requestFull(M),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=C.disableRange||!1,this._contentLength=C.length,this._rangeChunkSize=C.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const _=this._fullRequestId,C=this._manager.getRequestXhr(_),M=I=>C.getResponseHeader(I),{allowRangeRequests:y,suggestedLength:x}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:M,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});y&&(this._isRangeSupported=!0),this._contentLength=x||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(M),this._isRangeSupported&&this._manager.abortRequest(_),this._headersReceivedCapability.resolve()}_onDone(_){if(_&&(this._requests.length>0?this._requests.shift().resolve({value:_.chunk,done:!1}):this._cachedChunks.push(_.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(_){this._storedError=(0,r.createResponseStatusError)(_,this._url),this._headersReceivedCapability.reject(this._storedError);for(const C of this._requests)C.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(_){this.onProgress?.({loaded:_.loaded,total:_.lengthComputable?_.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _=new o.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0,this._headersReceivedCapability.reject(_);for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class A{constructor(_,C,M){this._manager=_;const y={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_.url,this._requestId=_.requestRange(C,M,y),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(_){const C=_.chunk;this._requests.length>0?this._requests.shift().resolve({value:C,done:!1}):this._queuedChunk=C,this._done=!0;for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(_){this._storedError=(0,r.createResponseStatusError)(_,this._url);for(const C of this._requests)C.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(_){this.isStreamingSupported||this.onProgress?.({loaded:_.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const C=this._queuedChunk;return this._queuedChunk=null,{value:C,done:!1}}if(this._done)return{value:void 0,done:!0};const _=new o.PromiseCapability;return this._requests.push(_),_.promise}cancel(_){this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),253:((i,e,s)=>{s.d(e,{createResponseStatusError:()=>v,extractFilenameFromHeader:()=>p,validateRangeRequestCapabilities:()=>f,validateResponseStatus:()=>h});var o=s(266);function r(g){let A=!0,T=_("filename\\*","i").exec(g);if(T){T=T[1];let P=x(T);return P=unescape(P),P=I(P),P=F(P),M(P)}if(T=y(g),T){const P=F(T);return M(P)}if(T=_("filename","i").exec(g),T){T=T[1];let P=x(T);return P=F(P),M(P)}function _(P,H){return new RegExp("(?:^|;)\\s*"+P+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',H)}function C(P,H){if(P){if(!/^[\x00-\xFF]+$/.test(H))return H;try{const O=new TextDecoder(P,{fatal:!0}),z=(0,o.stringToBytes)(H);H=O.decode(z),A=!1}catch{}}return H}function M(P){return A&&/[\x80-\xff]/.test(P)&&(P=C("utf-8",P),A&&(P=C("iso-8859-1",P))),P}function y(P){const H=[];let O;const z=_("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(O=z.exec(P))!==null;){let[,W,ut,pt]=O;if(W=parseInt(W,10),W in H){if(W===0)break;continue}H[W]=[ut,pt]}const it=[];for(let W=0;W<H.length&&W in H;++W){let[ut,pt]=H[W];pt=x(pt),ut&&(pt=unescape(pt),W===0&&(pt=I(pt))),it.push(pt)}return it.join("")}function x(P){if(P.startsWith('"')){const H=P.slice(1).split('\\"');for(let O=0;O<H.length;++O){const z=H[O].indexOf('"');z!==-1&&(H[O]=H[O].slice(0,z),H.length=O+1),H[O]=H[O].replaceAll(/\\(.)/g,"$1")}P=H.join('"')}return P}function I(P){const H=P.indexOf("'");if(H===-1)return P;const O=P.slice(0,H),it=P.slice(H+1).replace(/^[^']*'/,"");return C(O,it)}function F(P){return!P.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(P)?P:P.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(H,O,z,it){if(z==="q"||z==="Q")return it=it.replaceAll("_"," "),it=it.replaceAll(/=([0-9a-fA-F]{2})/g,function(W,ut){return String.fromCharCode(parseInt(ut,16))}),C(O,it);try{it=atob(it)}catch{}return C(O,it)})}return""}var u=s(473);function f({getResponseHeader:g,isHttp:A,rangeChunkSize:T,disableRange:_}){const C={allowRangeRequests:!1,suggestedLength:void 0},M=parseInt(g("Content-Length"),10);return!Number.isInteger(M)||(C.suggestedLength=M,M<=2*T)||_||!A||g("Accept-Ranges")!=="bytes"||(g("Content-Encoding")||"identity")!=="identity"||(C.allowRangeRequests=!0),C}function p(g){const A=g("Content-Disposition");if(A){let T=r(A);if(T.includes("%"))try{T=decodeURIComponent(T)}catch{}if((0,u.isPdfFile)(T))return T}return null}function v(g,A){return g===404||g===0&&A.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+A+'".'):new o.UnexpectedResponseException(`Unexpected server response (${g}) while retrieving PDF "${A}".`,g)}function h(g){return g===200||g===206}}),498:((i,e,s)=>{s.a(i,async(o,r)=>{try{let T=function(H){const O=g.parse(H);return O.protocol==="file:"||O.host?O:/^[a-z]:[/\\]/i.test(H)?g.parse(`file:///${H}`):(O.host||(O.protocol="file:"),O)},y=function(H,O){return{protocol:H.protocol,auth:H.auth,host:H.hostname,port:H.port,path:H.path,method:"GET",headers:O}};s.d(e,{PDFNodeStream:()=>_});var u=s(266),f=s(253);let p,v,h,g;u.isNodeJS&&(p=await Qi(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),v=await Qi(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),h=await Qi(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),g=await Qi(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]));const A=/^file:\/\/\/[a-zA-Z]:\//;class _{constructor(O){this.source=O,this.url=T(O.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&O.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,u.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new F(this):new x(this),this._fullRequestReader}getRangeReader(O,z){if(z<=this._progressiveDataLength)return null;const it=this.isFsUrl?new P(this,O,z):new I(this,O,z);return this._rangeRequestReaders.push(it),it}cancelAllRequests(O){this._fullRequestReader?.cancel(O);for(const z of this._rangeRequestReaders.slice(0))z.cancel(O)}}class C{constructor(O){this._url=O.url,this._done=!1,this._storedError=null,this.onProgress=null;const z=O.source;this._contentLength=z.length,this._loaded=0,this._filename=null,this._disableRange=z.disableRange||!1,this._rangeChunkSize=z.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!z.disableStream,this._isRangeSupported=!z.disableRange,this._readableStream=null,this._readCapability=new u.PromiseCapability,this._headersCapability=new u.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const O=this._readableStream.read();return O===null?(this._readCapability=new u.PromiseCapability,this.read()):(this._loaded+=O.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(O).buffer,done:!1})}cancel(O){if(!this._readableStream){this._error(O);return}this._readableStream.destroy(O)}_error(O){this._storedError=O,this._readCapability.resolve()}_setReadableStream(O){this._readableStream=O,O.on("readable",()=>{this._readCapability.resolve()}),O.on("end",()=>{O.destroy(),this._done=!0,this._readCapability.resolve()}),O.on("error",z=>{this._error(z)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new u.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class M{constructor(O){this._url=O.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new u.PromiseCapability;const z=O.source;this._isStreamingSupported=!z.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const O=this._readableStream.read();return O===null?(this._readCapability=new u.PromiseCapability,this.read()):(this._loaded+=O.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(O).buffer,done:!1})}cancel(O){if(!this._readableStream){this._error(O);return}this._readableStream.destroy(O)}_error(O){this._storedError=O,this._readCapability.resolve()}_setReadableStream(O){this._readableStream=O,O.on("readable",()=>{this._readCapability.resolve()}),O.on("end",()=>{O.destroy(),this._done=!0,this._readCapability.resolve()}),O.on("error",z=>{this._error(z)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class x extends C{constructor(O){super(O);const z=it=>{if(it.statusCode===404){const xt=new u.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=xt,this._headersCapability.reject(xt);return}this._headersCapability.resolve(),this._setReadableStream(it);const W=xt=>this._readableStream.headers[xt.toLowerCase()],{allowRangeRequests:ut,suggestedLength:pt}=(0,f.validateRangeRequestCapabilities)({getResponseHeader:W,isHttp:O.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=ut,this._contentLength=pt||this._contentLength,this._filename=(0,f.extractFilenameFromHeader)(W)};this._request=null,this._url.protocol==="http:"?this._request=v.request(y(this._url,O.httpHeaders),z):this._request=h.request(y(this._url,O.httpHeaders),z),this._request.on("error",it=>{this._storedError=it,this._headersCapability.reject(it)}),this._request.end()}}class I extends M{constructor(O,z,it){super(O),this._httpHeaders={};for(const ut in O.httpHeaders){const pt=O.httpHeaders[ut];pt!==void 0&&(this._httpHeaders[ut]=pt)}this._httpHeaders.Range=`bytes=${z}-${it-1}`;const W=ut=>{if(ut.statusCode===404){const pt=new u.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=pt;return}this._setReadableStream(ut)};this._request=null,this._url.protocol==="http:"?this._request=v.request(y(this._url,this._httpHeaders),W):this._request=h.request(y(this._url,this._httpHeaders),W),this._request.on("error",ut=>{this._storedError=ut}),this._request.end()}}class F extends C{constructor(O){super(O);let z=decodeURIComponent(this._url.path);A.test(this._url.href)&&(z=z.replace(/^\//,"")),p.lstat(z,(it,W)=>{if(it){it.code==="ENOENT"&&(it=new u.MissingPDFException(`Missing PDF "${z}".`)),this._storedError=it,this._headersCapability.reject(it);return}this._contentLength=W.size,this._setReadableStream(p.createReadStream(z)),this._headersCapability.resolve()})}}class P extends M{constructor(O,z,it){super(O);let W=decodeURIComponent(this._url.path);A.test(this._url.href)&&(W=W.replace(/^\//,"")),this._setReadableStream(p.createReadStream(W,{start:z,end:it-1}))}}r()}catch(p){r(p)}},1)}),738:((i,e,s)=>{s.a(i,async(o,r)=>{try{s.d(e,{NodeCMapReaderFactory:()=>_,NodeCanvasFactory:()=>T,NodeFilterFactory:()=>A,NodeStandardFontDataFactory:()=>C});var u=s(822),f=s(266);let p,v,h;if(f.isNodeJS){p=await Qi(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);try{v=await Qi(()=>import("./__vite-browser-external-BIHI7g3E.js"),[])}catch{}try{h=await Qi(()=>import("./path2d-polyfill.esm-BlsVoZcq.js"),[])}catch{}}const g=function(M){return new Promise((y,x)=>{p.readFile(M,(I,F)=>{if(I||!F){x(new Error(I));return}y(new Uint8Array(F))})})};class A extends u.BaseFilterFactory{}class T extends u.BaseCanvasFactory{_createCanvas(y,x){return v.createCanvas(y,x)}}class _ extends u.BaseCMapReaderFactory{_fetchData(y,x){return g(y).then(I=>({cMapData:I,compressionType:x}))}}class C extends u.BaseStandardFontDataFactory{_fetchData(y){return g(y)}}r()}catch(p){r(p)}},1)}),890:((i,e,s)=>{s.d(e,{OptionalContentConfig:()=>p});var o=s(266),r=s(825);const u=Symbol("INTERNAL");class f{#t=!0;constructor(h,g){this.name=h,this.intent=g}get visible(){return this.#t}_setVisible(h,g){h!==u&&(0,o.unreachable)("Internal method `_setVisible` called."),this.#t=g}}class p{#t=null;#e=new Map;#n=null;#i=null;constructor(h){if(this.name=null,this.creator=null,h!==null){this.name=h.name,this.creator=h.creator,this.#i=h.order;for(const g of h.groups)this.#e.set(g.id,new f(g.name,g.intent));if(h.baseState==="OFF")for(const g of this.#e.values())g._setVisible(u,!1);for(const g of h.on)this.#e.get(g)._setVisible(u,!0);for(const g of h.off)this.#e.get(g)._setVisible(u,!1);this.#n=this.getHash()}}#s(h){const g=h.length;if(g<2)return!0;const A=h[0];for(let T=1;T<g;T++){const _=h[T];let C;if(Array.isArray(_))C=this.#s(_);else if(this.#e.has(_))C=this.#e.get(_).visible;else return(0,o.warn)(`Optional content group not found: ${_}`),!0;switch(A){case"And":if(!C)return!1;break;case"Or":if(C)return!0;break;case"Not":return!C;default:return!0}}return A==="And"}isVisible(h){if(this.#e.size===0)return!0;if(!h)return(0,o.warn)("Optional content group not defined."),!0;if(h.type==="OCG")return this.#e.has(h.id)?this.#e.get(h.id).visible:((0,o.warn)(`Optional content group not found: ${h.id}`),!0);if(h.type==="OCMD"){if(h.expression)return this.#s(h.expression);if(!h.policy||h.policy==="AnyOn"){for(const g of h.ids){if(!this.#e.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(this.#e.get(g).visible)return!0}return!1}else if(h.policy==="AllOn"){for(const g of h.ids){if(!this.#e.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(!this.#e.get(g).visible)return!1}return!0}else if(h.policy==="AnyOff"){for(const g of h.ids){if(!this.#e.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(!this.#e.get(g).visible)return!0}return!1}else if(h.policy==="AllOff"){for(const g of h.ids){if(!this.#e.has(g))return(0,o.warn)(`Optional content group not found: ${g}`),!0;if(this.#e.get(g).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${h.policy}.`),!0}return(0,o.warn)(`Unknown group type ${h.type}.`),!0}setVisibility(h,g=!0){if(!this.#e.has(h)){(0,o.warn)(`Optional content group not found: ${h}`);return}this.#e.get(h)._setVisible(u,!!g),this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroups(){return this.#e.size>0?(0,o.objectFromMap)(this.#e):null}getGroup(h){return this.#e.get(h)||null}getHash(){if(this.#t!==null)return this.#t;const h=new r.MurmurHash3_64;for(const[g,A]of this.#e)h.update(`${g}:${A.visible}`);return this.#t=h.hexdigest()}}}),739:((i,e,s)=>{s.d(e,{renderTextLayer:()=>M,updateTextLayer:()=>y});var o=s(266),r=s(473);const u=1e5,f=30,p=.8,v=new Map;function h(x,I){let F;if(I&&o.FeatureTest.isOffscreenCanvasSupported)F=new OffscreenCanvas(x,x).getContext("2d",{alpha:!1});else{const P=document.createElement("canvas");P.width=P.height=x,F=P.getContext("2d",{alpha:!1})}return F}function g(x,I){const F=v.get(x);if(F)return F;const P=h(f,I);P.font=`${f}px ${x}`;const H=P.measureText("");let O=H.fontBoundingBoxAscent,z=Math.abs(H.fontBoundingBoxDescent);if(O){const W=O/(O+z);return v.set(x,W),P.canvas.width=P.canvas.height=0,W}P.strokeStyle="red",P.clearRect(0,0,f,f),P.strokeText("g",0,0);let it=P.getImageData(0,0,f,f).data;z=0;for(let W=it.length-1-3;W>=0;W-=4)if(it[W]>0){z=Math.ceil(W/4/f);break}P.clearRect(0,0,f,f),P.strokeText("A",0,f),it=P.getImageData(0,0,f,f).data,O=0;for(let W=0,ut=it.length;W<ut;W+=4)if(it[W]>0){O=f-Math.floor(W/4/f);break}if(P.canvas.width=P.canvas.height=0,O){const W=O/(O+z);return v.set(x,W),W}return v.set(x,p),p}function A(x,I,F){const P=document.createElement("span"),H={angle:0,canvasWidth:0,hasText:I.str!=="",hasEOL:I.hasEOL,fontSize:0};x._textDivs.push(P);const O=o.Util.transform(x._transform,I.transform);let z=Math.atan2(O[1],O[0]);const it=F[I.fontName];it.vertical&&(z+=Math.PI/2);const W=x._fontInspectorEnabled&&it.fontSubstitution||it.fontFamily,ut=Math.hypot(O[2],O[3]),pt=ut*g(W,x._isOffscreenCanvasSupported);let xt,Mt;z===0?(xt=O[4],Mt=O[5]-pt):(xt=O[4]+pt*Math.sin(z),Mt=O[5]-pt*Math.cos(z));const Tt="calc(var(--scale-factor)*",X=P.style;x._container===x._rootContainer?(X.left=`${(100*xt/x._pageWidth).toFixed(2)}%`,X.top=`${(100*Mt/x._pageHeight).toFixed(2)}%`):(X.left=`${Tt}${xt.toFixed(2)}px)`,X.top=`${Tt}${Mt.toFixed(2)}px)`),X.fontSize=`${Tt}${ut.toFixed(2)}px)`,X.fontFamily=W,H.fontSize=ut,P.setAttribute("role","presentation"),P.textContent=I.str,P.dir=I.dir,x._fontInspectorEnabled&&(P.dataset.fontName=it.fontSubstitutionLoadedName||I.fontName),z!==0&&(H.angle=z*(180/Math.PI));let B=!1;if(I.str.length>1)B=!0;else if(I.str!==" "&&I.transform[0]!==I.transform[3]){const et=Math.abs(I.transform[0]),lt=Math.abs(I.transform[3]);et!==lt&&Math.max(et,lt)/Math.min(et,lt)>1.5&&(B=!0)}B&&(H.canvasWidth=it.vertical?I.height:I.width),x._textDivProperties.set(P,H),x._isReadableStream&&x._layoutText(P)}function T(x){const{div:I,scale:F,properties:P,ctx:H,prevFontSize:O,prevFontFamily:z}=x,{style:it}=I;let W="";if(P.canvasWidth!==0&&P.hasText){const{fontFamily:ut}=it,{canvasWidth:pt,fontSize:xt}=P;(O!==xt||z!==ut)&&(H.font=`${xt*F}px ${ut}`,x.prevFontSize=xt,x.prevFontFamily=ut);const{width:Mt}=H.measureText(I.textContent);Mt>0&&(W=`scaleX(${pt*F/Mt})`)}P.angle!==0&&(W=`rotate(${P.angle}deg) ${W}`),W.length>0&&(it.transform=W)}function _(x){if(x._canceled)return;const I=x._textDivs,F=x._capability;if(I.length>u){F.resolve();return}if(!x._isReadableStream)for(const H of I)x._layoutText(H);F.resolve()}class C{constructor({textContentSource:I,container:F,viewport:P,textDivs:H,textDivProperties:O,textContentItemsStr:z,isOffscreenCanvasSupported:it}){this._textContentSource=I,this._isReadableStream=I instanceof ReadableStream,this._container=this._rootContainer=F,this._textDivs=H||[],this._textContentItemsStr=z||[],this._isOffscreenCanvasSupported=it,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=O||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:P.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h(0,it)};const{pageWidth:W,pageHeight:ut,pageX:pt,pageY:xt}=P.rawDims;this._transform=[1,0,0,-1,-pt,xt+ut],this._pageWidth=W,this._pageHeight=ut,(0,r.setLayerDimensions)(F,P),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(I,F){for(const P of I){if(P.str===void 0){if(P.type==="beginMarkedContentProps"||P.type==="beginMarkedContent"){const H=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),P.id!==null&&this._container.setAttribute("id",`${P.id}`),H.append(this._container)}else P.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(P.str),A(this,P,F)}}_layoutText(I){const F=this._layoutTextParams.properties=this._textDivProperties.get(I);if(this._layoutTextParams.div=I,T(this._layoutTextParams),F.hasText&&this._container.append(I),F.hasEOL){const P=document.createElement("br");P.setAttribute("role","presentation"),this._container.append(P)}}_render(){const I=new o.PromiseCapability;let F=Object.create(null);if(this._isReadableStream){const P=()=>{this._reader.read().then(({value:H,done:O})=>{if(O){I.resolve();return}Object.assign(F,H.styles),this._processItems(H.items,F),P()},I.reject)};this._reader=this._textContentSource.getReader(),P()}else if(this._textContentSource){const{items:P,styles:H}=this._textContentSource;this._processItems(P,H),I.resolve()}else throw new Error('No "textContentSource" parameter specified.');I.promise.then(()=>{F=null,_(this)},this._capability.reject)}}function M(x){const I=new C(x);return I._render(),I}function y({container:x,viewport:I,textDivs:F,textDivProperties:P,isOffscreenCanvasSupported:H,mustRotate:O=!0,mustRescale:z=!0}){if(O&&(0,r.setLayerDimensions)(x,{rotation:I.rotation}),z){const it=h(0,H),ut={prevFontSize:null,prevFontFamily:null,div:null,scale:I.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:it};for(const pt of F)ut.properties=P.get(pt),ut.div=pt,T(ut)}}}),92:((i,e,s)=>{s.d(e,{PDFDataTransportStream:()=>u});var o=s(266),r=s(473);class u{constructor({length:h,initialData:g,progressiveDone:A=!1,contentDispositionFilename:T=null,disableRange:_=!1,disableStream:C=!1},M){if((0,o.assert)(M,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=A,this._contentDispositionFilename=T,g?.length>0){const y=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;this._queuedChunks.push(y)}this._pdfDataRangeTransport=M,this._isStreamingSupported=!C,this._isRangeSupported=!_,this._contentLength=h,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((y,x)=>{this._onReceiveData({begin:y,chunk:x})}),this._pdfDataRangeTransport.addProgressListener((y,x)=>{this._onProgress({loaded:y,total:x})}),this._pdfDataRangeTransport.addProgressiveReadListener(y=>{this._onReceiveData({chunk:y})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:h,chunk:g}){const A=g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength?g.buffer:new Uint8Array(g).buffer;if(h===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(A):this._queuedChunks.push(A);else{const T=this._rangeReaders.some(function(_){return _._begin!==h?!1:(_._enqueue(A),!0)});(0,o.assert)(T,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(h){h.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:h.loaded}):this._fullRequestReader?.onProgress?.({loaded:h.loaded,total:h.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(h){const g=this._rangeReaders.indexOf(h);g>=0&&this._rangeReaders.splice(g,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const h=this._queuedChunks;return this._queuedChunks=null,new f(this,h,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(h,g){if(g<=this._progressiveDataLength)return null;const A=new p(this,h,g);return this._pdfDataRangeTransport.requestDataRange(h,g),this._rangeReaders.push(A),A}cancelAllRequests(h){this._fullRequestReader?.cancel(h);for(const g of this._rangeReaders.slice(0))g.cancel(h);this._pdfDataRangeTransport.abort()}}class f{constructor(h,g,A=!1,T=null){this._stream=h,this._done=A||!1,this._filename=(0,r.isPdfFile)(T)?T:null,this._queuedChunks=g||[],this._loaded=0;for(const _ of this._queuedChunks)this._loaded+=_.byteLength;this._requests=[],this._headersReady=Promise.resolve(),h._fullRequestReader=this,this.onProgress=null}_enqueue(h){this._done||(this._requests.length>0?this._requests.shift().resolve({value:h,done:!1}):this._queuedChunks.push(h),this._loaded+=h.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const h=new o.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class p{constructor(h,g,A){this._stream=h,this._begin=g,this._end=A,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(h){if(!this._done){if(this._requests.length===0)this._queuedChunk=h;else{this._requests.shift().resolve({value:h,done:!1});for(const A of this._requests)A.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const h=new o.PromiseCapability;return this._requests.push(h),h.promise}cancel(h){this._done=!0;for(const g of this._requests)g.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),368:((i,e,s)=>{s.d(e,{GlobalWorkerOptions:()=>o});const o=Object.create(null);o.workerPort=null,o.workerSrc=""}),160:((i,e,s)=>{s.d(e,{XfaLayer:()=>r});var o=s(521);class r{static setupStorage(f,p,v,h,g){const A=h.getValue(p,{value:null});switch(v.name){case"textarea":if(A.value!==null&&(f.textContent=A.value),g==="print")break;f.addEventListener("input",T=>{h.setValue(p,{value:T.target.value})});break;case"input":if(v.attributes.type==="radio"||v.attributes.type==="checkbox"){if(A.value===v.attributes.xfaOn?f.setAttribute("checked",!0):A.value===v.attributes.xfaOff&&f.removeAttribute("checked"),g==="print")break;f.addEventListener("change",T=>{h.setValue(p,{value:T.target.checked?T.target.getAttribute("xfaOn"):T.target.getAttribute("xfaOff")})})}else{if(A.value!==null&&f.setAttribute("value",A.value),g==="print")break;f.addEventListener("input",T=>{h.setValue(p,{value:T.target.value})})}break;case"select":if(A.value!==null){f.setAttribute("value",A.value);for(const T of v.children)T.attributes.value===A.value?T.attributes.selected=!0:T.attributes.hasOwnProperty("selected")&&delete T.attributes.selected}f.addEventListener("input",T=>{const _=T.target.options,C=_.selectedIndex===-1?"":_[_.selectedIndex].value;h.setValue(p,{value:C})});break}}static setAttributes({html:f,element:p,storage:v=null,intent:h,linkService:g}){const{attributes:A}=p,T=f instanceof HTMLAnchorElement;A.type==="radio"&&(A.name=`${A.name}-${h}`);for(const[_,C]of Object.entries(A))if(C!=null)switch(_){case"class":C.length&&f.setAttribute(_,C.join(" "));break;case"dataId":break;case"id":f.setAttribute("data-element-id",C);break;case"style":Object.assign(f.style,C);break;case"textContent":f.textContent=C;break;default:(!T||_!=="href"&&_!=="newWindow")&&f.setAttribute(_,C)}T&&g.addLinkAttributes(f,A.href,A.newWindow),v&&A.dataId&&this.setupStorage(f,A.dataId,p,v)}static render(f){const p=f.annotationStorage,v=f.linkService,h=f.xfaHtml,g=f.intent||"display",A=document.createElement(h.name);h.attributes&&this.setAttributes({html:A,element:h,intent:g,linkService:v});const T=g!=="richText",_=f.div;if(_.append(A),f.viewport){const y=`matrix(${f.viewport.transform.join(",")})`;_.style.transform=y}T&&_.setAttribute("class","xfaLayer xfaFont");const C=[];if(h.children.length===0){if(h.value){const y=document.createTextNode(h.value);A.append(y),T&&o.XfaText.shouldBuildText(h.name)&&C.push(y)}return{textDivs:C}}const M=[[h,-1,A]];for(;M.length>0;){const[y,x,I]=M.at(-1);if(x+1===y.children.length){M.pop();continue}const F=y.children[++M.at(-1)[1]];if(F===null)continue;const{name:P}=F;if(P==="#text"){const O=document.createTextNode(F.value);C.push(O),I.append(O);continue}const H=F?.attributes?.xmlns?document.createElementNS(F.attributes.xmlns,P):document.createElement(P);if(I.append(H),F.attributes&&this.setAttributes({html:H,element:F,storage:p,intent:g,linkService:v}),F.children?.length>0)M.push([F,-1,H]);else if(F.value){const O=document.createTextNode(F.value);T&&o.XfaText.shouldBuildText(P)&&C.push(O),H.append(O)}}for(const y of _.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:C}}static update(f){const p=`matrix(${f.viewport.transform.join(",")})`;f.div.style.transform=p,f.div.hidden=!1}}}),521:((i,e,s)=>{s.d(e,{XfaText:()=>o});class o{static textContent(u){const f=[],p={items:f,styles:Object.create(null)};function v(h){if(!h)return;let g=null;const A=h.name;if(A==="#text")g=h.value;else if(o.shouldBuildText(A))h?.attributes?.textContent?g=h.attributes.textContent:h.value&&(g=h.value);else return;if(g!==null&&f.push({str:g}),!!h.children)for(const T of h.children)v(T)}return v(u),p}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}}),907:((i,e,s)=>{s.a(i,async(o,r)=>{try{s.d(e,{AbortException:()=>u.AbortException,AnnotationEditorLayer:()=>h.AnnotationEditorLayer,AnnotationEditorParamsType:()=>u.AnnotationEditorParamsType,AnnotationEditorType:()=>u.AnnotationEditorType,AnnotationEditorUIManager:()=>g.AnnotationEditorUIManager,AnnotationLayer:()=>A.AnnotationLayer,AnnotationMode:()=>u.AnnotationMode,CMapCompressionType:()=>u.CMapCompressionType,ColorPicker:()=>T.ColorPicker,DOMSVGFactory:()=>p.DOMSVGFactory,DrawLayer:()=>_.DrawLayer,FeatureTest:()=>u.FeatureTest,GlobalWorkerOptions:()=>C.GlobalWorkerOptions,ImageKind:()=>u.ImageKind,InvalidPDFException:()=>u.InvalidPDFException,MissingPDFException:()=>u.MissingPDFException,OPS:()=>u.OPS,Outliner:()=>M.Outliner,PDFDataRangeTransport:()=>f.PDFDataRangeTransport,PDFDateString:()=>p.PDFDateString,PDFWorker:()=>f.PDFWorker,PasswordResponses:()=>u.PasswordResponses,PermissionFlag:()=>u.PermissionFlag,PixelsPerInch:()=>p.PixelsPerInch,PromiseCapability:()=>u.PromiseCapability,RenderingCancelledException:()=>p.RenderingCancelledException,UnexpectedResponseException:()=>u.UnexpectedResponseException,Util:()=>u.Util,VerbosityLevel:()=>u.VerbosityLevel,XfaLayer:()=>y.XfaLayer,build:()=>f.build,createValidAbsoluteUrl:()=>u.createValidAbsoluteUrl,fetchData:()=>p.fetchData,getDocument:()=>f.getDocument,getFilenameFromUrl:()=>p.getFilenameFromUrl,getPdfFilenameFromUrl:()=>p.getPdfFilenameFromUrl,getXfaPageViewport:()=>p.getXfaPageViewport,isDataScheme:()=>p.isDataScheme,isPdfFile:()=>p.isPdfFile,noContextMenu:()=>p.noContextMenu,normalizeUnicode:()=>u.normalizeUnicode,renderTextLayer:()=>v.renderTextLayer,setLayerDimensions:()=>p.setLayerDimensions,shadow:()=>u.shadow,updateTextLayer:()=>v.updateTextLayer,version:()=>f.version});var u=s(266),f=s(406),p=s(473),v=s(739),h=s(629),g=s(812),A=s(640),T=s(97),_=s(423),C=s(368),M=s(405),y=s(160),x=o([f]);f=(x.then?(await x)():x)[0];const I="4.0.379",F="9e14d04fd";r()}catch(I){r(I)}})}),694:((i,e,s)=>{s.d(e,{MessageHandler:()=>p});var o=s(266);const r={DATA:1,ERROR:2},u={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function f(v){switch(v instanceof Error||typeof v=="object"&&v!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),v.name){case"AbortException":return new o.AbortException(v.message);case"MissingPDFException":return new o.MissingPDFException(v.message);case"PasswordException":return new o.PasswordException(v.message,v.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(v.message,v.status);case"UnknownErrorException":return new o.UnknownErrorException(v.message,v.details);default:return new o.UnknownErrorException(v.message,v.toString())}}class p{constructor(h,g,A){this.sourceName=h,this.targetName=g,this.comObj=A,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=T=>{const _=T.data;if(_.targetName!==this.sourceName)return;if(_.stream){this.#e(_);return}if(_.callback){const M=_.callbackId,y=this.callbackCapabilities[M];if(!y)throw new Error(`Cannot resolve callback ${M}`);if(delete this.callbackCapabilities[M],_.callback===r.DATA)y.resolve(_.data);else if(_.callback===r.ERROR)y.reject(f(_.reason));else throw new Error("Unexpected callback case");return}const C=this.actionHandler[_.action];if(!C)throw new Error(`Unknown action from worker: ${_.action}`);if(_.callbackId){const M=this.sourceName,y=_.sourceName;new Promise(function(x){x(C(_.data))}).then(function(x){A.postMessage({sourceName:M,targetName:y,callback:r.DATA,callbackId:_.callbackId,data:x})},function(x){A.postMessage({sourceName:M,targetName:y,callback:r.ERROR,callbackId:_.callbackId,reason:f(x)})});return}if(_.streamId){this.#t(_);return}C(_.data)},A.addEventListener("message",this._onComObjOnMessage)}on(h,g){const A=this.actionHandler;if(A[h])throw new Error(`There is already an actionName called "${h}"`);A[h]=g}send(h,g,A){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,data:g},A)}sendWithPromise(h,g,A){const T=this.callbackId++,_=new o.PromiseCapability;this.callbackCapabilities[T]=_;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:h,callbackId:T,data:g},A)}catch(C){_.reject(C)}return _.promise}sendWithStream(h,g,A,T){const _=this.streamId++,C=this.sourceName,M=this.targetName,y=this.comObj;return new ReadableStream({start:x=>{const I=new o.PromiseCapability;return this.streamControllers[_]={controller:x,startCall:I,pullCall:null,cancelCall:null,isClosed:!1},y.postMessage({sourceName:C,targetName:M,action:h,streamId:_,data:g,desiredSize:x.desiredSize},T),I.promise},pull:x=>{const I=new o.PromiseCapability;return this.streamControllers[_].pullCall=I,y.postMessage({sourceName:C,targetName:M,stream:u.PULL,streamId:_,desiredSize:x.desiredSize}),I.promise},cancel:x=>{(0,o.assert)(x instanceof Error,"cancel must have a valid reason");const I=new o.PromiseCapability;return this.streamControllers[_].cancelCall=I,this.streamControllers[_].isClosed=!0,y.postMessage({sourceName:C,targetName:M,stream:u.CANCEL,streamId:_,reason:f(x)}),I.promise}},A)}#t(h){const g=h.streamId,A=this.sourceName,T=h.sourceName,_=this.comObj,C=this,M=this.actionHandler[h.action],y={enqueue(x,I=1,F){if(this.isCancelled)return;const P=this.desiredSize;this.desiredSize-=I,P>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),_.postMessage({sourceName:A,targetName:T,stream:u.ENQUEUE,streamId:g,chunk:x},F)},close(){this.isCancelled||(this.isCancelled=!0,_.postMessage({sourceName:A,targetName:T,stream:u.CLOSE,streamId:g}),delete C.streamSinks[g])},error(x){(0,o.assert)(x instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,_.postMessage({sourceName:A,targetName:T,stream:u.ERROR,streamId:g,reason:f(x)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:h.desiredSize,ready:null};y.sinkCapability.resolve(),y.ready=y.sinkCapability.promise,this.streamSinks[g]=y,new Promise(function(x){x(M(h.data,y))}).then(function(){_.postMessage({sourceName:A,targetName:T,stream:u.START_COMPLETE,streamId:g,success:!0})},function(x){_.postMessage({sourceName:A,targetName:T,stream:u.START_COMPLETE,streamId:g,reason:f(x)})})}#e(h){const g=h.streamId,A=this.sourceName,T=h.sourceName,_=this.comObj,C=this.streamControllers[g],M=this.streamSinks[g];switch(h.stream){case u.START_COMPLETE:h.success?C.startCall.resolve():C.startCall.reject(f(h.reason));break;case u.PULL_COMPLETE:h.success?C.pullCall.resolve():C.pullCall.reject(f(h.reason));break;case u.PULL:if(!M){_.postMessage({sourceName:A,targetName:T,stream:u.PULL_COMPLETE,streamId:g,success:!0});break}M.desiredSize<=0&&h.desiredSize>0&&M.sinkCapability.resolve(),M.desiredSize=h.desiredSize,new Promise(function(y){y(M.onPull?.())}).then(function(){_.postMessage({sourceName:A,targetName:T,stream:u.PULL_COMPLETE,streamId:g,success:!0})},function(y){_.postMessage({sourceName:A,targetName:T,stream:u.PULL_COMPLETE,streamId:g,reason:f(y)})});break;case u.ENQUEUE:if((0,o.assert)(C,"enqueue should have stream controller"),C.isClosed)break;C.controller.enqueue(h.chunk);break;case u.CLOSE:if((0,o.assert)(C,"close should have stream controller"),C.isClosed)break;C.isClosed=!0,C.controller.close(),this.#n(C,g);break;case u.ERROR:(0,o.assert)(C,"error should have stream controller"),C.controller.error(f(h.reason)),this.#n(C,g);break;case u.CANCEL_COMPLETE:h.success?C.cancelCall.resolve():C.cancelCall.reject(f(h.reason)),this.#n(C,g);break;case u.CANCEL:if(!M)break;new Promise(function(y){y(M.onCancel?.(f(h.reason)))}).then(function(){_.postMessage({sourceName:A,targetName:T,stream:u.CANCEL_COMPLETE,streamId:g,success:!0})},function(y){_.postMessage({sourceName:A,targetName:T,stream:u.CANCEL_COMPLETE,streamId:g,reason:f(y)})}),M.sinkCapability.reject(f(h.reason)),M.isCancelled=!0,delete this.streamSinks[g];break;default:throw new Error("Unexpected stream case")}}async#n(h,g){await Promise.allSettled([h.startCall?.promise,h.pullCall?.promise,h.cancelCall?.promise]),delete this.streamControllers[g]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}}),825:((i,e,s)=>{s.d(e,{MurmurHash3_64:()=>p});var o=s(266);const r=3285377520,u=4294901760,f=65535;class p{constructor(h){this.h1=h?h&4294967295:r,this.h2=h?h&4294967295:r}update(h){let g,A;if(typeof h=="string"){g=new Uint8Array(h.length*2),A=0;for(let z=0,it=h.length;z<it;z++){const W=h.charCodeAt(z);W<=255?g[A++]=W:(g[A++]=W>>>8,g[A++]=W&255)}}else if((0,o.isArrayBuffer)(h))g=h.slice(),A=g.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const T=A>>2,_=A-T*4,C=new Uint32Array(g.buffer,0,T);let M=0,y=0,x=this.h1,I=this.h2;const F=3432918353,P=461845907,H=F&f,O=P&f;for(let z=0;z<T;z++)z&1?(M=C[z],M=M*F&u|M*H&f,M=M<<15|M>>>17,M=M*P&u|M*O&f,x^=M,x=x<<13|x>>>19,x=x*5+3864292196):(y=C[z],y=y*F&u|y*H&f,y=y<<15|y>>>17,y=y*P&u|y*O&f,I^=y,I=I<<13|I>>>19,I=I*5+3864292196);switch(M=0,_){case 3:M^=g[T*4+2]<<16;case 2:M^=g[T*4+1]<<8;case 1:M^=g[T*4],M=M*F&u|M*H&f,M=M<<15|M>>>17,M=M*P&u|M*O&f,T&1?x^=M:I^=M}this.h1=x,this.h2=I}hexdigest(){let h=this.h1,g=this.h2;return h^=g>>>1,h=h*3981806797&u|h*36045&f,g=g*4283543511&u|((g<<16|h>>>16)*2950163797&u)>>>16,h^=g>>>1,h=h*444984403&u|h*60499&f,g=g*3301882366&u|((g<<16|h>>>16)*3120437893&u)>>>16,h^=g>>>1,(h>>>0).toString(16).padStart(8,"0")+(g>>>0).toString(16).padStart(8,"0")}}}),266:((i,e,s)=>{s.d(e,{AbortException:()=>yt,AnnotationBorderStyleType:()=>x,AnnotationEditorParamsType:()=>T,AnnotationEditorPrefix:()=>g,AnnotationEditorType:()=>A,AnnotationMode:()=>h,AnnotationPrefix:()=>st,AnnotationType:()=>y,BaseException:()=>B,CMapCompressionType:()=>F,FONT_IDENTITY_MATRIX:()=>u,FeatureTest:()=>E,FormatError:()=>rt,IDENTITY_MATRIX:()=>r,ImageKind:()=>M,InvalidPDFException:()=>gt,LINE_FACTOR:()=>p,MAX_IMAGE_SIZE_TO_CACHE:()=>f,MissingPDFException:()=>_t,OPS:()=>P,PasswordException:()=>et,PasswordResponses:()=>H,PermissionFlag:()=>_,PromiseCapability:()=>V,RenderingIntentFlag:()=>v,TextRenderingMode:()=>C,UnexpectedResponseException:()=>K,UnknownErrorException:()=>lt,Util:()=>R,VerbosityLevel:()=>I,assert:()=>xt,bytesToString:()=>Ct,createValidAbsoluteUrl:()=>Tt,getUuid:()=>j,getVerbosityLevel:()=>it,info:()=>W,isArrayBuffer:()=>U,isNodeJS:()=>o,normalizeUnicode:()=>J,objectFromMap:()=>k,setVerbosityLevel:()=>z,shadow:()=>X,string32:()=>St,stringToBytes:()=>wt,unreachable:()=>pt,warn:()=>ut});const o=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),r=[1,0,0,1,0,0],u=[.001,0,0,.001,0,0],f=1e7,p=1.35,v={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},h={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},g="pdfjs_internal_editor_",A={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},T={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32},_={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},C={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},M={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},y={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},x={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},I={ERRORS:0,WARNINGS:1,INFOS:5},F={NONE:0,BINARY:1},P={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},H={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let O=I.WARNINGS;function z(tt){Number.isInteger(tt)&&(O=tt)}function it(){return O}function W(tt){O>=I.INFOS&&console.log(`Info: ${tt}`)}function ut(tt){O>=I.WARNINGS&&console.log(`Warning: ${tt}`)}function pt(tt){throw new Error(tt)}function xt(tt,Y){tt||pt(Y)}function Mt(tt){switch(tt?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Tt(tt,Y=null,Q=null){if(!tt)return null;try{if(Q&&typeof tt=="string"&&(Q.addDefaultProtocol&&tt.startsWith("www.")&&tt.match(/\./g)?.length>=2&&(tt=`http://${tt}`),Q.tryConvertEncoding))try{tt=L(tt)}catch{}const vt=Y?new URL(tt,Y):new URL(tt);if(Mt(vt))return vt}catch{}return null}function X(tt,Y,Q,vt=!1){return Object.defineProperty(tt,Y,{value:Q,enumerable:!vt,configurable:!0,writable:!1}),Q}const B=(function(){function Y(Q,vt){this.constructor===Y&&pt("Cannot initialize BaseException."),this.message=Q,this.name=vt}return Y.prototype=new Error,Y.constructor=Y,Y})();class et extends B{constructor(Y,Q){super(Y,"PasswordException"),this.code=Q}}class lt extends B{constructor(Y,Q){super(Y,"UnknownErrorException"),this.details=Q}}class gt extends B{constructor(Y){super(Y,"InvalidPDFException")}}class _t extends B{constructor(Y){super(Y,"MissingPDFException")}}class K extends B{constructor(Y,Q){super(Y,"UnexpectedResponseException"),this.status=Q}}class rt extends B{constructor(Y){super(Y,"FormatError")}}class yt extends B{constructor(Y){super(Y,"AbortException")}}function Ct(tt){(typeof tt!="object"||tt?.length===void 0)&&pt("Invalid argument for bytesToString");const Y=tt.length,Q=8192;if(Y<Q)return String.fromCharCode.apply(null,tt);const vt=[];for(let mt=0;mt<Y;mt+=Q){const Rt=Math.min(mt+Q,Y),Dt=tt.subarray(mt,Rt);vt.push(String.fromCharCode.apply(null,Dt))}return vt.join("")}function wt(tt){typeof tt!="string"&&pt("Invalid argument for stringToBytes");const Y=tt.length,Q=new Uint8Array(Y);for(let vt=0;vt<Y;++vt)Q[vt]=tt.charCodeAt(vt)&255;return Q}function St(tt){return String.fromCharCode(tt>>24&255,tt>>16&255,tt>>8&255,tt&255)}function k(tt){const Y=Object.create(null);for(const[Q,vt]of tt)Y[Q]=vt;return Y}function D(){const tt=new Uint8Array(4);return tt[0]=1,new Uint32Array(tt.buffer,0,1)[0]===1}function b(){try{return new Function(""),!0}catch{return!1}}class E{static get isLittleEndian(){return X(this,"isLittleEndian",D())}static get isEvalSupported(){return X(this,"isEvalSupported",b())}static get isOffscreenCanvasSupported(){return X(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?X(this,"platform",{isMac:navigator.platform.includes("Mac")}):X(this,"platform",{isMac:!1})}static get isCSSRoundSupported(){return X(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const w=[...Array(256).keys()].map(tt=>tt.toString(16).padStart(2,"0"));class R{static makeHexColor(Y,Q,vt){return`#${w[Y]}${w[Q]}${w[vt]}`}static scaleMinMax(Y,Q){let vt;Y[0]?(Y[0]<0&&(vt=Q[0],Q[0]=Q[1],Q[1]=vt),Q[0]*=Y[0],Q[1]*=Y[0],Y[3]<0&&(vt=Q[2],Q[2]=Q[3],Q[3]=vt),Q[2]*=Y[3],Q[3]*=Y[3]):(vt=Q[0],Q[0]=Q[2],Q[2]=vt,vt=Q[1],Q[1]=Q[3],Q[3]=vt,Y[1]<0&&(vt=Q[2],Q[2]=Q[3],Q[3]=vt),Q[2]*=Y[1],Q[3]*=Y[1],Y[2]<0&&(vt=Q[0],Q[0]=Q[1],Q[1]=vt),Q[0]*=Y[2],Q[1]*=Y[2]),Q[0]+=Y[4],Q[1]+=Y[4],Q[2]+=Y[5],Q[3]+=Y[5]}static transform(Y,Q){return[Y[0]*Q[0]+Y[2]*Q[1],Y[1]*Q[0]+Y[3]*Q[1],Y[0]*Q[2]+Y[2]*Q[3],Y[1]*Q[2]+Y[3]*Q[3],Y[0]*Q[4]+Y[2]*Q[5]+Y[4],Y[1]*Q[4]+Y[3]*Q[5]+Y[5]]}static applyTransform(Y,Q){const vt=Y[0]*Q[0]+Y[1]*Q[2]+Q[4],mt=Y[0]*Q[1]+Y[1]*Q[3]+Q[5];return[vt,mt]}static applyInverseTransform(Y,Q){const vt=Q[0]*Q[3]-Q[1]*Q[2],mt=(Y[0]*Q[3]-Y[1]*Q[2]+Q[2]*Q[5]-Q[4]*Q[3])/vt,Rt=(-Y[0]*Q[1]+Y[1]*Q[0]+Q[4]*Q[1]-Q[5]*Q[0])/vt;return[mt,Rt]}static getAxialAlignedBoundingBox(Y,Q){const vt=this.applyTransform(Y,Q),mt=this.applyTransform(Y.slice(2,4),Q),Rt=this.applyTransform([Y[0],Y[3]],Q),Dt=this.applyTransform([Y[2],Y[1]],Q);return[Math.min(vt[0],mt[0],Rt[0],Dt[0]),Math.min(vt[1],mt[1],Rt[1],Dt[1]),Math.max(vt[0],mt[0],Rt[0],Dt[0]),Math.max(vt[1],mt[1],Rt[1],Dt[1])]}static inverseTransform(Y){const Q=Y[0]*Y[3]-Y[1]*Y[2];return[Y[3]/Q,-Y[1]/Q,-Y[2]/Q,Y[0]/Q,(Y[2]*Y[5]-Y[4]*Y[3])/Q,(Y[4]*Y[1]-Y[5]*Y[0])/Q]}static singularValueDecompose2dScale(Y){const Q=[Y[0],Y[2],Y[1],Y[3]],vt=Y[0]*Q[0]+Y[1]*Q[2],mt=Y[0]*Q[1]+Y[1]*Q[3],Rt=Y[2]*Q[0]+Y[3]*Q[2],Dt=Y[2]*Q[1]+Y[3]*Q[3],Nt=(vt+Dt)/2,Ft=Math.sqrt((vt+Dt)**2-4*(vt*Dt-Rt*mt))/2,kt=Nt+Ft||1,Gt=Nt-Ft||1;return[Math.sqrt(kt),Math.sqrt(Gt)]}static normalizeRect(Y){const Q=Y.slice(0);return Y[0]>Y[2]&&(Q[0]=Y[2],Q[2]=Y[0]),Y[1]>Y[3]&&(Q[1]=Y[3],Q[3]=Y[1]),Q}static intersect(Y,Q){const vt=Math.max(Math.min(Y[0],Y[2]),Math.min(Q[0],Q[2])),mt=Math.min(Math.max(Y[0],Y[2]),Math.max(Q[0],Q[2]));if(vt>mt)return null;const Rt=Math.max(Math.min(Y[1],Y[3]),Math.min(Q[1],Q[3])),Dt=Math.min(Math.max(Y[1],Y[3]),Math.max(Q[1],Q[3]));return Rt>Dt?null:[vt,Rt,mt,Dt]}static bezierBoundingBox(Y,Q,vt,mt,Rt,Dt,Nt,Ft){const kt=[],Gt=[[],[]];let Jt,Xt,$t,Ut,se,Ae,ke,ge;for(let Be=0;Be<2;++Be){if(Be===0?(Xt=6*Y-12*vt+6*Rt,Jt=-3*Y+9*vt-9*Rt+3*Nt,$t=3*vt-3*Y):(Xt=6*Q-12*mt+6*Dt,Jt=-3*Q+9*mt-9*Dt+3*Ft,$t=3*mt-3*Q),Math.abs(Jt)<1e-12){if(Math.abs(Xt)<1e-12)continue;Ut=-$t/Xt,0<Ut&&Ut<1&&kt.push(Ut);continue}ke=Xt*Xt-4*$t*Jt,ge=Math.sqrt(ke),!(ke<0)&&(se=(-Xt+ge)/(2*Jt),0<se&&se<1&&kt.push(se),Ae=(-Xt-ge)/(2*Jt),0<Ae&&Ae<1&&kt.push(Ae))}let fe=kt.length,ce;const Me=fe;for(;fe--;)Ut=kt[fe],ce=1-Ut,Gt[0][fe]=ce*ce*ce*Y+3*ce*ce*Ut*vt+3*ce*Ut*Ut*Rt+Ut*Ut*Ut*Nt,Gt[1][fe]=ce*ce*ce*Q+3*ce*ce*Ut*mt+3*ce*Ut*Ut*Dt+Ut*Ut*Ut*Ft;return Gt[0][Me]=Y,Gt[1][Me]=Q,Gt[0][Me+1]=Nt,Gt[1][Me+1]=Ft,Gt[0].length=Gt[1].length=Me+2,[Math.min(...Gt[0]),Math.min(...Gt[1]),Math.max(...Gt[0]),Math.max(...Gt[1])]}}function L(tt){return decodeURIComponent(escape(tt))}function U(tt){return typeof tt=="object"&&tt?.byteLength!==void 0}class V{#t=!1;constructor(){this.promise=new Promise((Y,Q)=>{this.resolve=vt=>{this.#t=!0,Y(vt)},this.reject=vt=>{this.#t=!0,Q(vt)}})}get settled(){return this.#t}}let q=null,$=null;function J(tt){return q||(q=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$=new Map([["","t"]])),tt.replaceAll(q,(Y,Q,vt)=>Q?Q.normalize("NFKC"):$.get(vt))}function j(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const tt=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(tt);else for(let Y=0;Y<32;Y++)tt[Y]=Math.floor(Math.random()*255);return Ct(tt)}const st="pdfjs_internal_id_"})},bp={};function ji(i){var e=bp[i];if(e!==void 0)return e.exports;var s=bp[i]={exports:{}};return I0[i](s,s.exports,ji),s.exports}(()=>{var i=typeof Symbol=="function"?Symbol("webpack queues"):"__webpack_queues__",e=typeof Symbol=="function"?Symbol("webpack exports"):"__webpack_exports__",s=typeof Symbol=="function"?Symbol("webpack error"):"__webpack_error__",o=u=>{u&&u.d<1&&(u.d=1,u.forEach(f=>f.r--),u.forEach(f=>f.r--?f.r++:f()))},r=u=>u.map(f=>{if(f!==null&&typeof f=="object"){if(f[i])return f;if(f.then){var p=[];p.d=0,f.then(g=>{v[e]=g,o(p)},g=>{v[s]=g,o(p)});var v={};return v[i]=g=>g(p),v}}var h={};return h[i]=g=>{},h[e]=f,h});ji.a=(u,f,p)=>{var v;p&&((v=[]).d=-1);var h=new Set,g=u.exports,A,T,_,C=new Promise((M,y)=>{_=y,T=M});C[e]=g,C[i]=M=>(v&&M(v),h.forEach(M),C.catch(y=>{})),u.exports=C,f(M=>{A=r(M);var y,x=()=>A.map(F=>{if(F[s])throw F[s];return F[e]}),I=new Promise(F=>{y=()=>F(x),y.r=0;var P=H=>H!==v&&!h.has(H)&&(h.add(H),H&&!H.d&&(y.r++,H.push(y)));A.map(H=>H[i](P))});return y.r?I:x()},M=>(M?_(C[s]=M):T(g),o(v))),v&&v.d<0&&(v.d=0)}})();ji.d=(i,e)=>{for(var s in e)ji.o(e,s)&&!ji.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:e[s]})};ji.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var Vt=ji(907);Vt=globalThis.pdfjsLib=await(globalThis.pdfjsLibPromise=Vt);Vt.AbortException;Vt.AnnotationEditorLayer;Vt.AnnotationEditorParamsType;Vt.AnnotationEditorType;Vt.AnnotationEditorUIManager;Vt.AnnotationLayer;Vt.AnnotationMode;Vt.CMapCompressionType;Vt.ColorPicker;Vt.DOMSVGFactory;Vt.DrawLayer;Vt.FeatureTest;var N0=Vt.GlobalWorkerOptions;Vt.ImageKind;Vt.InvalidPDFException;Vt.MissingPDFException;Vt.OPS;Vt.Outliner;Vt.PDFDataRangeTransport;Vt.PDFDateString;Vt.PDFWorker;Vt.PasswordResponses;Vt.PermissionFlag;Vt.PixelsPerInch;Vt.PromiseCapability;Vt.RenderingCancelledException;Vt.UnexpectedResponseException;Vt.Util;Vt.VerbosityLevel;Vt.XfaLayer;Vt.build;Vt.createValidAbsoluteUrl;Vt.fetchData;var D0=Vt.getDocument;Vt.getFilenameFromUrl;Vt.getPdfFilenameFromUrl;Vt.getXfaPageViewport;Vt.isDataScheme;Vt.isPdfFile;Vt.noContextMenu;Vt.normalizeUnicode;Vt.renderTextLayer;Vt.setLayerDimensions;Vt.shadow;Vt.updateTextLayer;Vt.version;var L0={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let k0,P0;function F0(){return{geminiUrl:k0,vertexUrl:P0}}function U0(i,e,s,o){var r,u;if(!i?.baseUrl){const f=F0();return e?(r=f.vertexUrl)!==null&&r!==void 0?r:s:(u=f.geminiUrl)!==null&&u!==void 0?u:o}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ii{}function It(i,e){const s=/\{([^}]+)\}/g;return i.replace(s,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const u=e[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(i,e,s){for(let u=0;u<e.length-1;u++){const f=e[u];if(f.endsWith("[]")){const p=f.slice(0,-2);if(!(p in i))if(Array.isArray(s))i[p]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(i[p])){const v=i[p];if(Array.isArray(s))for(let h=0;h<v.length;h++){const g=v[h];d(g,e.slice(u+1),s[h])}else for(const h of v)d(h,e.slice(u+1),s)}return}else if(f.endsWith("[0]")){const p=f.slice(0,-3);p in i||(i[p]=[{}]);const v=i[p];d(v[0],e.slice(u+1),s);return}(!i[f]||typeof i[f]!="object")&&(i[f]={}),i=i[f]}const o=e[e.length-1],r=i[o];if(r!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===r)return;if(typeof r=="object"&&typeof s=="object"&&r!==null&&s!==null)Object.assign(r,s);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof s=="object"&&s!==null&&!Array.isArray(s)?Object.assign(i,s):i[o]=s}function c(i,e,s=void 0){try{if(e.length===1&&e[0]==="_self")return i;for(let o=0;o<e.length;o++){if(typeof i!="object"||i===null)return s;const r=e[o];if(r.endsWith("[]")){const u=r.slice(0,-2);if(u in i){const f=i[u];return Array.isArray(f)?f.map(p=>c(p,e.slice(o+1),s)):s}else return s}else i=i[r]}return i}catch(o){if(o instanceof TypeError)return s;throw o}}function H0(i,e){for(const[s,o]of Object.entries(e)){const r=s.split("."),u=o.split("."),f=new Set;let p=-1;for(let v=0;v<r.length;v++)if(r[v]==="*"){p=v;break}if(p!==-1&&u.length>p)for(let v=p;v<u.length;v++){const h=u[v];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&f.add(h)}Yu(i,r,u,0,f)}}function Yu(i,e,s,o,r){if(o>=e.length||typeof i!="object"||i===null)return;const u=e[o];if(u.endsWith("[]")){const f=u.slice(0,-2),p=i;if(f in p&&Array.isArray(p[f]))for(const v of p[f])Yu(v,e,s,o+1,r)}else if(u==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const f=i,p=Object.keys(f).filter(h=>!h.startsWith("_")&&!r.has(h)),v={};for(const h of p)v[h]=f[h];for(const[h,g]of Object.entries(v)){const A=[];for(const T of s.slice(o))T==="*"?A.push(h):A.push(T);d(f,A,g)}for(const h of p)delete f[h]}}else{const f=i;u in f&&Yu(f[u],e,s,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rc(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function G0(i){const e={},s=c(i,["operationName"]);s!=null&&d(e,["operationName"],s);const o=c(i,["resourceName"]);return o!=null&&d(e,["_url","resourceName"],o),e}function O0(i){const e={},s=c(i,["name"]);s!=null&&d(e,["name"],s);const o=c(i,["metadata"]);o!=null&&d(e,["metadata"],o);const r=c(i,["done"]);r!=null&&d(e,["done"],r);const u=c(i,["error"]);u!=null&&d(e,["error"],u);const f=c(i,["response","generateVideoResponse"]);return f!=null&&d(e,["response"],B0(f)),e}function V0(i){const e={},s=c(i,["name"]);s!=null&&d(e,["name"],s);const o=c(i,["metadata"]);o!=null&&d(e,["metadata"],o);const r=c(i,["done"]);r!=null&&d(e,["done"],r);const u=c(i,["error"]);u!=null&&d(e,["error"],u);const f=c(i,["response"]);return f!=null&&d(e,["response"],z0(f)),e}function B0(i){const e={},s=c(i,["generatedSamples"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>q0(f))),d(e,["generatedVideos"],u)}const o=c(i,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=c(i,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function z0(i){const e={},s=c(i,["videos"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>Y0(f))),d(e,["generatedVideos"],u)}const o=c(i,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=c(i,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function q0(i){const e={},s=c(i,["video"]);return s!=null&&d(e,["video"],Z0(s)),e}function Y0(i){const e={},s=c(i,["_self"]);return s!=null&&d(e,["video"],W0(s)),e}function X0(i){const e={},s=c(i,["operationName"]);return s!=null&&d(e,["_url","operationName"],s),e}function J0(i){const e={},s=c(i,["operationName"]);return s!=null&&d(e,["_url","operationName"],s),e}function $0(i){const e={},s=c(i,["name"]);s!=null&&d(e,["name"],s);const o=c(i,["metadata"]);o!=null&&d(e,["metadata"],o);const r=c(i,["done"]);r!=null&&d(e,["done"],r);const u=c(i,["error"]);u!=null&&d(e,["error"],u);const f=c(i,["response"]);return f!=null&&d(e,["response"],K0(f)),e}function K0(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["parent"]);o!=null&&d(e,["parent"],o);const r=c(i,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function og(i){const e={},s=c(i,["name"]);s!=null&&d(e,["name"],s);const o=c(i,["metadata"]);o!=null&&d(e,["metadata"],o);const r=c(i,["done"]);r!=null&&d(e,["done"],r);const u=c(i,["error"]);u!=null&&d(e,["error"],u);const f=c(i,["response"]);return f!=null&&d(e,["response"],Q0(f)),e}function Q0(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["parent"]);o!=null&&d(e,["parent"],o);const r=c(i,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function Z0(i){const e={},s=c(i,["uri"]);s!=null&&d(e,["uri"],s);const o=c(i,["encodedVideo"]);o!=null&&d(e,["videoBytes"],rc(o));const r=c(i,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function W0(i){const e={},s=c(i,["gcsUri"]);s!=null&&d(e,["uri"],s);const o=c(i,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],rc(o));const r=c(i,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Cp;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Cp||(Cp={}));var xp;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(xp||(xp={}));var wp;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(wp||(wp={}));var he;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(he||(he={}));var _p;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(_p||(_p={}));var Rp;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(Rp||(Rp={}));var Mp;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Mp||(Mp={}));var Ip;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Ip||(Ip={}));var Np;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(Np||(Np={}));var Dp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(Dp||(Dp={}));var Lp;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(Lp||(Lp={}));var kp;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH",i.MINIMAL="MINIMAL"})(kp||(kp={}));var Pp;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Pp||(Pp={}));var Fp;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(Fp||(Fp={}));var Up;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(Up||(Up={}));var Hp;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE",i.IMAGE_RECITATION="IMAGE_RECITATION",i.IMAGE_OTHER="IMAGE_OTHER"})(Hp||(Hp={}));var Gp;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(Gp||(Gp={}));var Op;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Op||(Op={}));var Vp;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Vp||(Vp={}));var Bp;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(Bp||(Bp={}));var zp;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(zp||(zp={}));var dr;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(dr||(dr={}));var qp;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(qp||(qp={}));var Yp;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Yp||(Yp={}));var Xp;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Xp||(Xp={}));var Xu;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Xu||(Xu={}));var Jp;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Jp||(Jp={}));var $p;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",i.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})($p||($p={}));var Ju;(function(i){i.COLLECTION="COLLECTION"})(Ju||(Ju={}));var Kp;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(Kp||(Kp={}));var Qp;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Qp||(Qp={}));var Zp;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(Zp||(Zp={}));var Wp;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(Wp||(Wp={}));var jp;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(jp||(jp={}));var tm;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(tm||(tm={}));var em;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(em||(em={}));var nm;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(nm||(nm={}));var im;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(im||(im={}));var sm;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(sm||(sm={}));var om;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(om||(om={}));var am;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(am||(am={}));var rm;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(rm||(rm={}));var lm;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING",i.DISTILLATION="DISTILLATION"})(lm||(lm={}));var um;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(um||(um={}));var cm;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})(cm||(cm={}));var dm;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED",i.REGISTERED="REGISTERED"})(dm||(dm={}));var fm;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(fm||(fm={}));var hm;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(hm||(hm={}));var pm;(function(i){i.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",i.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",i.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(pm||(pm={}));var mm;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.ACTIVITY_START="ACTIVITY_START",i.ACTIVITY_END="ACTIVITY_END"})(mm||(mm={}));var gm;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gm||(gm={}));var ym;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ym||(ym={}));var vm;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(vm||(vm={}));var Am;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Am||(Am={}));var Sm;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Sm||(Sm={}));var Tm;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(Tm||(Tm={}));var zs;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(zs||(zs={}));class $u{constructor(e){const s={};for(const o of e.headers.entries())s[o[0]]=o[1];this.headers=s,this.responseInternal=e}json(){return this.responseInternal.json()}}class Bo{get text(){var e,s,o,r,u,f,p,v;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",g=!1;const A=[];for(const T of(v=(p=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)!==null&&v!==void 0?v:[]){for(const[_,C]of Object.entries(T))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(C!==null||C!==void 0)&&A.push(_);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;g=!0,h+=T.text}}return A.length>0&&console.warn(`there are non-text parts ${A} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?h:void 0}get data(){var e,s,o,r,u,f,p,v;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const g=[];for(const A of(v=(p=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)!==null&&v!==void 0?v:[]){for(const[T,_]of Object.entries(A))T!=="inlineData"&&(_!==null||_!==void 0)&&g.push(T);A.inlineData&&typeof A.inlineData.data=="string"&&(h+=atob(A.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,s,o,r,u,f,p,v;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(v=(p=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||v===void 0?void 0:v.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if(h?.length!==0)return h}get executableCode(){var e,s,o,r,u,f,p,v,h;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(v=(p=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||v===void 0?void 0:v.filter(A=>A.executableCode).map(A=>A.executableCode).filter(A=>A!==void 0);if(g?.length!==0)return(h=g?.[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,s,o,r,u,f,p,v,h;if(((r=(o=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(v=(p=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||p===void 0?void 0:p.parts)===null||v===void 0?void 0:v.filter(A=>A.codeExecutionResult).map(A=>A.codeExecutionResult).filter(A=>A!==void 0);if(g?.length!==0)return(h=g?.[0])===null||h===void 0?void 0:h.output}}class Em{}class bm{}class j0{}class tA{}class eA{}class nA{}class Cm{}class xm{}class wm{}class iA{}class fr{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new fr;let r;const u=e;return s?r=V0(u):r=O0(u),Object.assign(o,r),o}}class _m{}class Rm{}class Mm{}class Im{}class sA{}class oA{}class aA{}class lc{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new lc,u=$0(e);return Object.assign(o,u),o}}class rA{}class lA{}class uA{}class cA{}class Nm{}class dA{get text(){var e,s,o;let r="",u=!1;const f=[];for(const p of(o=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&o!==void 0?o:[]){for(const[v,h]of Object.entries(p))v!=="text"&&v!=="thought"&&h!==null&&f.push(v);if(typeof p.text=="string"){if(typeof p.thought=="boolean"&&p.thought)continue;u=!0,r+=p.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var e,s,o;let r="";const u=[];for(const f of(o=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&o!==void 0?o:[]){for(const[p,v]of Object.entries(f))p!=="inlineData"&&v!==null&&u.push(p);f.inlineData&&typeof f.inlineData.data=="string"&&(r+=atob(f.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class fA{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class uc{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const o=new uc,u=og(e);return Object.assign(o,u),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ne(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const s=e.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ag(i,e){const s=ne(i,e);return s?s.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${s}`:s.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${s}`:s:""}function rg(i){return Array.isArray(i)?i.map(e=>hr(e)):[hr(i)]}function hr(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function lg(i){const e=hr(i);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ug(i){const e=hr(i);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dm(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function cg(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(e=>Dm(e)):[Dm(i)]}function Ku(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function Lm(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function km(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function Ye(i){if(i==null)throw new Error("ContentUnion is required");return Ku(i)?i:{role:"user",parts:cg(i)}}function cc(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(s=>{const o=Ye(s);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(i.isVertexAI()){const s=Ye(e);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(e)?e.map(s=>Ye(s)):[Ye(e)]}function En(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(Lm(i)||km(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ye(i)]}const e=[],s=[],o=Ku(i[0]);for(const r of i){const u=Ku(r);if(u!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)e.push(r);else{if(Lm(r)||km(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(r)}}return o||e.push({role:"user",parts:cg(s)}),e}function hA(i,e){i.includes("null")&&(e.nullable=!0);const s=i.filter(o=>o!=="null");if(s.length===1)e.type=Object.values(he).includes(s[0].toUpperCase())?s[0].toUpperCase():he.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of s)e.anyOf.push({type:Object.values(he).includes(o.toUpperCase())?o.toUpperCase():he.TYPE_UNSPECIFIED})}}function Ys(i){const e={},s=["items"],o=["anyOf"],r=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=i.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(e.nullable=!0,i=u[1]):u[1].type==="null"&&(e.nullable=!0,i=u[0])),i.type instanceof Array&&hA(i.type,e);for(const[f,p]of Object.entries(i))if(p!=null)if(f=="type"){if(p==="null")throw new Error("type: null can not be the only possible type for the field.");if(p instanceof Array)continue;e.type=Object.values(he).includes(p.toUpperCase())?p.toUpperCase():he.TYPE_UNSPECIFIED}else if(s.includes(f))e[f]=Ys(p);else if(o.includes(f)){const v=[];for(const h of p){if(h.type=="null"){e.nullable=!0;continue}v.push(Ys(h))}e[f]=v}else if(r.includes(f)){const v={};for(const[h,g]of Object.entries(p))v[h]=Ys(g);e[f]=v}else{if(f==="additionalProperties")continue;e[f]=p}return e}function dc(i){return Ys(i)}function fc(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function hc(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function Js(i){if(i.functionDeclarations)for(const e of i.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ys(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ys(e.response));return i}function $s(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const e=[];for(const s of i)e.push(s);return e}function pA(i,e,s,o=1){const r=!e.startsWith(`${s}/`)&&e.split("/").length===o;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${s}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:r?`projects/${i.getProject()}/locations/${i.getLocation()}/${s}/${e}`:e:r?`${s}/${e}`:e}function si(i,e){if(typeof e!="string")throw new Error("name must be a string");return pA(i,e,"cachedContents")}function dg(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function Di(i){return rc(i)}function mA(i){return i!=null&&typeof i=="object"&&"name"in i}function gA(i){return i!=null&&typeof i=="object"&&"video"in i}function yA(i){return i!=null&&typeof i=="object"&&"uri"in i}function fg(i){var e;let s;if(mA(i)&&(s=i.name),!(yA(i)&&(s=i.uri,s===void 0))&&!(gA(i)&&(s=(e=i.video)===null||e===void 0?void 0:e.uri,s===void 0))){if(typeof i=="string"&&(s=i),s===void 0)throw new Error("Could not extract file name from the provided input.");if(s.startsWith("https://")){const r=s.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${s}`);s=r[0]}else s.startsWith("files/")&&(s=s.split("files/")[1]);return s}}function hg(i,e){let s;return i.isVertexAI()?s=e?"publishers/google/models":"models":s=e?"models":"tunedModels",s}function pg(i){for(const e of["models","tunedModels","publisherModels"])if(vA(i,e))return i[e];return[]}function vA(i,e){return i!==null&&typeof i=="object"&&e in i}function AA(i,e={}){const s=i,o={name:s.name,description:s.description,parametersJsonSchema:s.inputSchema};return s.outputSchema&&(o.responseJsonSchema=s.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function SA(i,e={}){const s=[],o=new Set;for(const r of i){const u=r.name;if(o.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);o.add(u);const f=AA(r,e);f.functionDeclarations&&s.push(...f.functionDeclarations)}return{functionDeclarations:s}}function mg(i,e){let s;if(typeof e=="string")if(i.isVertexAI())if(e.startsWith("gs://"))s={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))s={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))s={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");s={inlinedRequests:e}}else s=e;const o=[s.gcsUri,s.bigqueryUri].filter(Boolean).length,r=[s.inlinedRequests,s.fileName].filter(Boolean).length;if(i.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return s}function TA(i){if(typeof i!="string")return i;const e=i;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function gg(i){if(typeof i!="object"||i===null)return{};const e=i,s=e.inlinedResponses;if(typeof s!="object"||s===null)return i;const r=s.inlinedResponses;if(!Array.isArray(r)||r.length===0)return i;let u=!1;for(const f of r){if(typeof f!="object"||f===null)continue;const v=f.response;if(typeof v!="object"||v===null)continue;if(v.embedding!==void 0){u=!0;break}}return u&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),i}function Ks(i,e){const s=e;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(s))return s.split("/").pop();throw new Error(`Invalid batch job name: ${s}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(s))return s.split("/").pop();if(/^\d+$/.test(s))return s;throw new Error(`Invalid batch job name: ${s}.`)}function yg(i){const e=i;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EA(i){const e={},s=c(i,["responsesFile"]);s!=null&&d(e,["fileName"],s);const o=c(i,["inlinedResponses","inlinedResponses"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>nS(f))),d(e,["inlinedResponses"],u)}const r=c(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),d(e,["inlinedEmbedContentResponses"],u)}return e}function bA(i){const e={},s=c(i,["predictionsFormat"]);s!=null&&d(e,["format"],s);const o=c(i,["gcsDestination","outputUriPrefix"]);o!=null&&d(e,["gcsUri"],o);const r=c(i,["bigqueryDestination","outputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function CA(i){const e={},s=c(i,["format"]);s!=null&&d(e,["predictionsFormat"],s);const o=c(i,["gcsUri"]);o!=null&&d(e,["gcsDestination","outputUriPrefix"],o);const r=c(i,["bigqueryUri"]);if(r!=null&&d(e,["bigqueryDestination","outputUri"],r),c(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(c(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ur(i){const e={},s=c(i,["name"]);s!=null&&d(e,["name"],s);const o=c(i,["metadata","displayName"]);o!=null&&d(e,["displayName"],o);const r=c(i,["metadata","state"]);r!=null&&d(e,["state"],yg(r));const u=c(i,["metadata","createTime"]);u!=null&&d(e,["createTime"],u);const f=c(i,["metadata","endTime"]);f!=null&&d(e,["endTime"],f);const p=c(i,["metadata","updateTime"]);p!=null&&d(e,["updateTime"],p);const v=c(i,["metadata","model"]);v!=null&&d(e,["model"],v);const h=c(i,["metadata","output"]);return h!=null&&d(e,["dest"],EA(gg(h))),e}function Qu(i){const e={},s=c(i,["name"]);s!=null&&d(e,["name"],s);const o=c(i,["displayName"]);o!=null&&d(e,["displayName"],o);const r=c(i,["state"]);r!=null&&d(e,["state"],yg(r));const u=c(i,["error"]);u!=null&&d(e,["error"],u);const f=c(i,["createTime"]);f!=null&&d(e,["createTime"],f);const p=c(i,["startTime"]);p!=null&&d(e,["startTime"],p);const v=c(i,["endTime"]);v!=null&&d(e,["endTime"],v);const h=c(i,["updateTime"]);h!=null&&d(e,["updateTime"],h);const g=c(i,["model"]);g!=null&&d(e,["model"],g);const A=c(i,["inputConfig"]);A!=null&&d(e,["src"],xA(A));const T=c(i,["outputConfig"]);T!=null&&d(e,["dest"],bA(gg(T)));const _=c(i,["completionStats"]);return _!=null&&d(e,["completionStats"],_),e}function xA(i){const e={},s=c(i,["instancesFormat"]);s!=null&&d(e,["format"],s);const o=c(i,["gcsSource","uris"]);o!=null&&d(e,["gcsUri"],o);const r=c(i,["bigquerySource","inputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function wA(i,e){const s={};if(c(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=c(e,["fileName"]);o!=null&&d(s,["fileName"],o);const r=c(e,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>eS(i,f))),d(s,["requests","requests"],u)}return s}function _A(i){const e={},s=c(i,["format"]);s!=null&&d(e,["instancesFormat"],s);const o=c(i,["gcsUri"]);o!=null&&d(e,["gcsSource","uris"],o);const r=c(i,["bigqueryUri"]);if(r!=null&&d(e,["bigquerySource","inputUri"],r),c(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function RA(i){const e={},s=c(i,["data"]);if(s!=null&&d(e,["data"],s),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function MA(i,e){const s={},o=c(e,["name"]);return o!=null&&d(s,["_url","name"],Ks(i,o)),s}function IA(i,e){const s={},o=c(e,["name"]);return o!=null&&d(s,["_url","name"],Ks(i,o)),s}function NA(i){const e={},s=c(i,["content"]);s!=null&&d(e,["content"],s);const o=c(i,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],DA(o));const r=c(i,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const u=c(i,["finishReason"]);u!=null&&d(e,["finishReason"],u);const f=c(i,["avgLogprobs"]);f!=null&&d(e,["avgLogprobs"],f);const p=c(i,["groundingMetadata"]);p!=null&&d(e,["groundingMetadata"],p);const v=c(i,["index"]);v!=null&&d(e,["index"],v);const h=c(i,["logprobsResult"]);h!=null&&d(e,["logprobsResult"],h);const g=c(i,["safetyRatings"]);if(g!=null){let T=g;Array.isArray(T)&&(T=T.map(_=>_)),d(e,["safetyRatings"],T)}const A=c(i,["urlContextMetadata"]);return A!=null&&d(e,["urlContextMetadata"],A),e}function DA(i){const e={},s=c(i,["citationSources"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>r)),d(e,["citations"],o)}return e}function vg(i){const e={},s=c(i,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>uS(u))),d(e,["parts"],r)}const o=c(i,["role"]);return o!=null&&d(e,["role"],o),e}function LA(i,e){const s={},o=c(i,["displayName"]);if(e!==void 0&&o!=null&&d(e,["batch","displayName"],o),c(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return s}function kA(i,e){const s={},o=c(i,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const r=c(i,["dest"]);return e!==void 0&&r!=null&&d(e,["outputConfig"],CA(TA(r))),s}function Pm(i,e){const s={},o=c(e,["model"]);o!=null&&d(s,["_url","model"],ne(i,o));const r=c(e,["src"]);r!=null&&d(s,["batch","inputConfig"],wA(i,mg(i,r)));const u=c(e,["config"]);return u!=null&&LA(u,s),s}function PA(i,e){const s={},o=c(e,["model"]);o!=null&&d(s,["model"],ne(i,o));const r=c(e,["src"]);r!=null&&d(s,["inputConfig"],_A(mg(i,r)));const u=c(e,["config"]);return u!=null&&kA(u,s),s}function FA(i,e){const s={},o=c(i,["displayName"]);return e!==void 0&&o!=null&&d(e,["batch","displayName"],o),s}function UA(i,e){const s={},o=c(e,["model"]);o!=null&&d(s,["_url","model"],ne(i,o));const r=c(e,["src"]);r!=null&&d(s,["batch","inputConfig"],qA(i,r));const u=c(e,["config"]);return u!=null&&FA(u,s),s}function HA(i,e){const s={},o=c(e,["name"]);return o!=null&&d(s,["_url","name"],Ks(i,o)),s}function GA(i,e){const s={},o=c(e,["name"]);return o!=null&&d(s,["_url","name"],Ks(i,o)),s}function OA(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["name"]);o!=null&&d(e,["name"],o);const r=c(i,["done"]);r!=null&&d(e,["done"],r);const u=c(i,["error"]);return u!=null&&d(e,["error"],u),e}function VA(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["name"]);o!=null&&d(e,["name"],o);const r=c(i,["done"]);r!=null&&d(e,["done"],r);const u=c(i,["error"]);return u!=null&&d(e,["error"],u),e}function BA(i,e){const s={},o=c(e,["contents"]);if(o!=null){let u=cc(i,o);Array.isArray(u)&&(u=u.map(f=>f)),d(s,["requests[]","request","content"],u)}const r=c(e,["config"]);return r!=null&&(d(s,["_self"],zA(r,s)),H0(s,{"requests[].*":"requests[].request.*"})),s}function zA(i,e){const s={},o=c(i,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const r=c(i,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const u=c(i,["outputDimensionality"]);if(e!==void 0&&u!=null&&d(e,["requests[]","outputDimensionality"],u),c(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function qA(i,e){const s={},o=c(e,["fileName"]);o!=null&&d(s,["file_name"],o);const r=c(e,["inlinedRequests"]);return r!=null&&d(s,["requests"],BA(i,r)),s}function YA(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["fileUri"]);s!=null&&d(e,["fileUri"],s);const o=c(i,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function XA(i){const e={},s=c(i,["id"]);s!=null&&d(e,["id"],s);const o=c(i,["args"]);o!=null&&d(e,["args"],o);const r=c(i,["name"]);if(r!=null&&d(e,["name"],r),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function JA(i){const e={},s=c(i,["allowedFunctionNames"]);s!=null&&d(e,["allowedFunctionNames"],s);const o=c(i,["mode"]);if(o!=null&&d(e,["mode"],o),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function $A(i,e,s){const o={},r=c(e,["systemInstruction"]);s!==void 0&&r!=null&&d(s,["systemInstruction"],vg(Ye(r)));const u=c(e,["temperature"]);u!=null&&d(o,["temperature"],u);const f=c(e,["topP"]);f!=null&&d(o,["topP"],f);const p=c(e,["topK"]);p!=null&&d(o,["topK"],p);const v=c(e,["candidateCount"]);v!=null&&d(o,["candidateCount"],v);const h=c(e,["maxOutputTokens"]);h!=null&&d(o,["maxOutputTokens"],h);const g=c(e,["stopSequences"]);g!=null&&d(o,["stopSequences"],g);const A=c(e,["responseLogprobs"]);A!=null&&d(o,["responseLogprobs"],A);const T=c(e,["logprobs"]);T!=null&&d(o,["logprobs"],T);const _=c(e,["presencePenalty"]);_!=null&&d(o,["presencePenalty"],_);const C=c(e,["frequencyPenalty"]);C!=null&&d(o,["frequencyPenalty"],C);const M=c(e,["seed"]);M!=null&&d(o,["seed"],M);const y=c(e,["responseMimeType"]);y!=null&&d(o,["responseMimeType"],y);const x=c(e,["responseSchema"]);x!=null&&d(o,["responseSchema"],dc(x));const I=c(e,["responseJsonSchema"]);if(I!=null&&d(o,["responseJsonSchema"],I),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=c(e,["safetySettings"]);if(s!==void 0&&F!=null){let Mt=F;Array.isArray(Mt)&&(Mt=Mt.map(Tt=>cS(Tt))),d(s,["safetySettings"],Mt)}const P=c(e,["tools"]);if(s!==void 0&&P!=null){let Mt=$s(P);Array.isArray(Mt)&&(Mt=Mt.map(Tt=>fS(Js(Tt)))),d(s,["tools"],Mt)}const H=c(e,["toolConfig"]);if(s!==void 0&&H!=null&&d(s,["toolConfig"],dS(H)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=c(e,["cachedContent"]);s!==void 0&&O!=null&&d(s,["cachedContent"],si(i,O));const z=c(e,["responseModalities"]);z!=null&&d(o,["responseModalities"],z);const it=c(e,["mediaResolution"]);it!=null&&d(o,["mediaResolution"],it);const W=c(e,["speechConfig"]);if(W!=null&&d(o,["speechConfig"],fc(W)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ut=c(e,["thinkingConfig"]);ut!=null&&d(o,["thinkingConfig"],ut);const pt=c(e,["imageConfig"]);pt!=null&&d(o,["imageConfig"],tS(pt));const xt=c(e,["enableEnhancedCivicAnswers"]);if(xt!=null&&d(o,["enableEnhancedCivicAnswers"],xt),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function KA(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["candidates"]);if(o!=null){let v=o;Array.isArray(v)&&(v=v.map(h=>NA(h))),d(e,["candidates"],v)}const r=c(i,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const u=c(i,["promptFeedback"]);u!=null&&d(e,["promptFeedback"],u);const f=c(i,["responseId"]);f!=null&&d(e,["responseId"],f);const p=c(i,["usageMetadata"]);return p!=null&&d(e,["usageMetadata"],p),e}function QA(i,e){const s={},o=c(e,["name"]);return o!=null&&d(s,["_url","name"],Ks(i,o)),s}function ZA(i,e){const s={},o=c(e,["name"]);return o!=null&&d(s,["_url","name"],Ks(i,o)),s}function WA(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(i,["enableWidget"]);return s!=null&&d(e,["enableWidget"],s),e}function jA(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=c(i,["timeRangeFilter"]);return s!=null&&d(e,["timeRangeFilter"],s),e}function tS(i){const e={},s=c(i,["aspectRatio"]);s!=null&&d(e,["aspectRatio"],s);const o=c(i,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),c(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function eS(i,e){const s={},o=c(e,["model"]);o!=null&&d(s,["request","model"],ne(i,o));const r=c(e,["contents"]);if(r!=null){let p=En(r);Array.isArray(p)&&(p=p.map(v=>vg(v))),d(s,["request","contents"],p)}const u=c(e,["metadata"]);u!=null&&d(s,["metadata"],u);const f=c(e,["config"]);return f!=null&&d(s,["request","generationConfig"],$A(i,f,c(s,["request"],{}))),s}function nS(i){const e={},s=c(i,["response"]);s!=null&&d(e,["response"],KA(s));const o=c(i,["metadata"]);o!=null&&d(e,["metadata"],o);const r=c(i,["error"]);return r!=null&&d(e,["error"],r),e}function iS(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);if(e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),c(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return s}function sS(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const u=c(i,["filter"]);return e!==void 0&&u!=null&&d(e,["_query","filter"],u),s}function oS(i){const e={},s=c(i,["config"]);return s!=null&&iS(s,e),e}function aS(i){const e={},s=c(i,["config"]);return s!=null&&sS(s,e),e}function rS(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=c(i,["operations"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>ur(f))),d(e,["batchJobs"],u)}return e}function lS(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=c(i,["batchPredictionJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>Qu(f))),d(e,["batchJobs"],u)}return e}function uS(i){const e={},s=c(i,["mediaResolution"]);s!=null&&d(e,["mediaResolution"],s);const o=c(i,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=c(i,["executableCode"]);r!=null&&d(e,["executableCode"],r);const u=c(i,["fileData"]);u!=null&&d(e,["fileData"],YA(u));const f=c(i,["functionCall"]);f!=null&&d(e,["functionCall"],XA(f));const p=c(i,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const v=c(i,["inlineData"]);v!=null&&d(e,["inlineData"],RA(v));const h=c(i,["text"]);h!=null&&d(e,["text"],h);const g=c(i,["thought"]);g!=null&&d(e,["thought"],g);const A=c(i,["thoughtSignature"]);A!=null&&d(e,["thoughtSignature"],A);const T=c(i,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function cS(i){const e={},s=c(i,["category"]);if(s!=null&&d(e,["category"],s),c(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=c(i,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function dS(i){const e={},s=c(i,["retrievalConfig"]);s!=null&&d(e,["retrievalConfig"],s);const o=c(i,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],JA(o)),e}function fS(i){const e={};if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["computerUse"]);s!=null&&d(e,["computerUse"],s);const o=c(i,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=c(i,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(i,["functionDeclarations"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(A=>A)),d(e,["functionDeclarations"],g)}const f=c(i,["googleMaps"]);f!=null&&d(e,["googleMaps"],WA(f));const p=c(i,["googleSearch"]);p!=null&&d(e,["googleSearch"],jA(p));const v=c(i,["googleSearchRetrieval"]);v!=null&&d(e,["googleSearchRetrieval"],v);const h=c(i,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ni;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(ni||(ni={}));class es{constructor(e,s,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(e,o,r)}init(e,s,o){var r,u;this.nameInternal=e,this.pageInternal=s[this.nameInternal]||[],this.sdkHttpResponseInternal=s?.sdkHttpResponse,this.idxInternal=0;let f={config:{}};!o||Object.keys(o).length===0?f={config:{}}:typeof o=="object"?f=Object.assign({},o):f=o,f.config&&(f.config.pageToken=s.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(u=(r=f.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hS extends ii{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new es(ni.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(s),s),this.create=async s=>(this.apiClient.isVertexAI()&&(s.config=this.formatDestination(s.src,s.config)),this.createInternal(s)),this.createEmbeddings=async s=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(s)}}createInlinedGenerateContentRequest(e){const s=Pm(this.apiClient,e),o=s._url,r=It("{model}:batchGenerateContent",o),p=s.batch.inputConfig.requests,v=p.requests,h=[];for(const g of v){const A=Object.assign({},g);if(A.systemInstruction){const T=A.systemInstruction;delete A.systemInstruction;const _=A.request;_.systemInstruction=T,A.request=_}h.push(A)}return p.requests=h,delete s.config,delete s._url,delete s._query,{path:r,body:s}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,s){const o=s?Object.assign({},s):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const u=this.getGcsUri(e),f=this.getBigqueryUri(e);if(u)u.endsWith(".jsonl")?o.dest=`${u.slice(0,-6)}/dest`:o.dest=`${u}_dest_${r}`;else if(f)o.dest=`${f}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=PA(this.apiClient,e);return p=It("batchPredictionJobs",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),f.then(g=>Qu(g))}else{const h=Pm(this.apiClient,e);return p=It("{model}:batchGenerateContent",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),f.then(g=>ur(g))}}async createEmbeddingsInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=UA(this.apiClient,e);return u=It("{model}:asyncBatchEmbedContent",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>ur(v))}}async get(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=ZA(this.apiClient,e);return p=It("batchPredictionJobs/{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),f.then(g=>Qu(g))}else{const h=QA(this.apiClient,e);return p=It("batches/{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),f.then(g=>ur(g))}}async cancel(e){var s,o,r,u;let f="",p={};if(this.apiClient.isVertexAI()){const v=IA(this.apiClient,e);f=It("batchPredictionJobs/{name}:cancel",v._url),p=v._query,delete v._url,delete v._query,await this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const v=MA(this.apiClient,e);f=It("batches/{name}:cancel",v._url),p=v._query,delete v._url,delete v._query,await this.apiClient.request({path:f,queryParams:p,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=aS(e);return p=It("batchPredictionJobs",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=lS(g),T=new Nm;return Object.assign(T,A),T})}else{const h=oS(e);return p=It("batches",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=rS(g),T=new Nm;return Object.assign(T,A),T})}}async delete(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=GA(this.apiClient,e);return p=It("batchPredictionJobs/{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>VA(g))}else{const h=HA(this.apiClient,e);return p=It("batches/{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>OA(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pS(i){const e={},s=c(i,["data"]);if(s!=null&&d(e,["data"],s),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Fm(i){const e={},s=c(i,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>US(u))),d(e,["parts"],r)}const o=c(i,["role"]);return o!=null&&d(e,["role"],o),e}function mS(i,e){const s={},o=c(i,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=c(i,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const u=c(i,["displayName"]);e!==void 0&&u!=null&&d(e,["displayName"],u);const f=c(i,["contents"]);if(e!==void 0&&f!=null){let g=En(f);Array.isArray(g)&&(g=g.map(A=>Fm(A))),d(e,["contents"],g)}const p=c(i,["systemInstruction"]);e!==void 0&&p!=null&&d(e,["systemInstruction"],Fm(Ye(p)));const v=c(i,["tools"]);if(e!==void 0&&v!=null){let g=v;Array.isArray(g)&&(g=g.map(A=>GS(A))),d(e,["tools"],g)}const h=c(i,["toolConfig"]);if(e!==void 0&&h!=null&&d(e,["toolConfig"],HS(h)),c(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return s}function gS(i,e){const s={},o=c(i,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=c(i,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const u=c(i,["displayName"]);e!==void 0&&u!=null&&d(e,["displayName"],u);const f=c(i,["contents"]);if(e!==void 0&&f!=null){let A=En(f);Array.isArray(A)&&(A=A.map(T=>T)),d(e,["contents"],A)}const p=c(i,["systemInstruction"]);e!==void 0&&p!=null&&d(e,["systemInstruction"],Ye(p));const v=c(i,["tools"]);if(e!==void 0&&v!=null){let A=v;Array.isArray(A)&&(A=A.map(T=>OS(T))),d(e,["tools"],A)}const h=c(i,["toolConfig"]);e!==void 0&&h!=null&&d(e,["toolConfig"],h);const g=c(i,["kmsKeyName"]);return e!==void 0&&g!=null&&d(e,["encryption_spec","kmsKeyName"],g),s}function yS(i,e){const s={},o=c(e,["model"]);o!=null&&d(s,["model"],ag(i,o));const r=c(e,["config"]);return r!=null&&mS(r,s),s}function vS(i,e){const s={},o=c(e,["model"]);o!=null&&d(s,["model"],ag(i,o));const r=c(e,["config"]);return r!=null&&gS(r,s),s}function AS(i,e){const s={},o=c(e,["name"]);return o!=null&&d(s,["_url","name"],si(i,o)),s}function SS(i,e){const s={},o=c(e,["name"]);return o!=null&&d(s,["_url","name"],si(i,o)),s}function TS(i){const e={},s=c(i,["sdkHttpResponse"]);return s!=null&&d(e,["sdkHttpResponse"],s),e}function ES(i){const e={},s=c(i,["sdkHttpResponse"]);return s!=null&&d(e,["sdkHttpResponse"],s),e}function bS(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["fileUri"]);s!=null&&d(e,["fileUri"],s);const o=c(i,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function CS(i){const e={},s=c(i,["id"]);s!=null&&d(e,["id"],s);const o=c(i,["args"]);o!=null&&d(e,["args"],o);const r=c(i,["name"]);if(r!=null&&d(e,["name"],r),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xS(i){const e={},s=c(i,["allowedFunctionNames"]);s!=null&&d(e,["allowedFunctionNames"],s);const o=c(i,["mode"]);if(o!=null&&d(e,["mode"],o),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function wS(i){const e={},s=c(i,["description"]);s!=null&&d(e,["description"],s);const o=c(i,["name"]);o!=null&&d(e,["name"],o);const r=c(i,["parameters"]);r!=null&&d(e,["parameters"],r);const u=c(i,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const f=c(i,["response"]);f!=null&&d(e,["response"],f);const p=c(i,["responseJsonSchema"]);if(p!=null&&d(e,["responseJsonSchema"],p),c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function _S(i,e){const s={},o=c(e,["name"]);return o!=null&&d(s,["_url","name"],si(i,o)),s}function RS(i,e){const s={},o=c(e,["name"]);return o!=null&&d(s,["_url","name"],si(i,o)),s}function MS(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(i,["enableWidget"]);return s!=null&&d(e,["enableWidget"],s),e}function IS(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=c(i,["timeRangeFilter"]);return s!=null&&d(e,["timeRangeFilter"],s),e}function NS(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),s}function DS(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),s}function LS(i){const e={},s=c(i,["config"]);return s!=null&&NS(s,e),e}function kS(i){const e={},s=c(i,["config"]);return s!=null&&DS(s,e),e}function PS(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=c(i,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),d(e,["cachedContents"],u)}return e}function FS(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=c(i,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),d(e,["cachedContents"],u)}return e}function US(i){const e={},s=c(i,["mediaResolution"]);s!=null&&d(e,["mediaResolution"],s);const o=c(i,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=c(i,["executableCode"]);r!=null&&d(e,["executableCode"],r);const u=c(i,["fileData"]);u!=null&&d(e,["fileData"],bS(u));const f=c(i,["functionCall"]);f!=null&&d(e,["functionCall"],CS(f));const p=c(i,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const v=c(i,["inlineData"]);v!=null&&d(e,["inlineData"],pS(v));const h=c(i,["text"]);h!=null&&d(e,["text"],h);const g=c(i,["thought"]);g!=null&&d(e,["thought"],g);const A=c(i,["thoughtSignature"]);A!=null&&d(e,["thoughtSignature"],A);const T=c(i,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function HS(i){const e={},s=c(i,["retrievalConfig"]);s!=null&&d(e,["retrievalConfig"],s);const o=c(i,["functionCallingConfig"]);return o!=null&&d(e,["functionCallingConfig"],xS(o)),e}function GS(i){const e={};if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["computerUse"]);s!=null&&d(e,["computerUse"],s);const o=c(i,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=c(i,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(i,["functionDeclarations"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(A=>A)),d(e,["functionDeclarations"],g)}const f=c(i,["googleMaps"]);f!=null&&d(e,["googleMaps"],MS(f));const p=c(i,["googleSearch"]);p!=null&&d(e,["googleSearch"],IS(p));const v=c(i,["googleSearchRetrieval"]);v!=null&&d(e,["googleSearchRetrieval"],v);const h=c(i,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function OS(i){const e={},s=c(i,["retrieval"]);s!=null&&d(e,["retrieval"],s);const o=c(i,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(i,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const u=c(i,["enterpriseWebSearch"]);u!=null&&d(e,["enterpriseWebSearch"],u);const f=c(i,["functionDeclarations"]);if(f!=null){let A=f;Array.isArray(A)&&(A=A.map(T=>wS(T))),d(e,["functionDeclarations"],A)}const p=c(i,["googleMaps"]);p!=null&&d(e,["googleMaps"],p);const v=c(i,["googleSearch"]);v!=null&&d(e,["googleSearch"],v);const h=c(i,["googleSearchRetrieval"]);h!=null&&d(e,["googleSearchRetrieval"],h);const g=c(i,["urlContext"]);return g!=null&&d(e,["urlContext"],g),e}function VS(i,e){const s={},o=c(i,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=c(i,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),s}function BS(i,e){const s={},o=c(i,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=c(i,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),s}function zS(i,e){const s={},o=c(e,["name"]);o!=null&&d(s,["_url","name"],si(i,o));const r=c(e,["config"]);return r!=null&&VS(r,s),s}function qS(i,e){const s={},o=c(e,["name"]);o!=null&&d(s,["_url","name"],si(i,o));const r=c(e,["config"]);return r!=null&&BS(r,s),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YS extends ii{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new es(ni.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(s),s)}async create(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=vS(this.apiClient,e);return p=It("cachedContents",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),f.then(g=>g)}else{const h=yS(this.apiClient,e);return p=It("cachedContents",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),f.then(g=>g)}}async get(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=RS(this.apiClient,e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),f.then(g=>g)}else{const h=_S(this.apiClient,e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),f.then(g=>g)}}async delete(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=SS(this.apiClient,e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=ES(g),T=new Mm;return Object.assign(T,A),T})}else{const h=AS(this.apiClient,e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=TS(g),T=new Mm;return Object.assign(T,A),T})}}async update(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=qS(this.apiClient,e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),f.then(g=>g)}else{const h=zS(this.apiClient,e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),f.then(g=>g)}}async listInternal(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=kS(e);return p=It("cachedContents",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=FS(g),T=new Im;return Object.assign(T,A),T})}else{const h=LS(e);return p=It("cachedContents",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=PS(g),T=new Im;return Object.assign(T,A),T})}}}function pr(i,e){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(i);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(i,o[r])&&(s[o[r]]=i[o[r]]);return s}function Um(i){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&i[e],o=0;if(s)return s.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bt(i){return this instanceof Bt?(this.v=i,this):new Bt(i)}function Rn(i,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=s.apply(i,e||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",f),r[Symbol.asyncIterator]=function(){return this},r;function f(_){return function(C){return Promise.resolve(C).then(_,A)}}function p(_,C){o[_]&&(r[_]=function(M){return new Promise(function(y,x){u.push([_,M,y,x])>1||v(_,M)})},C&&(r[_]=C(r[_])))}function v(_,C){try{h(o[_](C))}catch(M){T(u[0][3],M)}}function h(_){_.value instanceof Bt?Promise.resolve(_.value.v).then(g,A):T(u[0][2],_)}function g(_){v("next",_)}function A(_){v("throw",_)}function T(_,C){_(C),u.shift(),u.length&&v(u[0][0],u[0][1])}}function Mn(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],s;return e?e.call(i):(i=typeof Um=="function"?Um(i):i[Symbol.iterator](),s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s);function o(u){s[u]=i[u]&&function(f){return new Promise(function(p,v){f=i[u](f),r(p,v,f.done,f.value)})}}function r(u,f,p,v){Promise.resolve(v).then(function(h){u({value:h,done:p})},f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XS(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const s=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return s===void 0?!1:Ag(s)}function Ag(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function JS(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Hm(i){if(i===void 0||i.length===0)return[];const e=[],s=i.length;let o=0;for(;o<s;)if(i[o].role==="user")e.push(i[o]),o++;else{const r=[];let u=!0;for(;o<s&&i[o].role==="model";)r.push(i[o]),u&&!Ag(i[o])&&(u=!1),o++;u?e.push(...r):e.pop()}return e}class $S{constructor(e,s){this.modelsModule=e,this.apiClient=s}create(e){return new KS(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class KS{constructor(e,s,o,r={},u=[]){this.apiClient=e,this.modelsModule=s,this.model=o,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),JS(u)}async sendMessage(e){var s;await this.sendPromise;const o=Ye(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(s=e.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var u,f,p;const v=await r,h=(f=(u=v.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content,g=v.automaticFunctionCallingHistory,A=this.getHistory(!0).length;let T=[];g!=null&&(T=(p=g.slice(A))!==null&&p!==void 0?p:[]);const _=h?[h]:[];this.recordHistory(o,_,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var s;await this.sendPromise;const o=Ye(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(s=e.config)!==null&&s!==void 0?s:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,o)}getHistory(e=!1){const s=e?Hm(this.history):this.history;return structuredClone(s)}processStreamResponse(e,s){return Rn(this,arguments,function*(){var r,u,f,p,v,h;const g=[];try{for(var A=!0,T=Mn(e),_;_=yield Bt(T.next()),r=_.done,!r;A=!0){p=_.value,A=!1;const C=p;if(XS(C)){const M=(h=(v=C.candidates)===null||v===void 0?void 0:v[0])===null||h===void 0?void 0:h.content;M!==void 0&&g.push(M)}yield yield Bt(C)}}catch(C){u={error:C}}finally{try{!A&&!r&&(f=T.return)&&(yield Bt(f.call(T)))}finally{if(u)throw u.error}}this.recordHistory(s,g)})}recordHistory(e,s,o){let r=[];s.length>0&&s.every(u=>u.role!==void 0)?r=s:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Hm(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yo extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Yo.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QS(i){const e={},s=c(i,["file"]);return s!=null&&d(e,["file"],s),e}function ZS(i){const e={},s=c(i,["sdkHttpResponse"]);return s!=null&&d(e,["sdkHttpResponse"],s),e}function WS(i){const e={},s=c(i,["name"]);return s!=null&&d(e,["_url","file"],fg(s)),e}function jS(i){const e={},s=c(i,["sdkHttpResponse"]);return s!=null&&d(e,["sdkHttpResponse"],s),e}function tT(i){const e={},s=c(i,["name"]);return s!=null&&d(e,["_url","file"],fg(s)),e}function eT(i){const e={},s=c(i,["uris"]);return s!=null&&d(e,["uris"],s),e}function nT(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),s}function iT(i){const e={},s=c(i,["config"]);return s!=null&&nT(s,e),e}function sT(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=c(i,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),d(e,["files"],u)}return e}function oT(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["files"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>u)),d(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aT extends ii{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new es(ni.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(s),s)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(s=>s)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=iT(e);return u=It("files",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:v.headers},g})),r.then(v=>{const h=sT(v),g=new rA;return Object.assign(g,h),g})}}async createInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=QS(e);return u=It("upload/v1beta/files",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>{const h=ZS(v),g=new lA;return Object.assign(g,h),g})}}async get(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=tT(e);return u=It("files/{file}",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=WS(e);return u=It("files/{file}",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:v.headers},g})),r.then(v=>{const h=jS(v),g=new uA;return Object.assign(g,h),g})}}async registerFilesInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=eT(e);return u=It("files:register",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>{const h=oT(v),g=new cA;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cr(i){const e={},s=c(i,["data"]);if(s!=null&&d(e,["data"],s),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function rT(i){const e={},s=c(i,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>bT(u))),d(e,["parts"],r)}const o=c(i,["role"]);return o!=null&&d(e,["role"],o),e}function lT(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["fileUri"]);s!=null&&d(e,["fileUri"],s);const o=c(i,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function uT(i){const e={},s=c(i,["id"]);s!=null&&d(e,["id"],s);const o=c(i,["args"]);o!=null&&d(e,["args"],o);const r=c(i,["name"]);if(r!=null&&d(e,["name"],r),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function cT(i){const e={},s=c(i,["description"]);s!=null&&d(e,["description"],s);const o=c(i,["name"]);o!=null&&d(e,["name"],o);const r=c(i,["parameters"]);r!=null&&d(e,["parameters"],r);const u=c(i,["parametersJsonSchema"]);u!=null&&d(e,["parametersJsonSchema"],u);const f=c(i,["response"]);f!=null&&d(e,["response"],f);const p=c(i,["responseJsonSchema"]);if(p!=null&&d(e,["responseJsonSchema"],p),c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function dT(i){const e={},s=c(i,["modelSelectionConfig"]);s!=null&&d(e,["modelConfig"],s);const o=c(i,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const r=c(i,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const u=c(i,["candidateCount"]);u!=null&&d(e,["candidateCount"],u);const f=c(i,["enableAffectiveDialog"]);f!=null&&d(e,["enableAffectiveDialog"],f);const p=c(i,["frequencyPenalty"]);p!=null&&d(e,["frequencyPenalty"],p);const v=c(i,["logprobs"]);v!=null&&d(e,["logprobs"],v);const h=c(i,["maxOutputTokens"]);h!=null&&d(e,["maxOutputTokens"],h);const g=c(i,["mediaResolution"]);g!=null&&d(e,["mediaResolution"],g);const A=c(i,["presencePenalty"]);A!=null&&d(e,["presencePenalty"],A);const T=c(i,["responseLogprobs"]);T!=null&&d(e,["responseLogprobs"],T);const _=c(i,["responseMimeType"]);_!=null&&d(e,["responseMimeType"],_);const C=c(i,["responseModalities"]);C!=null&&d(e,["responseModalities"],C);const M=c(i,["responseSchema"]);M!=null&&d(e,["responseSchema"],M);const y=c(i,["routingConfig"]);y!=null&&d(e,["routingConfig"],y);const x=c(i,["seed"]);x!=null&&d(e,["seed"],x);const I=c(i,["speechConfig"]);I!=null&&d(e,["speechConfig"],I);const F=c(i,["stopSequences"]);F!=null&&d(e,["stopSequences"],F);const P=c(i,["temperature"]);P!=null&&d(e,["temperature"],P);const H=c(i,["thinkingConfig"]);H!=null&&d(e,["thinkingConfig"],H);const O=c(i,["topK"]);O!=null&&d(e,["topK"],O);const z=c(i,["topP"]);if(z!=null&&d(e,["topP"],z),c(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function fT(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(i,["enableWidget"]);return s!=null&&d(e,["enableWidget"],s),e}function hT(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=c(i,["timeRangeFilter"]);return s!=null&&d(e,["timeRangeFilter"],s),e}function pT(i,e){const s={},o=c(i,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const r=c(i,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const u=c(i,["temperature"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","temperature"],u);const f=c(i,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const p=c(i,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const v=c(i,["maxOutputTokens"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","maxOutputTokens"],v);const h=c(i,["mediaResolution"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","mediaResolution"],h);const g=c(i,["seed"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","seed"],g);const A=c(i,["speechConfig"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","speechConfig"],hc(A));const T=c(i,["thinkingConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","thinkingConfig"],T);const _=c(i,["enableAffectiveDialog"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],_);const C=c(i,["systemInstruction"]);e!==void 0&&C!=null&&d(e,["setup","systemInstruction"],rT(Ye(C)));const M=c(i,["tools"]);if(e!==void 0&&M!=null){let O=$s(M);Array.isArray(O)&&(O=O.map(z=>xT(Js(z)))),d(e,["setup","tools"],O)}const y=c(i,["sessionResumption"]);e!==void 0&&y!=null&&d(e,["setup","sessionResumption"],CT(y));const x=c(i,["inputAudioTranscription"]);e!==void 0&&x!=null&&d(e,["setup","inputAudioTranscription"],x);const I=c(i,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],I);const F=c(i,["realtimeInputConfig"]);e!==void 0&&F!=null&&d(e,["setup","realtimeInputConfig"],F);const P=c(i,["contextWindowCompression"]);e!==void 0&&P!=null&&d(e,["setup","contextWindowCompression"],P);const H=c(i,["proactivity"]);if(e!==void 0&&H!=null&&d(e,["setup","proactivity"],H),c(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function mT(i,e){const s={},o=c(i,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],dT(o));const r=c(i,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const u=c(i,["temperature"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","temperature"],u);const f=c(i,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const p=c(i,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const v=c(i,["maxOutputTokens"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","maxOutputTokens"],v);const h=c(i,["mediaResolution"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","mediaResolution"],h);const g=c(i,["seed"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","seed"],g);const A=c(i,["speechConfig"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","speechConfig"],hc(A));const T=c(i,["thinkingConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","thinkingConfig"],T);const _=c(i,["enableAffectiveDialog"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],_);const C=c(i,["systemInstruction"]);e!==void 0&&C!=null&&d(e,["setup","systemInstruction"],Ye(C));const M=c(i,["tools"]);if(e!==void 0&&M!=null){let z=$s(M);Array.isArray(z)&&(z=z.map(it=>wT(Js(it)))),d(e,["setup","tools"],z)}const y=c(i,["sessionResumption"]);e!==void 0&&y!=null&&d(e,["setup","sessionResumption"],y);const x=c(i,["inputAudioTranscription"]);e!==void 0&&x!=null&&d(e,["setup","inputAudioTranscription"],x);const I=c(i,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],I);const F=c(i,["realtimeInputConfig"]);e!==void 0&&F!=null&&d(e,["setup","realtimeInputConfig"],F);const P=c(i,["contextWindowCompression"]);e!==void 0&&P!=null&&d(e,["setup","contextWindowCompression"],P);const H=c(i,["proactivity"]);e!==void 0&&H!=null&&d(e,["setup","proactivity"],H);const O=c(i,["explicitVadSignal"]);return e!==void 0&&O!=null&&d(e,["setup","explicitVadSignal"],O),s}function gT(i,e){const s={},o=c(e,["model"]);o!=null&&d(s,["setup","model"],ne(i,o));const r=c(e,["config"]);return r!=null&&d(s,["config"],pT(r,s)),s}function yT(i,e){const s={},o=c(e,["model"]);o!=null&&d(s,["setup","model"],ne(i,o));const r=c(e,["config"]);return r!=null&&d(s,["config"],mT(r,s)),s}function vT(i){const e={},s=c(i,["musicGenerationConfig"]);return s!=null&&d(e,["musicGenerationConfig"],s),e}function AT(i){const e={},s=c(i,["weightedPrompts"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>r)),d(e,["weightedPrompts"],o)}return e}function ST(i){const e={},s=c(i,["media"]);if(s!=null){let h=rg(s);Array.isArray(h)&&(h=h.map(g=>cr(g))),d(e,["mediaChunks"],h)}const o=c(i,["audio"]);o!=null&&d(e,["audio"],cr(ug(o)));const r=c(i,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const u=c(i,["video"]);u!=null&&d(e,["video"],cr(lg(u)));const f=c(i,["text"]);f!=null&&d(e,["text"],f);const p=c(i,["activityStart"]);p!=null&&d(e,["activityStart"],p);const v=c(i,["activityEnd"]);return v!=null&&d(e,["activityEnd"],v),e}function TT(i){const e={},s=c(i,["media"]);if(s!=null){let h=rg(s);Array.isArray(h)&&(h=h.map(g=>g)),d(e,["mediaChunks"],h)}const o=c(i,["audio"]);o!=null&&d(e,["audio"],ug(o));const r=c(i,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const u=c(i,["video"]);u!=null&&d(e,["video"],lg(u));const f=c(i,["text"]);f!=null&&d(e,["text"],f);const p=c(i,["activityStart"]);p!=null&&d(e,["activityStart"],p);const v=c(i,["activityEnd"]);return v!=null&&d(e,["activityEnd"],v),e}function ET(i){const e={},s=c(i,["setupComplete"]);s!=null&&d(e,["setupComplete"],s);const o=c(i,["serverContent"]);o!=null&&d(e,["serverContent"],o);const r=c(i,["toolCall"]);r!=null&&d(e,["toolCall"],r);const u=c(i,["toolCallCancellation"]);u!=null&&d(e,["toolCallCancellation"],u);const f=c(i,["usageMetadata"]);f!=null&&d(e,["usageMetadata"],_T(f));const p=c(i,["goAway"]);p!=null&&d(e,["goAway"],p);const v=c(i,["sessionResumptionUpdate"]);v!=null&&d(e,["sessionResumptionUpdate"],v);const h=c(i,["voiceActivityDetectionSignal"]);h!=null&&d(e,["voiceActivityDetectionSignal"],h);const g=c(i,["voiceActivity"]);return g!=null&&d(e,["voiceActivity"],RT(g)),e}function bT(i){const e={},s=c(i,["mediaResolution"]);s!=null&&d(e,["mediaResolution"],s);const o=c(i,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=c(i,["executableCode"]);r!=null&&d(e,["executableCode"],r);const u=c(i,["fileData"]);u!=null&&d(e,["fileData"],lT(u));const f=c(i,["functionCall"]);f!=null&&d(e,["functionCall"],uT(f));const p=c(i,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const v=c(i,["inlineData"]);v!=null&&d(e,["inlineData"],cr(v));const h=c(i,["text"]);h!=null&&d(e,["text"],h);const g=c(i,["thought"]);g!=null&&d(e,["thought"],g);const A=c(i,["thoughtSignature"]);A!=null&&d(e,["thoughtSignature"],A);const T=c(i,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function CT(i){const e={},s=c(i,["handle"]);if(s!=null&&d(e,["handle"],s),c(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function xT(i){const e={};if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["computerUse"]);s!=null&&d(e,["computerUse"],s);const o=c(i,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=c(i,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(i,["functionDeclarations"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(A=>A)),d(e,["functionDeclarations"],g)}const f=c(i,["googleMaps"]);f!=null&&d(e,["googleMaps"],fT(f));const p=c(i,["googleSearch"]);p!=null&&d(e,["googleSearch"],hT(p));const v=c(i,["googleSearchRetrieval"]);v!=null&&d(e,["googleSearchRetrieval"],v);const h=c(i,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function wT(i){const e={},s=c(i,["retrieval"]);s!=null&&d(e,["retrieval"],s);const o=c(i,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=c(i,["codeExecution"]);r!=null&&d(e,["codeExecution"],r);const u=c(i,["enterpriseWebSearch"]);u!=null&&d(e,["enterpriseWebSearch"],u);const f=c(i,["functionDeclarations"]);if(f!=null){let A=f;Array.isArray(A)&&(A=A.map(T=>cT(T))),d(e,["functionDeclarations"],A)}const p=c(i,["googleMaps"]);p!=null&&d(e,["googleMaps"],p);const v=c(i,["googleSearch"]);v!=null&&d(e,["googleSearch"],v);const h=c(i,["googleSearchRetrieval"]);h!=null&&d(e,["googleSearchRetrieval"],h);const g=c(i,["urlContext"]);return g!=null&&d(e,["urlContext"],g),e}function _T(i){const e={},s=c(i,["promptTokenCount"]);s!=null&&d(e,["promptTokenCount"],s);const o=c(i,["cachedContentTokenCount"]);o!=null&&d(e,["cachedContentTokenCount"],o);const r=c(i,["candidatesTokenCount"]);r!=null&&d(e,["responseTokenCount"],r);const u=c(i,["toolUsePromptTokenCount"]);u!=null&&d(e,["toolUsePromptTokenCount"],u);const f=c(i,["thoughtsTokenCount"]);f!=null&&d(e,["thoughtsTokenCount"],f);const p=c(i,["totalTokenCount"]);p!=null&&d(e,["totalTokenCount"],p);const v=c(i,["promptTokensDetails"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(C=>C)),d(e,["promptTokensDetails"],_)}const h=c(i,["cacheTokensDetails"]);if(h!=null){let _=h;Array.isArray(_)&&(_=_.map(C=>C)),d(e,["cacheTokensDetails"],_)}const g=c(i,["candidatesTokensDetails"]);if(g!=null){let _=g;Array.isArray(_)&&(_=_.map(C=>C)),d(e,["responseTokensDetails"],_)}const A=c(i,["toolUsePromptTokensDetails"]);if(A!=null){let _=A;Array.isArray(_)&&(_=_.map(C=>C)),d(e,["toolUsePromptTokensDetails"],_)}const T=c(i,["trafficType"]);return T!=null&&d(e,["trafficType"],T),e}function RT(i){const e={},s=c(i,["type"]);return s!=null&&d(e,["voiceActivityType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MT(i,e){const s={},o=c(i,["data"]);if(o!=null&&d(s,["data"],o),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=c(i,["mimeType"]);return r!=null&&d(s,["mimeType"],r),s}function IT(i,e){const s={},o=c(i,["content"]);o!=null&&d(s,["content"],o);const r=c(i,["citationMetadata"]);r!=null&&d(s,["citationMetadata"],NT(r));const u=c(i,["tokenCount"]);u!=null&&d(s,["tokenCount"],u);const f=c(i,["finishReason"]);f!=null&&d(s,["finishReason"],f);const p=c(i,["avgLogprobs"]);p!=null&&d(s,["avgLogprobs"],p);const v=c(i,["groundingMetadata"]);v!=null&&d(s,["groundingMetadata"],v);const h=c(i,["index"]);h!=null&&d(s,["index"],h);const g=c(i,["logprobsResult"]);g!=null&&d(s,["logprobsResult"],g);const A=c(i,["safetyRatings"]);if(A!=null){let _=A;Array.isArray(_)&&(_=_.map(C=>C)),d(s,["safetyRatings"],_)}const T=c(i,["urlContextMetadata"]);return T!=null&&d(s,["urlContextMetadata"],T),s}function NT(i,e){const s={},o=c(i,["citationSources"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>u)),d(s,["citations"],r)}return s}function DT(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["contents"]);if(u!=null){let f=En(u);Array.isArray(f)&&(f=f.map(p=>p)),d(o,["contents"],f)}return o}function LT(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["tokensInfo"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),d(s,["tokensInfo"],u)}return s}function kT(i,e){const s={},o=c(i,["values"]);o!=null&&d(s,["values"],o);const r=c(i,["statistics"]);return r!=null&&d(s,["statistics"],PT(r)),s}function PT(i,e){const s={},o=c(i,["truncated"]);o!=null&&d(s,["truncated"],o);const r=c(i,["token_count"]);return r!=null&&d(s,["tokenCount"],r),s}function vr(i,e){const s={},o=c(i,["parts"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>qE(f))),d(s,["parts"],u)}const r=c(i,["role"]);return r!=null&&d(s,["role"],r),s}function FT(i,e){const s={},o=c(i,["controlType"]);o!=null&&d(s,["controlType"],o);const r=c(i,["enableControlImageComputation"]);return r!=null&&d(s,["computeControl"],r),s}function UT(i,e){const s={};if(c(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return s}function HT(i,e,s){const o={},r=c(i,["systemInstruction"]);e!==void 0&&r!=null&&d(e,["systemInstruction"],Ye(r));const u=c(i,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(v=>bg(v))),d(e,["tools"],p)}const f=c(i,["generationConfig"]);return e!==void 0&&f!=null&&d(e,["generationConfig"],ME(f)),o}function GT(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["contents"]);if(u!=null){let p=En(u);Array.isArray(p)&&(p=p.map(v=>vr(v))),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&UT(f),o}function OT(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["contents"]);if(u!=null){let p=En(u);Array.isArray(p)&&(p=p.map(v=>v)),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&HT(f,o),o}function VT(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["totalTokens"]);r!=null&&d(s,["totalTokens"],r);const u=c(i,["cachedContentTokenCount"]);return u!=null&&d(s,["cachedContentTokenCount"],u),s}function BT(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["totalTokens"]);return r!=null&&d(s,["totalTokens"],r),s}function zT(i,e,s){const o={},r=c(e,["model"]);return r!=null&&d(o,["_url","name"],ne(i,r)),o}function qT(i,e,s){const o={},r=c(e,["model"]);return r!=null&&d(o,["_url","name"],ne(i,r)),o}function YT(i,e){const s={},o=c(i,["sdkHttpResponse"]);return o!=null&&d(s,["sdkHttpResponse"],o),s}function XT(i,e){const s={},o=c(i,["sdkHttpResponse"]);return o!=null&&d(s,["sdkHttpResponse"],o),s}function JT(i,e,s){const o={},r=c(i,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const u=c(i,["negativePrompt"]);e!==void 0&&u!=null&&d(e,["parameters","negativePrompt"],u);const f=c(i,["numberOfImages"]);e!==void 0&&f!=null&&d(e,["parameters","sampleCount"],f);const p=c(i,["aspectRatio"]);e!==void 0&&p!=null&&d(e,["parameters","aspectRatio"],p);const v=c(i,["guidanceScale"]);e!==void 0&&v!=null&&d(e,["parameters","guidanceScale"],v);const h=c(i,["seed"]);e!==void 0&&h!=null&&d(e,["parameters","seed"],h);const g=c(i,["safetyFilterLevel"]);e!==void 0&&g!=null&&d(e,["parameters","safetySetting"],g);const A=c(i,["personGeneration"]);e!==void 0&&A!=null&&d(e,["parameters","personGeneration"],A);const T=c(i,["includeSafetyAttributes"]);e!==void 0&&T!=null&&d(e,["parameters","includeSafetyAttributes"],T);const _=c(i,["includeRaiReason"]);e!==void 0&&_!=null&&d(e,["parameters","includeRaiReason"],_);const C=c(i,["language"]);e!==void 0&&C!=null&&d(e,["parameters","language"],C);const M=c(i,["outputMimeType"]);e!==void 0&&M!=null&&d(e,["parameters","outputOptions","mimeType"],M);const y=c(i,["outputCompressionQuality"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","compressionQuality"],y);const x=c(i,["addWatermark"]);e!==void 0&&x!=null&&d(e,["parameters","addWatermark"],x);const I=c(i,["labels"]);e!==void 0&&I!=null&&d(e,["labels"],I);const F=c(i,["editMode"]);e!==void 0&&F!=null&&d(e,["parameters","editMode"],F);const P=c(i,["baseSteps"]);return e!==void 0&&P!=null&&d(e,["parameters","editConfig","baseSteps"],P),o}function $T(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["prompt"]);u!=null&&d(o,["instances[0]","prompt"],u);const f=c(e,["referenceImages"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(h=>QE(h))),d(o,["instances[0]","referenceImages"],v)}const p=c(e,["config"]);return p!=null&&JT(p,o),o}function KT(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>Ar(f))),d(s,["generatedImages"],u)}return s}function QT(i,e,s){const o={},r=c(i,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);const u=c(i,["title"]);e!==void 0&&u!=null&&d(e,["requests[]","title"],u);const f=c(i,["outputDimensionality"]);if(e!==void 0&&f!=null&&d(e,["requests[]","outputDimensionality"],f),c(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return o}function ZT(i,e,s){const o={},r=c(i,["taskType"]);e!==void 0&&r!=null&&d(e,["instances[]","task_type"],r);const u=c(i,["title"]);e!==void 0&&u!=null&&d(e,["instances[]","title"],u);const f=c(i,["outputDimensionality"]);e!==void 0&&f!=null&&d(e,["parameters","outputDimensionality"],f);const p=c(i,["mimeType"]);e!==void 0&&p!=null&&d(e,["instances[]","mimeType"],p);const v=c(i,["autoTruncate"]);return e!==void 0&&v!=null&&d(e,["parameters","autoTruncate"],v),o}function WT(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["contents"]);if(u!=null){let v=cc(i,u);Array.isArray(v)&&(v=v.map(h=>h)),d(o,["requests[]","content"],v)}const f=c(e,["config"]);f!=null&&QT(f,o);const p=c(e,["model"]);return p!==void 0&&d(o,["requests[]","model"],ne(i,p)),o}function jT(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["contents"]);if(u!=null){let p=cc(i,u);Array.isArray(p)&&(p=p.map(v=>v)),d(o,["instances[]","content"],p)}const f=c(e,["config"]);return f!=null&&ZT(f,o),o}function tE(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["embeddings"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>p)),d(s,["embeddings"],f)}const u=c(i,["metadata"]);return u!=null&&d(s,["metadata"],u),s}function eE(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["predictions[]","embeddings"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>kT(p))),d(s,["embeddings"],f)}const u=c(i,["metadata"]);return u!=null&&d(s,["metadata"],u),s}function nE(i,e){const s={},o=c(i,["endpoint"]);o!=null&&d(s,["name"],o);const r=c(i,["deployedModelId"]);return r!=null&&d(s,["deployedModelId"],r),s}function iE(i,e){const s={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["fileUri"]);o!=null&&d(s,["fileUri"],o);const r=c(i,["mimeType"]);return r!=null&&d(s,["mimeType"],r),s}function sE(i,e){const s={},o=c(i,["id"]);o!=null&&d(s,["id"],o);const r=c(i,["args"]);r!=null&&d(s,["args"],r);const u=c(i,["name"]);if(u!=null&&d(s,["name"],u),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return s}function oE(i,e){const s={},o=c(i,["allowedFunctionNames"]);o!=null&&d(s,["allowedFunctionNames"],o);const r=c(i,["mode"]);if(r!=null&&d(s,["mode"],r),c(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return s}function aE(i,e){const s={},o=c(i,["description"]);o!=null&&d(s,["description"],o);const r=c(i,["name"]);r!=null&&d(s,["name"],r);const u=c(i,["parameters"]);u!=null&&d(s,["parameters"],u);const f=c(i,["parametersJsonSchema"]);f!=null&&d(s,["parametersJsonSchema"],f);const p=c(i,["response"]);p!=null&&d(s,["response"],p);const v=c(i,["responseJsonSchema"]);if(v!=null&&d(s,["responseJsonSchema"],v),c(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return s}function rE(i,e,s,o){const r={},u=c(e,["systemInstruction"]);s!==void 0&&u!=null&&d(s,["systemInstruction"],vr(Ye(u)));const f=c(e,["temperature"]);f!=null&&d(r,["temperature"],f);const p=c(e,["topP"]);p!=null&&d(r,["topP"],p);const v=c(e,["topK"]);v!=null&&d(r,["topK"],v);const h=c(e,["candidateCount"]);h!=null&&d(r,["candidateCount"],h);const g=c(e,["maxOutputTokens"]);g!=null&&d(r,["maxOutputTokens"],g);const A=c(e,["stopSequences"]);A!=null&&d(r,["stopSequences"],A);const T=c(e,["responseLogprobs"]);T!=null&&d(r,["responseLogprobs"],T);const _=c(e,["logprobs"]);_!=null&&d(r,["logprobs"],_);const C=c(e,["presencePenalty"]);C!=null&&d(r,["presencePenalty"],C);const M=c(e,["frequencyPenalty"]);M!=null&&d(r,["frequencyPenalty"],M);const y=c(e,["seed"]);y!=null&&d(r,["seed"],y);const x=c(e,["responseMimeType"]);x!=null&&d(r,["responseMimeType"],x);const I=c(e,["responseSchema"]);I!=null&&d(r,["responseSchema"],dc(I));const F=c(e,["responseJsonSchema"]);if(F!=null&&d(r,["responseJsonSchema"],F),c(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const P=c(e,["safetySettings"]);if(s!==void 0&&P!=null){let Tt=P;Array.isArray(Tt)&&(Tt=Tt.map(X=>ZE(X))),d(s,["safetySettings"],Tt)}const H=c(e,["tools"]);if(s!==void 0&&H!=null){let Tt=$s(H);Array.isArray(Tt)&&(Tt=Tt.map(X=>sb(Js(X)))),d(s,["tools"],Tt)}const O=c(e,["toolConfig"]);if(s!==void 0&&O!=null&&d(s,["toolConfig"],ib(O)),c(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const z=c(e,["cachedContent"]);s!==void 0&&z!=null&&d(s,["cachedContent"],si(i,z));const it=c(e,["responseModalities"]);it!=null&&d(r,["responseModalities"],it);const W=c(e,["mediaResolution"]);W!=null&&d(r,["mediaResolution"],W);const ut=c(e,["speechConfig"]);if(ut!=null&&d(r,["speechConfig"],fc(ut)),c(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const pt=c(e,["thinkingConfig"]);pt!=null&&d(r,["thinkingConfig"],pt);const xt=c(e,["imageConfig"]);xt!=null&&d(r,["imageConfig"],kE(xt));const Mt=c(e,["enableEnhancedCivicAnswers"]);if(Mt!=null&&d(r,["enableEnhancedCivicAnswers"],Mt),c(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function lE(i,e,s,o){const r={},u=c(e,["systemInstruction"]);s!==void 0&&u!=null&&d(s,["systemInstruction"],Ye(u));const f=c(e,["temperature"]);f!=null&&d(r,["temperature"],f);const p=c(e,["topP"]);p!=null&&d(r,["topP"],p);const v=c(e,["topK"]);v!=null&&d(r,["topK"],v);const h=c(e,["candidateCount"]);h!=null&&d(r,["candidateCount"],h);const g=c(e,["maxOutputTokens"]);g!=null&&d(r,["maxOutputTokens"],g);const A=c(e,["stopSequences"]);A!=null&&d(r,["stopSequences"],A);const T=c(e,["responseLogprobs"]);T!=null&&d(r,["responseLogprobs"],T);const _=c(e,["logprobs"]);_!=null&&d(r,["logprobs"],_);const C=c(e,["presencePenalty"]);C!=null&&d(r,["presencePenalty"],C);const M=c(e,["frequencyPenalty"]);M!=null&&d(r,["frequencyPenalty"],M);const y=c(e,["seed"]);y!=null&&d(r,["seed"],y);const x=c(e,["responseMimeType"]);x!=null&&d(r,["responseMimeType"],x);const I=c(e,["responseSchema"]);I!=null&&d(r,["responseSchema"],dc(I));const F=c(e,["responseJsonSchema"]);F!=null&&d(r,["responseJsonSchema"],F);const P=c(e,["routingConfig"]);P!=null&&d(r,["routingConfig"],P);const H=c(e,["modelSelectionConfig"]);H!=null&&d(r,["modelConfig"],H);const O=c(e,["safetySettings"]);if(s!==void 0&&O!=null){let lt=O;Array.isArray(lt)&&(lt=lt.map(gt=>gt)),d(s,["safetySettings"],lt)}const z=c(e,["tools"]);if(s!==void 0&&z!=null){let lt=$s(z);Array.isArray(lt)&&(lt=lt.map(gt=>bg(Js(gt)))),d(s,["tools"],lt)}const it=c(e,["toolConfig"]);s!==void 0&&it!=null&&d(s,["toolConfig"],it);const W=c(e,["labels"]);s!==void 0&&W!=null&&d(s,["labels"],W);const ut=c(e,["cachedContent"]);s!==void 0&&ut!=null&&d(s,["cachedContent"],si(i,ut));const pt=c(e,["responseModalities"]);pt!=null&&d(r,["responseModalities"],pt);const xt=c(e,["mediaResolution"]);xt!=null&&d(r,["mediaResolution"],xt);const Mt=c(e,["speechConfig"]);Mt!=null&&d(r,["speechConfig"],fc(Mt));const Tt=c(e,["audioTimestamp"]);Tt!=null&&d(r,["audioTimestamp"],Tt);const X=c(e,["thinkingConfig"]);X!=null&&d(r,["thinkingConfig"],X);const B=c(e,["imageConfig"]);if(B!=null&&d(r,["imageConfig"],PE(B)),c(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const et=c(e,["modelArmorConfig"]);return s!==void 0&&et!=null&&d(s,["modelArmorConfig"],et),r}function Gm(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["contents"]);if(u!=null){let p=En(u);Array.isArray(p)&&(p=p.map(v=>vr(v))),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&d(o,["generationConfig"],rE(i,f,o)),o}function Om(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["contents"]);if(u!=null){let p=En(u);Array.isArray(p)&&(p=p.map(v=>v)),d(o,["contents"],p)}const f=c(e,["config"]);return f!=null&&d(o,["generationConfig"],lE(i,f,o)),o}function Vm(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["candidates"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(g=>IT(g))),d(s,["candidates"],h)}const u=c(i,["modelVersion"]);u!=null&&d(s,["modelVersion"],u);const f=c(i,["promptFeedback"]);f!=null&&d(s,["promptFeedback"],f);const p=c(i,["responseId"]);p!=null&&d(s,["responseId"],p);const v=c(i,["usageMetadata"]);return v!=null&&d(s,["usageMetadata"],v),s}function Bm(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["candidates"]);if(r!=null){let g=r;Array.isArray(g)&&(g=g.map(A=>A)),d(s,["candidates"],g)}const u=c(i,["createTime"]);u!=null&&d(s,["createTime"],u);const f=c(i,["modelVersion"]);f!=null&&d(s,["modelVersion"],f);const p=c(i,["promptFeedback"]);p!=null&&d(s,["promptFeedback"],p);const v=c(i,["responseId"]);v!=null&&d(s,["responseId"],v);const h=c(i,["usageMetadata"]);return h!=null&&d(s,["usageMetadata"],h),s}function uE(i,e,s){const o={};if(c(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=c(i,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const u=c(i,["aspectRatio"]);e!==void 0&&u!=null&&d(e,["parameters","aspectRatio"],u);const f=c(i,["guidanceScale"]);if(e!==void 0&&f!=null&&d(e,["parameters","guidanceScale"],f),c(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const p=c(i,["safetyFilterLevel"]);e!==void 0&&p!=null&&d(e,["parameters","safetySetting"],p);const v=c(i,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const h=c(i,["includeSafetyAttributes"]);e!==void 0&&h!=null&&d(e,["parameters","includeSafetyAttributes"],h);const g=c(i,["includeRaiReason"]);e!==void 0&&g!=null&&d(e,["parameters","includeRaiReason"],g);const A=c(i,["language"]);e!==void 0&&A!=null&&d(e,["parameters","language"],A);const T=c(i,["outputMimeType"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","mimeType"],T);const _=c(i,["outputCompressionQuality"]);if(e!==void 0&&_!=null&&d(e,["parameters","outputOptions","compressionQuality"],_),c(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=c(i,["imageSize"]);if(e!==void 0&&C!=null&&d(e,["parameters","sampleImageSize"],C),c(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return o}function cE(i,e,s){const o={},r=c(i,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const u=c(i,["negativePrompt"]);e!==void 0&&u!=null&&d(e,["parameters","negativePrompt"],u);const f=c(i,["numberOfImages"]);e!==void 0&&f!=null&&d(e,["parameters","sampleCount"],f);const p=c(i,["aspectRatio"]);e!==void 0&&p!=null&&d(e,["parameters","aspectRatio"],p);const v=c(i,["guidanceScale"]);e!==void 0&&v!=null&&d(e,["parameters","guidanceScale"],v);const h=c(i,["seed"]);e!==void 0&&h!=null&&d(e,["parameters","seed"],h);const g=c(i,["safetyFilterLevel"]);e!==void 0&&g!=null&&d(e,["parameters","safetySetting"],g);const A=c(i,["personGeneration"]);e!==void 0&&A!=null&&d(e,["parameters","personGeneration"],A);const T=c(i,["includeSafetyAttributes"]);e!==void 0&&T!=null&&d(e,["parameters","includeSafetyAttributes"],T);const _=c(i,["includeRaiReason"]);e!==void 0&&_!=null&&d(e,["parameters","includeRaiReason"],_);const C=c(i,["language"]);e!==void 0&&C!=null&&d(e,["parameters","language"],C);const M=c(i,["outputMimeType"]);e!==void 0&&M!=null&&d(e,["parameters","outputOptions","mimeType"],M);const y=c(i,["outputCompressionQuality"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","compressionQuality"],y);const x=c(i,["addWatermark"]);e!==void 0&&x!=null&&d(e,["parameters","addWatermark"],x);const I=c(i,["labels"]);e!==void 0&&I!=null&&d(e,["labels"],I);const F=c(i,["imageSize"]);e!==void 0&&F!=null&&d(e,["parameters","sampleImageSize"],F);const P=c(i,["enhancePrompt"]);return e!==void 0&&P!=null&&d(e,["parameters","enhancePrompt"],P),o}function dE(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["prompt"]);u!=null&&d(o,["instances[0]","prompt"],u);const f=c(e,["config"]);return f!=null&&uE(f,o),o}function fE(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["prompt"]);u!=null&&d(o,["instances[0]","prompt"],u);const f=c(e,["config"]);return f!=null&&cE(f,o),o}function hE(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["predictions"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>xE(p))),d(s,["generatedImages"],f)}const u=c(i,["positivePromptSafetyAttributes"]);return u!=null&&d(s,["positivePromptSafetyAttributes"],Tg(u)),s}function pE(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["predictions"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>Ar(p))),d(s,["generatedImages"],f)}const u=c(i,["positivePromptSafetyAttributes"]);return u!=null&&d(s,["positivePromptSafetyAttributes"],Eg(u)),s}function mE(i,e,s){const o={},r=c(i,["numberOfVideos"]);if(e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r),c(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const u=c(i,["durationSeconds"]);if(e!==void 0&&u!=null&&d(e,["parameters","durationSeconds"],u),c(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=c(i,["aspectRatio"]);e!==void 0&&f!=null&&d(e,["parameters","aspectRatio"],f);const p=c(i,["resolution"]);e!==void 0&&p!=null&&d(e,["parameters","resolution"],p);const v=c(i,["personGeneration"]);if(e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v),c(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const h=c(i,["negativePrompt"]);e!==void 0&&h!=null&&d(e,["parameters","negativePrompt"],h);const g=c(i,["enhancePrompt"]);if(e!==void 0&&g!=null&&d(e,["parameters","enhancePrompt"],g),c(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const A=c(i,["lastFrame"]);e!==void 0&&A!=null&&d(e,["instances[0]","lastFrame"],Sr(A));const T=c(i,["referenceImages"]);if(e!==void 0&&T!=null){let _=T;Array.isArray(_)&&(_=_.map(C=>yb(C))),d(e,["instances[0]","referenceImages"],_)}if(c(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(c(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return o}function gE(i,e,s){const o={},r=c(i,["numberOfVideos"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const u=c(i,["outputGcsUri"]);e!==void 0&&u!=null&&d(e,["parameters","storageUri"],u);const f=c(i,["fps"]);e!==void 0&&f!=null&&d(e,["parameters","fps"],f);const p=c(i,["durationSeconds"]);e!==void 0&&p!=null&&d(e,["parameters","durationSeconds"],p);const v=c(i,["seed"]);e!==void 0&&v!=null&&d(e,["parameters","seed"],v);const h=c(i,["aspectRatio"]);e!==void 0&&h!=null&&d(e,["parameters","aspectRatio"],h);const g=c(i,["resolution"]);e!==void 0&&g!=null&&d(e,["parameters","resolution"],g);const A=c(i,["personGeneration"]);e!==void 0&&A!=null&&d(e,["parameters","personGeneration"],A);const T=c(i,["pubsubTopic"]);e!==void 0&&T!=null&&d(e,["parameters","pubsubTopic"],T);const _=c(i,["negativePrompt"]);e!==void 0&&_!=null&&d(e,["parameters","negativePrompt"],_);const C=c(i,["enhancePrompt"]);e!==void 0&&C!=null&&d(e,["parameters","enhancePrompt"],C);const M=c(i,["generateAudio"]);e!==void 0&&M!=null&&d(e,["parameters","generateAudio"],M);const y=c(i,["lastFrame"]);e!==void 0&&y!=null&&d(e,["instances[0]","lastFrame"],In(y));const x=c(i,["referenceImages"]);if(e!==void 0&&x!=null){let P=x;Array.isArray(P)&&(P=P.map(H=>vb(H))),d(e,["instances[0]","referenceImages"],P)}const I=c(i,["mask"]);e!==void 0&&I!=null&&d(e,["instances[0]","mask"],gb(I));const F=c(i,["compressionQuality"]);return e!==void 0&&F!=null&&d(e,["parameters","compressionQuality"],F),o}function yE(i,e){const s={},o=c(i,["name"]);o!=null&&d(s,["name"],o);const r=c(i,["metadata"]);r!=null&&d(s,["metadata"],r);const u=c(i,["done"]);u!=null&&d(s,["done"],u);const f=c(i,["error"]);f!=null&&d(s,["error"],f);const p=c(i,["response","generateVideoResponse"]);return p!=null&&d(s,["response"],TE(p)),s}function vE(i,e){const s={},o=c(i,["name"]);o!=null&&d(s,["name"],o);const r=c(i,["metadata"]);r!=null&&d(s,["metadata"],r);const u=c(i,["done"]);u!=null&&d(s,["done"],u);const f=c(i,["error"]);f!=null&&d(s,["error"],f);const p=c(i,["response"]);return p!=null&&d(s,["response"],EE(p)),s}function AE(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["prompt"]);u!=null&&d(o,["instances[0]","prompt"],u);const f=c(e,["image"]);f!=null&&d(o,["instances[0]","image"],Sr(f));const p=c(e,["video"]);p!=null&&d(o,["instances[0]","video"],Cg(p));const v=c(e,["source"]);v!=null&&bE(v,o);const h=c(e,["config"]);return h!=null&&mE(h,o),o}function SE(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["prompt"]);u!=null&&d(o,["instances[0]","prompt"],u);const f=c(e,["image"]);f!=null&&d(o,["instances[0]","image"],In(f));const p=c(e,["video"]);p!=null&&d(o,["instances[0]","video"],xg(p));const v=c(e,["source"]);v!=null&&CE(v,o);const h=c(e,["config"]);return h!=null&&gE(h,o),o}function TE(i,e){const s={},o=c(i,["generatedSamples"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>_E(p))),d(s,["generatedVideos"],f)}const r=c(i,["raiMediaFilteredCount"]);r!=null&&d(s,["raiMediaFilteredCount"],r);const u=c(i,["raiMediaFilteredReasons"]);return u!=null&&d(s,["raiMediaFilteredReasons"],u),s}function EE(i,e){const s={},o=c(i,["videos"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>RE(p))),d(s,["generatedVideos"],f)}const r=c(i,["raiMediaFilteredCount"]);r!=null&&d(s,["raiMediaFilteredCount"],r);const u=c(i,["raiMediaFilteredReasons"]);return u!=null&&d(s,["raiMediaFilteredReasons"],u),s}function bE(i,e,s){const o={},r=c(i,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const u=c(i,["image"]);e!==void 0&&u!=null&&d(e,["instances[0]","image"],Sr(u));const f=c(i,["video"]);return e!==void 0&&f!=null&&d(e,["instances[0]","video"],Cg(f)),o}function CE(i,e,s){const o={},r=c(i,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const u=c(i,["image"]);e!==void 0&&u!=null&&d(e,["instances[0]","image"],In(u));const f=c(i,["video"]);return e!==void 0&&f!=null&&d(e,["instances[0]","video"],xg(f)),o}function xE(i,e){const s={},o=c(i,["_self"]);o!=null&&d(s,["image"],FE(o));const r=c(i,["raiFilteredReason"]);r!=null&&d(s,["raiFilteredReason"],r);const u=c(i,["_self"]);return u!=null&&d(s,["safetyAttributes"],Tg(u)),s}function Ar(i,e){const s={},o=c(i,["_self"]);o!=null&&d(s,["image"],Sg(o));const r=c(i,["raiFilteredReason"]);r!=null&&d(s,["raiFilteredReason"],r);const u=c(i,["_self"]);u!=null&&d(s,["safetyAttributes"],Eg(u));const f=c(i,["prompt"]);return f!=null&&d(s,["enhancedPrompt"],f),s}function wE(i,e){const s={},o=c(i,["_self"]);o!=null&&d(s,["mask"],Sg(o));const r=c(i,["labels"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),d(s,["labels"],u)}return s}function _E(i,e){const s={},o=c(i,["video"]);return o!=null&&d(s,["video"],pb(o)),s}function RE(i,e){const s={},o=c(i,["_self"]);return o!=null&&d(s,["video"],mb(o)),s}function ME(i,e){const s={},o=c(i,["modelSelectionConfig"]);o!=null&&d(s,["modelConfig"],o);const r=c(i,["responseJsonSchema"]);r!=null&&d(s,["responseJsonSchema"],r);const u=c(i,["audioTimestamp"]);u!=null&&d(s,["audioTimestamp"],u);const f=c(i,["candidateCount"]);f!=null&&d(s,["candidateCount"],f);const p=c(i,["enableAffectiveDialog"]);p!=null&&d(s,["enableAffectiveDialog"],p);const v=c(i,["frequencyPenalty"]);v!=null&&d(s,["frequencyPenalty"],v);const h=c(i,["logprobs"]);h!=null&&d(s,["logprobs"],h);const g=c(i,["maxOutputTokens"]);g!=null&&d(s,["maxOutputTokens"],g);const A=c(i,["mediaResolution"]);A!=null&&d(s,["mediaResolution"],A);const T=c(i,["presencePenalty"]);T!=null&&d(s,["presencePenalty"],T);const _=c(i,["responseLogprobs"]);_!=null&&d(s,["responseLogprobs"],_);const C=c(i,["responseMimeType"]);C!=null&&d(s,["responseMimeType"],C);const M=c(i,["responseModalities"]);M!=null&&d(s,["responseModalities"],M);const y=c(i,["responseSchema"]);y!=null&&d(s,["responseSchema"],y);const x=c(i,["routingConfig"]);x!=null&&d(s,["routingConfig"],x);const I=c(i,["seed"]);I!=null&&d(s,["seed"],I);const F=c(i,["speechConfig"]);F!=null&&d(s,["speechConfig"],F);const P=c(i,["stopSequences"]);P!=null&&d(s,["stopSequences"],P);const H=c(i,["temperature"]);H!=null&&d(s,["temperature"],H);const O=c(i,["thinkingConfig"]);O!=null&&d(s,["thinkingConfig"],O);const z=c(i,["topK"]);z!=null&&d(s,["topK"],z);const it=c(i,["topP"]);if(it!=null&&d(s,["topP"],it),c(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function IE(i,e,s){const o={},r=c(e,["model"]);return r!=null&&d(o,["_url","name"],ne(i,r)),o}function NE(i,e,s){const o={},r=c(e,["model"]);return r!=null&&d(o,["_url","name"],ne(i,r)),o}function DE(i,e){const s={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const o=c(i,["enableWidget"]);return o!=null&&d(s,["enableWidget"],o),s}function LE(i,e){const s={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const o=c(i,["timeRangeFilter"]);return o!=null&&d(s,["timeRangeFilter"],o),s}function kE(i,e){const s={},o=c(i,["aspectRatio"]);o!=null&&d(s,["aspectRatio"],o);const r=c(i,["imageSize"]);if(r!=null&&d(s,["imageSize"],r),c(i,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(c(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(c(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return s}function PE(i,e){const s={},o=c(i,["aspectRatio"]);o!=null&&d(s,["aspectRatio"],o);const r=c(i,["imageSize"]);r!=null&&d(s,["imageSize"],r);const u=c(i,["personGeneration"]);u!=null&&d(s,["personGeneration"],u);const f=c(i,["outputMimeType"]);f!=null&&d(s,["imageOutputOptions","mimeType"],f);const p=c(i,["outputCompressionQuality"]);return p!=null&&d(s,["imageOutputOptions","compressionQuality"],p),s}function FE(i,e){const s={},o=c(i,["bytesBase64Encoded"]);o!=null&&d(s,["imageBytes"],Di(o));const r=c(i,["mimeType"]);return r!=null&&d(s,["mimeType"],r),s}function Sg(i,e){const s={},o=c(i,["gcsUri"]);o!=null&&d(s,["gcsUri"],o);const r=c(i,["bytesBase64Encoded"]);r!=null&&d(s,["imageBytes"],Di(r));const u=c(i,["mimeType"]);return u!=null&&d(s,["mimeType"],u),s}function Sr(i,e){const s={};if(c(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const o=c(i,["imageBytes"]);o!=null&&d(s,["bytesBase64Encoded"],Di(o));const r=c(i,["mimeType"]);return r!=null&&d(s,["mimeType"],r),s}function In(i,e){const s={},o=c(i,["gcsUri"]);o!=null&&d(s,["gcsUri"],o);const r=c(i,["imageBytes"]);r!=null&&d(s,["bytesBase64Encoded"],Di(r));const u=c(i,["mimeType"]);return u!=null&&d(s,["mimeType"],u),s}function UE(i,e,s,o){const r={},u=c(e,["pageSize"]);s!==void 0&&u!=null&&d(s,["_query","pageSize"],u);const f=c(e,["pageToken"]);s!==void 0&&f!=null&&d(s,["_query","pageToken"],f);const p=c(e,["filter"]);s!==void 0&&p!=null&&d(s,["_query","filter"],p);const v=c(e,["queryBase"]);return s!==void 0&&v!=null&&d(s,["_url","models_url"],hg(i,v)),r}function HE(i,e,s,o){const r={},u=c(e,["pageSize"]);s!==void 0&&u!=null&&d(s,["_query","pageSize"],u);const f=c(e,["pageToken"]);s!==void 0&&f!=null&&d(s,["_query","pageToken"],f);const p=c(e,["filter"]);s!==void 0&&p!=null&&d(s,["_query","filter"],p);const v=c(e,["queryBase"]);return s!==void 0&&v!=null&&d(s,["_url","models_url"],hg(i,v)),r}function GE(i,e,s){const o={},r=c(e,["config"]);return r!=null&&UE(i,r,o),o}function OE(i,e,s){const o={},r=c(e,["config"]);return r!=null&&HE(i,r,o),o}function VE(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["nextPageToken"]);r!=null&&d(s,["nextPageToken"],r);const u=c(i,["_self"]);if(u!=null){let f=pg(u);Array.isArray(f)&&(f=f.map(p=>Zu(p))),d(s,["models"],f)}return s}function BE(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["nextPageToken"]);r!=null&&d(s,["nextPageToken"],r);const u=c(i,["_self"]);if(u!=null){let f=pg(u);Array.isArray(f)&&(f=f.map(p=>Wu(p))),d(s,["models"],f)}return s}function zE(i,e){const s={},o=c(i,["maskMode"]);o!=null&&d(s,["maskMode"],o);const r=c(i,["segmentationClasses"]);r!=null&&d(s,["maskClasses"],r);const u=c(i,["maskDilation"]);return u!=null&&d(s,["dilation"],u),s}function Zu(i,e){const s={},o=c(i,["name"]);o!=null&&d(s,["name"],o);const r=c(i,["displayName"]);r!=null&&d(s,["displayName"],r);const u=c(i,["description"]);u!=null&&d(s,["description"],u);const f=c(i,["version"]);f!=null&&d(s,["version"],f);const p=c(i,["_self"]);p!=null&&d(s,["tunedModelInfo"],ob(p));const v=c(i,["inputTokenLimit"]);v!=null&&d(s,["inputTokenLimit"],v);const h=c(i,["outputTokenLimit"]);h!=null&&d(s,["outputTokenLimit"],h);const g=c(i,["supportedGenerationMethods"]);g!=null&&d(s,["supportedActions"],g);const A=c(i,["temperature"]);A!=null&&d(s,["temperature"],A);const T=c(i,["maxTemperature"]);T!=null&&d(s,["maxTemperature"],T);const _=c(i,["topP"]);_!=null&&d(s,["topP"],_);const C=c(i,["topK"]);C!=null&&d(s,["topK"],C);const M=c(i,["thinking"]);return M!=null&&d(s,["thinking"],M),s}function Wu(i,e){const s={},o=c(i,["name"]);o!=null&&d(s,["name"],o);const r=c(i,["displayName"]);r!=null&&d(s,["displayName"],r);const u=c(i,["description"]);u!=null&&d(s,["description"],u);const f=c(i,["versionId"]);f!=null&&d(s,["version"],f);const p=c(i,["deployedModels"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(_=>nE(_))),d(s,["endpoints"],T)}const v=c(i,["labels"]);v!=null&&d(s,["labels"],v);const h=c(i,["_self"]);h!=null&&d(s,["tunedModelInfo"],ab(h));const g=c(i,["defaultCheckpointId"]);g!=null&&d(s,["defaultCheckpointId"],g);const A=c(i,["checkpoints"]);if(A!=null){let T=A;Array.isArray(T)&&(T=T.map(_=>_)),d(s,["checkpoints"],T)}return s}function qE(i,e){const s={},o=c(i,["mediaResolution"]);o!=null&&d(s,["mediaResolution"],o);const r=c(i,["codeExecutionResult"]);r!=null&&d(s,["codeExecutionResult"],r);const u=c(i,["executableCode"]);u!=null&&d(s,["executableCode"],u);const f=c(i,["fileData"]);f!=null&&d(s,["fileData"],iE(f));const p=c(i,["functionCall"]);p!=null&&d(s,["functionCall"],sE(p));const v=c(i,["functionResponse"]);v!=null&&d(s,["functionResponse"],v);const h=c(i,["inlineData"]);h!=null&&d(s,["inlineData"],MT(h));const g=c(i,["text"]);g!=null&&d(s,["text"],g);const A=c(i,["thought"]);A!=null&&d(s,["thought"],A);const T=c(i,["thoughtSignature"]);T!=null&&d(s,["thoughtSignature"],T);const _=c(i,["videoMetadata"]);return _!=null&&d(s,["videoMetadata"],_),s}function YE(i,e){const s={},o=c(i,["productImage"]);return o!=null&&d(s,["image"],In(o)),s}function XE(i,e,s){const o={},r=c(i,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);const u=c(i,["baseSteps"]);e!==void 0&&u!=null&&d(e,["parameters","baseSteps"],u);const f=c(i,["outputGcsUri"]);e!==void 0&&f!=null&&d(e,["parameters","storageUri"],f);const p=c(i,["seed"]);e!==void 0&&p!=null&&d(e,["parameters","seed"],p);const v=c(i,["safetyFilterLevel"]);e!==void 0&&v!=null&&d(e,["parameters","safetySetting"],v);const h=c(i,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const g=c(i,["addWatermark"]);e!==void 0&&g!=null&&d(e,["parameters","addWatermark"],g);const A=c(i,["outputMimeType"]);e!==void 0&&A!=null&&d(e,["parameters","outputOptions","mimeType"],A);const T=c(i,["outputCompressionQuality"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","compressionQuality"],T);const _=c(i,["enhancePrompt"]);e!==void 0&&_!=null&&d(e,["parameters","enhancePrompt"],_);const C=c(i,["labels"]);return e!==void 0&&C!=null&&d(e,["labels"],C),o}function JE(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["source"]);u!=null&&KE(u,o);const f=c(e,["config"]);return f!=null&&XE(f,o),o}function $E(i,e){const s={},o=c(i,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>Ar(u))),d(s,["generatedImages"],r)}return s}function KE(i,e,s){const o={},r=c(i,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const u=c(i,["personImage"]);e!==void 0&&u!=null&&d(e,["instances[0]","personImage","image"],In(u));const f=c(i,["productImages"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(v=>YE(v))),d(e,["instances[0]","productImages"],p)}return o}function QE(i,e){const s={},o=c(i,["referenceImage"]);o!=null&&d(s,["referenceImage"],In(o));const r=c(i,["referenceId"]);r!=null&&d(s,["referenceId"],r);const u=c(i,["referenceType"]);u!=null&&d(s,["referenceType"],u);const f=c(i,["maskImageConfig"]);f!=null&&d(s,["maskImageConfig"],zE(f));const p=c(i,["controlImageConfig"]);p!=null&&d(s,["controlImageConfig"],FT(p));const v=c(i,["styleImageConfig"]);v!=null&&d(s,["styleImageConfig"],v);const h=c(i,["subjectImageConfig"]);return h!=null&&d(s,["subjectImageConfig"],h),s}function Tg(i,e){const s={},o=c(i,["safetyAttributes","categories"]);o!=null&&d(s,["categories"],o);const r=c(i,["safetyAttributes","scores"]);r!=null&&d(s,["scores"],r);const u=c(i,["contentType"]);return u!=null&&d(s,["contentType"],u),s}function Eg(i,e){const s={},o=c(i,["safetyAttributes","categories"]);o!=null&&d(s,["categories"],o);const r=c(i,["safetyAttributes","scores"]);r!=null&&d(s,["scores"],r);const u=c(i,["contentType"]);return u!=null&&d(s,["contentType"],u),s}function ZE(i,e){const s={},o=c(i,["category"]);if(o!=null&&d(s,["category"],o),c(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=c(i,["threshold"]);return r!=null&&d(s,["threshold"],r),s}function WE(i,e){const s={},o=c(i,["image"]);return o!=null&&d(s,["image"],In(o)),s}function jE(i,e,s){const o={},r=c(i,["mode"]);e!==void 0&&r!=null&&d(e,["parameters","mode"],r);const u=c(i,["maxPredictions"]);e!==void 0&&u!=null&&d(e,["parameters","maxPredictions"],u);const f=c(i,["confidenceThreshold"]);e!==void 0&&f!=null&&d(e,["parameters","confidenceThreshold"],f);const p=c(i,["maskDilation"]);e!==void 0&&p!=null&&d(e,["parameters","maskDilation"],p);const v=c(i,["binaryColorThreshold"]);e!==void 0&&v!=null&&d(e,["parameters","binaryColorThreshold"],v);const h=c(i,["labels"]);return e!==void 0&&h!=null&&d(e,["labels"],h),o}function tb(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["source"]);u!=null&&nb(u,o);const f=c(e,["config"]);return f!=null&&jE(f,o),o}function eb(i,e){const s={},o=c(i,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>wE(u))),d(s,["generatedMasks"],r)}return s}function nb(i,e,s){const o={},r=c(i,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);const u=c(i,["image"]);e!==void 0&&u!=null&&d(e,["instances[0]","image"],In(u));const f=c(i,["scribbleImage"]);return e!==void 0&&f!=null&&d(e,["instances[0]","scribble"],WE(f)),o}function ib(i,e){const s={},o=c(i,["retrievalConfig"]);o!=null&&d(s,["retrievalConfig"],o);const r=c(i,["functionCallingConfig"]);return r!=null&&d(s,["functionCallingConfig"],oE(r)),s}function sb(i,e){const s={};if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=c(i,["computerUse"]);o!=null&&d(s,["computerUse"],o);const r=c(i,["fileSearch"]);r!=null&&d(s,["fileSearch"],r);const u=c(i,["codeExecution"]);if(u!=null&&d(s,["codeExecution"],u),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=c(i,["functionDeclarations"]);if(f!=null){let A=f;Array.isArray(A)&&(A=A.map(T=>T)),d(s,["functionDeclarations"],A)}const p=c(i,["googleMaps"]);p!=null&&d(s,["googleMaps"],DE(p));const v=c(i,["googleSearch"]);v!=null&&d(s,["googleSearch"],LE(v));const h=c(i,["googleSearchRetrieval"]);h!=null&&d(s,["googleSearchRetrieval"],h);const g=c(i,["urlContext"]);return g!=null&&d(s,["urlContext"],g),s}function bg(i,e){const s={},o=c(i,["retrieval"]);o!=null&&d(s,["retrieval"],o);const r=c(i,["computerUse"]);if(r!=null&&d(s,["computerUse"],r),c(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=c(i,["codeExecution"]);u!=null&&d(s,["codeExecution"],u);const f=c(i,["enterpriseWebSearch"]);f!=null&&d(s,["enterpriseWebSearch"],f);const p=c(i,["functionDeclarations"]);if(p!=null){let T=p;Array.isArray(T)&&(T=T.map(_=>aE(_))),d(s,["functionDeclarations"],T)}const v=c(i,["googleMaps"]);v!=null&&d(s,["googleMaps"],v);const h=c(i,["googleSearch"]);h!=null&&d(s,["googleSearch"],h);const g=c(i,["googleSearchRetrieval"]);g!=null&&d(s,["googleSearchRetrieval"],g);const A=c(i,["urlContext"]);return A!=null&&d(s,["urlContext"],A),s}function ob(i,e){const s={},o=c(i,["baseModel"]);o!=null&&d(s,["baseModel"],o);const r=c(i,["createTime"]);r!=null&&d(s,["createTime"],r);const u=c(i,["updateTime"]);return u!=null&&d(s,["updateTime"],u),s}function ab(i,e){const s={},o=c(i,["labels","google-vertex-llm-tuning-base-model-id"]);o!=null&&d(s,["baseModel"],o);const r=c(i,["createTime"]);r!=null&&d(s,["createTime"],r);const u=c(i,["updateTime"]);return u!=null&&d(s,["updateTime"],u),s}function rb(i,e,s){const o={},r=c(i,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const u=c(i,["description"]);e!==void 0&&u!=null&&d(e,["description"],u);const f=c(i,["defaultCheckpointId"]);return e!==void 0&&f!=null&&d(e,["defaultCheckpointId"],f),o}function lb(i,e,s){const o={},r=c(i,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const u=c(i,["description"]);e!==void 0&&u!=null&&d(e,["description"],u);const f=c(i,["defaultCheckpointId"]);return e!==void 0&&f!=null&&d(e,["defaultCheckpointId"],f),o}function ub(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","name"],ne(i,r));const u=c(e,["config"]);return u!=null&&rb(u,o),o}function cb(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["config"]);return u!=null&&lb(u,o),o}function db(i,e,s){const o={},r=c(i,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const u=c(i,["safetyFilterLevel"]);e!==void 0&&u!=null&&d(e,["parameters","safetySetting"],u);const f=c(i,["personGeneration"]);e!==void 0&&f!=null&&d(e,["parameters","personGeneration"],f);const p=c(i,["includeRaiReason"]);e!==void 0&&p!=null&&d(e,["parameters","includeRaiReason"],p);const v=c(i,["outputMimeType"]);e!==void 0&&v!=null&&d(e,["parameters","outputOptions","mimeType"],v);const h=c(i,["outputCompressionQuality"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","compressionQuality"],h);const g=c(i,["enhanceInputImage"]);e!==void 0&&g!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],g);const A=c(i,["imagePreservationFactor"]);e!==void 0&&A!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],A);const T=c(i,["labels"]);e!==void 0&&T!=null&&d(e,["labels"],T);const _=c(i,["numberOfImages"]);e!==void 0&&_!=null&&d(e,["parameters","sampleCount"],_);const C=c(i,["mode"]);return e!==void 0&&C!=null&&d(e,["parameters","mode"],C),o}function fb(i,e,s){const o={},r=c(e,["model"]);r!=null&&d(o,["_url","model"],ne(i,r));const u=c(e,["image"]);u!=null&&d(o,["instances[0]","image"],In(u));const f=c(e,["upscaleFactor"]);f!=null&&d(o,["parameters","upscaleConfig","upscaleFactor"],f);const p=c(e,["config"]);return p!=null&&db(p,o),o}function hb(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["predictions"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>Ar(f))),d(s,["generatedImages"],u)}return s}function pb(i,e){const s={},o=c(i,["uri"]);o!=null&&d(s,["uri"],o);const r=c(i,["encodedVideo"]);r!=null&&d(s,["videoBytes"],Di(r));const u=c(i,["encoding"]);return u!=null&&d(s,["mimeType"],u),s}function mb(i,e){const s={},o=c(i,["gcsUri"]);o!=null&&d(s,["uri"],o);const r=c(i,["bytesBase64Encoded"]);r!=null&&d(s,["videoBytes"],Di(r));const u=c(i,["mimeType"]);return u!=null&&d(s,["mimeType"],u),s}function gb(i,e){const s={},o=c(i,["image"]);o!=null&&d(s,["_self"],In(o));const r=c(i,["maskMode"]);return r!=null&&d(s,["maskMode"],r),s}function yb(i,e){const s={},o=c(i,["image"]);o!=null&&d(s,["image"],Sr(o));const r=c(i,["referenceType"]);return r!=null&&d(s,["referenceType"],r),s}function vb(i,e){const s={},o=c(i,["image"]);o!=null&&d(s,["image"],In(o));const r=c(i,["referenceType"]);return r!=null&&d(s,["referenceType"],r),s}function Cg(i,e){const s={},o=c(i,["uri"]);o!=null&&d(s,["uri"],o);const r=c(i,["videoBytes"]);r!=null&&d(s,["encodedVideo"],Di(r));const u=c(i,["mimeType"]);return u!=null&&d(s,["encoding"],u),s}function xg(i,e){const s={},o=c(i,["uri"]);o!=null&&d(s,["gcsUri"],o);const r=c(i,["videoBytes"]);r!=null&&d(s,["bytesBase64Encoded"],Di(r));const u=c(i,["mimeType"]);return u!=null&&d(s,["mimeType"],u),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ab(i,e){const s={},o=c(i,["displayName"]);return e!==void 0&&o!=null&&d(e,["displayName"],o),s}function Sb(i){const e={},s=c(i,["config"]);return s!=null&&Ab(s,e),e}function Tb(i,e){const s={},o=c(i,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),s}function Eb(i){const e={},s=c(i,["name"]);s!=null&&d(e,["_url","name"],s);const o=c(i,["config"]);return o!=null&&Tb(o,e),e}function bb(i){const e={},s=c(i,["name"]);return s!=null&&d(e,["_url","name"],s),e}function Cb(i,e){const s={},o=c(i,["customMetadata"]);if(e!==void 0&&o!=null){let u=o;Array.isArray(u)&&(u=u.map(f=>f)),d(e,["customMetadata"],u)}const r=c(i,["chunkingConfig"]);return e!==void 0&&r!=null&&d(e,["chunkingConfig"],r),s}function xb(i){const e={},s=c(i,["name"]);s!=null&&d(e,["name"],s);const o=c(i,["metadata"]);o!=null&&d(e,["metadata"],o);const r=c(i,["done"]);r!=null&&d(e,["done"],r);const u=c(i,["error"]);u!=null&&d(e,["error"],u);const f=c(i,["response"]);return f!=null&&d(e,["response"],_b(f)),e}function wb(i){const e={},s=c(i,["fileSearchStoreName"]);s!=null&&d(e,["_url","file_search_store_name"],s);const o=c(i,["fileName"]);o!=null&&d(e,["fileName"],o);const r=c(i,["config"]);return r!=null&&Cb(r,e),e}function _b(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["parent"]);o!=null&&d(e,["parent"],o);const r=c(i,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function Rb(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),s}function Mb(i){const e={},s=c(i,["config"]);return s!=null&&Rb(s,e),e}function Ib(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=c(i,["fileSearchStores"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),d(e,["fileSearchStores"],u)}return e}function wg(i,e){const s={},o=c(i,["mimeType"]);e!==void 0&&o!=null&&d(e,["mimeType"],o);const r=c(i,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const u=c(i,["customMetadata"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(v=>v)),d(e,["customMetadata"],p)}const f=c(i,["chunkingConfig"]);return e!==void 0&&f!=null&&d(e,["chunkingConfig"],f),s}function Nb(i){const e={},s=c(i,["fileSearchStoreName"]);s!=null&&d(e,["_url","file_search_store_name"],s);const o=c(i,["config"]);return o!=null&&wg(o,e),e}function Db(i){const e={},s=c(i,["sdkHttpResponse"]);return s!=null&&d(e,["sdkHttpResponse"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Lb="Content-Type",kb="X-Server-Timeout",Pb="User-Agent",ju="x-goog-api-client",Fb="1.39.0",Ub=`google-genai-sdk/${Fb}`,Hb="v1beta1",Gb="v1beta";class Ob{constructor(e){var s,o,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(s=e.httpOptions)===null||s===void 0?void 0:s.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const u={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const p=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!p?(u.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?u.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(u.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),u.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:Hb}else{if(!this.clientOptions.apiKey)throw new Yo({message:"API key must be set when using the Gemini API.",status:403});u.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Gb,u.baseUrl="https://generativelanguage.googleapis.com/"}u.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=u,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(u,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),s=new URL(e);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,s,o){const r=[this.getRequestUrlInternal(s)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,s){return!(s.baseUrl&&s.baseUrlResourceScope===Ju.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,s),r=this.constructUrl(e.path,s,o);if(e.queryParams)for(const[f,p]of Object.entries(e.queryParams))r.searchParams.append(f,String(p));let u={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=e.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,s,r.toString(),e.abortSignal),this.unaryApiCall(r,u,e.httpMethod)}patchHttpOptions(e,s){const o=JSON.parse(JSON.stringify(e));for(const[r,u]of Object.entries(s))typeof u=="object"?o[r]=Object.assign(Object.assign({},o[r]),u):u!==void 0&&(o[r]=u);return o}async requestStream(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e,s),r=this.constructUrl(e.path,s,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=e.body,u=await this.includeExtraHttpOptionsToRequestInit(u,s,r.toString(),e.abortSignal),this.streamApiCall(r,u,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,s,o,r){if(s&&s.timeout||r){const u=new AbortController,f=u.signal;if(s.timeout&&s?.timeout>0){const p=setTimeout(()=>u.abort(),s.timeout);p&&typeof p.unref=="function"&&p.unref()}r&&r.addEventListener("abort",()=>{u.abort()}),e.signal=f}return s&&s.extraBody!==null&&Vb(e,s.extraBody),e.headers=await this.getHeadersInternal(s,o),e}async unaryApiCall(e,s,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:o})).then(async r=>(await zm(r),new $u(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,s,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:o})).then(async r=>(await zm(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Rn(this,arguments,function*(){var o;const r=(o=e?.body)===null||o===void 0?void 0:o.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let f="";const p="data:",v=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:g}=yield Bt(r.read());if(h){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const A=u.decode(g,{stream:!0});try{const C=JSON.parse(A);if("error"in C){const M=JSON.parse(JSON.stringify(C.error)),y=M.status,x=M.code,I=`got status: ${y}. ${JSON.stringify(C)}`;if(x>=400&&x<600)throw new Yo({message:I,status:x})}}catch(C){if(C.name==="ApiError")throw C}f+=A;let T=-1,_=0;for(;;){T=-1,_=0;for(const y of v){const x=f.indexOf(y);x!==-1&&(T===-1||x<T)&&(T=x,_=y.length)}if(T===-1)break;const C=f.substring(0,T);f=f.substring(T+_);const M=C.trim();if(M.startsWith(p)){const y=M.substring(p.length).trim();try{const x=new Response(y,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Bt(new $u(x))}catch(x){throw new Error(`exception parsing stream chunk ${y}. ${x}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,s){return fetch(e,s).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},s=Ub+" "+this.clientOptions.userAgentExtra;return e[Pb]=s,e[ju]=s,e[Lb]="application/json",e}async getHeadersInternal(e,s){const o=new Headers;if(e&&e.headers){for(const[r,u]of Object.entries(e.headers))o.append(r,u);e.timeout&&e.timeout>0&&o.append(kb,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,s),o}getFileName(e){var s;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(s=o.split(/[/\\]/).pop())!==null&&s!==void 0?s:""),o}async uploadFile(e,s){var o;const r={};s!=null&&(r.mimeType=s.mimeType,r.name=s.name,r.displayName=s.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,f=await u.stat(e);r.sizeBytes=String(f.size);const p=(o=s?.mimeType)!==null&&o!==void 0?o:f.type;if(p===void 0||p==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=p;const v={file:r},h=this.getFileName(e),g=It("upload/v1beta/files",v._url),A=await this.fetchUploadUrl(g,r.sizeBytes,r.mimeType,h,v,s?.httpOptions);return u.upload(e,A,this)}async uploadFileToFileSearchStore(e,s,o){var r;const u=this.clientOptions.uploader,f=await u.stat(s),p=String(f.size),v=(r=o?.mimeType)!==null&&r!==void 0?r:f.type;if(v===void 0||v==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(s),A={};o!=null&&wg(o,A);const T=await this.fetchUploadUrl(h,p,v,g,A,o?.httpOptions);return u.uploadToFileSearchStore(s,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,s,o,r,u,f){var p;let v={};f?v=f:v={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(u),httpMethod:"POST",httpOptions:v});if(!h||!h?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(p=h?.headers)===null||p===void 0?void 0:p["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function zm(i){var e;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const s=i.status;let o;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await i.json():o={error:{message:await i.text(),code:i.status,status:i.statusText}};const r=JSON.stringify(o);throw s>=400&&s<600?new Yo({message:r,status:s}):new Error(r)}}function Vb(i,e){if(!e||Object.keys(e).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let s={};if(typeof i.body=="string"&&i.body.length>0)try{const u=JSON.parse(i.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))s=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(u,f){const p=Object.assign({},u);for(const v in f)if(Object.prototype.hasOwnProperty.call(f,v)){const h=f[v],g=p[v];h&&typeof h=="object"&&!Array.isArray(h)&&g&&typeof g=="object"&&!Array.isArray(g)?p[v]=o(g,h):(g&&h&&typeof g!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${v}". Original type: ${typeof g}, New type: ${typeof h}. Overwriting.`),p[v]=h)}return p}const r=o(s,e);i.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bb="mcp_used/unknown";let zb=!1;function _g(i){for(const e of i)if(qb(e)||typeof e=="object"&&"inputSchema"in e)return!0;return zb}function Rg(i){var e;const s=(e=i[ju])!==null&&e!==void 0?e:"";i[ju]=(s+` ${Bb}`).trimStart()}function qb(i){return i!==null&&typeof i=="object"&&i instanceof pc}function Yb(i){return Rn(this,arguments,function*(s,o=100){let r,u=0;for(;u<o;){const f=yield Bt(s.listTools({cursor:r}));for(const p of f.tools)yield yield Bt(p),u++;if(!f.nextCursor)break;r=f.nextCursor}})}class pc{constructor(e=[],s){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=s}static create(e,s){return new pc(e,s)}async initialize(){var e,s,o,r;if(this.mcpTools.length>0)return;const u={},f=[];for(const g of this.mcpClients)try{for(var p=!0,v=(s=void 0,Mn(Yb(g))),h;h=await v.next(),e=h.done,!e;p=!0){r=h.value,p=!1;const A=r;f.push(A);const T=A.name;if(u[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);u[T]=g}}catch(A){s={error:A}}finally{try{!p&&!e&&(o=v.return)&&await o.call(v)}finally{if(s)throw s.error}}this.mcpTools=f,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),SA(this.mcpTools,this.config)}async callTool(e){await this.initialize();const s=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const f=await r.callTool({name:o.name,arguments:o.args},void 0,u);s.push({functionResponse:{name:o.name,response:f.isError?{error:f}:f}})}return s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Xb(i,e,s){const o=new fA;let r;s.data instanceof Blob?r=JSON.parse(await s.data.text()):r=JSON.parse(s.data),Object.assign(o,r),e(o)}class Jb{constructor(e,s,o){this.apiClient=e,this.auth=s,this.webSocketFactory=o}async connect(e){var s,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),f=Qb(this.apiClient.getDefaultHeaders()),p=this.apiClient.getApiKey(),v=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${p}`;let h=()=>{};const g=new Promise(F=>{h=F}),A=e.callbacks,T=function(){h({})},_=this.apiClient,C={onopen:T,onmessage:F=>{Xb(_,A.onmessage,F)},onerror:(s=A?.onerror)!==null&&s!==void 0?s:function(F){},onclose:(o=A?.onclose)!==null&&o!==void 0?o:function(F){}},M=this.webSocketFactory.create(v,Kb(f),C);M.connect(),await g;const I={setup:{model:ne(this.apiClient,e.model)}};return M.send(JSON.stringify(I)),new $b(M,this.apiClient)}}class $b{constructor(e,s){this.conn=e,this.apiClient=s}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const s=AT(e);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const s=vT(e);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const s={playbackControl:e};this.conn.send(JSON.stringify(s))}play(){this.sendPlaybackControl(zs.PLAY)}pause(){this.sendPlaybackControl(zs.PAUSE)}stop(){this.sendPlaybackControl(zs.STOP)}resetContext(){this.sendPlaybackControl(zs.RESET_CONTEXT)}close(){this.conn.close()}}function Kb(i){const e={};return i.forEach((s,o)=>{e[o]=s}),e}function Qb(i){const e=new Headers;for(const[s,o]of Object.entries(i))e.append(s,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zb="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Wb(i,e,s){const o=new dA;let r;s.data instanceof Blob?r=await s.data.text():s.data instanceof ArrayBuffer?r=new TextDecoder().decode(s.data):r=s.data;const u=JSON.parse(r);if(i.isVertexAI()){const f=ET(u);Object.assign(o,f)}else Object.assign(o,u);e(o)}class jb{constructor(e,s,o){this.apiClient=e,this.auth=s,this.webSocketFactory=o,this.music=new Jb(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var s,o,r,u,f,p;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const v=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let g;const A=this.apiClient.getHeaders();e.config&&e.config.tools&&_g(e.config.tools)&&Rg(A);const T=iC(A);if(this.apiClient.isVertexAI()){const W=this.apiClient.getProject(),ut=this.apiClient.getLocation(),pt=this.apiClient.getApiKey(),xt=!!W&&!!ut||!!pt;this.apiClient.getCustomBaseUrl()&&!xt?g=v:(g=`${v}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,g))}else{const W=this.apiClient.getApiKey();let ut="BidiGenerateContent",pt="key";W?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ut="BidiGenerateContentConstrained",pt="access_token"),g=`${v}/ws/google.ai.generativelanguage.${h}.GenerativeService.${ut}?${pt}=${W}`}let _=()=>{};const C=new Promise(W=>{_=W}),M=e.callbacks,y=function(){var W;(W=M?.onopen)===null||W===void 0||W.call(M),_({})},x=this.apiClient,I={onopen:y,onmessage:W=>{Wb(x,M.onmessage,W)},onerror:(s=M?.onerror)!==null&&s!==void 0?s:function(W){},onclose:(o=M?.onclose)!==null&&o!==void 0?o:function(W){}},F=this.webSocketFactory.create(g,nC(T),I);F.connect(),await C;let P=ne(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const W=this.apiClient.getProject(),ut=this.apiClient.getLocation();W&&ut&&(P=`projects/${W}/locations/${ut}/`+P)}let H={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[dr.AUDIO]}:e.config.responseModalities=[dr.AUDIO]),!((u=e.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(p=(f=e.config)===null||f===void 0?void 0:f.tools)!==null&&p!==void 0?p:[],z=[];for(const W of O)if(this.isCallableTool(W)){const ut=W;z.push(await ut.tool())}else z.push(W);z.length>0&&(e.config.tools=z);const it={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?H=yT(this.apiClient,it):H=gT(this.apiClient,it),delete H.config,F.send(JSON.stringify(H)),new eC(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const tC={turnComplete:!0};class eC{constructor(e,s){this.conn=e,this.apiClient=s}tLiveClientContent(e,s){if(s.turns!==null&&s.turns!==void 0){let o=[];try{o=En(s.turns),e.isVertexAI()||(o=o.map(r=>vr(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:o,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(e,s){let o=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?o=s.functionResponses:o=[s.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const u of o){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!e.isVertexAI()&&!("id"in u))throw new Error(Zb)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},tC),e);const s=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(s))}sendRealtimeInput(e){let s={};this.apiClient.isVertexAI()?s={realtimeInput:TT(e)}:s={realtimeInput:ST(e)},this.conn.send(JSON.stringify(s))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function nC(i){const e={};return i.forEach((s,o)=>{e[o]=s}),e}function iC(i){const e=new Headers;for(const[s,o]of Object.entries(i))e.append(s,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qm=10;function Ym(i){var e,s,o;if(!((e=i?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const f of(s=i?.tools)!==null&&s!==void 0?s:[])if(Xs(f)){r=!0;break}if(!r)return!0;const u=(o=i?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function Xs(i){return"callTool"in i&&typeof i.callTool=="function"}function sC(i){var e,s,o;return(o=(s=(e=i.config)===null||e===void 0?void 0:e.tools)===null||s===void 0?void 0:s.some(r=>Xs(r)))!==null&&o!==void 0?o:!1}function Xm(i){var e;const s=[];return!((e=i?.config)===null||e===void 0)&&e.tools&&i.config.tools.forEach((o,r)=>{if(Xs(o))return;const u=o;u.functionDeclarations&&u.functionDeclarations.length>0&&s.push(r)}),s}function Jm(i){var e;return!(!((e=i?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oC extends ii{constructor(e){super(),this.apiClient=e,this.generateContent=async s=>{var o,r,u,f,p;const v=await this.processParamsMaybeAddMcpUsage(s);if(this.maybeMoveToResponseJsonSchem(s),!sC(s)||Ym(s.config))return await this.generateContentInternal(v);const h=Xm(s);if(h.length>0){const M=h.map(y=>`tools[${y}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${M}.`)}let g,A;const T=En(v.contents),_=(u=(r=(o=v.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:qm;let C=0;for(;C<_&&(g=await this.generateContentInternal(v),!(!g.functionCalls||g.functionCalls.length===0));){const M=g.candidates[0].content,y=[];for(const x of(p=(f=s.config)===null||f===void 0?void 0:f.tools)!==null&&p!==void 0?p:[])if(Xs(x)){const F=await x.callTool(g.functionCalls);y.push(...F)}C++,A={role:"user",parts:y},v.contents=En(v.contents),v.contents.push(M),v.contents.push(A),Jm(v.config)&&(T.push(M),T.push(A))}return Jm(v.config)&&(g.automaticFunctionCallingHistory=T),g},this.generateContentStream=async s=>{var o,r,u,f,p;if(this.maybeMoveToResponseJsonSchem(s),Ym(s.config)){const A=await this.processParamsMaybeAddMcpUsage(s);return await this.generateContentStreamInternal(A)}const v=Xm(s);if(v.length>0){const A=v.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${A}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(u=(r=(o=s?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,g=(p=(f=s?.config)===null||f===void 0?void 0:f.automaticFunctionCalling)===null||p===void 0?void 0:p.disable;if(h&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(s)},this.generateImages=async s=>await this.generateImagesInternal(s).then(o=>{var r;let u;const f=[];if(o?.generatedImages)for(const v of o.generatedImages)v&&v?.safetyAttributes&&((r=v?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=v?.safetyAttributes:f.push(v);let p;return u?p={generatedImages:f,positivePromptSafetyAttributes:u,sdkHttpResponse:o.sdkHttpResponse}:p={generatedImages:f,sdkHttpResponse:o.sdkHttpResponse},p}),this.list=async s=>{var o;const f={config:Object.assign(Object.assign({},{queryBase:!0}),s?.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((o=f.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new es(ni.PAGED_ITEM_MODELS,p=>this.listInternal(p),await this.listInternal(f),f)},this.editImage=async s=>{const o={model:s.model,prompt:s.prompt,referenceImages:[],config:s.config};return s.referenceImages&&s.referenceImages&&(o.referenceImages=s.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async s=>{let o={numberOfImages:1,mode:"upscale"};s.config&&(o=Object.assign(Object.assign({},o),s.config));const r={model:s.model,image:s.image,upscaleFactor:s.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async s=>{var o,r,u,f,p,v;if((s.prompt||s.image||s.video)&&s.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=s.video)===null||o===void 0)&&o.uri&&(!((r=s.video)===null||r===void 0)&&r.videoBytes)?s.video={uri:s.video.uri,mimeType:s.video.mimeType}:!((f=(u=s.source)===null||u===void 0?void 0:u.video)===null||f===void 0)&&f.uri&&(!((v=(p=s.source)===null||p===void 0?void 0:p.video)===null||v===void 0)&&v.videoBytes)&&(s.source.video={uri:s.source.video.uri,mimeType:s.source.video.mimeType})),await this.generateVideosInternal(s)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var s,o,r;const u=(s=e.config)===null||s===void 0?void 0:s.tools;if(!u)return e;const f=await Promise.all(u.map(async v=>Xs(v)?await v.tool():v)),p={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:f})};if(p.config.tools=f,e.config&&e.config.tools&&_g(e.config.tools)){const v=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},v);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),Rg(h),p.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return p}async initAfcToolsMap(e){var s,o,r;const u=new Map;for(const f of(o=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&o!==void 0?o:[])if(Xs(f)){const p=f,v=await p.tool();for(const h of(r=v.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(u.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);u.set(h.name,p)}}return u}async processAfcStream(e){var s,o,r;const u=(r=(o=(s=e.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:qm;let f=!1,p=0;const v=await this.initAfcToolsMap(e);return(function(h,g,A){return Rn(this,arguments,function*(){for(var T,_,C,M,y,x;p<u;){f&&(p++,f=!1);const H=yield Bt(h.processParamsMaybeAddMcpUsage(A)),O=yield Bt(h.generateContentStreamInternal(H)),z=[],it=[];try{for(var I=!0,F=(_=void 0,Mn(O)),P;P=yield Bt(F.next()),T=P.done,!T;I=!0){M=P.value,I=!1;const W=M;if(yield yield Bt(W),W.candidates&&(!((y=W.candidates[0])===null||y===void 0)&&y.content)){it.push(W.candidates[0].content);for(const ut of(x=W.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(p<u&&ut.functionCall){if(!ut.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(ut.functionCall.name)){const pt=yield Bt(g.get(ut.functionCall.name).callTool([ut.functionCall]));z.push(...pt)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${ut.functionCall.name}`)}}}}catch(W){_={error:W}}finally{try{!I&&!T&&(C=F.return)&&(yield Bt(C.call(F)))}finally{if(_)throw _.error}}if(z.length>0){f=!0;const W=new Bo;W.candidates=[{content:{role:"user",parts:z}}],yield yield Bt(W);const ut=[];ut.push(...it),ut.push({role:"user",parts:z});const pt=En(A.contents).concat(ut);A.contents=pt}else break}})})(this,v,e)}async generateContentInternal(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=Om(this.apiClient,e);return p=It("{model}:generateContent",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=Bm(g),T=new Bo;return Object.assign(T,A),T})}else{const h=Gm(this.apiClient,e);return p=It("{model}:generateContent",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=Vm(g),T=new Bo;return Object.assign(T,A),T})}}async generateContentStreamInternal(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=Om(this.apiClient,e);return p=It("{model}:streamGenerateContent?alt=sse",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.requestStream({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),f.then(function(A){return Rn(this,arguments,function*(){var T,_,C,M;try{for(var y=!0,x=Mn(A),I;I=yield Bt(x.next()),T=I.done,!T;y=!0){M=I.value,y=!1;const F=M,P=Bm(yield Bt(F.json()),e);P.sdkHttpResponse={headers:F.headers};const H=new Bo;Object.assign(H,P),yield yield Bt(H)}}catch(F){_={error:F}}finally{try{!y&&!T&&(C=x.return)&&(yield Bt(C.call(x)))}finally{if(_)throw _.error}}})})}else{const h=Gm(this.apiClient,e);return p=It("{model}:streamGenerateContent?alt=sse",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.requestStream({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}),f.then(function(A){return Rn(this,arguments,function*(){var T,_,C,M;try{for(var y=!0,x=Mn(A),I;I=yield Bt(x.next()),T=I.done,!T;y=!0){M=I.value,y=!1;const F=M,P=Vm(yield Bt(F.json()),e);P.sdkHttpResponse={headers:F.headers};const H=new Bo;Object.assign(H,P),yield yield Bt(H)}}catch(F){_={error:F}}finally{try{!y&&!T&&(C=x.return)&&(yield Bt(C.call(x)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=jT(this.apiClient,e);return p=It("{model}:predict",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=eE(g),T=new Em;return Object.assign(T,A),T})}else{const h=WT(this.apiClient,e);return p=It("{model}:batchEmbedContents",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=tE(g),T=new Em;return Object.assign(T,A),T})}}async generateImagesInternal(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=fE(this.apiClient,e);return p=It("{model}:predict",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=pE(g),T=new bm;return Object.assign(T,A),T})}else{const h=dE(this.apiClient,e);return p=It("{model}:predict",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=hE(g),T=new bm;return Object.assign(T,A),T})}}async editImageInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI()){const p=$T(this.apiClient,e);return u=It("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:v.headers},g})),r.then(v=>{const h=KT(v),g=new j0;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI()){const p=fb(this.apiClient,e);return u=It("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:v.headers},g})),r.then(v=>{const h=hb(v),g=new tA;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI()){const p=JE(this.apiClient,e);return u=It("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>{const h=$E(v),g=new eA;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI()){const p=tb(this.apiClient,e);return u=It("{model}:predict",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>{const h=eb(v),g=new nA;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=NE(this.apiClient,e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),f.then(g=>Wu(g))}else{const h=IE(this.apiClient,e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),f.then(g=>Zu(g))}}async listInternal(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=OE(this.apiClient,e);return p=It("{models_url}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=BE(g),T=new Cm;return Object.assign(T,A),T})}else{const h=GE(this.apiClient,e);return p=It("{models_url}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=VE(g),T=new Cm;return Object.assign(T,A),T})}}async update(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=cb(this.apiClient,e);return p=It("{model}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),f.then(g=>Wu(g))}else{const h=ub(this.apiClient,e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),f.then(g=>Zu(g))}}async delete(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=qT(this.apiClient,e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=XT(g),T=new xm;return Object.assign(T,A),T})}else{const h=zT(this.apiClient,e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=YT(g),T=new xm;return Object.assign(T,A),T})}}async countTokens(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=OT(this.apiClient,e);return p=It("{model}:countTokens",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=BT(g),T=new wm;return Object.assign(T,A),T})}else{const h=GT(this.apiClient,e);return p=It("{model}:countTokens",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=VT(g),T=new wm;return Object.assign(T,A),T})}}async computeTokens(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI()){const p=DT(this.apiClient,e);return u=It("{model}:computeTokens",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:v.headers},g})),r.then(v=>{const h=LT(v),g=new iA;return Object.assign(g,h),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=SE(this.apiClient,e);return p=It("{model}:predictLongRunning",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),f.then(g=>{const A=vE(g),T=new fr;return Object.assign(T,A),T})}else{const h=AE(this.apiClient,e);return p=It("{model}:predictLongRunning",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),f.then(g=>{const A=yE(g),T=new fr;return Object.assign(T,A),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aC extends ii{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const s=e.operation,o=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=s.name.split("/operations/")[0];let u;o&&"httpOptions"in o&&(u=o.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:r,config:{httpOptions:u}});return s._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:s.name,config:o});return s._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const s=e.operation,o=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=s.name.split("/operations/")[0];let u;o&&"httpOptions"in o&&(u=o.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:r,config:{httpOptions:u}});return s._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:s.name,config:o});return s._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=J0(e);return p=It("{operationName}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json()),f}else{const h=X0(e);return p=It("{operationName}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json()),f}}async fetchPredictVideosOperationInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI()){const p=G0(e);return u=It("{resourceName}:fetchPredictOperation",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rC(i){const e={},s=c(i,["data"]);if(s!=null&&d(e,["data"],s),c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=c(i,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function lC(i){const e={},s=c(i,["parts"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>yC(u))),d(e,["parts"],r)}const o=c(i,["role"]);return o!=null&&d(e,["role"],o),e}function uC(i,e,s){const o={},r=c(e,["expireTime"]);s!==void 0&&r!=null&&d(s,["expireTime"],r);const u=c(e,["newSessionExpireTime"]);s!==void 0&&u!=null&&d(s,["newSessionExpireTime"],u);const f=c(e,["uses"]);s!==void 0&&f!=null&&d(s,["uses"],f);const p=c(e,["liveConnectConstraints"]);s!==void 0&&p!=null&&d(s,["bidiGenerateContentSetup"],gC(i,p));const v=c(e,["lockAdditionalFields"]);return s!==void 0&&v!=null&&d(s,["fieldMask"],v),o}function cC(i,e){const s={},o=c(e,["config"]);return o!=null&&d(s,["config"],uC(i,o,s)),s}function dC(i){const e={};if(c(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=c(i,["fileUri"]);s!=null&&d(e,["fileUri"],s);const o=c(i,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function fC(i){const e={},s=c(i,["id"]);s!=null&&d(e,["id"],s);const o=c(i,["args"]);o!=null&&d(e,["args"],o);const r=c(i,["name"]);if(r!=null&&d(e,["name"],r),c(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(c(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hC(i){const e={};if(c(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=c(i,["enableWidget"]);return s!=null&&d(e,["enableWidget"],s),e}function pC(i){const e={};if(c(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(c(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=c(i,["timeRangeFilter"]);return s!=null&&d(e,["timeRangeFilter"],s),e}function mC(i,e){const s={},o=c(i,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const r=c(i,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const u=c(i,["temperature"]);e!==void 0&&u!=null&&d(e,["setup","generationConfig","temperature"],u);const f=c(i,["topP"]);e!==void 0&&f!=null&&d(e,["setup","generationConfig","topP"],f);const p=c(i,["topK"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","topK"],p);const v=c(i,["maxOutputTokens"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","maxOutputTokens"],v);const h=c(i,["mediaResolution"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","mediaResolution"],h);const g=c(i,["seed"]);e!==void 0&&g!=null&&d(e,["setup","generationConfig","seed"],g);const A=c(i,["speechConfig"]);e!==void 0&&A!=null&&d(e,["setup","generationConfig","speechConfig"],hc(A));const T=c(i,["thinkingConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","thinkingConfig"],T);const _=c(i,["enableAffectiveDialog"]);e!==void 0&&_!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],_);const C=c(i,["systemInstruction"]);e!==void 0&&C!=null&&d(e,["setup","systemInstruction"],lC(Ye(C)));const M=c(i,["tools"]);if(e!==void 0&&M!=null){let O=$s(M);Array.isArray(O)&&(O=O.map(z=>AC(Js(z)))),d(e,["setup","tools"],O)}const y=c(i,["sessionResumption"]);e!==void 0&&y!=null&&d(e,["setup","sessionResumption"],vC(y));const x=c(i,["inputAudioTranscription"]);e!==void 0&&x!=null&&d(e,["setup","inputAudioTranscription"],x);const I=c(i,["outputAudioTranscription"]);e!==void 0&&I!=null&&d(e,["setup","outputAudioTranscription"],I);const F=c(i,["realtimeInputConfig"]);e!==void 0&&F!=null&&d(e,["setup","realtimeInputConfig"],F);const P=c(i,["contextWindowCompression"]);e!==void 0&&P!=null&&d(e,["setup","contextWindowCompression"],P);const H=c(i,["proactivity"]);if(e!==void 0&&H!=null&&d(e,["setup","proactivity"],H),c(i,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function gC(i,e){const s={},o=c(e,["model"]);o!=null&&d(s,["setup","model"],ne(i,o));const r=c(e,["config"]);return r!=null&&d(s,["config"],mC(r,s)),s}function yC(i){const e={},s=c(i,["mediaResolution"]);s!=null&&d(e,["mediaResolution"],s);const o=c(i,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=c(i,["executableCode"]);r!=null&&d(e,["executableCode"],r);const u=c(i,["fileData"]);u!=null&&d(e,["fileData"],dC(u));const f=c(i,["functionCall"]);f!=null&&d(e,["functionCall"],fC(f));const p=c(i,["functionResponse"]);p!=null&&d(e,["functionResponse"],p);const v=c(i,["inlineData"]);v!=null&&d(e,["inlineData"],rC(v));const h=c(i,["text"]);h!=null&&d(e,["text"],h);const g=c(i,["thought"]);g!=null&&d(e,["thought"],g);const A=c(i,["thoughtSignature"]);A!=null&&d(e,["thoughtSignature"],A);const T=c(i,["videoMetadata"]);return T!=null&&d(e,["videoMetadata"],T),e}function vC(i){const e={},s=c(i,["handle"]);if(s!=null&&d(e,["handle"],s),c(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function AC(i){const e={};if(c(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=c(i,["computerUse"]);s!=null&&d(e,["computerUse"],s);const o=c(i,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);const r=c(i,["codeExecution"]);if(r!=null&&d(e,["codeExecution"],r),c(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=c(i,["functionDeclarations"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(A=>A)),d(e,["functionDeclarations"],g)}const f=c(i,["googleMaps"]);f!=null&&d(e,["googleMaps"],hC(f));const p=c(i,["googleSearch"]);p!=null&&d(e,["googleSearch"],pC(p));const v=c(i,["googleSearchRetrieval"]);v!=null&&d(e,["googleSearchRetrieval"],v);const h=c(i,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SC(i){const e=[];for(const s in i)if(Object.prototype.hasOwnProperty.call(i,s)){const o=i[s];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(u=>`${s}.${u}`);e.push(...r)}else e.push(s)}return e.join(",")}function TC(i,e){let s=null;const o=i.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const u=o.setup;typeof u=="object"&&u!==null?(i.bidiGenerateContentSetup=u,s=u):delete i.bidiGenerateContentSetup}else o!==void 0&&delete i.bidiGenerateContentSetup;const r=i.fieldMask;if(s){const u=SC(s);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)u?i.fieldMask=u:delete i.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const f=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let p=[];r.length>0&&(p=r.map(h=>f.includes(h)?`generationConfig.${h}`:h));const v=[];u&&v.push(u),p.length>0&&v.push(...p),v.length>0?i.fieldMask=v.join(","):delete i.fieldMask}else delete i.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?i.fieldMask=r.join(","):delete i.fieldMask;return i}class EC extends ii{constructor(e){super(),this.apiClient=e}async create(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const p=cC(this.apiClient,e);u=It("auth_tokens",p._url),f=p._query,delete p.config,delete p._url,delete p._query;const v=TC(p,e.config);return r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(v),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bC(i,e){const s={},o=c(i,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),s}function CC(i){const e={},s=c(i,["name"]);s!=null&&d(e,["_url","name"],s);const o=c(i,["config"]);return o!=null&&bC(o,e),e}function xC(i){const e={},s=c(i,["name"]);return s!=null&&d(e,["_url","name"],s),e}function wC(i,e){const s={},o=c(i,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=c(i,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),s}function _C(i){const e={},s=c(i,["parent"]);s!=null&&d(e,["_url","parent"],s);const o=c(i,["config"]);return o!=null&&wC(o,e),e}function RC(i){const e={},s=c(i,["sdkHttpResponse"]);s!=null&&d(e,["sdkHttpResponse"],s);const o=c(i,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=c(i,["documents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),d(e,["documents"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MC extends ii{constructor(e){super(),this.apiClient=e,this.list=async s=>new es(ni.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:s.parent,config:o.config}),await this.listInternal(s),s)}async get(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=xC(e);return u=It("{name}",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(e){var s,o;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=CC(e);r=It("{name}",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=_C(e);return u=It("{parent}/documents",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>{const h=RC(v),g=new sA;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IC extends ii{constructor(e,s=new MC(e)){super(),this.apiClient=e,this.documents=s,this.list=async(o={})=>new es(ni.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Sb(e);return u=It("fileSearchStores",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async get(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=bb(e);return u=It("{name}",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>v)}}async delete(e){var s,o;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Eb(e);r=It("{name}",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Mb(e);return u=It("fileSearchStores",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>{const h=Ib(v),g=new oA;return Object.assign(g,h),g})}}async uploadToFileSearchStoreInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=Nb(e);return u=It("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>{const h=Db(v),g=new aA;return Object.assign(g,h),g})}}async importFile(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=wb(e);return u=It("{file_search_store_name}:importFile",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),r.then(v=>{const h=xb(v),g=new lc;return Object.assign(g,h),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Mg=function(){const{crypto:i}=globalThis;if(i?.randomUUID)return Mg=i.randomUUID.bind(i),i.randomUUID();const e=new Uint8Array(1),s=i?()=>i.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^s()&15>>+o/4).toString(16))};const NC=()=>Mg();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tc(i){return typeof i=="object"&&i!==null&&("name"in i&&i.name==="AbortError"||"message"in i&&String(i.message).includes("FetchRequestCanceledException"))}const ec=i=>{if(i instanceof Error)return i;if(typeof i=="object"&&i!==null){try{if(Object.prototype.toString.call(i)==="[object Error]"){const e=new Error(i.message,i.cause?{cause:i.cause}:{});return i.stack&&(e.stack=i.stack),i.cause&&!e.cause&&(e.cause=i.cause),i.name&&(e.name=i.name),e}}catch{}try{return new Error(JSON.stringify(i))}catch{}}return new Error(i)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bn extends Error{}class $e extends bn{constructor(e,s,o,r){super(`${$e.makeMessage(e,s,o)}`),this.status=e,this.headers=r,this.error=s}static makeMessage(e,s,o){const r=s?.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,s,o,r){if(!e||!r)return new Tr({message:o,cause:ec(s)});const u=s;return e===400?new Ng(e,u,o,r):e===401?new Dg(e,u,o,r):e===403?new Lg(e,u,o,r):e===404?new kg(e,u,o,r):e===409?new Pg(e,u,o,r):e===422?new Fg(e,u,o,r):e===429?new Ug(e,u,o,r):e>=500?new Hg(e,u,o,r):new $e(e,u,o,r)}}class nc extends $e{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Tr extends $e{constructor({message:e,cause:s}){super(void 0,void 0,e||"Connection error.",void 0),s&&(this.cause=s)}}class Ig extends Tr{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Ng extends $e{}class Dg extends $e{}class Lg extends $e{}class kg extends $e{}class Pg extends $e{}class Fg extends $e{}class Ug extends $e{}class Hg extends $e{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DC=/^[a-z][a-z0-9+.-]*:/i,LC=i=>DC.test(i);let ic=i=>(ic=Array.isArray,ic(i));const kC=ic;let PC=kC;const $m=PC;function FC(i){if(!i)return!0;for(const e in i)return!1;return!0}function UC(i,e){return Object.prototype.hasOwnProperty.call(i,e)}const HC=(i,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new bn(`${i} must be an integer`);if(e<0)throw new bn(`${i} must be a positive integer`);return e},GC=i=>{try{return JSON.parse(i)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OC=i=>new Promise(e=>setTimeout(e,i));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bs="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VC(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const BC=()=>{var i,e,s,o,r;const u=VC();if(u==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bs,"X-Stainless-OS":Qm(Deno.build.os),"X-Stainless-Arch":Km(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(i=Deno.version)===null||i===void 0?void 0:i.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(u==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bs,"X-Stainless-OS":Qm((s=globalThis.process.platform)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Arch":Km((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const f=zC();return f?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${f.browser}`,"X-Stainless-Runtime-Version":f.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Bs,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function zC(){if(typeof navigator>"u"||!navigator)return null;const i=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:s}of i){const o=s.exec(navigator.userAgent);if(o){const r=o[1]||0,u=o[2]||0,f=o[3]||0;return{browser:e,version:`${r}.${u}.${f}`}}}return null}const Km=i=>i==="x32"?"x32":i==="x86_64"||i==="x64"?"x64":i==="arm"?"arm":i==="aarch64"||i==="arm64"?"arm64":i?`other:${i}`:"unknown",Qm=i=>(i=i.toLowerCase(),i.includes("ios")?"iOS":i==="android"?"Android":i==="darwin"?"MacOS":i==="win32"?"Windows":i==="freebsd"?"FreeBSD":i==="openbsd"?"OpenBSD":i==="linux"?"Linux":i?`Other:${i}`:"Unknown");let sr;const qC=()=>sr??(sr=BC());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function YC(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Gg(...i){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...i)}function XC(i){let e=Symbol.asyncIterator in i?i[Symbol.asyncIterator]():i[Symbol.iterator]();return Gg({start(){},async pull(s){const{done:o,value:r}=await e.next();o?s.close():s.enqueue(r)},async cancel(){var s;await((s=e.return)===null||s===void 0?void 0:s.call(e))}})}function Og(i){if(i[Symbol.asyncIterator])return i;const e=i.getReader();return{async next(){try{const s=await e.read();return s?.done&&e.releaseLock(),s}catch(s){throw e.releaseLock(),s}},async return(){const s=e.cancel();return e.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function JC(i){var e,s;if(i===null||typeof i!="object")return;if(i[Symbol.asyncIterator]){await((s=(e=i[Symbol.asyncIterator]()).return)===null||s===void 0?void 0:s.call(e));return}const o=i.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $C=({headers:i,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vg=()=>{var i;if(typeof File>"u"){const{process:e}=globalThis,s=typeof((i=e?.versions)===null||i===void 0?void 0:i.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(s?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Bu(i,e,s){return Vg(),new File(i,e??"unknown_file",s)}function KC(i){return(typeof i=="object"&&i!==null&&("name"in i&&i.name&&String(i.name)||"url"in i&&i.url&&String(i.url)||"filename"in i&&i.filename&&String(i.filename)||"path"in i&&i.path&&String(i.path))||"").split(/[\\/]/).pop()||void 0}const QC=i=>i!=null&&typeof i=="object"&&typeof i[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bg=i=>i!=null&&typeof i=="object"&&typeof i.size=="number"&&typeof i.type=="string"&&typeof i.text=="function"&&typeof i.slice=="function"&&typeof i.arrayBuffer=="function",ZC=i=>i!=null&&typeof i=="object"&&typeof i.name=="string"&&typeof i.lastModified=="number"&&Bg(i),WC=i=>i!=null&&typeof i=="object"&&typeof i.url=="string"&&typeof i.blob=="function";async function jC(i,e,s){if(Vg(),i=await i,ZC(i))return i instanceof File?i:Bu([await i.arrayBuffer()],i.name);if(WC(i)){const r=await i.blob();return e||(e=new URL(i.url).pathname.split(/[\\/]/).pop()),Bu(await sc(r),e,s)}const o=await sc(i);if(e||(e=KC(i)),!s?.type){const r=o.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof r=="string"&&(s=Object.assign(Object.assign({},s),{type:r}))}return Bu(o,e,s)}async function sc(i){var e,s,o,r,u;let f=[];if(typeof i=="string"||ArrayBuffer.isView(i)||i instanceof ArrayBuffer)f.push(i);else if(Bg(i))f.push(i instanceof Blob?i:await i.arrayBuffer());else if(QC(i))try{for(var p=!0,v=Mn(i),h;h=await v.next(),e=h.done,!e;p=!0){r=h.value,p=!1;const g=r;f.push(...await sc(g))}}catch(g){s={error:g}}finally{try{!p&&!e&&(o=v.return)&&await o.call(v)}finally{if(s)throw s.error}}else{const g=(u=i?.constructor)===null||u===void 0?void 0:u.name;throw new Error(`Unexpected data type: ${typeof i}${g?`; constructor: ${g}`:""}${tx(i)}`)}return f}function tx(i){return typeof i!="object"||i===null?"":`; props: [${Object.getOwnPropertyNames(i).map(s=>`"${s}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zg{constructor(e){this._client=e}}zg._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qg(i){return i.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Zm=Object.freeze(Object.create(null)),ex=(i=qg)=>(function(s,...o){if(s.length===1)return s[0];let r=!1;const u=[],f=s.reduce((g,A,T)=>{var _,C,M;/[?#]/.test(A)&&(r=!0);const y=o[T];let x=(r?encodeURIComponent:i)(""+y);return T!==o.length&&(y==null||typeof y=="object"&&y.toString===((M=Object.getPrototypeOf((C=Object.getPrototypeOf((_=y.hasOwnProperty)!==null&&_!==void 0?_:Zm))!==null&&C!==void 0?C:Zm))===null||M===void 0?void 0:M.toString))&&(x=y+"",u.push({start:g.length+A.length,length:x.length,error:`Value of type ${Object.prototype.toString.call(y).slice(8,-1)} is not a valid path parameter`})),g+A+(T===o.length?"":x)},""),p=f.split(/[?#]/,1)[0],v=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let h;for(;(h=v.exec(p))!==null;)u.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(u.sort((g,A)=>g.start-A.start),u.length>0){let g=0;const A=u.reduce((T,_)=>{const C=" ".repeat(_.start-g),M="^".repeat(_.length);return g=_.start+_.length,T+C+M},"");throw new bn(`Path parameters result in path with invalid segments:
${u.map(T=>T.error).join(`
`)}
${f}
${A}`)}return f}),or=ex(qg);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yg extends zg{create(e,s){var o;const{api_version:r=this._client.apiVersion}=e,u=pr(e,["api_version"]);if("model"in u&&"agent_config"in u)throw new bn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in u&&"generation_config"in u)throw new bn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(or`/${r}/interactions`,Object.assign(Object.assign({body:u},s),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,s={},o){const{api_version:r=this._client.apiVersion}=s??{};return this._client.delete(or`/${r}/interactions/${e}`,o)}cancel(e,s={},o){const{api_version:r=this._client.apiVersion}=s??{};return this._client.post(or`/${r}/interactions/${e}/cancel`,o)}get(e,s={},o){var r;const u=s??{},{api_version:f=this._client.apiVersion}=u,p=pr(u,["api_version"]);return this._client.get(or`/${f}/interactions/${e}`,Object.assign(Object.assign({query:p},o),{stream:(r=s?.stream)!==null&&r!==void 0?r:!1}))}}Yg._key=Object.freeze(["interactions"]);class Xg extends Yg{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nx(i){let e=0;for(const r of i)e+=r.length;const s=new Uint8Array(e);let o=0;for(const r of i)s.set(r,o),o+=r.length;return s}let ar;function mc(i){let e;return(ar??(e=new globalThis.TextEncoder,ar=e.encode.bind(e)))(i)}let rr;function Wm(i){let e;return(rr??(e=new globalThis.TextDecoder,rr=e.decode.bind(e)))(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Er{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const s=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?mc(e):e;this.buffer=nx([this.buffer,s]);const o=[];let r;for(;(r=ix(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(Wm(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const u=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,f=Wm(this.buffer.subarray(0,u));o.push(f),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}Er.NEWLINE_CHARS=new Set([`
`,"\r"]);Er.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function ix(i,e){for(let r=e??0;r<i.length;r++){if(i[r]===10)return{preceding:r,index:r+1,carriage:!1};if(i[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function sx(i){for(let o=0;o<i.length-1;o++){if(i[o]===10&&i[o+1]===10||i[o]===13&&i[o+1]===13)return o+2;if(i[o]===13&&i[o+1]===10&&o+3<i.length&&i[o+2]===13&&i[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mr={off:0,error:200,warn:300,info:400,debug:500},jm=(i,e,s)=>{if(i){if(UC(mr,i))return i;Je(s).warn(`${e} was set to ${JSON.stringify(i)}, expected one of ${JSON.stringify(Object.keys(mr))}`)}};function qo(){}function lr(i,e,s){return!e||mr[i]>mr[s]?qo:e[i].bind(e)}const ox={error:qo,warn:qo,info:qo,debug:qo};let tg=new WeakMap;function Je(i){var e;const s=i.logger,o=(e=i.logLevel)!==null&&e!==void 0?e:"off";if(!s)return ox;const r=tg.get(s);if(r&&r[0]===o)return r[1];const u={error:lr("error",s,o),warn:lr("warn",s,o),info:lr("info",s,o),debug:lr("debug",s,o)};return tg.set(s,[o,u]),u}const Wi=i=>(i.options&&(i.options=Object.assign({},i.options),delete i.options.headers),i.headers&&(i.headers=Object.fromEntries((i.headers instanceof Headers?[...i.headers]:Object.entries(i.headers)).map(([e,s])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":s]))),"retryOfRequestLogID"in i&&(i.retryOfRequestLogID&&(i.retryOf=i.retryOfRequestLogID),delete i.retryOfRequestLogID),i);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qs{constructor(e,s,o){this.iterator=e,this.controller=s,this.client=o}static fromSSEResponse(e,s,o){let r=!1;const u=o?Je(o):console;function f(){return Rn(this,arguments,function*(){var v,h,g,A;if(r)throw new bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var _=!0,C=Mn(ax(e,s)),M;M=yield Bt(C.next()),v=M.done,!v;_=!0){A=M.value,_=!1;const y=A;if(!T)if(y.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Bt(JSON.parse(y.data))}catch(x){throw u.error("Could not parse message into JSON:",y.data),u.error("From chunk:",y.raw),x}}}catch(y){h={error:y}}finally{try{!_&&!v&&(g=C.return)&&(yield Bt(g.call(C)))}finally{if(h)throw h.error}}T=!0}catch(y){if(tc(y))return yield Bt(void 0);throw y}finally{T||s.abort()}})}return new qs(f,s,o)}static fromReadableStream(e,s,o){let r=!1;function u(){return Rn(this,arguments,function*(){var v,h,g,A;const T=new Er,_=Og(e);try{for(var C=!0,M=Mn(_),y;y=yield Bt(M.next()),v=y.done,!v;C=!0){A=y.value,C=!1;const x=A;for(const I of T.decode(x))yield yield Bt(I)}}catch(x){h={error:x}}finally{try{!C&&!v&&(g=M.return)&&(yield Bt(g.call(M)))}finally{if(h)throw h.error}}for(const x of T.flush())yield yield Bt(x)})}function f(){return Rn(this,arguments,function*(){var v,h,g,A;if(r)throw new bn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let T=!1;try{try{for(var _=!0,C=Mn(u()),M;M=yield Bt(C.next()),v=M.done,!v;_=!0){A=M.value,_=!1;const y=A;T||y&&(yield yield Bt(JSON.parse(y)))}}catch(y){h={error:y}}finally{try{!_&&!v&&(g=C.return)&&(yield Bt(g.call(C)))}finally{if(h)throw h.error}}T=!0}catch(y){if(tc(y))return yield Bt(void 0);throw y}finally{T||s.abort()}})}return new qs(f,s,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],s=[],o=this.iterator(),r=u=>({next:()=>{if(u.length===0){const f=o.next();e.push(f),s.push(f)}return u.shift()}});return[new qs(()=>r(e),this.controller,this.client),new qs(()=>r(s),this.controller,this.client)]}toReadableStream(){const e=this;let s;return Gg({async start(){s=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:u}=await s.next();if(u)return o.close();const f=mc(JSON.stringify(r)+`
`);o.enqueue(f)}catch(r){o.error(r)}},async cancel(){var o;await((o=s.return)===null||o===void 0?void 0:o.call(s))}})}}function ax(i,e){return Rn(this,arguments,function*(){var o,r,u,f;if(!i.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new bn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new bn("Attempted to iterate over a response with no body");const p=new lx,v=new Er,h=Og(i.body);try{for(var g=!0,A=Mn(rx(h)),T;T=yield Bt(A.next()),o=T.done,!o;g=!0){f=T.value,g=!1;const _=f;for(const C of v.decode(_)){const M=p.decode(C);M&&(yield yield Bt(M))}}}catch(_){r={error:_}}finally{try{!g&&!o&&(u=A.return)&&(yield Bt(u.call(A)))}finally{if(r)throw r.error}}for(const _ of v.flush()){const C=p.decode(_);C&&(yield yield Bt(C))}})}function rx(i){return Rn(this,arguments,function*(){var s,o,r,u;let f=new Uint8Array;try{for(var p=!0,v=Mn(i),h;h=yield Bt(v.next()),s=h.done,!s;p=!0){u=h.value,p=!1;const g=u;if(g==null)continue;const A=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?mc(g):g;let T=new Uint8Array(f.length+A.length);T.set(f),T.set(A,f.length),f=T;let _;for(;(_=sx(f))!==-1;)yield yield Bt(f.slice(0,_)),f=f.slice(_)}}catch(g){o={error:g}}finally{try{!p&&!s&&(r=v.return)&&(yield Bt(r.call(v)))}finally{if(o)throw o.error}}f.length>0&&(yield yield Bt(f))})}class lx{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(e),e.startsWith(":"))return null;let[s,o,r]=ux(e,":");return r.startsWith(" ")&&(r=r.substring(1)),s==="event"?this.event=r:s==="data"&&this.data.push(r),null}}function ux(i,e){const s=i.indexOf(e);return s!==-1?[i.substring(0,s),e,i.substring(s+e.length)]:[i,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function cx(i,e){const{response:s,requestLogID:o,retryOfRequestLogID:r,startTime:u}=e,f=await(async()=>{var p;if(e.options.stream)return Je(i).debug("response",s.status,s.url,s.headers,s.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(s,e.controller,i):qs.fromSSEResponse(s,e.controller,i);if(s.status===204)return null;if(e.options.__binaryResponse)return s;const v=s.headers.get("content-type"),h=(p=v?.split(";")[0])===null||p===void 0?void 0:p.trim();return h?.includes("application/json")||h?.endsWith("+json")?await s.json():await s.text()})();return Je(i).debug(`[${o}] response parsed`,Wi({retryOfRequestLogID:r,url:s.url,status:s.status,body:f,durationMs:Date.now()-u})),f}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gc extends Promise{constructor(e,s,o=cx){super(r=>{r(null)}),this.responsePromise=s,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new gc(this.client,this.responsePromise,async(s,o)=>e(await this.parseResponse(s,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:s}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,s){return this.parse().then(e,s)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jg=Symbol("brand.privateNullableHeaders");function*dx(i){if(!i)return;if(Jg in i){const{values:o,nulls:r}=i;yield*o.entries();for(const u of r)yield[u,null];return}let e=!1,s;i instanceof Headers?s=i.entries():$m(i)?s=i:(e=!0,s=Object.entries(i??{}));for(let o of s){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const u=$m(o[1])?o[1]:[o[1]];let f=!1;for(const p of u)p!==void 0&&(e&&!f&&(f=!0,yield[r,null]),yield[r,p])}}const zo=i=>{const e=new Headers,s=new Set;for(const o of i){const r=new Set;for(const[u,f]of dx(o)){const p=u.toLowerCase();r.has(p)||(e.delete(u),r.add(p)),f===null?(e.delete(u),s.add(p)):(e.append(u,f),s.delete(p))}}return{[Jg]:!0,values:e,nulls:s}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zu=i=>{var e,s,o,r,u,f;if(typeof globalThis.process<"u")return(o=(s=(e=L0)===null||e===void 0?void 0:e[i])===null||s===void 0?void 0:s.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(f=(u=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||u===void 0?void 0:u.call(r,i))===null||f===void 0?void 0:f.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var $g;class br{constructor(e){var s,o,r,u,f,p,v,{baseURL:h=zu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(s=zu("GEMINI_API_KEY"))!==null&&s!==void 0?s:null,apiVersion:A="v1beta"}=e,T=pr(e,["baseURL","apiKey","apiVersion"]);const _=Object.assign(Object.assign({apiKey:g,apiVersion:A},T),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=_.baseURL,this.timeout=(o=_.timeout)!==null&&o!==void 0?o:br.DEFAULT_TIMEOUT,this.logger=(r=_.logger)!==null&&r!==void 0?r:console;const C="warn";this.logLevel=C,this.logLevel=(f=(u=jm(_.logLevel,"ClientOptions.logLevel",this))!==null&&u!==void 0?u:jm(zu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&f!==void 0?f:C,this.fetchOptions=_.fetchOptions,this.maxRetries=(p=_.maxRetries)!==null&&p!==void 0?p:2,this.fetch=(v=_.fetch)!==null&&v!==void 0?v:YC(),this.encoder=$C,this._options=_,this.apiKey=g,this.apiVersion=A,this.clientAdapter=_.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:s}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!s.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const s=zo([e.headers]);if(!(s.values.has("authorization")||s.values.has("x-goog-api-key"))){if(this.apiKey)return zo([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return zo([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([s,o])=>typeof o<"u").map(([s,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(s)}=`;throw new bn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Bs}`}defaultIdempotencyKey(){return`stainless-node-retry-${NC()}`}makeStatusError(e,s,o,r){return $e.generate(e,s,o,r)}buildURL(e,s,o){const r=!this.baseURLOverridden()&&o||this.baseURL,u=LC(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),f=this.defaultQuery();return FC(f)||(s=Object.assign(Object.assign({},f),s)),typeof s=="object"&&s&&!Array.isArray(s)&&(u.search=this.stringifyQuery(s)),u.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const s=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${s}`}}async prepareRequest(e,{url:s,options:o}){}get(e,s){return this.methodRequest("get",e,s)}post(e,s){return this.methodRequest("post",e,s)}patch(e,s){return this.methodRequest("patch",e,s)}put(e,s){return this.methodRequest("put",e,s)}delete(e,s){return this.methodRequest("delete",e,s)}methodRequest(e,s,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:s},r)))}request(e,s=null){return new gc(this,this.makeRequest(e,s,void 0))}async makeRequest(e,s,o){var r,u,f;const p=await e,v=(r=p.maxRetries)!==null&&r!==void 0?r:this.maxRetries;s==null&&(s=v),await this.prepareOptions(p);const{req:h,url:g,timeout:A}=await this.buildRequest(p,{retryCount:v-s});await this.prepareRequest(h,{url:g,options:p});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=o===void 0?"":`, retryOf: ${o}`,C=Date.now();if(Je(this).debug(`[${T}] sending request`,Wi({retryOfRequestLogID:o,method:p.method,url:g,options:p,headers:h.headers})),!((u=p.signal)===null||u===void 0)&&u.aborted)throw new nc;const M=new AbortController,y=await this.fetchWithTimeout(g,h,A,M).catch(ec),x=Date.now();if(y instanceof globalThis.Error){const F=`retrying, ${s} attempts remaining`;if(!((f=p.signal)===null||f===void 0)&&f.aborted)throw new nc;const P=tc(y)||/timed? ?out/i.test(String(y)+("cause"in y?String(y.cause):""));if(s)return Je(this).info(`[${T}] connection ${P?"timed out":"failed"} - ${F}`),Je(this).debug(`[${T}] connection ${P?"timed out":"failed"} (${F})`,Wi({retryOfRequestLogID:o,url:g,durationMs:x-C,message:y.message})),this.retryRequest(p,s,o??T);throw Je(this).info(`[${T}] connection ${P?"timed out":"failed"} - error; no more retries left`),Je(this).debug(`[${T}] connection ${P?"timed out":"failed"} (error; no more retries left)`,Wi({retryOfRequestLogID:o,url:g,durationMs:x-C,message:y.message})),P?new Ig:new Tr({cause:y})}const I=`[${T}${_}] ${h.method} ${g} ${y.ok?"succeeded":"failed"} with status ${y.status} in ${x-C}ms`;if(!y.ok){const F=await this.shouldRetry(y);if(s&&F){const W=`retrying, ${s} attempts remaining`;return await JC(y.body),Je(this).info(`${I} - ${W}`),Je(this).debug(`[${T}] response error (${W})`,Wi({retryOfRequestLogID:o,url:y.url,status:y.status,headers:y.headers,durationMs:x-C})),this.retryRequest(p,s,o??T,y.headers)}const P=F?"error; no more retries left":"error; not retryable";Je(this).info(`${I} - ${P}`);const H=await y.text().catch(W=>ec(W).message),O=GC(H),z=O?void 0:H;throw Je(this).debug(`[${T}] response error (${P})`,Wi({retryOfRequestLogID:o,url:y.url,status:y.status,headers:y.headers,message:z,durationMs:Date.now()-C})),this.makeStatusError(y.status,O,z,y.headers)}return Je(this).info(I),Je(this).debug(`[${T}] response start`,Wi({retryOfRequestLogID:o,url:y.url,status:y.status,headers:y.headers,durationMs:x-C})),{response:y,options:p,controller:M,requestLogID:T,retryOfRequestLogID:o,startTime:C}}async fetchWithTimeout(e,s,o,r){const u=s||{},{signal:f,method:p}=u,v=pr(u,["signal","method"]);f&&f.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),o),g=globalThis.ReadableStream&&v.body instanceof globalThis.ReadableStream||typeof v.body=="object"&&v.body!==null&&Symbol.asyncIterator in v.body,A=Object.assign(Object.assign(Object.assign({signal:r.signal},g?{duplex:"half"}:{}),{method:"GET"}),v);p&&(A.method=p.toUpperCase());try{return await this.fetch.call(void 0,e,A)}finally{clearTimeout(h)}}async shouldRetry(e){const s=e.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,s,o,r){var u;let f;const p=r?.get("retry-after-ms");if(p){const h=parseFloat(p);Number.isNaN(h)||(f=h)}const v=r?.get("retry-after");if(v&&!f){const h=parseFloat(v);Number.isNaN(h)?f=Date.parse(v)-Date.now():f=h*1e3}if(!(f&&0<=f&&f<60*1e3)){const h=(u=e.maxRetries)!==null&&u!==void 0?u:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(s,h)}return await OC(f),this.makeRequest(e,s-1,o)}calculateDefaultRetryTimeoutMillis(e,s){const u=s-e,f=Math.min(.5*Math.pow(2,u),8),p=1-Math.random()*.25;return f*p*1e3}async buildRequest(e,{retryCount:s=0}={}){var o,r,u;const f=Object.assign({},e),{method:p,path:v,query:h,defaultBaseURL:g}=f,A=this.buildURL(v,h,g);"timeout"in f&&HC("timeout",f.timeout),f.timeout=(o=f.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:T,body:_}=this.buildBody({options:f}),C=await this.buildHeaders({options:e,method:p,bodyHeaders:T,retryCount:s});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:p,headers:C},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"}),_&&{body:_}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(u=f.fetchOptions)!==null&&u!==void 0?u:{}),url:A,timeout:f.timeout}}async buildHeaders({options:e,method:s,bodyHeaders:o,retryCount:r}){let u={};this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);const f=await this.authHeaders(e);let p=zo([u,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),qC()),this._options.defaultHeaders,o,e.headers,f]);return this.validateHeaders(p),p.values}buildBody({options:{body:e,headers:s}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=zo([s]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:XC(e)}:this.encoder({body:e,headers:o})}}br.DEFAULT_TIMEOUT=6e4;class Le extends br{constructor(){super(...arguments),this.interactions=new Xg(this)}}$g=Le;Le.GeminiNextGenAPIClient=$g;Le.GeminiNextGenAPIClientError=bn;Le.APIError=$e;Le.APIConnectionError=Tr;Le.APIConnectionTimeoutError=Ig;Le.APIUserAbortError=nc;Le.NotFoundError=kg;Le.ConflictError=Pg;Le.RateLimitError=Ug;Le.BadRequestError=Ng;Le.AuthenticationError=Dg;Le.InternalServerError=Hg;Le.PermissionDeniedError=Lg;Le.UnprocessableEntityError=Fg;Le.toFile=jC;Le.Interactions=Xg;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fx(i,e){const s={},o=c(i,["name"]);return o!=null&&d(s,["_url","name"],o),s}function hx(i,e){const s={},o=c(i,["name"]);return o!=null&&d(s,["_url","name"],o),s}function px(i,e){const s={},o=c(i,["sdkHttpResponse"]);return o!=null&&d(s,["sdkHttpResponse"],o),s}function mx(i,e){const s={},o=c(i,["sdkHttpResponse"]);return o!=null&&d(s,["sdkHttpResponse"],o),s}function gx(i,e,s){const o={};if(c(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=c(i,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&d(e,["displayName"],r),c(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=c(i,["epochCount"]);e!==void 0&&u!=null&&d(e,["tuningTask","hyperparameters","epochCount"],u);const f=c(i,["learningRateMultiplier"]);if(f!=null&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],f),c(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(c(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(c(i,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(c(i,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const p=c(i,["batchSize"]);e!==void 0&&p!=null&&d(e,["tuningTask","hyperparameters","batchSize"],p);const v=c(i,["learningRate"]);if(e!==void 0&&v!=null&&d(e,["tuningTask","hyperparameters","learningRate"],v),c(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(c(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(c(i,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(c(i,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(c(i,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(c(i,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return o}function yx(i,e,s){const o={};let r=c(s,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const H=c(i,["validationDataset"]);e!==void 0&&H!=null&&d(e,["supervisedTuningSpec"],qu(H))}else if(r==="PREFERENCE_TUNING"){const H=c(i,["validationDataset"]);e!==void 0&&H!=null&&d(e,["preferenceOptimizationSpec"],qu(H))}else if(r==="DISTILLATION"){const H=c(i,["validationDataset"]);e!==void 0&&H!=null&&d(e,["distillationSpec"],qu(H))}const u=c(i,["tunedModelDisplayName"]);e!==void 0&&u!=null&&d(e,["tunedModelDisplayName"],u);const f=c(i,["description"]);e!==void 0&&f!=null&&d(e,["description"],f);let p=c(s,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const H=c(i,["epochCount"]);e!==void 0&&H!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],H)}else if(p==="PREFERENCE_TUNING"){const H=c(i,["epochCount"]);e!==void 0&&H!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],H)}else if(p==="DISTILLATION"){const H=c(i,["epochCount"]);e!==void 0&&H!=null&&d(e,["distillationSpec","hyperParameters","epochCount"],H)}let v=c(s,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const H=c(i,["learningRateMultiplier"]);e!==void 0&&H!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],H)}else if(v==="PREFERENCE_TUNING"){const H=c(i,["learningRateMultiplier"]);e!==void 0&&H!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],H)}else if(v==="DISTILLATION"){const H=c(i,["learningRateMultiplier"]);e!==void 0&&H!=null&&d(e,["distillationSpec","hyperParameters","learningRateMultiplier"],H)}let h=c(s,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const H=c(i,["exportLastCheckpointOnly"]);e!==void 0&&H!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],H)}else if(h==="PREFERENCE_TUNING"){const H=c(i,["exportLastCheckpointOnly"]);e!==void 0&&H!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],H)}else if(h==="DISTILLATION"){const H=c(i,["exportLastCheckpointOnly"]);e!==void 0&&H!=null&&d(e,["distillationSpec","exportLastCheckpointOnly"],H)}let g=c(s,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const H=c(i,["adapterSize"]);e!==void 0&&H!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],H)}else if(g==="PREFERENCE_TUNING"){const H=c(i,["adapterSize"]);e!==void 0&&H!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],H)}else if(g==="DISTILLATION"){const H=c(i,["adapterSize"]);e!==void 0&&H!=null&&d(e,["distillationSpec","hyperParameters","adapterSize"],H)}let A=c(s,["config","method"]);if(A===void 0&&(A="SUPERVISED_FINE_TUNING"),A==="SUPERVISED_FINE_TUNING"){const H=c(i,["tuningMode"]);e!==void 0&&H!=null&&d(e,["supervisedTuningSpec","tuningMode"],H)}const T=c(i,["customBaseModel"]);e!==void 0&&T!=null&&d(e,["customBaseModel"],T);let _=c(s,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const H=c(i,["batchSize"]);e!==void 0&&H!=null&&d(e,["supervisedTuningSpec","hyperParameters","batchSize"],H)}let C=c(s,["config","method"]);if(C===void 0&&(C="SUPERVISED_FINE_TUNING"),C==="SUPERVISED_FINE_TUNING"){const H=c(i,["learningRate"]);e!==void 0&&H!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRate"],H)}const M=c(i,["labels"]);e!==void 0&&M!=null&&d(e,["labels"],M);const y=c(i,["beta"]);e!==void 0&&y!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],y);const x=c(i,["baseTeacherModel"]);e!==void 0&&x!=null&&d(e,["distillationSpec","baseTeacherModel"],x);const I=c(i,["tunedTeacherModelSource"]);e!==void 0&&I!=null&&d(e,["distillationSpec","tunedTeacherModelSource"],I);const F=c(i,["sftLossWeightMultiplier"]);e!==void 0&&F!=null&&d(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],F);const P=c(i,["outputUri"]);return e!==void 0&&P!=null&&d(e,["outputUri"],P),o}function vx(i,e){const s={},o=c(i,["baseModel"]);o!=null&&d(s,["baseModel"],o);const r=c(i,["preTunedModel"]);r!=null&&d(s,["preTunedModel"],r);const u=c(i,["trainingDataset"]);u!=null&&Mx(u);const f=c(i,["config"]);return f!=null&&gx(f,s),s}function Ax(i,e){const s={},o=c(i,["baseModel"]);o!=null&&d(s,["baseModel"],o);const r=c(i,["preTunedModel"]);r!=null&&d(s,["preTunedModel"],r);const u=c(i,["trainingDataset"]);u!=null&&Ix(u,s,e);const f=c(i,["config"]);return f!=null&&yx(f,s,e),s}function Sx(i,e){const s={},o=c(i,["name"]);return o!=null&&d(s,["_url","name"],o),s}function Tx(i,e){const s={},o=c(i,["name"]);return o!=null&&d(s,["_url","name"],o),s}function Ex(i,e,s){const o={},r=c(i,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const u=c(i,["pageToken"]);e!==void 0&&u!=null&&d(e,["_query","pageToken"],u);const f=c(i,["filter"]);return e!==void 0&&f!=null&&d(e,["_query","filter"],f),o}function bx(i,e,s){const o={},r=c(i,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const u=c(i,["pageToken"]);e!==void 0&&u!=null&&d(e,["_query","pageToken"],u);const f=c(i,["filter"]);return e!==void 0&&f!=null&&d(e,["_query","filter"],f),o}function Cx(i,e){const s={},o=c(i,["config"]);return o!=null&&Ex(o,s),s}function xx(i,e){const s={},o=c(i,["config"]);return o!=null&&bx(o,s),s}function wx(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["nextPageToken"]);r!=null&&d(s,["nextPageToken"],r);const u=c(i,["tunedModels"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(p=>Kg(p))),d(s,["tuningJobs"],f)}return s}function _x(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["nextPageToken"]);r!=null&&d(s,["nextPageToken"],r);const u=c(i,["tuningJobs"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(p=>oc(p))),d(s,["tuningJobs"],f)}return s}function Rx(i,e){const s={},o=c(i,["name"]);o!=null&&d(s,["model"],o);const r=c(i,["name"]);return r!=null&&d(s,["endpoint"],r),s}function Mx(i,e){const s={};if(c(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=c(i,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(u=>u)),d(s,["examples","examples"],r)}return s}function Ix(i,e,s){const o={};let r=c(s,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const f=c(i,["gcsUri"]);e!==void 0&&f!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(r==="PREFERENCE_TUNING"){const f=c(i,["gcsUri"]);e!==void 0&&f!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}else if(r==="DISTILLATION"){const f=c(i,["gcsUri"]);e!==void 0&&f!=null&&d(e,["distillationSpec","promptDatasetUri"],f)}let u=c(s,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const f=c(i,["vertexDatasetResource"]);e!==void 0&&f!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(u==="PREFERENCE_TUNING"){const f=c(i,["vertexDatasetResource"]);e!==void 0&&f!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}else if(u==="DISTILLATION"){const f=c(i,["vertexDatasetResource"]);e!==void 0&&f!=null&&d(e,["distillationSpec","promptDatasetUri"],f)}if(c(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Kg(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["name"]);r!=null&&d(s,["name"],r);const u=c(i,["state"]);u!=null&&d(s,["state"],dg(u));const f=c(i,["createTime"]);f!=null&&d(s,["createTime"],f);const p=c(i,["tuningTask","startTime"]);p!=null&&d(s,["startTime"],p);const v=c(i,["tuningTask","completeTime"]);v!=null&&d(s,["endTime"],v);const h=c(i,["updateTime"]);h!=null&&d(s,["updateTime"],h);const g=c(i,["description"]);g!=null&&d(s,["description"],g);const A=c(i,["baseModel"]);A!=null&&d(s,["baseModel"],A);const T=c(i,["_self"]);return T!=null&&d(s,["tunedModel"],Rx(T)),s}function oc(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["name"]);r!=null&&d(s,["name"],r);const u=c(i,["state"]);u!=null&&d(s,["state"],dg(u));const f=c(i,["createTime"]);f!=null&&d(s,["createTime"],f);const p=c(i,["startTime"]);p!=null&&d(s,["startTime"],p);const v=c(i,["endTime"]);v!=null&&d(s,["endTime"],v);const h=c(i,["updateTime"]);h!=null&&d(s,["updateTime"],h);const g=c(i,["error"]);g!=null&&d(s,["error"],g);const A=c(i,["description"]);A!=null&&d(s,["description"],A);const T=c(i,["baseModel"]);T!=null&&d(s,["baseModel"],T);const _=c(i,["tunedModel"]);_!=null&&d(s,["tunedModel"],_);const C=c(i,["preTunedModel"]);C!=null&&d(s,["preTunedModel"],C);const M=c(i,["supervisedTuningSpec"]);M!=null&&d(s,["supervisedTuningSpec"],M);const y=c(i,["preferenceOptimizationSpec"]);y!=null&&d(s,["preferenceOptimizationSpec"],y);const x=c(i,["distillationSpec"]);x!=null&&d(s,["distillationSpec"],x);const I=c(i,["tuningDataStats"]);I!=null&&d(s,["tuningDataStats"],I);const F=c(i,["encryptionSpec"]);F!=null&&d(s,["encryptionSpec"],F);const P=c(i,["partnerModelTuningSpec"]);P!=null&&d(s,["partnerModelTuningSpec"],P);const H=c(i,["customBaseModel"]);H!=null&&d(s,["customBaseModel"],H);const O=c(i,["experiment"]);O!=null&&d(s,["experiment"],O);const z=c(i,["labels"]);z!=null&&d(s,["labels"],z);const it=c(i,["outputUri"]);it!=null&&d(s,["outputUri"],it);const W=c(i,["pipelineJob"]);W!=null&&d(s,["pipelineJob"],W);const ut=c(i,["serviceAccount"]);ut!=null&&d(s,["serviceAccount"],ut);const pt=c(i,["tunedModelDisplayName"]);pt!=null&&d(s,["tunedModelDisplayName"],pt);const xt=c(i,["veoTuningSpec"]);return xt!=null&&d(s,["veoTuningSpec"],xt),s}function Nx(i,e){const s={},o=c(i,["sdkHttpResponse"]);o!=null&&d(s,["sdkHttpResponse"],o);const r=c(i,["name"]);r!=null&&d(s,["name"],r);const u=c(i,["metadata"]);u!=null&&d(s,["metadata"],u);const f=c(i,["done"]);f!=null&&d(s,["done"],f);const p=c(i,["error"]);return p!=null&&d(s,["error"],p),s}function qu(i,e){const s={},o=c(i,["gcsUri"]);o!=null&&d(s,["validationDatasetUri"],o);const r=c(i,["vertexDatasetResource"]);return r!=null&&d(s,["validationDatasetUri"],r),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dx extends ii{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new es(ni.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(s),s),this.get=async s=>await this.getInternal(s),this.tune=async s=>{var o;if(this.apiClient.isVertexAI())if(s.baseModel.startsWith("projects/")){const r={tunedModelName:s.baseModel};!((o=s.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=s.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},s),{preTunedModel:r});return u.baseModel=void 0,await this.tuneInternal(u)}else{const r=Object.assign({},s);return await this.tuneInternal(r)}else{const r=Object.assign({},s),u=await this.tuneMldevInternal(r);let f="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?f=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(f=u.name.split("/operations/")[0]),{name:f,state:Xu.JOB_STATE_QUEUED}}}}async getInternal(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=Tx(e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>oc(g))}else{const h=Sx(e);return p=It("{name}",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>Kg(g))}}async listInternal(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=xx(e);return p=It("tuningJobs",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=_x(g),T=new _m;return Object.assign(T,A),T})}else{const h=Cx(e);return p=It("tunedModels",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=wx(g),T=new _m;return Object.assign(T,A),T})}}async cancel(e){var s,o,r,u;let f,p="",v={};if(this.apiClient.isVertexAI()){const h=hx(e);return p=It("{name}:cancel",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=mx(g),T=new Rm;return Object.assign(T,A),T})}else{const h=fx(e);return p=It("{name}:cancel",h._url),v=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:p,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(g=>g.json().then(A=>{const T=A;return T.sdkHttpResponse={headers:g.headers},T})),f.then(g=>{const A=px(g),T=new Rm;return Object.assign(T,A),T})}}async tuneInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI()){const p=Ax(e,e);return u=It("tuningJobs",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:v.headers},g})),r.then(v=>oc(v))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var s,o;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const p=vx(e);return u=It("tunedModels",p._url),f=p._query,delete p._url,delete p._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(h=>{const g=h;return g.sdkHttpResponse={headers:v.headers},g})),r.then(v=>Nx(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lx{async download(e,s){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const kx=1024*1024*8,Px=3,Fx=1e3,Ux=2,gr="x-goog-upload-status";async function Hx(i,e,s){var o;const r=await Qg(i,e,s),u=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[gr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function Gx(i,e,s){var o;const r=await Qg(i,e,s),u=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[gr])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const f=og(u),p=new uc;return Object.assign(p,f),p}async function Qg(i,e,s){var o,r;let u=0,f=0,p=new $u(new Response),v="upload";for(u=i.size;f<u;){const h=Math.min(kx,u-f),g=i.slice(f,f+h);f+h>=u&&(v+=", finalize");let A=0,T=Fx;for(;A<Px&&(p=await s.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":String(f),"Content-Length":String(h)}}}),!(!((o=p?.headers)===null||o===void 0)&&o[gr]));)A++,await Vx(T),T=T*Ux;if(f+=h,((r=p?.headers)===null||r===void 0?void 0:r[gr])!=="active")break;if(u<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return p}async function Ox(i){return{size:i.size,type:i.type}}function Vx(i){return new Promise(e=>setTimeout(e,i))}class Bx{async upload(e,s,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Hx(e,s,o)}async uploadToFileSearchStore(e,s,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Gx(e,s,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Ox(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zx{create(e,s,o){return new qx(e,s,o)}}class qx{constructor(e,s,o){this.url=e,this.headers=s,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eg="x-goog-api-key";class Yx{constructor(e){this.apiKey=e}async addAuthHeaders(e,s){if(e.get(eg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(eg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xx="gl-node/";class Jx{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const s=new Le({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=s.interactions,this._interactions}constructor(e){var s;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=e.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=e.apiKey;const o=U0(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new Yx(this.apiKey);this.apiClient=new Ob({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Xx+"web",uploader:new Bx,downloader:new Lx}),this.models=new oC(this.apiClient),this.live=new jb(this.apiClient,r,new zx),this.batches=new hS(this.apiClient),this.chats=new $S(this.models,this.apiClient),this.caches=new YS(this.apiClient),this.files=new aT(this.apiClient),this.operations=new aC(this.apiClient),this.authTokens=new EC(this.apiClient),this.tunings=new Dx(this.apiClient),this.fileSearchStores=new IC(this.apiClient)}}var Cr=(i=>(i.PATIENT_DATA="",i.GROSS_EXAM="",i.IHC_TEXT="",i.DIAGNOSIS="",i.DIAGNOSTIC_BASIS="",i.DIFFERENTIAL="",i.KNOWLEDGE="",i))(Cr||{}),Zg=(i=>(i.ADMIN="",i.USER="",i))(Zg||{});const $x=["","","",""];var ts=(i=>(i.HE="HE",i.IHC="",i))(ts||{}),Wg=(i=>(i.X10="x10",i.X20="x20",i.X40="x40",i.X100="x100",i.X200="x200",i.X400="x400",i.OTHER="",i))(Wg||{});const Kx=["","","","","","",""],Qx=[" "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "],Zx=["x10","x20","x40","x100","x200","x400",""],Tn={Trash:()=>ot.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ot.jsx("path",{d:"M3 6h18"}),ot.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),ot.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),ot.jsx("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),ot.jsx("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]}),Image:()=>ot.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ot.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),ot.jsx("circle",{cx:"9",cy:"9",r:"2"}),ot.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),FileText:()=>ot.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ot.jsx("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),ot.jsx("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),ot.jsx("path",{d:"M10 9H8"}),ot.jsx("path",{d:"M16 13H8"}),ot.jsx("path",{d:"M16 17H8"})]}),Check:()=>ot.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ot.jsx("polyline",{points:"20 6 9 17 4 12"})}),Upload:()=>ot.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ot.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v4"}),ot.jsx("polyline",{points:"17 8 12 3 7 8"}),ot.jsx("line",{x1:"12",x2:"12",y1:"3",y2:"15"})]}),Book:()=>ot.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ot.jsx("path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1-2.5-2.5Z"}),ot.jsx("path",{d:"M6.5 2H20v20H6.5a2.5 2.5 0 0 1-2.5-2.5Z"})]}),Close:()=>ot.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ot.jsx("line",{x1:"18",x2:"6",y1:"6",y2:"18"}),ot.jsx("line",{x1:"6",x2:"18",y1:"6",y2:"18"})]})},Wx=({section:i,onUpdate:e,onRemove:s})=>{const o=$x.includes(i.label),r=i.label===Cr.DIAGNOSTIC_BASIS,[u,f]=qe.useState(()=>{if(r)try{const h=JSON.parse(i.content);if(typeof h=="object"&&h!==null)return{gross:h.gross||"",he:h.he||"",ihc:h.ihc||"",general:h.general||""}}catch{}return{gross:"",he:"",ihc:"",general:i.content}}),p=(h,g)=>{const A={...u,[h]:g};f(A),A.gross||A.he||A.ihc?e(i.id,{content:JSON.stringify(A)}):e(i.id,{content:A.general})},v=()=>r?!!(u.general.trim()||u.gross.trim()||u.he.trim()||u.ihc.trim()):!!i.content.trim();return ot.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow group relative mb-4",children:[ot.jsx("button",{onClick:()=>s(i.id),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",title:"",children:ot.jsx(Tn.Trash,{})}),ot.jsxs("div",{className:"flex flex-col gap-4",children:[ot.jsxs("div",{className:"w-64",children:[ot.jsxs("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1",children:[" ",o&&ot.jsx("span",{className:"text-red-500",children:"*"})]}),ot.jsx("select",{value:i.label,onChange:h=>e(i.id,{label:h.target.value}),className:`w-full bg-gray-50 border rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none ${o&&!v()?"border-amber-300 shadow-[0_0_0_2px_rgba(245,158,11,0.1)]":"border-gray-300"}`,children:Kx.map(h=>ot.jsx("option",{value:h,children:h},h))})]}),ot.jsxs("div",{children:[ot.jsxs("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1",children:[i.label,"  ",o&&ot.jsx("span",{className:"text-red-500",children:"*"})]}),r?ot.jsxs("div",{className:"space-y-4 mt-2",children:[ot.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[ot.jsxs("div",{className:"space-y-1",children:[ot.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" ()"}),ot.jsx("textarea",{value:u.gross,onChange:h=>p("gross",h.target.value),placeholder:"...",className:"w-full bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none h-24 transition-all"})]}),ot.jsxs("div",{className:"space-y-1",children:[ot.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"HE  ()"}),ot.jsx("textarea",{value:u.he,onChange:h=>p("he",h.target.value),placeholder:" HE ...",className:"w-full bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none h-24 transition-all"})]}),ot.jsxs("div",{className:"space-y-1",children:[ot.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:" ()"}),ot.jsx("textarea",{value:u.ihc,onChange:h=>p("ihc",h.target.value),placeholder:"...",className:"w-full bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none h-24 transition-all"})]})]}),ot.jsxs("div",{className:"space-y-1",children:[ot.jsx("span",{className:"text-[10px] font-bold text-gray-400 uppercase",children:"/"}),ot.jsx("textarea",{value:u.general,onChange:h=>p("general",h.target.value),placeholder:"...",className:`w-full bg-white border rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none transition-colors h-32 ${o&&!v()?"border-amber-200 bg-amber-50/20":"border-gray-300"}`})]})]}):ot.jsx("textarea",{value:i.content,onChange:h=>e(i.id,{content:h.target.value}),placeholder:o?"...":"...",rows:5,className:`w-full bg-white border rounded-lg px-4 py-3 text-sm focus:ring-2 focus:ring-blue-500 outline-none resize-none transition-colors ${o&&!i.content.trim()?"border-amber-200 bg-amber-50/30":"border-gray-300"}`})]})]})]})},jx=({image:i,onUpdate:e,onRemove:s})=>{const o=!i.description.trim();return ot.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow group relative flex gap-6 mb-4",children:[ot.jsx("button",{onClick:()=>s(i.id),className:"absolute top-4 right-4 text-gray-400 hover:text-red-500 transition-colors",title:"",children:ot.jsx(Tn.Trash,{})}),ot.jsxs("div",{className:"w-48 h-48 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0 border border-gray-200 relative group/img",children:[ot.jsx("img",{src:i.url,alt:"Preview",className:"w-full h-full object-cover transition-transform group-hover/img:scale-105"}),ot.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover/img:opacity-100 transition-opacity flex items-center justify-center",children:ot.jsx("span",{className:"text-white text-xs font-medium",children:""})})]}),ot.jsxs("div",{className:"flex-1 space-y-4",children:[ot.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ot.jsxs("div",{children:[ot.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1",children:""}),ot.jsx("div",{className:"flex gap-2",children:[ts.HE,ts.IHC].map(r=>ot.jsx("button",{onClick:()=>e(i.id,{type:r}),className:`flex-1 py-2 text-sm rounded-lg border transition-all ${i.type===r?"bg-blue-600 text-white border-blue-600 shadow-sm":"bg-white text-gray-600 border-gray-300 hover:border-blue-400"}`,children:r},r))})]}),ot.jsxs("div",{children:[ot.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1",children:""}),ot.jsx("select",{value:i.magnification,onChange:r=>e(i.id,{magnification:r.target.value}),className:"w-full bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:Zx.map(r=>ot.jsx("option",{value:r,children:r},r))})]})]}),ot.jsxs("div",{children:[ot.jsxs("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1",children:[" ",ot.jsx("span",{className:"text-red-500",children:"*"})]}),ot.jsx("input",{type:"text",value:i.description,onChange:r=>e(i.id,{description:r.target.value}),placeholder:"...",className:`w-full bg-white border rounded-lg px-4 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none transition-colors ${o?"border-amber-200 bg-amber-50/20":"border-gray-300"}`})]})]})]})},tw=({data:i})=>{const e=(r,u)=>{if(r===Cr.DIAGNOSTIC_BASIS)try{const f=JSON.parse(u);if(typeof f=="object"&&f!==null)return f}catch{}return u},s={...i,training_data:{metadata:{id:i.caseId,category:i.organCategory},images:{he:i.images.filter(r=>r.type===ts.HE).map(r=>({magnification:r.magnification,annotation:r.description,filename:r.fileName})),ihc:i.images.filter(r=>r.type===ts.IHC).map(r=>({magnification:r.magnification,annotation:r.description,filename:r.fileName}))},sections:i.textSections.reduce((r,u)=>(r[u.label]=e(u.label,u.content),r),{})}},o=()=>{navigator.clipboard.writeText(JSON.stringify(s,null,2)),alert("JSON")};return ot.jsxs("div",{className:"bg-gray-900 rounded-[2rem] p-8 text-gray-300 font-mono text-[11px] overflow-hidden flex flex-col h-full border border-gray-800 shadow-2xl",children:[ot.jsxs("div",{className:"flex items-center justify-between mb-6",children:[ot.jsxs("h3",{className:"text-sm font-black text-white flex items-center gap-2 uppercase tracking-tight",children:[ot.jsx(Tn.FileText,{})," Export Schema Preview"]}),ot.jsxs("button",{onClick:o,className:"bg-blue-600/20 text-blue-400 hover:bg-blue-600 hover:text-white px-4 py-2 rounded-xl transition-all flex items-center gap-2 font-sans text-[10px] font-black uppercase tracking-widest",children:[ot.jsx(Tn.Check,{})," Copy JSON"]})]}),ot.jsx("div",{className:"flex-1 overflow-auto bg-black/40 rounded-2xl p-6 custom-scrollbar leading-relaxed border border-white/5",children:ot.jsx("pre",{children:JSON.stringify(s,null,2)})})]})};N0.workerSrc="https://esm.sh/pdfjs-dist@4.0.379/build/pdf.worker.mjs";const ew="PathologyDataPlatform",yr="cases",_n="drafts",nw=4,yc=()=>new Promise((i,e)=>{const s=indexedDB.open(ew,nw);s.onupgradeneeded=o=>{const r=s.result;r.objectStoreNames.contains(yr)||r.createObjectStore(yr,{keyPath:"caseId"}),r.objectStoreNames.contains(_n)||r.createObjectStore(_n,{keyPath:"id"})},s.onsuccess=()=>i(s.result),s.onerror=()=>e(s.error)}),Zi=async(i,e)=>{(await yc()).transaction(i,"readwrite").objectStore(i).put(e)},ng=async(i,e)=>{(await yc()).transaction(i,"readwrite").objectStore(i).delete(e)},ig=async i=>{const e=await yc();return new Promise(s=>{const o=e.transaction(i,"readonly").objectStore(i).getAll();o.onsuccess=()=>s(o.result)})},iw=(i,e,s)=>new Promise(o=>{const r=new Image;r.src=`data:${e};base64,${i}`,r.onload=()=>{const u=document.createElement("canvas"),[f,p,v,h]=s,g=p/1e3*r.width,A=f/1e3*r.height,T=(h-p)/1e3*r.width,_=(v-f)/1e3*r.height;u.width=Math.max(1,T),u.height=Math.max(1,_),u.getContext("2d").drawImage(r,g,A,T,_,0,0,T,_),o(u.toDataURL(e).split(",")[1])}}),sw=()=>{const[i,e]=qe.useState(null),[s,o]=qe.useState("edit"),[r,u]=qe.useState(null),[f,p]=qe.useState(!1),[v,h]=qe.useState(!1),[g,A]=qe.useState([]),[T,_]=qe.useState({current:0,total:0}),[C,M]=qe.useState([]),[y,x]=qe.useState([]),[I,F]=qe.useState(0),P=qe.useRef(null),H=qe.useRef(null),O=y[I]||null,z=async()=>{const X=await ig(yr);A(X.sort((et,lt)=>new Date(lt.submittedAt||0).getTime()-new Date(et.submittedAt||0).getTime()));const B=await ig(_n);x(B)};qe.useEffect(()=>{i&&z()},[i]);const it=qe.useMemo(()=>{const X=g.map(et=>({...et,status:"confirmed"})),B=y.map(et=>({...et,status:"draft"}));return[...X,...B].sort((et,lt)=>new Date(lt.submittedAt||0).getTime()-new Date(et.submittedAt||0).getTime())},[g,y]),W=X=>{M(B=>B.map(et=>et.id===X?{...et,selected:!et.selected}:et))},ut=X=>{M(B=>B.map(et=>({...et,selected:X})))},pt=async()=>{const X=C.filter(et=>et.selected);if(X.length===0)return;const B=2;_({current:0,total:Math.ceil(X.length/B)}),p(!0),h(!1);try{const et=new Jx({apiKey:void 0});for(let lt=0;lt<X.length;lt+=B){const gt=X.slice(lt,lt+B);_(yt=>({...yt,current:Math.floor(lt/B)+1}));const _t=await et.models.generateContent({model:"gemini-3-flash-preview",contents:[{parts:[{text:`
              

1. 
2. 
3. 
   -  box_2d  [ymin, xmin, ymax, xmax] 0-1000
   - HE  
   -  "x10", "x20", "x40", "x100", "x200", "x400"  "10x", "20x" ""
   - 


- `},...gt.map(yt=>({inlineData:{mimeType:yt.type,data:yt.data}}))]}],config:{responseMimeType:"application/json",responseSchema:{type:he.OBJECT,properties:{cases:{type:he.ARRAY,items:{type:he.OBJECT,properties:{chapterNumber:{type:he.STRING},caseNumber:{type:he.STRING},organCategory:{type:he.STRING},textSections:{type:he.ARRAY,items:{type:he.OBJECT,properties:{label:{type:he.STRING,enum:Object.values(Cr)},content:{type:he.STRING}}}},detectedImages:{type:he.ARRAY,items:{type:he.OBJECT,properties:{box_2d:{type:he.ARRAY,items:{type:he.NUMBER}},type:{type:he.STRING,enum:["HE",""]},magnification:{type:he.STRING,enum:["x10","x20","x40","x100","x200","x400",""]},description:{type:he.STRING},originalImageIndex:{type:he.INTEGER}}}}}}}}}}}),K=JSON.parse(_t.text||'{"cases": []}'),rt=[];for(const yt of K.cases){const Ct=`Case-${yt.chapterNumber||"0"}-${yt.caseNumber||"0"}`,wt=(yt.detectedImages||[]).map(async D=>{const b=gt[D.originalImageIndex??0];if(!b||!D.box_2d)return null;const E=await iw(b.data,b.type,D.box_2d);return{id:Vs(),url:`data:${b.type};base64,${E}`,fileName:`Auto_${b.name}`,type:D.type===""?ts.IHC:ts.HE,magnification:D.magnification||Wg.OTHER,description:D.description||""}}),St=(await Promise.all(wt)).filter(D=>D!==null),k={id:Vs(),caseId:Ct,userId:i.id,username:i.username,organCategory:yt.organCategory||"",textSections:(yt.textSections||[]).map(D=>({...D,id:Vs()})),images:St,submittedAt:new Date().toISOString(),status:"draft"};rt.push(k),await Zi(_n,k)}x(yt=>[...yt,...rt])}M([]),u({type:"success",message:""})}catch{u({type:"error",message:""})}finally{p(!1)}},xt=async X=>{const B=X.target.files?.[0];if(B){p(!0);try{const et=await B.arrayBuffer(),lt=await D0(et).promise,gt=[];for(let _t=1;_t<=lt.numPages;_t++){const K=await lt.getPage(_t),rt=K.getViewport({scale:2}),yt=document.createElement("canvas");yt.height=rt.height,yt.width=rt.width,await K.render({canvasContext:yt.getContext("2d"),viewport:rt}).promise,gt.push({id:Vs(),data:yt.toDataURL("image/jpeg",.8).split(",")[1],type:"image/jpeg",name:`p${_t}`,selected:!0}),_({current:_t,total:lt.numPages})}M(gt),u({type:"success",message:`PDF  ${gt.length} `})}catch{u({type:"error",message:"PDF "})}finally{p(!1),_({current:0,total:0})}}},Mt=async()=>{if(O)try{const X={...O,submittedAt:new Date().toISOString()};delete X.id,delete X.status,await Zi(yr,X),await ng(_n,O.id),await z(),u({type:"success",message:""})}catch{u({type:"error",message:""})}},Tt=async(X,B)=>{B.stopPropagation(),await ng(_n,X),x(et=>et.filter(lt=>lt.id!==X))};return i?ot.jsxs("div",{className:"flex flex-col h-screen overflow-hidden bg-gray-50 font-sans",children:[f&&ot.jsx("div",{className:`fixed z-[200] transition-all duration-700 ${v?"bottom-8 right-8 w-80":"inset-0 bg-black/85 backdrop-blur-2xl flex items-center justify-center p-6"}`,children:ot.jsxs("div",{className:`bg-white rounded-[3rem] p-10 text-center shadow-4xl relative border-t-8 border-blue-600 animate-in zoom-in-95 ${v?"w-full shadow-2xl":"max-w-md w-full p-16"}`,children:[ot.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-blue-500 animate-[scan_2s_infinite]"}),ot.jsx("div",{className:`${v?"w-12 h-12":"w-24 h-24"} border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-6`}),ot.jsx("h3",{className:`${v?"text-lg":"text-3xl"} font-black text-gray-900 mb-2 tracking-tighter italic uppercase`,children:T.total>0?`Batch: ${T.current}/${T.total}`:"Parsing..."}),ot.jsx("button",{onClick:()=>h(!v),className:"text-[10px] font-black text-blue-600 uppercase tracking-widest hover:underline",children:v?"Expand":"Minimize"})]})}),r&&ot.jsx("div",{className:"fixed inset-0 z-[300] flex items-center justify-center bg-black/40 backdrop-blur-sm p-4 animate-in fade-in",children:ot.jsxs("div",{className:"max-w-md w-full rounded-[3rem] bg-white p-14 text-center shadow-3xl border-2 border-emerald-500",children:[ot.jsx("p",{className:"text-2xl font-black text-gray-900 mb-10 tracking-tighter italic",children:r.message}),ot.jsx("button",{onClick:()=>u(null),className:"w-full py-6 bg-emerald-600 text-white rounded-2xl font-black text-xl",children:"OK"})]})}),ot.jsxs("header",{className:"bg-white border-b border-gray-100 px-10 py-5 flex items-center justify-between shadow-sm z-10",children:[ot.jsxs("div",{className:"flex items-center gap-5",children:[ot.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-2xl flex items-center justify-center text-white",children:ot.jsx(Tn.FileText,{})}),ot.jsxs("div",{children:[ot.jsxs("h1",{className:"text-2xl font-black text-gray-900 tracking-tighter italic uppercase",children:["Expert ",ot.jsx("span",{className:"text-blue-600",children:"Workflow"})]}),ot.jsx("p",{className:"text-[10px] text-gray-400 font-black uppercase tracking-widest italic",children:"Multi-modal Extraction"})]})]}),ot.jsxs("div",{className:"flex bg-gray-100 p-1.5 rounded-2xl",children:[ot.jsx("button",{onClick:()=>o("edit"),className:`px-8 py-3 text-sm font-black rounded-xl transition-all ${s==="edit"?"bg-white shadow-md text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:""}),ot.jsxs("button",{onClick:()=>o("history"),className:`px-8 py-3 text-sm font-black rounded-xl transition-all ${s==="history"?"bg-white shadow-md text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:[" (",it.length,")"]})]})]}),ot.jsx("main",{className:"flex-1 overflow-hidden",children:s==="history"?ot.jsxs("div",{className:"max-w-7xl mx-auto p-16 overflow-y-auto h-full custom-scrollbar",children:[ot.jsx("h2",{className:"text-5xl font-black tracking-tighter italic mb-12 uppercase",children:""}),ot.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12",children:it.map(X=>ot.jsx("div",{onClick:()=>{X.status==="draft"&&(F(y.findIndex(B=>B.id===X.id)),o("edit"))},className:`bg-white border-2 p-10 rounded-[4rem] shadow-xl hover:shadow-2xl transition-all relative overflow-hidden group cursor-pointer ${X.status==="draft"?"border-amber-400 bg-amber-50/30":"border-transparent hover:border-blue-500"}`,children:ot.jsxs("div",{className:"relative",children:[ot.jsxs("div",{className:"flex items-center justify-between mb-4",children:[ot.jsx("div",{className:`font-black text-3xl ${X.status==="draft"?"text-amber-600":"text-blue-600"}`,children:X.caseId}),ot.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${X.status==="draft"?"bg-amber-500 text-white animate-pulse":"bg-blue-100 text-blue-600"}`,children:X.status==="draft"?"":""})]}),ot.jsxs("p",{className:"text-sm text-gray-500 line-clamp-2 italic font-bold",children:[X.textSections[0]?.content.substring(0,100),"..."]})]})},X.id||X.caseId))})]}):ot.jsxs("div",{className:"flex h-full",children:[ot.jsx("div",{className:"flex-1 p-12 overflow-y-auto custom-scrollbar",children:ot.jsxs("div",{className:"max-w-5xl mx-auto space-y-16 pb-64",children:[ot.jsxs("div",{className:"bg-white border-4 border-blue-500 rounded-[5rem] p-16 shadow-2xl",children:[C.length===0?ot.jsxs("div",{className:"grid grid-cols-2 gap-10 py-10",children:[ot.jsxs("div",{onClick:()=>P.current?.click(),className:"flex flex-col items-center py-20 cursor-pointer bg-blue-50 rounded-[4.5rem] border-4 border-dashed border-blue-200 hover:bg-blue-100 transition-all",children:[ot.jsx("input",{type:"file",ref:P,accept:"application/pdf",onChange:xt,className:"hidden"}),ot.jsx("div",{className:"w-24 h-24 bg-blue-600 text-white rounded-[2.5rem] flex items-center justify-center mb-8",children:ot.jsx(Tn.Book,{})}),ot.jsx("h2",{className:"text-3xl font-black text-blue-900 italic uppercase",children:"PDF "})]}),ot.jsxs("div",{onClick:()=>H.current?.click(),className:"flex flex-col items-center py-20 cursor-pointer bg-gray-50 rounded-[4.5rem] border-4 border-dashed border-gray-200 hover:bg-white transition-all",children:[ot.jsx("input",{type:"file",ref:H,multiple:!0,accept:"image/*",onChange:X=>{const B=X.target.files;B&&Array.from(B).forEach(et=>{const lt=new FileReader;lt.onload=()=>M(gt=>[...gt,{id:Vs(),data:lt.result.split(",")[1],type:et.type,name:et.name,selected:!0}]),lt.readAsDataURL(et)})},className:"hidden"}),ot.jsx("div",{className:"w-24 h-24 bg-gray-900 text-white rounded-[2.5rem] flex items-center justify-center mb-8",children:ot.jsx(Tn.Upload,{})}),ot.jsx("h2",{className:"text-3xl font-black text-gray-900 italic uppercase",children:""})]})]}):ot.jsxs("div",{className:"w-full",children:[ot.jsxs("div",{className:"flex justify-between items-end mb-12",children:[ot.jsxs("div",{children:[ot.jsx("h3",{className:"text-4xl font-black text-blue-900 italic uppercase mb-2",children:""}),ot.jsx("p",{className:"text-blue-500/50 font-black uppercase text-[10px] tracking-widest italic",children:""})]}),ot.jsxs("div",{className:"flex gap-4",children:[ot.jsx("button",{onClick:()=>ut(!0),className:"px-6 py-3 bg-blue-50 text-blue-600 rounded-xl text-xs font-black",children:""}),ot.jsx("button",{onClick:()=>ut(!1),className:"px-6 py-3 bg-gray-100 text-gray-400 rounded-xl text-xs font-black",children:""}),ot.jsx("button",{onClick:()=>M([]),className:"p-3 bg-rose-50 text-rose-500 rounded-xl hover:bg-rose-100",children:ot.jsx(Tn.Trash,{})})]})]}),ot.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-6 mb-16 max-h-[500px] overflow-y-auto p-6 bg-gray-50 rounded-[2.5rem] custom-scrollbar border-2 border-dashed border-gray-200",children:C.map(X=>ot.jsxs("div",{onClick:()=>W(X.id),className:`relative aspect-[3/4.5] rounded-[1.5rem] overflow-hidden cursor-pointer border-4 transition-all ${X.selected?"border-blue-600 scale-100 shadow-xl":"border-transparent opacity-40 scale-95 grayscale"}`,children:[ot.jsx("img",{src:`data:${X.type};base64,${X.data}`,className:"w-full h-full object-cover"}),X.selected&&ot.jsx("div",{className:"absolute top-3 right-3 bg-blue-600 text-white rounded-full p-1 shadow-lg",children:ot.jsx(Tn.Check,{})})]},X.id))}),ot.jsxs("button",{onClick:pt,disabled:C.filter(X=>X.selected).length===0,className:"w-full py-10 bg-blue-600 text-white rounded-[3rem] font-black text-4xl hover:bg-blue-700 shadow-3xl uppercase italic disabled:opacity-50",children:[" (",C.filter(X=>X.selected).length," )"]})]}),y.length>0&&C.length===0&&ot.jsxs("div",{className:"w-full mt-10",children:[ot.jsx("h3",{className:"text-2xl font-black text-blue-900 italic uppercase mb-6",children:""}),ot.jsx("div",{className:"flex gap-4 overflow-x-auto pb-6 custom-scrollbar",children:y.map((X,B)=>ot.jsxs("div",{onClick:()=>F(B),className:`flex-shrink-0 relative px-8 py-5 rounded-[1.5rem] font-black cursor-pointer transition-all ${I===B?"bg-blue-600 text-white shadow-xl":"bg-white border-2 border-gray-100 text-gray-400"}`,children:[X.caseId,ot.jsx("button",{onClick:et=>Tt(X.id,et),className:"absolute -top-2 -right-2 bg-rose-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100",children:ot.jsx(Tn.Close,{})})]},X.id))})]})]}),O&&ot.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-20 duration-1000",children:ot.jsxs("div",{className:"bg-white p-20 rounded-[5rem] border border-gray-100 shadow-4xl mb-24 relative overflow-hidden",children:[ot.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-16 border-b border-gray-100 pb-16 mb-20",children:[ot.jsxs("div",{className:"flex-shrink-0",children:[ot.jsx("label",{className:"text-[12px] font-black text-gray-300 uppercase tracking-[0.4em] mb-4 block italic",children:"Case ID"}),ot.jsx("div",{className:"text-7xl font-black text-blue-600 tracking-tighter",children:O.caseId})]}),ot.jsxs("div",{className:"flex-1",children:[ot.jsx("label",{className:"text-[12px] font-black text-gray-300 uppercase tracking-[0.4em] mb-4 block italic",children:"Diagnosis Category"}),ot.jsxs("select",{value:O.organCategory,onChange:X=>{const B={...O,organCategory:X.target.value};x(et=>et.map((lt,gt)=>gt===I?B:lt)),Zi(_n,B)},className:"w-full bg-gray-50 border-4 border-transparent rounded-[2.2rem] px-10 py-7 text-xl font-black focus:border-blue-600 outline-none",children:[ot.jsx("option",{value:"",children:"MATCH CHAPTER..."}),Qx.map(X=>ot.jsx("option",{value:X,children:X},X))]})]})]}),ot.jsxs("section",{className:"mb-24",children:[ot.jsxs("h2",{className:"text-4xl font-black text-gray-900 mb-12 flex items-center gap-6 tracking-tighter italic uppercase",children:[ot.jsx(Tn.FileText,{})," "]}),ot.jsx("div",{className:"space-y-10",children:O.textSections.map(X=>ot.jsx(Wx,{section:X,onUpdate:(B,et)=>{const lt={...O,textSections:O.textSections.map(gt=>gt.id===B?{...gt,...et}:gt)};x(gt=>gt.map((_t,K)=>K===I?lt:_t)),Zi(_n,lt)},onRemove:B=>{const et={...O,textSections:O.textSections.filter(lt=>lt.id!==B)};x(lt=>lt.map((gt,_t)=>_t===I?et:gt)),Zi(_n,et)}},X.id))})]}),ot.jsxs("section",{className:"mb-24",children:[ot.jsxs("h2",{className:"text-4xl font-black text-gray-900 mb-12 flex items-center gap-6 tracking-tighter italic uppercase",children:[ot.jsx(Tn.Image,{}),"  (",O.images.length,")"]}),ot.jsx("div",{className:"grid grid-cols-1 gap-14",children:O.images.map(X=>ot.jsx(jx,{image:X,onUpdate:(B,et)=>{const lt={...O,images:O.images.map(gt=>gt.id===B?{...gt,...et}:gt)};x(gt=>gt.map((_t,K)=>K===I?lt:_t)),Zi(_n,lt)},onRemove:B=>{const et={...O,images:O.images.filter(lt=>lt.id!==B)};x(lt=>lt.map((gt,_t)=>_t===I?et:gt)),Zi(_n,et)}},X.id))})]}),ot.jsx("div",{className:"flex justify-center pt-16 border-t border-gray-100",children:ot.jsx("button",{onClick:Mt,className:"px-48 py-10 bg-emerald-600 text-white rounded-[3.5rem] font-black text-4xl hover:bg-emerald-700 shadow-3xl uppercase italic tracking-tighter",children:""})})]})})]})}),O&&ot.jsx("div",{className:"w-[600px] border-l border-gray-100 bg-white p-14 hidden 2xl:block",children:ot.jsx(tw,{data:O})})]})}),ot.jsx("style",{children:`
        @keyframes scan { 0% { top: 0; } 50% { top: 100%; } 100% { top: 0; } }
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 20px; border: 3px solid transparent; background-clip: content-box; }
        .shadow-4xl { box-shadow: 0 50px 100px -20px rgba(0, 0, 0, 0.4); }
      `})]}):ot.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-6 text-white font-black italic",children:ot.jsx("button",{onClick:()=>e({id:Vs(),username:"Operator_01",role:Zg.USER}),className:"text-6xl tracking-tighter hover:text-blue-500 transition-colors uppercase",children:"Start Annotation Platform"})})},jg=document.getElementById("root");if(!jg)throw new Error("Could not find root element to mount to");const ow=E0.createRoot(jg);ow.render(ot.jsx(p0.StrictMode,{children:ot.jsx(sw,{})}));
